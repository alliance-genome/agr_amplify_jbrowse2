"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[9436],{9436:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var r=n(7552),l=n(68446),a=n(943),i=n(68984),o=n(9502),s=n(36715),c=n(1343),u=n(33371),m=n(32808),d=n(96316),f=n(76157),p=n(99546),h=n(98335),g=n(20194);function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}function b({columns:e,filter:t,setFilter:n}){return r.createElement(r.Fragment,null,r.createElement(s.A,null,"These filters can use a plain text search or regex style query, e.g. in the genotype field, entering 1 will query for all genotypes that include the first alternate allele e.g. 0|1 or 1|1, entering [1-9]\\d* will find any non-zero allele e.g. 0|2 or 2/33"),e.map((({field:e})=>r.createElement(c.A,{key:`filter-${e}`,placeholder:`Filter ${e}`,value:t[e]||"",onChange:r=>n({...t,[e]:r.target.value})}))))}function w(e){const{feature:t,descriptions:n={}}=e,{ref:l,scrollLeft:a}=(0,g.X)(),[o,c]=(0,r.useState)({}),w=t.samples||{},y=Object.entries(w);let v,O=[];const S=Object.keys(o);try{O=y.map((e=>({...Object.fromEntries(Object.entries(e[1]).map((e=>[e[0],`${e[1]}`]))),sample:e[0],id:e[0]}))).filter((e=>!S.length||S.every((t=>{const n=o[t];return!n||e[t].match(new RegExp(n,"i"))}))))}catch(e){v=e}const A=["sample",...Object.keys(y[0]?.[1]||{})],[k,C]=(0,r.useState)(!1),[N,F]=(0,r.useState)(A.map((e=>(0,p.measureGridWidth)(O.map((t=>t[e])))))),j=A.map(((e,t)=>({field:e,description:n?.FORMAT?.[e]?.Description,width:N[t]})));return y.length?r.createElement(i.BaseCard,E({},e,{title:"Samples"}),v?r.createElement(s.A,{color:"error"},`${v}`):null,r.createElement(u.A,{control:r.createElement(m.A,{checked:k,onChange:e=>C(e.target.checked)}),label:r.createElement(s.A,{variant:"body2"},"Show options")}),k?r.createElement(b,{setFilter:c,columns:j,filter:o}):null,r.createElement("div",{ref:l},r.createElement(h.A,{widths:N,setWidths:F,scrollLeft:a}),r.createElement(d.z,{rows:O,hideFooter:O.length<100,columns:j,disableRowSelectionOnClick:!0,rowHeight:25,columnHeaderHeight:35,disableColumnMenu:!0,slots:{toolbar:k?f.O:null},slotProps:{toolbar:{printOptions:{disableToolbarButton:!0}}}}))):null}var y=n(87731);function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},v.apply(this,arguments)}const O=(0,r.lazy)((()=>n.e(6587).then(n.bind(n,46587))));function S({locStrings:e,model:t}){const n=(0,p.getSession)(t);return r.createElement("div",null,r.createElement(s.A,null,"Link to linear view of breakend endpoints"),r.createElement("ul",null,e.map(((e,l)=>r.createElement("li",{key:`${e}-${l}`},r.createElement(y.A,{href:"#",onClick:r=>{r.preventDefault();const{view:l}=t;try{if(!l)throw new Error("No view associated with this feature detail panel anymore");l.navToLocString?.(e)}catch(e){console.error(e),n.notify(`${e}`)}}},`LGV - ${e}`))))))}function A({locStrings:e,model:t,feature:n,viewType:l}){const a=(0,p.getSession)(t),i=new p.SimpleFeature(n);return r.createElement("div",null,r.createElement(s.A,null,"Launch split views with breakend source and target"),r.createElement("ul",null,e.map((e=>r.createElement("li",{key:`${JSON.stringify(e)}`},r.createElement(y.A,{href:"#",onClick:e=>{e.preventDefault(),a.queueDialog((e=>[O,{handleClose:e,model:t,feature:i,viewType:l}]))}},`${n.refName}:${n.start} // ${e} (split view)`))))))}function k(e){const{model:t,locStrings:n,feature:l}=e,a=(0,p.getSession)(t),{pluginManager:o}=(0,p.getEnv)(a);let s;try{s=o.getViewType("BreakpointSplitView")}catch(e){}return r.createElement(i.BaseCard,v({},e,{title:"Breakends"}),r.createElement(S,{model:t,locStrings:n}),s?r.createElement(A,{viewType:s,model:t,locStrings:n,feature:l}):null)}function C({rows:e,columns:t}){const{ref:n,scrollLeft:l}=(0,g.X)(),[a,i]=(0,r.useState)(!1),[o,c]=(0,r.useState)(t.map((t=>(0,p.measureGridWidth)(e.map((e=>e[t.field]))))));return e.length?r.createElement("div",{ref:n},r.createElement(u.A,{control:r.createElement(m.A,{checked:a,onChange:e=>i(e.target.checked)}),label:r.createElement(s.A,{variant:"body2"},"Show options")}),r.createElement("div",{ref:n},r.createElement(h.A,{widths:o,setWidths:c,scrollLeft:l}),r.createElement(d.z,{rowHeight:25,rows:e,columns:t.map(((e,t)=>({...e,width:o[t]}))),slots:{toolbar:a?f.O:null}}))):null}function N({data:e,fields:t,title:n}){return e.length?r.createElement(i.BaseCard,{title:n},r.createElement(C,{rows:e.map(((e,n)=>({id:n,...Object.fromEntries(e.split("|").map(((e,n)=>[t[n],e])))})))||[],columns:t.map((e=>({field:e})))})):null}const F={CHROM:"chromosome: An identifier from the reference genome",POS:"position: The reference position, with the 1st base having position 1",ID:"identifier: Semi-colon separated list of unique identifiers where available",REF:"reference base(s): Each base must be one of A,C,G,T,N (case insensitive).",ALT:"alternate base(s): Comma-separated list of alternate non-reference alleles",QUAL:"quality: Phred-scaled quality score for the assertion made in ALT",FILTER:"filter status: PASS if this position has passed all filters, otherwise a semicolon-separated list of codes for filters that fail"};function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(this,arguments)}function T({descriptions:e,feature:t}){const n=e?.INFO?.ANN?.Description,l=n?.match(/.*Functional annotations:'(.*)'$/)?.[1].split("|")||[],a=t.INFO?.ANN||[];return r.createElement(N,{fields:l,data:a,title:"Variant ANN field"})}function $({descriptions:e,feature:t}){const n=e?.INFO?.CSQ?.Description,l=n?.match(/.*Format: (.*)/)?.[1].split("|")||[],a=t.INFO?.CSQ||[];return r.createElement(N,{fields:l,data:a,title:"Variant CSQ field"})}const L=(0,l.observer)((function(e){const{model:t}=e,{featureData:n,descriptions:l}=t,s=JSON.parse(JSON.stringify(n)),{samples:c,...u}=s;return r.createElement(a.A,{"data-testid":"variant-side-drawer"},r.createElement(i.FeatureDetails,j({feature:u,descriptions:{...F,...l}},e)),r.createElement($,{feature:u,descriptions:l}),r.createElement(T,{feature:u,descriptions:l}),"breakend"===s.type?r.createElement(k,{feature:s,locStrings:s.ALT.map((e=>(0,o.h)(e)?.MatePosition||"")),model:t}):null,"translocation"===s.type?r.createElement(k,{feature:s,model:t,locStrings:[`${s.INFO.CHR2[0]}:${s.INFO.END}`]}):null,r.createElement(w,j({feature:s},e,{descriptions:l})))}))}}]);
//# sourceMappingURL=9436.c1f99632.chunk.js.map