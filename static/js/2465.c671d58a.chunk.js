"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[2465,4334],{35588:(e,t,r)=>{r.r(t),r.d(t,{default:()=>A});var n=r(66204),a=r(80846),i=r(86636),o=r(25063),s=r(41846),l=r(25086),c=r(80013),u=r(46338),d=r(39780),m=r(70539),f=r(23155),p=r(84081),h=r(31211),v=r(63754),g=r(77540);function b(){return b=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b.apply(this,arguments)}function E({columns:e,filter:t,setFilter:r}){return n.createElement(n.Fragment,null,n.createElement(c.Z,null,"These filters can use a plain text search or regex style query, e.g. in the genotype field, entering 1 will query for all genotypes that include the first alternate allele e.g. 0|1 or 1|1, entering [1-9]\\d* will find any non-zero allele e.g. 0|2 or 2/33"),e.map((({field:e})=>n.createElement(u.Z,{key:`filter-${e}`,placeholder:`Filter ${e}`,value:t[e]||"",onChange:n=>r({...t,[e]:n.target.value})}))))}function w(e){const{feature:t,descriptions:r={}}=e,{ref:a,scrollLeft:i}=(0,g.x)(),[o,l]=(0,n.useState)({}),u=t.samples||{},w=Object.entries(u);let k,Z=[];const y=Object.keys(o);try{Z=w.map((e=>({...Object.fromEntries(Object.entries(e[1]).map((e=>[e[0],`${e[1]}`]))),sample:e[0],id:e[0]}))).filter((e=>!y.length||y.every((t=>{const r=o[t];return!r||e[t].match(new RegExp(r,"i"))}))))}catch(e){k=e}const S=["sample",...Object.keys(w[0]?.[1]||{})],[C,O]=(0,n.useState)(!1),[N,x]=(0,n.useState)(S.map((e=>(0,h.measureGridWidth)(Z.map((t=>t[e])))))),$=S.map(((e,t)=>({field:e,description:r?.FORMAT?.[e]?.Description,width:N[t]})));return w.length?n.createElement(s.BaseCard,b({},e,{title:"Samples"}),k?n.createElement(c.Z,{color:"error"},`${k}`):null,n.createElement(d.Z,{control:n.createElement(m.Z,{checked:C,onChange:e=>O(e.target.checked)}),label:n.createElement(c.Z,{variant:"body2"},"Show options")}),C?n.createElement(E,{setFilter:l,columns:$,filter:o}):null,n.createElement("div",{ref:a},n.createElement(v.Z,{widths:N,setWidths:x,scrollLeft:i}),n.createElement(f._$,{rows:Z,hideFooter:Z.length<100,columns:$,disableRowSelectionOnClick:!0,rowHeight:25,columnHeaderHeight:35,disableColumnMenu:!0,slots:{toolbar:C?p.n:null},slotProps:{toolbar:{printOptions:{disableToolbarButton:!0}}}}))):null}var k=r(66159),Z=r(28777),y=r(29520),S=r(62301),C=r(7146),O=r(38684),N=r(88196),x=r(43902);const $=(0,O.ZL)()({block:{display:"block"}}),F=(0,a.observer)((function({model:e,handleClose:t,feature:r,viewType:a}){const{classes:i}=$(),[o,s]=(0,n.useState)(!0),[l,c]=(0,n.useState)(!0);return n.createElement(x.Dialog,{open:!0,onClose:t,title:"Breakpoint split view options"},n.createElement(y.Z,null,n.createElement(d.Z,{className:i.block,control:n.createElement(m.Z,{checked:o,onChange:e=>s(e.target.checked)}),label:"Copy tracks into the new view"}),n.createElement(d.Z,{className:i.block,control:n.createElement(m.Z,{checked:l,onChange:e=>c(e.target.checked)}),label:"Mirror tracks vertically in vertically stacked view"})),n.createElement(S.Z,null,n.createElement(C.Z,{onClick:()=>{const{view:n}=e,i=(0,h.getSession)(e);try{const o=a.snapshotFromBreakendFeature(r,n);function s(e){return e.map((e=>({...e,id:`${e.trackId}-${Math.random()}`})))}o.views[0].offsetPx-=n.width/2+100,o.views[1].offsetPx-=n.width/2+100,o.featureData=r;const c=(0,N.getSnapshot)(n.tracks);o.views[0].tracks=s(c),o.views[1].tracks=s(l?[...c].reverse():c),i.addView("BreakpointSplitView",o)}catch(u){console.error(u),i.notify(`${u}`)}t()},variant:"contained",color:"primary",autoFocus:!0},"OK"),n.createElement(C.Z,{onClick:()=>t(),color:"secondary",variant:"contained"},"Cancel")))}));function P(){return P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P.apply(this,arguments)}function L(e){const{model:t,locStrings:r,feature:a}=e,i=(0,h.getSession)(t),{pluginManager:o}=(0,h.getEnv)(i),[l,u]=(0,n.useState)(!1);let d;try{d=o.getViewType("BreakpointSplitView")}catch(e){}const m=new Z.Z(a);return n.createElement(s.BaseCard,P({},e,{title:"Breakends"}),n.createElement(c.Z,null,"Link to linear view of breakend endpoints"),n.createElement("ul",null,r.map((e=>n.createElement("li",{key:`${JSON.stringify(e)}`},n.createElement(k.Z,{href:"#",onClick:r=>{r.preventDefault();const{view:n}=t;try{if(!n)throw new Error("No view associated with this feature detail panel anymore");n.navToLocString?.(e)}catch(e){console.error(e),i.notify(`${e}`)}}},`LGV - ${e}`))))),d?n.createElement("div",null,n.createElement(c.Z,null,"Launch split views with breakend source and target"),n.createElement("ul",null,r.map((e=>n.createElement("li",{key:`${JSON.stringify(e)}`},n.createElement(k.Z,{href:"#",onClick:e=>{e.preventDefault(),u(!0)}},`${a.refName}:${a.start} // ${e} (split view)`))))),l?n.createElement(F,{model:t,feature:m,viewType:d,handleClose:()=>{u(!1)}}):null):null)}function j({rows:e,columns:t}){const{ref:r,scrollLeft:a}=(0,g.x)(),[i,o]=(0,n.useState)(!1),[s,l]=(0,n.useState)(t.map((t=>(0,h.measureGridWidth)(e.map((e=>e[t.field]))))));return e.length?n.createElement("div",{ref:r},n.createElement(d.Z,{control:n.createElement(m.Z,{checked:i,onChange:e=>o(e.target.checked)}),label:n.createElement(c.Z,{variant:"body2"},"Show options")}),n.createElement("div",{ref:r},n.createElement(v.Z,{widths:s,setWidths:l,scrollLeft:a}),n.createElement(f._$,{rowHeight:25,rows:e,columns:t.map(((e,t)=>({...e,width:s[t]}))),slots:{toolbar:i?p.n:null}}))):null}function R({data:e,fields:t,title:r}){return e.length?n.createElement(s.BaseCard,{title:r},n.createElement(j,{rows:e.map(((e,r)=>({id:r,...Object.fromEntries(e.split("|").map(((e,r)=>[t[r],e])))})))||[],columns:t.map((e=>({field:e})))})):null}function T(){return T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T.apply(this,arguments)}const D={CHROM:"chromosome: An identifier from the reference genome",POS:"position: The reference position, with the 1st base having position 1",ID:"identifier: Semi-colon separated list of unique identifiers where available",REF:"reference base(s): Each base must be one of A,C,G,T,N (case insensitive).",ALT:"alternate base(s): Comma-separated list of alternate non-reference alleles",QUAL:"quality: Phred-scaled quality score for the assertion made in ALT",FILTER:"filter status: PASS if this position has passed all filters, otherwise a semicolon-separated list of codes for filters that fail"};function M({descriptions:e,feature:t}){const r=e?.INFO?.ANN?.Description,a=r?.match(/.*Functional annotations:'(.*)'$/)?.[1].split("|")||[],i=t.INFO?.ANN||[];return n.createElement(R,{fields:a,data:i,title:"Variant ANN field"})}function I({descriptions:e,feature:t}){const r=e?.INFO?.CSQ?.Description,a=r?.match(/.*Format: (.*)/)?.[1].split("|")||[],i=t.INFO?.CSQ||[];return n.createElement(R,{fields:a,data:i,title:"Variant CSQ field"})}const A=(0,a.observer)((function(e){const{model:t}=e,{featureData:r,descriptions:a}=t,c=JSON.parse(JSON.stringify(r)),{samples:u,...d}=c;return n.createElement(i.Z,{"data-testid":"variant-side-drawer"},n.createElement(s.FeatureDetails,T({feature:d,descriptions:{...D,...a}},e)),n.createElement(o.Z,null),n.createElement(I,{feature:d,descriptions:a}),n.createElement(o.Z,null),n.createElement(M,{feature:d,descriptions:a}),n.createElement(o.Z,null),"breakend"===c.type?n.createElement(L,{feature:c,locStrings:c.ALT.map((e=>(0,l.I)(e)?.MatePosition||"")),model:t}):null,"translocation"===c.type?n.createElement(L,{feature:c,model:t,locStrings:[`${c.INFO.CHR2[0]}:${c.INFO.END}`]}):null,n.createElement(w,T({feature:c},e,{descriptions:a})))}))},6816:(e,t,r)=>{r.d(t,{d:()=>c});var n=r(66204),a=r(52682),i=r(76734),o=r(26074),s=r(43188);function l(e){return e.substring(2).toLowerCase()}function c(e){const{children:t,disableReactTree:r=!1,mouseEvent:c="onClick",onClickAway:u,touchEvent:d="onTouchEnd"}=e,m=n.useRef(!1),f=n.useRef(null),p=n.useRef(!1),h=n.useRef(!1);n.useEffect((()=>(setTimeout((()=>{p.current=!0}),0),()=>{p.current=!1})),[]);const v=(0,a.Z)(t.ref,f),g=(0,i.Z)((e=>{const t=h.current;h.current=!1;const n=(0,o.Z)(f.current);if(!p.current||!f.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,n))return;if(m.current)return void(m.current=!1);let a;a=e.composedPath?e.composedPath().indexOf(f.current)>-1:!n.documentElement.contains(e.target)||f.current.contains(e.target),a||!r&&t||u(e)})),b=e=>r=>{h.current=!0;const n=t.props[e];n&&n(r)},E={ref:v};return!1!==d&&(E[d]=b(d)),n.useEffect((()=>{if(!1!==d){const e=l(d),t=(0,o.Z)(f.current),r=()=>{m.current=!0};return t.addEventListener(e,g),t.addEventListener("touchmove",r),()=>{t.removeEventListener(e,g),t.removeEventListener("touchmove",r)}}}),[g,d]),!1!==c&&(E[c]=b(c)),n.useEffect((()=>{if(!1!==c){const e=l(c),t=(0,o.Z)(f.current);return t.addEventListener(e,g),()=>{t.removeEventListener(e,g)}}}),[g,c]),(0,s.jsx)(n.Fragment,{children:n.cloneElement(t,E)})}},10126:(e,t,r)=>{r.d(t,{Z:()=>C});var n=r(55559),a=r(30984),i=r(66204),o=r(56317),s=r(58029),l=r(71580),c=r(40118),u=r(57369),d=r(61125),m=r(22489),f=r(43188);const p=["className","color","disableShrink","size","style","thickness","value","variant"];let h,v,g,b,E=e=>e;const w=(0,l.F4)(h||(h=E`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),k=(0,l.F4)(v||(v=E`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),Z=(0,d.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],t[`color${(0,c.Z)(r.color)}`]]}})((({ownerState:e,theme:t})=>(0,a.Z)({display:"inline-block"},"determinate"===e.variant&&{transition:t.transitions.create("transform")},"inherit"!==e.color&&{color:(t.vars||t).palette[e.color].main})),(({ownerState:e})=>"indeterminate"===e.variant&&(0,l.iv)(g||(g=E`
      animation: ${0} 1.4s linear infinite;
    `),w))),y=(0,d.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,t)=>t.svg})({display:"block"}),S=(0,d.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.circle,t[`circle${(0,c.Z)(r.variant)}`],r.disableShrink&&t.circleDisableShrink]}})((({ownerState:e,theme:t})=>(0,a.Z)({stroke:"currentColor"},"determinate"===e.variant&&{transition:t.transitions.create("stroke-dashoffset")},"indeterminate"===e.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})),(({ownerState:e})=>"indeterminate"===e.variant&&!e.disableShrink&&(0,l.iv)(b||(b=E`
      animation: ${0} 1.4s ease-in-out infinite;
    `),k))),C=i.forwardRef((function(e,t){const r=(0,u.Z)({props:e,name:"MuiCircularProgress"}),{className:i,color:l="primary",disableShrink:d=!1,size:h=40,style:v,thickness:g=3.6,value:b=0,variant:E="indeterminate"}=r,w=(0,n.Z)(r,p),k=(0,a.Z)({},r,{color:l,disableShrink:d,size:h,thickness:g,value:b,variant:E}),C=(e=>{const{classes:t,variant:r,color:n,disableShrink:a}=e,i={root:["root",r,`color${(0,c.Z)(n)}`],svg:["svg"],circle:["circle",`circle${(0,c.Z)(r)}`,a&&"circleDisableShrink"]};return(0,s.Z)(i,m.C,t)})(k),O={},N={},x={};if("determinate"===E){const e=2*Math.PI*((44-g)/2);O.strokeDasharray=e.toFixed(3),x["aria-valuenow"]=Math.round(b),O.strokeDashoffset=`${((100-b)/100*e).toFixed(3)}px`,N.transform="rotate(-90deg)"}return(0,f.jsx)(Z,(0,a.Z)({className:(0,o.Z)(C.root,i),style:(0,a.Z)({width:h,height:h},N,v),ownerState:k,ref:t,role:"progressbar"},x,w,{children:(0,f.jsx)(y,{className:C.svg,ownerState:k,viewBox:"22 22 44 44",children:(0,f.jsx)(S,{className:C.circle,style:O,ownerState:k,cx:44,cy:44,r:(44-g)/2,fill:"none",strokeWidth:g})})}))}))},22489:(e,t,r)=>{r.d(t,{C:()=>i,Z:()=>o});var n=r(58109),a=r(95201);function i(e){return(0,a.Z)("MuiCircularProgress",e)}const o=(0,n.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"])},96987:(e,t,r)=>{r.d(t,{Z:()=>p});var n=r(55559),a=r(30984),i=r(66204),o=r(56317),s=r(58029),l=r(57369),c=r(61125),u=r(41666),d=r(43188);const m=["className","component","disableGutters","variant"],f=(0,c.ZP)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,!r.disableGutters&&t.gutters,t[r.variant]]}})((({theme:e,ownerState:t})=>(0,a.Z)({position:"relative",display:"flex",alignItems:"center"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},"dense"===t.variant&&{minHeight:48})),(({theme:e,ownerState:t})=>"regular"===t.variant&&e.mixins.toolbar)),p=i.forwardRef((function(e,t){const r=(0,l.Z)({props:e,name:"MuiToolbar"}),{className:i,component:c="div",disableGutters:p=!1,variant:h="regular"}=r,v=(0,n.Z)(r,m),g=(0,a.Z)({},r,{component:c,disableGutters:p,variant:h}),b=(e=>{const{classes:t,disableGutters:r,variant:n}=e,a={root:["root",!r&&"gutters",n]};return(0,s.Z)(a,u.N,t)})(g);return(0,d.jsx)(f,(0,a.Z)({as:c,className:(0,o.Z)(b.root,i),ref:t,ownerState:g},v))}))},41666:(e,t,r)=>{r.d(t,{N:()=>i,Z:()=>o});var n=r(58109),a=r(95201);function i(e){return(0,a.Z)("MuiToolbar",e)}const o=(0,n.Z)("MuiToolbar",["root","gutters","regular","dense"])}}]);
//# sourceMappingURL=2465.c671d58a.chunk.js.map