"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[7296,5471],{35352:function(e,t,n){n.d(t,{Z:function(){return f},x:function(){return u}});var r=n(68079),i=n(96234),l=n(96902),s=n(91188),a=n(54896),o=n(29938),c=(0,s.ZL)()((function(e){return{resizeBar:{background:e.palette.action.disabledBackground,height:12,position:"relative",overflow:"hidden"},tick:{position:"absolute",height:"100%",pointerEvents:"none",background:e.palette.divider,width:1},hiddenTick:{position:"absolute",height:"100%",width:5}}}));function u(){var e=(0,l.useRef)(null),t=(0,l.useState)(0),n=(0,i.Z)(t,2),r=n[0],s=n[1];return(0,l.useEffect)((function(){var t=setInterval((function(){var t,n=null===(t=e.current)||void 0===t?void 0:t.querySelector(".MuiDataGrid-virtualScroller");n&&s(n.scrollLeft)}),100);return function(){clearInterval(t)}}),[]),{ref:e,scrollLeft:r}}function d(e){var t=e.left,n=e.scrollLeft,r=e.idx,i=e.onDrag,s=c().classes,u=(0,l.useCallback)((function(e){i(e,r)}),[r,i]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.Z,{onDrag:u,vertical:!0,className:s.hiddenTick,style:{left:t-n-2.5}}),(0,o.jsx)("div",{style:{left:t-n},className:s.tick})]})}function f(e){var t=e.widths,n=e.setWidths,i=e.checkbox,s=e.scrollLeft,a=void 0===s?0:s,u=c().classes,f=[];t.reduce((function(e,t,n){return f[n]=e+t}),i?52:0);var h=(0,l.useCallback)((function(e,i){var l=(0,r.Z)(t);l[i]=Math.max(l[i]+e,50),n(l)}),[t,n]);return(0,o.jsx)("div",{className:u.resizeBar,children:f.map((function(e,t){return(0,o.jsx)(d,{left:t===f.length-1?e-3:e,onDrag:h,idx:t,scrollLeft:a},t)}))})}},61294:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var r=n(33028),i=n(59740),l=n(96902),s=n(4782),a=n(6880),o=n(12546),c=n(58941),u=n(70899),d=n(68079),f=n(56666),h=n(96234),v=n(80367),p=n(32114),m=n(35388),x=n(66519),j=n(4514),g=n(97531),w=n(35352),Z=n(29938);function k(e){var t=e.columns,n=e.filter,i=e.setFilter,s=(0,l.useState)(!1),a=(0,h.Z)(s,2),o=a[0],c=a[1];return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(v.Z,{control:(0,Z.jsx)(p.Z,{checked:o,onChange:function(){return c((function(e){return!e}))}}),label:"Show sample filters"}),o?(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(m.Z,{children:"These filters can use a plain text search or regex style query, e.g. in the genotype field, entering 1 will query for all genotypes that include the first alternate allele e.g. 0|1 or 1|1, entering [1-9]\\d* will find any non-zero allele e.g. 0|2 or 2/33"}),t.map((function(e){var t=e.field;return(0,Z.jsx)(x.Z,{placeholder:"Filter ".concat(t),value:n[t]||"",onChange:function(e){return i((0,r.Z)((0,r.Z)({},n),{},(0,f.Z)({},t,e.target.value)))}},"filter-".concat(t))}))]}):null]})}function b(e){var t,n,i=e.feature,s=e.descriptions,a=void 0===s?{}:s,o=(0,w.x)(),u=o.ref,f=o.scrollLeft,v=(0,l.useState)({}),p=(0,h.Z)(v,2),x=p[0],b=p[1],y=i.samples||{},S=Object.entries(y),C=[],N=Object.keys(x);try{C=S.map((function(e){return(0,r.Z)((0,r.Z)({},Object.fromEntries(Object.entries(e[1]).map((function(e){return[e[0],"".concat(e[1])]})))),{},{sample:e[0],id:e[0]})})).filter((function(e){return!N.length||N.every((function(t){var n=e[t],r=x[t];return!r||n.match(new RegExp(r,"i"))}))}))}catch(E){n=E}var O=["sample"].concat((0,d.Z)(Object.keys((null===(t=S[0])||void 0===t?void 0:t[1])||{}))),F=(0,l.useState)(O.map((function(e){return(0,g.measureGridWidth)(C.map((function(t){return t[e]})))}))),L=(0,h.Z)(F,2),D=L[0],T=L[1],B=O.map((function(e,t){var n,r;return{field:e,description:null===(n=a.FORMAT)||void 0===n||null===(r=n[e])||void 0===r?void 0:r.Description,width:D[t]}}));return S.length?(0,Z.jsxs)(c.BaseCard,(0,r.Z)((0,r.Z)({},e),{},{title:"Samples",children:[n?(0,Z.jsx)(m.Z,{color:"error",children:"".concat(n)}):null,(0,Z.jsx)(k,{setFilter:b,columns:B,filter:x}),(0,Z.jsxs)("div",{ref:u,children:[(0,Z.jsx)(w.Z,{widths:D,setWidths:T,scrollLeft:f}),(0,Z.jsx)("div",{ref:u,style:{height:600,width:"100%",overflow:"auto"},children:(0,Z.jsx)(j._,{rows:C,columns:B,disableSelectionOnClick:!0,rowHeight:25,headerHeight:35,disableColumnMenu:!0})})]})]})):null}function y(e){var t=e.rows,n=e.columns,r=t.length<100;return t.length?(0,Z.jsx)("div",{style:{height:25*Math.min(t.length,100)+80+(r?0:50),width:"100%"},children:(0,Z.jsx)(j._,{rowHeight:25,rows:t,columns:n})}):null}function S(e){var t,n,i,l,s=e.feature,a=e.descriptions,o=(null===a||void 0===a||null===(t=a.INFO)||void 0===t||null===(n=t.CSQ)||void 0===n||null===(i=n.Description)||void 0===i||null===(l=i.match(/.*Format: (.*)/))||void 0===l?void 0:l[1].split("|"))||[],u=s.INFO.CSQ||[],d=u.map((function(e,t){return(0,r.Z)({id:t},Object.fromEntries(e.split("|").map((function(e,t){return[o[t],e]}))))}))||[],f=o.map((function(e){return{field:e}}));return u.length?(0,Z.jsx)(c.BaseCard,{title:"CSQ table",children:(0,Z.jsx)(y,{rows:d,columns:f})}):null}function C(e){var t,n,i,l,s=e.feature,a=e.descriptions,o=(null===a||void 0===a||null===(t=a.INFO)||void 0===t||null===(n=t.ANN)||void 0===n||null===(i=n.Description)||void 0===i||null===(l=i.match(/.*Functional annotations:'(.*)'$/))||void 0===l?void 0:l[1].split("|"))||[],u=s.INFO.ANN||[],d=u.map((function(e,t){return(0,r.Z)({id:t},Object.fromEntries(e.split("|").map((function(e,t){return[o[t],e]}))))}))||[],f=o.map((function(e){return{field:e}}));return u.length?(0,Z.jsx)(c.BaseCard,{title:"ANN table",children:(0,Z.jsx)(y,{rows:d,columns:f})}):null}var N=n(63348),O=n(43430),F=n(52809),L=n(99688),D=n(44536),T=n(91188),B=n(63680),E=n(46186),I=(0,T.ZL)()({block:{display:"block"}});var M=(0,s.observer)((function(e){var t=e.model,n=e.handleClose,i=e.feature,s=e.viewType,a=I().classes,o=(0,l.useState)(!0),c=(0,h.Z)(o,2),u=c[0],d=c[1],f=(0,l.useState)(!0),m=(0,h.Z)(f,2),x=m[0],j=m[1];return(0,Z.jsxs)(E.Dialog,{open:!0,onClose:n,title:"Breakpoint split view options",children:[(0,Z.jsxs)(F.Z,{children:[(0,Z.jsx)(v.Z,{className:a.block,control:(0,Z.jsx)(p.Z,{checked:u,onChange:function(){return d((function(e){return!e}))}}),label:"Copy tracks into the new view"}),(0,Z.jsx)(v.Z,{className:a.block,control:(0,Z.jsx)(p.Z,{checked:x,onChange:function(){return j((function(e){return!e}))}}),label:"Mirror tracks vertically in vertically stacked view"})]}),(0,Z.jsxs)(L.Z,{children:[(0,Z.jsx)(D.Z,{onClick:function(){var e=t.view,l=(0,g.getSession)(t);try{var a=function(e){return e.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{id:e.trackId+"-"+Math.random()})}))},o=s.snapshotFromBreakendFeature(i,e);o.views[0].offsetPx-=e.width/2+100,o.views[1].offsetPx-=e.width/2+100,o.featureData=i;var c=(0,B.getSnapshot)(e.tracks);o.views[0].tracks=a(c),o.views[1].tracks=a(x?c.slice().reverse():c),l.addView("BreakpointSplitView",o)}catch(u){console.error(u),l.notify("".concat(u))}n()},variant:"contained",color:"primary",autoFocus:!0,children:"OK"}),(0,Z.jsx)(D.Z,{onClick:function(){return n()},color:"secondary",variant:"contained",children:"Cancel"})]})]})}));function A(e){var t,n=e.model,i=e.locStrings,s=e.feature,a=(0,g.getSession)(n),o=(0,g.getEnv)(a).pluginManager,u=(0,l.useState)(!1),d=(0,h.Z)(u,2),f=d[0],v=d[1];try{t=o.getViewType("BreakpointSplitView")}catch(x){}var p=new O.Z(s);return(0,Z.jsxs)(c.BaseCard,(0,r.Z)((0,r.Z)({},e),{},{title:"Breakends",children:[(0,Z.jsx)(m.Z,{children:"Link to linear view of breakend endpoints"}),(0,Z.jsx)("ul",{children:i.map((function(e){return(0,Z.jsx)("li",{children:(0,Z.jsx)(N.Z,{href:"#",onClick:function(t){t.preventDefault();var r=n.view;try{if(!r)throw new Error("No view associated with this feature detail panel anymore");var i;null===(i=r.navToLocString)||void 0===i||i.call(r,e)}catch(x){console.error(x),a.notify("".concat(x))}},children:"LGV - ".concat(e)})},"".concat(JSON.stringify(e)))}))}),t?(0,Z.jsxs)("div",{children:[(0,Z.jsx)(m.Z,{children:"Launch split views with breakend source and target"}),(0,Z.jsx)("ul",{children:i.map((function(e){return(0,Z.jsx)("li",{children:(0,Z.jsx)(N.Z,{href:"#",onClick:function(e){e.preventDefault(),v(!0)},children:"".concat(s.refName,":").concat(s.start," // ").concat(e," (split view)")})},"".concat(JSON.stringify(e)))}))}),f?(0,Z.jsx)(M,{model:n,feature:p,viewType:t,handleClose:function(){v(!1)}}):null]}):null]}))}var R=["samples"];var q=(0,s.observer)((function(e){var t=e.model,n=t.featureData,l=t.descriptions,s=JSON.parse(JSON.stringify(n)),d=(s.samples,(0,i.Z)(s,R));return(0,Z.jsxs)(a.Z,{"data-testid":"variant-side-drawer",children:[(0,Z.jsx)(c.FeatureDetails,(0,r.Z)({feature:d,descriptions:(0,r.Z)((0,r.Z)({},{CHROM:"chromosome: An identifier from the reference genome",POS:"position: The reference position, with the 1st base having position 1",ID:"identifier: Semi-colon separated list of unique identifiers where available",REF:"reference base(s): Each base must be one of A,C,G,T,N (case insensitive).",ALT:"alternate base(s): Comma-separated list of alternate non-reference alleles",QUAL:"quality: Phred-scaled quality score for the assertion made in ALT",FILTER:"filter status: PASS if this position has passed all filters, otherwise a semicolon-separated list of codes for filters that fail"}),l)},e)),(0,Z.jsx)(o.Z,{}),(0,Z.jsx)(S,{feature:d,descriptions:l}),(0,Z.jsx)(o.Z,{}),(0,Z.jsx)(C,{feature:d,descriptions:l}),(0,Z.jsx)(o.Z,{}),"breakend"===s.type?(0,Z.jsx)(A,{feature:s,locStrings:s.ALT.map((function(e){var t;return(null===(t=(0,u.I)(e))||void 0===t?void 0:t.MatePosition)||""})),model:t}):null,"translocation"===s.type?(0,Z.jsx)(A,{feature:s,model:t,locStrings:["".concat(s.INFO.CHR2[0],":").concat(s.INFO.END)]}):null,(0,Z.jsx)(b,(0,r.Z)((0,r.Z)({feature:s},e),{},{descriptions:l}))]})}))},25471:function(e,t,n){var r=n(71600);t.Z=void 0;var i=r(n(7152)),l=n(29938),s=(0,i.default)((0,l.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"}),"Settings");t.Z=s}}]);
//# sourceMappingURL=7296.e00bee32.chunk.js.map