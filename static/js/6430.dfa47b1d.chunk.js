"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[6430,5335],{14697:function(e,n,t){t.d(n,{Z:function(){return c}});t(96902);var r=t(27664),o=t(17867),a=t(29938);function c(e){var n=e.value,t=(0,r.getUriLink)(n);return(0,a.jsx)(o.SanitizedHTML,{html:'<a href="'.concat(t,'">').concat(t,"</a>")})}},85335:function(e,n,t){t.r(n),t.d(n,{ColorPicker:function(){return X},ColorPopover:function(){return V},PopoverPicker:function(){return G},default:function(){return F}});var r=t(96234),o=t(96902),a=t(55707),c=t.n(a),l=t(78566),i=t(33266),u=t(15996),s=t(66519),f=t(91188),d=t(66185),h=t(27664);function v(){return(v=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function g(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n.indexOf(t=a[r])>=0||(o[t]=e[t]);return o}function m(e){var n=(0,o.useRef)(e),t=(0,o.useRef)((function(e){n.current&&n.current(e)}));return n.current=e,t.current}var p=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e>t?t:e<n?n:e},x=function(e){return"touches"in e},b=function(e){return e&&e.ownerDocument.defaultView||self},C=function(e,n,t){var r=e.getBoundingClientRect(),o=x(n)?function(e,n){for(var t=0;t<e.length;t++)if(e[t].identifier===n)return e[t];return e[0]}(n.touches,t):n;return{left:p((o.pageX-(r.left+b(e).pageXOffset))/r.width),top:p((o.pageY-(r.top+b(e).pageYOffset))/r.height)}},j=function(e){!x(e)&&e.preventDefault()},w=o.memo((function(e){var n=e.onMove,t=e.onKey,a=g(e,["onMove","onKey"]),c=(0,o.useRef)(null),l=m(n),i=m(t),u=(0,o.useRef)(null),s=(0,o.useRef)(!1),f=(0,o.useMemo)((function(){var e=function(e){j(e),(x(e)?e.touches.length>0:e.buttons>0)&&c.current?l(C(c.current,e,u.current)):t(!1)},n=function(){return t(!1)};function t(t){var r=s.current,o=b(c.current),a=t?o.addEventListener:o.removeEventListener;a(r?"touchmove":"mousemove",e),a(r?"touchend":"mouseup",n)}return[function(e){var n=e.nativeEvent,r=c.current;if(r&&(j(n),!function(e,n){return n&&!x(e)}(n,s.current)&&r)){if(x(n)){s.current=!0;var o=n.changedTouches||[];o.length&&(u.current=o[0].identifier)}r.focus(),l(C(r,n,u.current)),t(!0)}},function(e){var n=e.which||e.keyCode;n<37||n>40||(e.preventDefault(),i({left:39===n?.05:37===n?-.05:0,top:40===n?.05:38===n?-.05:0}))},t]}),[i,l]),d=(0,r.Z)(f,3),h=d[0],p=d[1],w=d[2];return(0,o.useEffect)((function(){return w}),[w]),o.createElement("div",v({},a,{onTouchStart:h,onMouseDown:h,className:"react-colorful__interactive",ref:c,onKeyDown:p,tabIndex:0,role:"slider"}))})),_=function(e){return e.filter(Boolean).join(" ")},Z=function(e){var n=e.className,t=e.color,r=e.left,a=e.top,c=void 0===a?.5:a,l=_(["react-colorful__pointer",n]);return o.createElement("div",{className:l,style:{top:100*c+"%",left:100*r+"%"}},o.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},k=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.pow(10,n);return Math.round(t*e)/t},y=(Math.PI,function(e){var n=e.h,t=e.s,r=e.v,o=e.a,a=(200-t)*r/100;return{h:k(n),s:k(a>0&&a<200?t*r/100/(a<=100?a:200-a)*100:0),l:k(a/2),a:k(o,2)}}),M=function(e){var n=y(e),t=n.h,r=n.s,o=n.l;return"hsl(".concat(t,", ").concat(r,"%, ").concat(o,"%)")},E=function(e){var n=y(e),t=n.h,r=n.s,o=n.l,a=n.a;return"hsla(".concat(t,", ").concat(r,"%, ").concat(o,"%, ").concat(a,")")},N=function(e){var n=e.h,t=e.s,r=e.v,o=e.a;n=n/360*6,t/=100,r/=100;var a=Math.floor(n),c=r*(1-t),l=r*(1-(n-a)*t),i=r*(1-(1-n+a)*t),u=a%6;return{r:k(255*[r,l,c,c,i,r][u]),g:k(255*[i,r,r,l,c,c][u]),b:k(255*[c,c,i,r,r,l][u]),a:k(o,2)}},S=function(e){var n=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(e);return n?O({r:Number(n[1])/(n[2]?100/255:1),g:Number(n[3])/(n[4]?100/255:1),b:Number(n[5])/(n[6]?100/255:1),a:void 0===n[7]?1:Number(n[7])/(n[8]?100:1)}):{h:0,s:0,v:0,a:1}},O=function(e){var n=e.r,t=e.g,r=e.b,o=e.a,a=Math.max(n,t,r),c=a-Math.min(n,t,r),l=c?a===n?(t-r)/c:a===t?2+(r-n)/c:4+(n-t)/c:0;return{h:k(60*(l<0?l+6:l)),s:k(a?c/a*100:0),v:k(a/255*100),a:o}},H=o.memo((function(e){var n=e.className,t=e.hue,r=e.onChange,a=_(["react-colorful__hue",n]);return o.createElement("div",{className:a},o.createElement(w,{onMove:function(e){r({h:360*e.left})},onKey:function(e){r({h:p(t+360*e.left,0,360)})},"aria-label":"Hue","aria-valuetext":k(t)},o.createElement(Z,{className:"react-colorful__hue-pointer",left:t/360,color:M({h:t,s:100,v:100,a:1})})))})),L=o.memo((function(e){var n=e.hsva,t=e.onChange,r={backgroundColor:M({h:n.h,s:100,v:100,a:1})};return o.createElement("div",{className:"react-colorful__saturation",style:r},o.createElement(w,{onMove:function(e){t({s:100*e.left,v:100-100*e.top})},onKey:function(e){t({s:p(n.s+100*e.left,0,100),v:p(n.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation ".concat(k(n.s),"%, Brightness ").concat(k(n.v),"%")},o.createElement(Z,{className:"react-colorful__saturation-pointer",top:1-n.v/100,left:n.s/100,color:M(n)})))})),T=function(e,n){if(e===n)return!0;for(var t in e)if(e[t]!==n[t])return!1;return!0},P=function(e,n){return e.replace(/\s/g,"")===n.replace(/\s/g,"")};function R(e,n,t){var a=m(t),c=(0,o.useState)((function(){return e.toHsva(n)})),l=(0,r.Z)(c,2),i=l[0],u=l[1],s=(0,o.useRef)({color:n,hsva:i});(0,o.useEffect)((function(){if(!e.equal(n,s.current.color)){var t=e.toHsva(n);s.current={hsva:t,color:n},u(t)}}),[n,e]),(0,o.useEffect)((function(){var n;T(i,s.current.hsva)||e.equal(n=e.fromHsva(i),s.current.color)||(s.current={hsva:i,color:n},a(n))}),[i,e,a]);var f=(0,o.useCallback)((function(e){u((function(n){return Object.assign({},n,e)}))}),[]);return[i,f]}var z,D="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,I=new Map,K=function(e){D((function(){var n=e.current?e.current.ownerDocument:document;if(void 0!==n&&!I.has(n)){var r=n.createElement("style");r.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',I.set(n,r);var o=z||t.nc;o&&r.setAttribute("nonce",o),n.head.appendChild(r)}}),[])},A=function(e){var n=e.className,t=e.hsva,r=e.onChange,a={backgroundImage:"linear-gradient(90deg, ".concat(E(Object.assign({},t,{a:0})),", ").concat(E(Object.assign({},t,{a:1})),")")},c=_(["react-colorful__alpha",n]);return o.createElement("div",{className:c},o.createElement("div",{className:"react-colorful__alpha-gradient",style:a}),o.createElement(w,{onMove:function(e){r({a:e.left})},onKey:function(e){r({a:p(t.a+e.left)})},"aria-label":"Alpha","aria-valuetext":"".concat(k(100*t.a),"%")},o.createElement(Z,{className:"react-colorful__alpha-pointer",left:t.a,color:E(t)})))},B=function(e){var n=e.className,t=e.colorModel,a=e.color,c=void 0===a?t.defaultColor:a,l=e.onChange,i=g(e,["className","colorModel","color","onChange"]),u=(0,o.useRef)(null);K(u);var s=R(t,c,l),f=(0,r.Z)(s,2),d=f[0],h=f[1],m=_(["react-colorful",n]);return o.createElement("div",v({},i,{ref:u,className:m}),o.createElement(L,{hsva:d,onChange:h}),o.createElement(H,{hue:d.h,onChange:h}),o.createElement(A,{hsva:d,onChange:h,className:"react-colorful__last-control"}))},W={defaultColor:"rgba(0, 0, 0, 1)",toHsva:S,fromHsva:function(e){var n=N(e),t=n.r,r=n.g,o=n.b,a=n.a;return"rgba(".concat(t,", ").concat(r,", ").concat(o,", ").concat(a,")")},equal:P},U=function(e){return o.createElement(B,v({},e,{colorModel:W}))},Y=t(29938),q=(0,f.ZL)()({picker:{position:"relative"},swatches:{display:"flex",padding:12,flexWrap:"wrap"},swatch:{width:24,height:24,margin:4,border:"none",padding:0,cursor:"pointer",outline:"none"}}),G=function(e){var n=e.color,t=e.onChange,a=(0,o.useState)(null),c=(0,r.Z)(a,2),l=c[0],i=c[1],u=q().classes;return(0,Y.jsxs)("div",{className:u.picker,children:[(0,Y.jsx)("div",{className:u.swatch,style:{backgroundColor:n},onClick:function(e){return i(e.currentTarget)}}),(0,Y.jsx)(V,{anchorEl:l,onClose:function(){return i(null)},color:n,onChange:t})]})};function V(e){var n=e.anchorEl,t=e.onChange,r=e.onClose,o=e.color;return(0,Y.jsx)(l.ZP,{open:!!n,anchorEl:n,onClose:r,children:(0,Y.jsx)(X,{color:o,onChange:t})})}function X(e){var n=e.onChange,t=e.color,a=q().classes,l=(0,h.useLocalStorage)("colorPickerPalette","set1"),f=(0,r.Z)(l,2),v=f[0],g=f[1],m=d[v],p=Object.keys(d),x=(0,o.useState)(t),b=(0,r.Z)(x,2),C=b[0],j=b[1],w=c()(t).rgb().toString(),_=(0,h.useDebounce)(w,1e3),Z=function(e){j(e);try{n(c()(e).rgb().toString())}catch(t){}};return(0,Y.jsxs)("div",{style:{display:"flex",padding:10},children:[(0,Y.jsx)("div",{style:{width:200,margin:5},children:(0,Y.jsx)(U,{color:_,onChange:Z})}),(0,Y.jsxs)("div",{style:{width:200,margin:5},children:[(0,Y.jsx)(i.Z,{value:v,onChange:function(e){var n=e.target.value;g(n)},children:p.map((function(e){return(0,Y.jsx)(u.Z,{value:e,children:e},e)}))}),(0,Y.jsx)("div",{className:a.swatches,children:m.map((function(e,n){return(0,Y.jsx)("button",{className:a.swatch,style:{background:e},onClick:function(){return Z(e)}},"".concat(e,"-").concat(n))}))}),(0,Y.jsx)(s.Z,{helperText:"Manually set color (hex, rgb, or css color name)",value:C,onChange:function(e){return Z(e.target.value)}})]})]})}var F=G},56430:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var r=t(59740),o=t(68079),a=t(96234),c=t(96902),l=t(52809),i=t(44536),u=t(99688),s=t(91188),f=t(27664),d=t(34721),h=t(73636),v=t.n(h),g=t(33028),m=t(6880),p=t(99826),x=t(51479),b=t(83674),C=t(25322),j=t(12546),w=t(4782),_=t(39431),Z=t.n(_),k=t(47057),y=t(29938),M=(0,s.ZL)()((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}));function E(e){return(0,y.jsx)(Z(),{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:(0,y.jsx)(m.Z,(0,g.Z)({},e))})}var N=(0,w.observer)((function(e){var n=M().classes,t=e.title,r=e.children,o=e.onClose;return(0,y.jsx)(p.Z,(0,g.Z)((0,g.Z)({},e),{},{PaperComponent:E,"aria-labelledby":"draggable-dialog-title",children:(0,y.jsxs)(x.Z,{children:[(0,y.jsxs)(b.Z,{style:{cursor:"move"},id:"draggable-dialog-title",children:[t,o?(0,y.jsx)(C.Z,{className:n.closeButton,onClick:function(){o()},children:(0,y.jsx)(k.Z,{})}):null]}),(0,y.jsx)(j.Z,{}),r]})}))})),S=t(85335),O=t(39947),H=t(61925),L=t(44567),T=t(48974),P=t(51688),R=t(14697),z=["name","color","baseUri"],D=(0,s.ZL)()({content:{minWidth:800}});function I(e){var n=e.model,t=e.handleClose,r=D().classes,s=n.sources,d=(0,c.useState)(v()(s||[])),h=(0,a.Z)(d,2),g=h[0],m=h[1],p=(0,f.useLocalStorage)("multiwiggle-showTips",!0),x=(0,a.Z)(p,2),b=x[0],C=x[1];return(0,y.jsxs)(N,{open:!0,onClose:t,maxWidth:"xl",title:"Multi-wiggle color/arrangement editor",children:[(0,y.jsxs)(l.Z,{className:r.content,children:[(0,y.jsx)(i.Z,{variant:"contained",style:{float:"right"},onClick:function(){return C(!b)},children:b?"Hide tips":"Show tips"}),(0,y.jsx)("br",{}),b?(0,y.jsxs)(y.Fragment,{children:["Helpful tips",(0,y.jsxs)("ul",{children:[(0,y.jsx)("li",{children:"You can select rows in the table with the checkboxes"}),(0,y.jsx)("li",{children:"Multi-select is enabled with shift-click and control-click"}),(0,y.jsx)("li",{children:'The "Move selected items up/down" can re-arrange subtracks'}),(0,y.jsx)("li",{children:"Sorting the data grid itself can also re-arrange subtracks"}),(0,y.jsx)("li",{children:"Changes are applied when you hit Submit"}),(0,y.jsx)("li",{children:"You can click and drag the dialog box to move it on the screen"}),(0,y.jsx)("li",{children:"Columns in the table can be hidden using a vertical '...' menu on the right side of each column"})]})]}):null,(0,y.jsx)(K,{rows:g,onChange:m,showTips:b})]}),(0,y.jsxs)(u.Z,{children:[(0,y.jsx)(i.Z,{variant:"contained",type:"submit",color:"inherit",onClick:function(){n.clearLayout(),m(n.sources||[])},children:"Clear custom settings"}),(0,y.jsx)(i.Z,{variant:"contained",color:"secondary",onClick:function(){t(),m((0,o.Z)(n.sources||[]))},children:"Cancel"}),(0,y.jsx)(i.Z,{variant:"contained",color:"primary",type:"submit",onClick:function(){n.setLayout(g),t()},children:"Submit"})]})]})}function K(e){var n=e.rows,t=e.onChange,l=e.showTips,u=(0,c.useState)(null),s=(0,a.Z)(u,2),h=s[0],v=s[1],g=(0,c.useState)([]),m=(0,a.Z)(g,2),p=m[0],x=m[1],b=n[0],C=(b.name,b.color,b.baseUri,(0,r.Z)(b,z)),j=(0,c.useState)("blue"),w=(0,a.Z)(j,2),_=w[0],Z=w[1],k=(0,c.useState)({idx:0,field:null}),M=(0,a.Z)(k,2),E=M[0],N=M[1];return(0,y.jsxs)("div",{children:[(0,y.jsx)(i.Z,{disabled:!p.length,onClick:function(e){return v(e.currentTarget)},children:"Change color of selected items"}),(0,y.jsxs)(i.Z,{onClick:function(){return t((0,O.A1)((0,o.Z)(n),p))},disabled:!p.length,children:[(0,y.jsx)(P.Z,{}),l?"Move selected items up":null]}),(0,y.jsxs)(i.Z,{onClick:function(){return t((0,O.vi)((0,o.Z)(n),p))},disabled:!p.length,children:[(0,y.jsx)(T.Z,{}),l?"Move selected items down":null]}),(0,y.jsxs)(i.Z,{onClick:function(){return t((0,O.A1)((0,o.Z)(n),p,n.length))},disabled:!p.length,children:[(0,y.jsx)(H.Z,{}),l?"Move selected items to top":null]}),(0,y.jsxs)(i.Z,{onClick:function(){return t((0,O.vi)((0,o.Z)(n),p,n.length))},disabled:!p.length,children:[(0,y.jsx)(L.Z,{}),l?"Move selected items to bottom":null]}),(0,y.jsx)(S.ColorPopover,{anchorEl:h,color:_,onChange:function(e){Z(e),p.forEach((function(t){var r=n.find((function(e){return e.name===t}));r&&(r.color=e)})),t((0,o.Z)(n))},onClose:function(){return v(null)}}),(0,y.jsx)("div",{style:{height:400,width:"100%"},children:(0,y.jsx)(d._,{getRowId:function(e){return e.name},checkboxSelection:!0,disableRowSelectionOnClick:!0,onRowSelectionModelChange:function(e){return x(e)},rows:n,rowHeight:25,columnHeaderHeight:33,columns:[{field:"color",headerName:"Color",renderCell:function(e){var r=e.value,a=e.id;return(0,y.jsx)(S.default,{color:r||"blue",onChange:function(e){var r=n.find((function(e){return e.name===a}));r&&(r.color=e),t((0,o.Z)(n))}})}},{field:"name",sortingOrder:[null],headerName:"Name",width:(0,f.measureGridWidth)(n.map((function(e){return e.name})))}].concat((0,o.Z)(Object.keys(C).map((function(e){return{field:e,sortingOrder:[null],renderCell:function(e){var n=e.value;return(0,f.isUriLocation)(n)?(0,y.jsx)(R.Z,{value:n}):(0,f.getStr)(n)},width:(0,f.measureGridWidth)(n.map((function(n){return n[e]})))}})))),sortModel:[],onSortModelChange:function(e){var r=e[0],a=(E.idx+1)%2,c=(null===r||void 0===r?void 0:r.field)||E.field;N({idx:a,field:c}),t(c?(0,o.Z)(n).sort((function(e,n){var t=(0,f.getStr)(e[c]),r=(0,f.getStr)(n[c]);return 1===a?t.localeCompare(r):r.localeCompare(t)})):n)}})})]})}},39947:function(e,n,t){t.d(n,{A1:function(){return a},os:function(){return i},vi:function(){return c}});var r=t(27664),o=t(99836);function a(e,n){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=n.map((function(n){return e.findIndex((function(e){return e.name===n}))})).sort((function(e,n){return e-n})),o=0,a=0;a<r.length;a++){var c=r[a],l=Math.max(o,c-t);l>=o&&e.splice(l,0,e.splice(c,1)[0]),o+=1}return e}function c(e,n){for(var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=n.map((function(n){return e.findIndex((function(e){return e.name===n}))})).sort((function(e,n){return n-e})),o=e.length-1,a=0;a<r.length;a++){var c=r[a],l=Math.min(o,c+t);l<=o&&e.splice(l,0,e.splice(c,1)[0]),o-=1}return e}var l=12.8;function i(e){var n=e.prefersOffset,t=(0,r.getContainingView)(e).trackLabels,a=(0,r.getContainingTrack)(e),c=(0,o.getConf)(a,"name");return"overlapping"!==t||n?10:(0,r.measureText)(c,l)+100}}}]);
//# sourceMappingURL=6430.dfa47b1d.chunk.js.map