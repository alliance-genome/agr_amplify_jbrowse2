{"version":3,"sources":["../../../plugins/linear-comparative-view/src/LinearSyntenyView/components/ImportForm.tsx","../../../plugins/linear-comparative-view/src/LinearSyntenyView/components/LinearSyntenyView.tsx","../../../plugins/linear-comparative-view/src/LinearComparativeView/components/Header.tsx","../../../plugins/linear-comparative-view/src/LinearComparativeView/components/LinearComparativeView.tsx"],"names":["useStyles","makeStyles","theme","importFormContainer","padding","spacing","formPaper","margin","marginBottom","getName","trackData","uri","localPath","name","undefined","ImportForm","observer","model","classes","session","getSession","assemblyNames","assemblyManager","useState","selected","setSelected","setTrackData","bed2Location","setBed2Location","bed1Location","setBed1Location","numRows","error","setError","value","setValue","fileName","radioOption","path","extname","endsWith","slice","length","stripGz","assemblyError","map","a","get","filter","f","join","getAdapter","type","pafLocation","outLocation","deltaLocation","chainLocation","mcscanAnchorsLocation","mcscanSimpleAnchorsLocation","Error","isSessionWithAddTracks","Promise","all","selection","waitForAssembly","assembly","bpPerPx","offsetPx","hideHeader","displayedRegions","regions","setViews","views","forEach","view","setWidth","width","transaction","basename","trackId","Date","now","addTrackConf","adapter","toggleTrack","console","displayError","Container","className","Paper","Grid","container","item","justifyContent","alignItems","Typography","Array","_","index","key","onChange","val","copy","style","textAlign","RadioGroup","event","target","FormControlLabel","control","Radio","label","href","display","description","location","setLocation","loc","Button","disabled","onClick","variant","color","ExtraButtons","IconButton","toggleCurves","title","drawCurves","LinearSyntenyView","initialized","LinearComparativeView","headerBar","gridArea","spacer","flexGrow","bp","marginLeft","searchContainer","searchBox","LinkViews","toggleLinkViews","linkViews","SquareView","squareView","Header","anyShowHeaders","some","id","showHelp","Math","round","coarseTotalBp","toLocaleString","overlay","zIndex","content","position","grid","relative","Overlays","tracks","track","displays","RenderingComponent","getConf","height","middleComparativeHeight","overflow","MiddleComparativeView","ReactComponent","getEnv","pluginManager","getViewType","onDrag","n","setMiddleComparativeHeight","background","OverlayComparativeView","props","d"],"mappings":"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","file":"static/js/40.8f870aad.chunk.js","sourcesContent":["import React, { useState } from 'react'\nimport path from 'path'\nimport { transaction } from 'mobx'\nimport { observer } from 'mobx-react'\nimport { getSession, isSessionWithAddTracks } from '@jbrowse/core/util'\nimport {\n  Button,\n  Container,\n  FormControlLabel,\n  Radio,\n  RadioGroup,\n  Grid,\n  Paper,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport { FileLocation } from '@jbrowse/core/util/types'\nimport { FileSelector, ErrorMessage, AssemblySelector } from '@jbrowse/core/ui'\nimport { LinearSyntenyViewModel } from '../model'\n\nconst useStyles = makeStyles(theme => ({\n  importFormContainer: {\n    padding: theme.spacing(4),\n  },\n\n  formPaper: {\n    margin: '0 auto',\n    padding: 12,\n    marginBottom: 10,\n  },\n}))\n\nfunction getName(\n  trackData?: { uri: string } | { localPath: string } | { name: string },\n) {\n  return trackData\n    ? // @ts-ignore\n      trackData.uri || trackData.localPath || trackData.name\n    : undefined\n}\n\nfunction stripGz(fileName: string) {\n  return fileName.endsWith('.gz')\n    ? fileName.slice(0, fileName.length - 3)\n    : fileName\n}\n\nconst ImportForm = observer(({ model }: { model: LinearSyntenyViewModel }) => {\n  const classes = useStyles()\n  const session = getSession(model)\n\n  const { assemblyNames, assemblyManager } = session\n  const [selected, setSelected] = useState([assemblyNames[0], assemblyNames[0]])\n  const [trackData, setTrackData] = useState<FileLocation>()\n  const [bed2Location, setBed2Location] = useState<FileLocation>()\n  const [bed1Location, setBed1Location] = useState<FileLocation>()\n  const [numRows] = useState(2)\n  const [error, setError] = useState<unknown>()\n\n  const [value, setValue] = useState('')\n  const fileName = getName(trackData)\n  const radioOption = value || (fileName ? path.extname(stripGz(fileName)) : '')\n\n  const assemblyError = assemblyNames.length\n    ? selected\n        .map(a => assemblyManager.get(a)?.error)\n        .filter(f => !!f)\n        .join(', ')\n    : 'No configured assemblies'\n\n  function getAdapter() {\n    if (radioOption === '.paf') {\n      return {\n        type: 'PAFAdapter',\n        pafLocation: trackData,\n        assemblyNames: selected,\n      }\n    } else if (radioOption === '.out') {\n      return {\n        type: 'MashMapAdapter',\n        outLocation: trackData,\n        assemblyNames: selected,\n      }\n    } else if (radioOption === '.delta') {\n      return {\n        type: 'DeltaAdapter',\n        deltaLocation: trackData,\n        assemblyNames: selected,\n      }\n    } else if (radioOption === '.chain') {\n      return {\n        type: 'ChainAdapter',\n        chainLocation: trackData,\n        assemblyNames: selected,\n      }\n    } else if (radioOption === '.anchors') {\n      return {\n        type: 'MCScanAnchorsAdapter',\n        mcscanAnchorsLocation: trackData,\n        bed1Location,\n        bed2Location,\n        assemblyNames: selected,\n      }\n    } else if (radioOption === '.anchors.simple') {\n      return {\n        type: 'MCScanSimpleAnchorsAdapter',\n        mcscanSimpleAnchorsLocation: trackData,\n        bed1Location,\n        bed2Location,\n        assemblyNames: selected,\n      }\n    } else {\n      throw new Error('Unknown type')\n    }\n  }\n\n  async function onOpenClick() {\n    try {\n      if (!isSessionWithAddTracks(session)) {\n        return\n      }\n      model.setViews(\n        await Promise.all(\n          selected.map(async selection => {\n            const assembly = await assemblyManager.waitForAssembly(selection)\n            if (!assembly) {\n              throw new Error(`Assembly ${selection} failed to load`)\n            }\n            return {\n              type: 'LinearGenomeView' as 'LinearGenomeView',\n              bpPerPx: 1,\n              offsetPx: 0,\n              hideHeader: true,\n              displayedRegions: assembly.regions,\n            }\n          }),\n        ),\n      )\n\n      model.views.forEach(view => view.setWidth(model.width))\n\n      transaction(() => {\n        if (trackData) {\n          const fileName = path.basename(getName(trackData)) || 'MyTrack'\n          const trackId = `${fileName}-${Date.now()}`\n\n          session.addTrackConf({\n            trackId: trackId,\n            name: fileName,\n            assemblyNames: selected,\n            type: 'SyntenyTrack',\n            adapter: getAdapter(),\n          })\n\n          model.toggleTrack(trackId)\n        }\n      })\n    } catch (e) {\n      console.error(e)\n      setError(e)\n    }\n  }\n\n  // this is a combination of any displayed error message we have\n  const displayError = error || assemblyError\n  return (\n    <Container className={classes.importFormContainer}>\n      {displayError ? <ErrorMessage error={displayError} /> : null}\n      <Paper className={classes.formPaper}>\n        <Grid\n          container\n          item\n          justifyContent=\"center\"\n          spacing={4}\n          alignItems=\"center\"\n        >\n          <Grid item>\n            <Typography>Select assemblies for synteny view</Typography>\n            {[...new Array(numRows)].map((_, index) => (\n              <AssemblySelector\n                key={`row_${index}_${selected[index]}`}\n                selected={selected[index]}\n                onChange={val => {\n                  // splice the value into the current array\n                  const copy = selected.slice(0)\n                  copy[index] = val\n                  setSelected(copy)\n                }}\n                session={session}\n              />\n            ))}\n          </Grid>\n        </Grid>\n      </Paper>\n\n      <Paper className={classes.formPaper}>\n        <Typography style={{ textAlign: 'center' }}>\n          <b>Optional</b>: Add a .paf, .out (MashMap), .delta (Mummer), .chain,\n          .anchors or .anchors.simple (MCScan) file to view in the synteny view.\n          These file types can also be gzipped. The first assembly should be the\n          query sequence (e.g. left column of the PAF) and the second assembly\n          should be the target sequence (e.g. right column of the PAF)\n        </Typography>\n        <RadioGroup\n          value={radioOption}\n          onChange={event => setValue(event.target.value)}\n        >\n          <Grid container justifyContent=\"center\">\n            <Grid item>\n              <FormControlLabel value=\".paf\" control={<Radio />} label=\".paf\" />\n            </Grid>\n            <Grid item>\n              <FormControlLabel value=\".out\" control={<Radio />} label=\".out\" />\n            </Grid>\n            <Grid item>\n              <FormControlLabel\n                value=\".delta\"\n                control={<Radio />}\n                label=\".delta\"\n              />\n            </Grid>\n            <Grid item>\n              <FormControlLabel\n                value=\".chain\"\n                control={<Radio />}\n                label=\".chain\"\n              />\n            </Grid>\n            <Grid item>\n              <FormControlLabel\n                value=\".anchors\"\n                control={<Radio />}\n                label=\".anchors\"\n              />\n            </Grid>\n            <Grid item>\n              <FormControlLabel\n                value=\".anchors.simple\"\n                control={<Radio />}\n                label=\".anchors.simple\"\n              />\n            </Grid>\n          </Grid>\n        </RadioGroup>\n        <Grid container justifyContent=\"center\">\n          <Grid item>\n            {value === '.anchors' || value === '.anchors.simple' ? (\n              <div>\n                <div style={{ margin: 20 }}>\n                  Open the {value}, and .bed files for both genome assemblies\n                  from the MCScan (Python verson) pipeline{' '}\n                  <a href=\"https://github.com/tanghaibao/jcvi/wiki/MCscan-(Python-version)\">\n                    (more info)\n                  </a>\n                </div>\n                <div style={{ display: 'flex' }}>\n                  <div>\n                    <FileSelector\n                      name=\".anchors file\"\n                      description=\"\"\n                      location={trackData}\n                      setLocation={loc => setTrackData(loc)}\n                    />\n                  </div>\n                  <div>\n                    <FileSelector\n                      name=\"genome 1 .bed (left column of anchors file)\"\n                      description=\"\"\n                      location={bed1Location}\n                      setLocation={loc => setBed1Location(loc)}\n                    />\n                  </div>\n                  <div>\n                    <FileSelector\n                      name=\"genome 2 .bed (right column of anchors file)\"\n                      description=\"\"\n                      location={bed2Location}\n                      setLocation={loc => setBed2Location(loc)}\n                    />\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <FileSelector\n                name={value ? value + ' location' : ''}\n                description=\"\"\n                location={trackData}\n                setLocation={loc => setTrackData(loc)}\n              />\n            )}\n          </Grid>\n        </Grid>\n      </Paper>\n      <Grid container justifyContent=\"center\">\n        <Grid item>\n          <Button\n            // only disable button on assemblyError. for other types of errors\n            // in the useState can retry\n            disabled={!!assemblyError}\n            onClick={onOpenClick}\n            variant=\"contained\"\n            color=\"primary\"\n          >\n            Open\n          </Button>\n        </Grid>\n      </Grid>\n    </Container>\n  )\n})\n\nexport default ImportForm\n","import React from 'react'\nimport { observer } from 'mobx-react'\nimport { IconButton } from '@material-ui/core'\nimport LinearComparativeViewComponent from '../../LinearComparativeView/components/LinearComparativeView'\nimport { LinearSyntenyViewModel } from '../model'\nimport { Curves, StraightLines } from './Icons'\nimport ImportForm from './ImportForm'\n\nconst ExtraButtons = observer(\n  ({ model }: { model: LinearSyntenyViewModel }) => {\n    return (\n      <IconButton\n        onClick={() => {\n          model.toggleCurves()\n        }}\n        title=\"Toggle drawing straight or curved synteny lines\"\n      >\n        {model.drawCurves ? (\n          <StraightLines color=\"secondary\" />\n        ) : (\n          <Curves color=\"secondary\" />\n        )}\n      </IconButton>\n    )\n  },\n)\n\nconst LinearSyntenyView = observer(\n  ({ model }: { model: LinearSyntenyViewModel }) => {\n    const { initialized } = model\n    if (!initialized) {\n      return <ImportForm model={model} />\n    }\n    return (\n      <LinearComparativeViewComponent\n        model={model}\n        ExtraButtons={<ExtraButtons model={model} />}\n      />\n    )\n  },\n)\n\nexport default LinearSyntenyView\n","import React from 'react'\nimport { IconButton, Typography, makeStyles } from '@material-ui/core'\nimport { SearchBox } from '@jbrowse/plugin-linear-genome-view'\nimport { observer } from 'mobx-react'\n\n// icons\nimport LinkIcon from '@material-ui/icons/Link'\nimport LinkOffIcon from '@material-ui/icons/LinkOff'\nimport CropFreeIcon from '@material-ui/icons/CropFree'\n\nimport { LinearComparativeViewModel } from '../model'\n\ntype LCV = LinearComparativeViewModel\n\nconst useStyles = makeStyles(() => ({\n  headerBar: {\n    gridArea: '1/1/auto/span 2',\n    display: 'flex',\n  },\n  spacer: {\n    flexGrow: 1,\n  },\n  bp: {\n    display: 'flex',\n    alignItems: 'center',\n    marginLeft: 10,\n  },\n  searchContainer: {\n    marginLeft: 5,\n  },\n  searchBox: {\n    display: 'flex',\n  },\n}))\n\nconst LinkViews = observer(({ model }: { model: LCV }) => {\n  return (\n    <IconButton\n      onClick={model.toggleLinkViews}\n      title=\"Toggle linked scrolls and behavior across views\"\n    >\n      {model.linkViews ? (\n        <LinkOffIcon color=\"secondary\" />\n      ) : (\n        <LinkIcon color=\"secondary\" />\n      )}\n    </IconButton>\n  )\n})\n\nconst SquareView = observer(({ model }: { model: LCV }) => {\n  return (\n    <IconButton\n      onClick={model.squareView}\n      title=\"Square view (make both the same zoom level)\"\n    >\n      <CropFreeIcon color=\"secondary\" />\n    </IconButton>\n  )\n})\n\nconst Header = observer(\n  ({ model, ExtraButtons }: { ExtraButtons?: React.ReactNode; model: LCV }) => {\n    const classes = useStyles()\n    const anyShowHeaders = model.views.some(view => !view.hideHeader)\n    return (\n      <div className={classes.headerBar}>\n        <LinkViews model={model} />\n        <SquareView model={model} />\n        {ExtraButtons}\n        {!anyShowHeaders\n          ? model.views.map(view => (\n              <div key={view.id} className={classes.searchBox}>\n                <div className={classes.searchContainer}>\n                  <SearchBox model={view} showHelp={false} />\n                </div>\n                <div className={classes.bp}>\n                  <Typography\n                    variant=\"body2\"\n                    color=\"textSecondary\"\n                    className={classes.bp}\n                  >\n                    {Math.round(view.coarseTotalBp).toLocaleString('en-US')} bp\n                  </Typography>\n                </div>\n              </div>\n            ))\n          : null}\n\n        <div className={classes.spacer} />\n      </div>\n    )\n  },\n)\n\nexport default Header\n","import React from 'react'\nimport { observer } from 'mobx-react'\nimport { getConf } from '@jbrowse/core/configuration'\nimport { AnyConfigurationModel } from '@jbrowse/core/configuration/configurationSchema'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { getEnv } from 'mobx-state-tree'\nimport { ResizeHandle } from '@jbrowse/core/ui'\nimport { LinearComparativeViewModel } from '../model'\nimport Header from './Header'\n\nconst useStyles = makeStyles(() => ({\n  container: {\n    display: 'grid',\n  },\n  overlay: {\n    zIndex: 100,\n    gridArea: '1/1',\n  },\n  content: {\n    gridArea: '1/1',\n    position: 'relative',\n  },\n  grid: {\n    display: 'grid',\n  },\n  relative: {\n    position: 'relative',\n  },\n}))\n\ntype LCV = LinearComparativeViewModel\n\nconst Overlays = observer(({ model }: { model: LCV }) => {\n  const classes = useStyles()\n  return (\n    <>\n      {model.tracks.map(track => {\n        const [display] = track.displays\n        const { RenderingComponent } = display\n        const trackId = getConf(track, 'trackId')\n        return RenderingComponent ? (\n          <div\n            className={classes.overlay}\n            key={trackId}\n            style={{\n              height: model.middleComparativeHeight,\n              overflow: 'hidden',\n            }}\n          >\n            <RenderingComponent model={display} />\n          </div>\n        ) : null\n      })}\n    </>\n  )\n})\n\n// The comparative is in the middle of the views\nconst MiddleComparativeView = observer(\n  ({ model, ExtraButtons }: { ExtraButtons?: React.ReactNode; model: LCV }) => {\n    const classes = useStyles()\n    const { views } = model\n    const { ReactComponent } = getEnv(model).pluginManager.getViewType(\n      views[0].type,\n    )\n\n    return (\n      <div>\n        <Header ExtraButtons={ExtraButtons} model={model} />\n        <div className={classes.container}>\n          <ReactComponent model={views[0]} />\n          <div className={classes.grid}>\n            <Overlays model={model} />\n          </div>\n          <ResizeHandle\n            onDrag={n =>\n              model.setMiddleComparativeHeight(\n                model.middleComparativeHeight + n,\n              )\n            }\n            style={{\n              height: 4,\n              background: '#ccc',\n            }}\n          />\n          <ReactComponent model={views[1]} />\n        </div>\n      </div>\n    )\n  },\n)\nconst OverlayComparativeView = observer(\n  ({ model, ExtraButtons }: { ExtraButtons?: React.ReactNode; model: LCV }) => {\n    const classes = useStyles()\n    const { views } = model\n    const { pluginManager } = getEnv(model)\n    return (\n      <div>\n        <Header model={model} ExtraButtons={ExtraButtons} />\n        <div className={classes.container}>\n          <div className={classes.content}>\n            <div className={classes.relative}>\n              {views.map(view => {\n                const { ReactComponent } = pluginManager.getViewType(view.type)\n                return <ReactComponent key={view.id} model={view} />\n              })}\n            </div>\n            <Overlays model={model} />\n          </div>\n        </div>\n      </div>\n    )\n  },\n)\n\nconst LinearComparativeView = observer(\n  (props: { ExtraButtons?: React.ReactNode; model: LCV }) => {\n    const { model } = props\n    const middle = model.tracks.some(({ displays }) =>\n      displays.some((d: AnyConfigurationModel) => getConf(d, 'middle')),\n    )\n    return middle ? (\n      <MiddleComparativeView {...props} />\n    ) : (\n      <OverlayComparativeView {...props} />\n    )\n  },\n)\n\nexport default LinearComparativeView\n"],"sourceRoot":""}