/*! For license information please see 2142.1c071447.chunk.js.LICENSE.txt */
(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[2142],{52142:function(e,t,r){"use strict";r.d(t,{lr:function(){return Ve},ED:function(){return Te}});var n=r(33028),a=r(32723),i=r(34795),o=r(9249),s=r(87371),c=r(67221),u=r(97960).lW;function f(e){return u.from((0,c.inflate)(e))}var h=r(73794),l=r.n(h),d=r(97779),v=r.n(d),p=r(45754),g=r(13820),y=r(30364),m=function(e){(0,p.Z)(r,e);var t=(0,g.Z)(r);function r(){return(0,o.Z)(this,r),t.apply(this,arguments)}return(0,s.Z)(r)}((0,y.Z)(Error)),w=function(e){(0,p.Z)(r,e);var t=(0,g.Z)(r);function r(){return(0,o.Z)(this,r),t.apply(this,arguments)}return(0,s.Z)(r)}((0,y.Z)(Error)),b=function(e){(0,p.Z)(r,e);var t=(0,g.Z)(r);function r(){return(0,o.Z)(this,r),t.apply(this,arguments)}return(0,s.Z)(r)}(m),k=function(e){(0,p.Z)(r,e);var t=(0,g.Z)(r);function r(){return(0,o.Z)(this,r),t.apply(this,arguments)}return(0,s.Z)(r)}(m),S=function(e){(0,p.Z)(r,e);var t=(0,g.Z)(r);function r(){return(0,o.Z)(this,r),t.apply(this,arguments)}return(0,s.Z)(r)}(m),A=12,R=4096,_=1<<23,B=(0,s.Z)((function e(){(0,o.Z)(this,e),this.F=void 0,this.C=void 0})),x=(0,s.Z)((function e(){(0,o.Z)(this,e),this.fc=new Array(256);for(var t=0;t<this.fc.length;t+=1)this.fc[t]=new B;this.R=null}));function C(e,t,r,n){return r*(e>>n)+(e&(1<<n)-1)-t}var M={FC:B,AriDecoder:x,Symbol:(0,s.Z)((function e(){(0,o.Z)(this,e),this.start=void 0,this.freq=void 0})),symbolInit:function(e,t,r){if(!(t<=65536))throw new b("assertion failed: start <= 1<<16");if(!(r<=65536-t))throw new b("assertion failed: freq <= 1<<16");e.start=t,e.freq=r},advanceStep:C,advanceSymbolStep:function(e,t,r){return C(e,t.start,t.freq,r)},get:function(e,t){return e&(1<<t)-1},advanceSymbol:function(e,t,r,n){return function(e,t,r,n,a){if((e=n*(e>>a)+(e&(1<<a)-1)-r)<_)do{e=e<<8|255&t.get()}while(e<_);return e}(e,t,r.start,r.freq,n)},renormalize:function(e,t){if(e<_)do{e=e<<8|255&t.get()}while(e<_);return e}};function E(e){if(!e)throw new b("assertion failed")}var Z=r(97960).lW;function I(e,t){for(var r=new M.AriDecoder,n=new Array(256),a=0;a<n.length;a+=1)n[a]=new M.Symbol;return function(e,t,r){var n=0,a=0,i=255&e.get();do{null==t.fc[i]&&(t.fc[i]=new M.FC),t.fc[i].F=255&e.get(),t.fc[i].F>=128&&(t.fc[i].F&=-129,t.fc[i].F=(127&t.fc[i].F)<<8|255&e.get()),t.fc[i].C=a,M.symbolInit(r[i],t.fc[i].C,t.fc[i].F),t.R||(t.R=new Array(R)),t.R.fill(i,a,a+t.fc[i].F),a+=t.fc[i].F,0===n&&i+1===(255&e.getByteAt(e.position()))?(i=255&e.get(),n=255&e.get()):0!==n?(n-=1,i+=1):i=255&e.get()}while(0!==i);E(a<R)}(e,r,n),function(e,t,r,n){for(var a,i=e.getInt(),o=e.getInt(),s=e.getInt(),c=e.getInt(),u=n.remaining(),f=-4&u,h=0;h<f;h+=4){var l=t.R[M.get(i,A)],d=t.R[M.get(o,A)],v=t.R[M.get(s,A)],p=t.R[M.get(c,A)];n.putAt(h,l),n.putAt(h+1,d),n.putAt(h+2,v),n.putAt(h+3,p),i=M.advanceSymbolStep(i,r[255&l],A),o=M.advanceSymbolStep(o,r[255&d],A),s=M.advanceSymbolStep(s,r[255&v],A),c=M.advanceSymbolStep(c,r[255&p],A),i=M.renormalize(i,e),o=M.renormalize(o,e),s=M.renormalize(s,e),c=M.renormalize(c,e)}switch(n.setPosition(f),3&u){case 0:break;case 1:a=t.R[M.get(i,A)],M.advanceSymbol(i,e,r[255&a],A),n.put(a);break;case 2:a=t.R[M.get(i,A)],M.advanceSymbol(i,e,r[255&a],A),n.put(a),a=t.R[M.get(o,A)],M.advanceSymbol(o,e,r[255&a],A),n.put(a);break;case 3:a=t.R[M.get(i,A)],M.advanceSymbol(i,e,r[255&a],A),n.put(a),a=t.R[M.get(o,A)],M.advanceSymbol(o,e,r[255&a],A),n.put(a),a=t.R[M.get(s,A)],M.advanceSymbol(s,e,r[255&a],A),n.put(a);break;default:throw new b("invalid output size encountered during rANS decoding")}n.setPosition(0)}(e,r,n,t),t}function F(e,t){for(var r=new Array(256),n=0;n<r.length;n+=1)r[n]=new M.AriDecoder;for(var a=new Array(256),i=0;i<a.length;i+=1){a[i]=new Array(256);for(var o=0;o<a[i].length;o+=1)a[i][o]=new M.Symbol}return function(e,t,r){var n=0,a=255&e.get();do{var i=0,o=0,s=255&e.get();null==t[a]&&(t[a]=new M.AriDecoder);do{null==t[a].fc[s]&&(t[a].fc[s]=new M.FC),t[a].fc[s].F=255&e.get(),t[a].fc[s].F>=128&&(t[a].fc[s].F&=-129,t[a].fc[s].F=(127&t[a].fc[s].F)<<8|255&e.get()),t[a].fc[s].C=o,0===t[a].fc[s].F&&(t[a].fc[s].F=R),null==r[a][s]&&(r[a][s]=new M.RansDecSymbol),M.symbolInit(r[a][s],t[a].fc[s].C,t[a].fc[s].F),null==t[a].R&&(t[a].R=new Array(R)),t[a].R.fill(s,o,o+t[a].fc[s].F),E((o+=t[a].fc[s].F)<=R),0===i&&s+1===(255&e.getByteAt(e.position()))?(s=255&e.get(),i=255&e.get()):0!==i?(i-=1,s+=1):s=255&e.get()}while(0!==s);0===n&&a+1===(255&e.getByteAt(e.position()))?(a=255&e.get(),n=255&e.get()):0!==n?(n-=1,a+=1):a=255&e.get()}while(0!==a)}(e,r,a),function(e,t,r,n){for(var a=t.remaining(),i=e.getInt(),o=e.getInt(),s=e.getInt(),c=e.getInt(),u=a>>2,f=0,h=u,l=2*u,d=3*u,v=0,p=0,g=0,y=0;f<u;f+=1,h+=1,l+=1,d+=1){var m=255&r[v].R[M.get(i,A)],w=255&r[p].R[M.get(o,A)],b=255&r[g].R[M.get(s,A)],k=255&r[y].R[M.get(c,A)];t.putAt(f,m),t.putAt(h,w),t.putAt(l,b),t.putAt(d,k),i=M.advanceSymbolStep(i,n[v][m],A),o=M.advanceSymbolStep(o,n[p][w],A),s=M.advanceSymbolStep(s,n[g][b],A),c=M.advanceSymbolStep(c,n[y][k],A),i=M.renormalize(i,e),o=M.renormalize(o,e),s=M.renormalize(s,e),c=M.renormalize(c,e),v=m,p=w,g=b,y=k}for(;d<a;d+=1){var S=255&r[y].R[M.get(c,A)];t.putAt(d,S),c=M.advanceSymbol(c,e,n[y][S],A),y=S}}(e,t,r,a),t}var q=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,o.Z)(this,e),this._buffer=t,this._position=r,this.length=t.length}return(0,s.Z)(e,[{key:"get",value:function(){var e=this._buffer[this._position];return this._position+=1,e}},{key:"getByte",value:function(){return this.get()}},{key:"getByteAt",value:function(e){return this._buffer[e]}},{key:"position",value:function(){return this._position}},{key:"put",value:function(e){return this._buffer[this._position]=e,this._position+=1,e}},{key:"putAt",value:function(e,t){return this._buffer[e]=t,t}},{key:"setPosition",value:function(e){return this._position=e,e}},{key:"getInt",value:function(){var e=this._buffer.readInt32LE(this._position);return this._position+=4,e}},{key:"remaining",value:function(){return this._buffer.length-this._position}}]),e}();var U=r(17445),P=(new U._).itf8(),L={parser:(new U._).string("magic",{length:4}).uint8("majorVersion").uint8("minorVersion").string("fileId",{length:20,stripNull:!0}),maxLength:26},D={parser:(new U._).uint8("compressionMethod",{formatter:function(e){var t=["raw","gzip","bzip2","lzma","rans","rans4x16","arith","fqzcomp","tok3"][e];if(!t)throw new Error("compression method number ".concat(e," not implemented"));return t}}).uint8("contentType",{formatter:function(e){var t=["FILE_HEADER","COMPRESSION_HEADER","MAPPED_SLICE_HEADER","UNMAPPED_SLICE_HEADER","EXTERNAL_DATA","CORE_DATA"][e];if(!t)throw new Error("invalid block content type id ".concat(e));return t}}).itf8("contentId").itf8("compressedSize").itf8("uncompressedSize"),maxLength:17},W={parser:(new U._).uint32("crc32"),maxLength:4},N=(new U._).itf8("size").buffer("ents",{length:"size",formatter:function(e){function t(t,r){for(var n=e.toString("utf8",t,r),a=[],i=0;i<n.length;i+=3)a.push(n.substr(i,3));return a}var r,n=[],a=0;for(r=0;r<e.length;r+=1)e[r]||(n.push(t(a,r)),a=r+1);return r>a&&n.push(t(a,r)),n}}),z=(new U._).uint8(null,{formatter:function(e){return!!e}}),T=(new U._).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new U._).string("key",{length:2,stripNull:!1}).choice("value",{tag:"key",choices:{MI:z,UI:z,PI:z,RN:z,AP:z,RR:z,SM:(new U._).array(null,{type:"uint8",length:5}),TD:(new U._).nest(null,{type:N,formatter:function(e){return e.ents}})}})});function H(e){for(var t={},r=0;r<e.ents.length;r+=1){var n=e.ents[r],a=n.key,i=n.value;t[a]&&console.warn("duplicate key ".concat(a," in map")),t[a]=i}return t}var O={cramFileDefinition:L,cramBlockHeader:D,cramBlockCrc32:W};function Q(e){return"number"===typeof e.refSeqId}var V={cramUnmappedSliceHeader:function(e){var t=0,r=(new U._).itf8("numRecords");t+=5,e>=3?(r=r.ltf8("recordCounter"),t+=9):2===e&&(r=r.itf8("recordCounter"),t+=5),r=r.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:P,length:"numContentIds"}),t+=10,e>=2&&(r=r.array("md5",{type:"uint8",length:16}),t+=16);return{parser:r,maxLength:function(e){return t+5*e}}},cramMappedSliceHeader:function(e){var t=(new U._).itf8("refSeqId").itf8("refSeqStart").itf8("refSeqSpan").itf8("numRecords"),r=20;e>=3?(t=t.ltf8("recordCounter"),r+=9):2===e&&(t=t.itf8("recordCounter"),r+=5),t=t.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:P,length:"numContentIds"}).itf8("refBaseBlockId"),r+=15,e>=2&&(t=t.array("md5",{type:"uint8",length:16}),r+=16);return{parser:t,maxLength:function(e){return r+5*e}}},cramEncoding:function(e){return{parser:(new U._).namely("cramEncoding").itf8("codecId").itf8("parametersBytes").choice("parameters",{tag:"codecId",choices:{0:new U._,1:(new U._).itf8("blockContentId"),2:(new U._).itf8("offset").itf8("M"),3:U._.start().itf8("numCodes").array("symbols",{length:"numCodes",type:P}).itf8("numLengths").array("bitLengths",{length:"numLengths",type:P}),4:U._.start().nest("lengthsEncoding",{type:"cramEncoding"}).nest("valuesEncoding",{type:"cramEncoding"}),5:(new U._).uint8("stopByte").itf8("blockContentId"),6:(new U._).itf8("offset").itf8("length"),7:(new U._).itf8("offset").itf8("K"),8:(new U._).itf8("offset").itf8("log2m"),9:(new U._).itf8("offset")}})}},cramDataSeriesEncodingMap:function(e){return(new U._).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new U._).string("key",{length:2,stripNull:!1}).nest("value",{type:this.cramEncoding(e).parser})})},cramTagEncodingMap:function(e){return(new U._).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new U._).itf8("key",{formatter:function(e){return String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)}}).nest("value",{type:this.cramEncoding(e).parser})})},cramCompressionHeader:function(e){var t=new U._;return{parser:t=t.nest("preservation",{type:T,formatter:H}).nest("dataSeriesEncoding",{type:this.cramDataSeriesEncodingMap(e),formatter:H}).nest("tagEncoding",{type:this.cramTagEncodingMap(e),formatter:H})}},cramContainerHeader1:function(e){var t=(new U._).int32("length").itf8("refSeqId").itf8("refSeqStart").itf8("alignmentSpan").itf8("numRecords"),r=24;return e>=3?(t=t.ltf8("recordCounter"),r+=9):2===e&&(t=t.itf8("recordCounter"),r+=5),e>1&&(t=t.ltf8("numBases"),r+=9),{parser:t=t.itf8("numBlocks").itf8("numLandmarks"),maxLength:r+=10}},cramContainerHeader2:function(e){var t=(new U._).itf8("numLandmarks").array("landmarks",{type:(new U._).itf8(),length:"numLandmarks"}),r=0;return e>=3&&(t=t.uint32("crc32"),r=4),{parser:t,maxLength:function(e){return 5+5*e+r}}}};function j(e){var t=Object.assign({},O);return Object.keys(V).forEach((function(r){t[r]=V[r](e)})),t}var G=r(39989),X=r.n(G),K=r(70920),Y=r.n(K),J=function(e){(0,p.Z)(r,e);var t=(0,g.Z)(r);function r(){return(0,o.Z)(this,r),t.apply(this,arguments)}return(0,s.Z)(r)}((0,y.Z)(Error));function $(e,t,r){var n=0;if(t.bytePosition+(7-t.bitPosition+r)/8>e.length)throw new J("read error during decoding. the file seems to be truncated.");for(var a=r;a;a--)n<<=1,n|=e[t.bytePosition]>>t.bitPosition&1,t.bitPosition-=1,t.bitPosition<0&&(t.bytePosition+=1),t.bitPosition&=7;return n}function ee(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=t.parse(e),o=i.offset,s=i.result;return(0,n.Z)((0,n.Z)({},s),{},{_endPosition:o+a,_size:o-r})}function te(e,t){var r=e.prototype[t],n="_memo_".concat(t);e.prototype[t]=function(){var e=this;if(!(n in this)){var t=r.call(this);this[n]=t,Promise.resolve(t).catch((function(){delete e[n]}))}return this[n]}}function re(e){return Y()(e.toUpperCase().replace(/[^\x21-\x7e]/g,""))}var ne=r(68079),ae={CRAM_FLAG_PRESERVE_QUAL_SCORES:1,CRAM_FLAG_DETACHED:2,CRAM_FLAG_MATE_DOWNSTREAM:4,CRAM_FLAG_NO_SEQ:8,CRAM_FLAG_MASK:15,CRAM_M_REVERSE:1,CRAM_M_UNMAP:2,BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048,BAM_CMATCH:0,BAM_CINS:1,BAM_CDEL:2,BAM_CREF_SKIP:3,BAM_CSOFT_CLIP:4,BAM_CHARD_CLIP:5,BAM_CPAD:6,BAM_CEQUAL:7,BAM_CDIFF:8,BAM_CBACK:9,BAM_CIGAR_STR:"MIDNSHP:XB",BAM_CIGAR_SHIFT:4,BAM_CIGAR_MASK:15,BAM_CIGAR_TYPE:246183},ie=r(41361),oe=r(96234),se=r(62094),ce=r.n(se);var ue={a:0,A:0,c:1,C:1,g:2,G:2,t:3,T:3,n:4,N:4};function fe(e){var t,r={},n=(0,ie.Z)(e);try{var a=function(){var e=(0,oe.Z)(t.value,2),n=e[0],a=e[1];r["is"+a]=function(e){return!!(e&n)},r["set"+a]=function(e){return e|n}};for(n.s();!(t=n.n()).done;)a()}catch(i){n.e(i)}finally{n.f()}return r}var he=fe([[1,"Paired"],[2,"ProperlyPaired"],[4,"SegmentUnmapped"],[8,"MateUnmapped"],[16,"ReverseComplemented"],[32,"MateReverseComplemented"],[64,"Read1"],[128,"Read2"],[256,"Secondary"],[512,"FailedQc"],[1024,"Duplicate"],[2048,"Supplementary"]]),le=fe([[1,"PreservingQualityScores"],[2,"Detached"],[4,"WithMateDownstream"],[8,"DecodeSequenceAsStar"]]),de=fe([[1,"OnNegativeStrand"],[2,"Unmapped"]]),ve=function(){function e(t){var r=t.flags,n=t.cramFlags,a=t.readLength,i=t.mappingQuality,s=t.lengthOnRef,c=t.qualityScores,u=t.mateRecordNumber,f=t.readBases,h=t.readFeatures,l=t.mateToUse,d=t.readGroupId,v=t.readName,p=t.sequenceId,g=t.uniqueId,y=t.templateSize,m=t.alignmentStart,w=t.tags;(0,o.Z)(this,e),this.flags=r,this.cramFlags=n,this.readLength=a,this.mappingQuality=i,this.lengthOnRef=s,this.qualityScores=c,f&&(this.readBases=f),this.readGroupId=d,this.readName=v,this.sequenceId=p,this.uniqueId=g,this.templateSize=y,this.alignmentStart=m,this.tags=w,h&&(this.readFeatures=h),l&&(this.mate={flags:l.mateFlags,readName:l.mateReadName,sequenceId:l.mateSequenceId,alignmentStart:l.mateAlignmentStart}),u&&(this.mateRecordNumber=u)}return(0,s.Z)(e,[{key:"isPaired",value:function(){return!!(this.flags&ae.BAM_FPAIRED)}},{key:"isProperlyPaired",value:function(){return!!(this.flags&ae.BAM_FPROPER_PAIR)}},{key:"isSegmentUnmapped",value:function(){return!!(this.flags&ae.BAM_FUNMAP)}},{key:"isMateUnmapped",value:function(){return!!(this.flags&ae.BAM_FMUNMAP)}},{key:"isReverseComplemented",value:function(){return!!(this.flags&ae.BAM_FREVERSE)}},{key:"isMateReverseComplemented",value:function(){return!!(this.flags&ae.BAM_FMREVERSE)}},{key:"isRead1",value:function(){return!!(this.flags&ae.BAM_FREAD1)}},{key:"isRead2",value:function(){return!!(this.flags&ae.BAM_FREAD2)}},{key:"isSecondary",value:function(){return!!(this.flags&ae.BAM_FSECONDARY)}},{key:"isFailedQc",value:function(){return!!(this.flags&ae.BAM_FQCFAIL)}},{key:"isDuplicate",value:function(){return!!(this.flags&ae.BAM_FDUP)}},{key:"isSupplementary",value:function(){return!!(this.flags&ae.BAM_FSUPPLEMENTARY)}},{key:"isDetached",value:function(){return!!(this.cramFlags&ae.CRAM_FLAG_DETACHED)}},{key:"hasMateDownStream",value:function(){return!!(this.cramFlags&ae.CRAM_FLAG_MATE_DOWNSTREAM)}},{key:"isPreservingQualityScores",value:function(){return!!(this.cramFlags&ae.CRAM_FLAG_PRESERVE_QUAL_SCORES)}},{key:"isUnknownBases",value:function(){return!!(this.cramFlags&ae.CRAM_FLAG_NO_SEQ)}},{key:"getReadBases",value:function(){if(!this.readBases&&this._refRegion){var e=function(e,t){if(!e.lengthOnRef&&!e.readLength)return null;if(e.isUnknownBases())return null;var r=e.alignmentStart-t.start;if(!e.readFeatures)return t.seq.substr(r,e.lengthOnRef).toUpperCase();for(var n="",a=r,i=0;n.length<e.readLength;)if(i<e.readFeatures.length){var o=e.readFeatures[i];if("Q"===o.code||"q"===o.code)i+=1;else if(o.pos===n.length+1)if(i+=1,"b"===o.code){var s=o.data;n+=s,a+=s.length}else"B"===o.code?(n+=o.data[0],a+=1):"X"===o.code?(n+=o.sub,a+=1):"I"===o.code?n+=o.data:"D"===o.code?a+=o.data:"i"===o.code?n+=o.data:"N"===o.code?a+=o.data:"S"===o.code?n+=o.data:"P"===o.code||o.code;else if(i<e.readFeatures.length){var c=t.seq.substr(a,e.readFeatures[i].pos-n.length-1);n+=c,a+=c.length}}else{var u=t.seq.substr(a,e.readLength-n.length);n+=u,a+=u.length}return n.toUpperCase()}(this,this._refRegion);e&&(this.readBases=e)}return this.readBases}},{key:"getPairOrientation",value:function(){if(!this.isSegmentUnmapped()&&this.isPaired()&&!this.isMateUnmapped()&&this.mate&&this.sequenceId===this.mate.sequenceId){var e=this.isReverseComplemented()?"R":"F",t=this.isMateReverseComplemented()?"R":"F",r=" ",n=" ";this.isRead1()?(r="1",n="2"):this.isRead2()&&(r="2",n="1");var a=[],i=this.templateLength||this.templateSize;if(void 0===i)throw new Error("One of templateSize and templateLength must be set");return this.alignmentStart>this.mate.alignmentStart&&i>0&&(i=-i),i>0?(a[0]=e,a[1]=r,a[2]=t,a[3]=n):(a[2]=e,a[3]=r,a[0]=t,a[1]=n),a.join("")}return null}},{key:"addReferenceSequence",value:function(e,t){this.readFeatures&&this.readFeatures.forEach((function(r){"X"===r.code&&function(e,t,r,n){if(t){var a=n.refPos-t.start,i=t.seq.charAt(a);i&&(n.ref=i);var o=ue[i];void 0===o&&(o=4);var s=r.substitutionMatrix[o][n.data];s&&(n.sub=s)}}(0,e,t,r)})),!this.readBases&&e.start<=this.alignmentStart&&e.end>=this.alignmentStart+(this.lengthOnRef||this.readLength)-1&&(this._refRegion=e)}},{key:"toJSON",value:function(){var e=this,t={};return Object.keys(this).forEach((function(r){"_"!==r.charAt(0)&&(t[r]=e[r])})),t.readBases=this.getReadBases(),t}}]),e}();function pe(e){for(var t="",r=0;r<e.length&&0!==e[r];r++)t+=String.fromCharCode(e[r]);return t}function ge(e,t){if("Z"===e)return pe(t);if("A"===e)return String.fromCharCode(t[0]);if("I"===e)return ce().fromBytesLE(t).toNumber();if("i"===e)return new Int32Array(t.buffer)[0];if("s"===e)return new Int16Array(t.buffer)[0];if("S"===e)return new Uint16Array(t.buffer)[0];if("c"===e)return new Int8Array(t.buffer)[0];if("C"===e)return t[0];if("f"===e)return new Float32Array(t.buffer)[0];if("H"===e)return Number.parseInt(pe(t).replace(/^0x/,""),16);if("B"===e)return function(e){var t=String.fromCharCode(e[0]),r=Int32Array.from(e.slice(1))[0],n=new Array(r);if(e=e.slice(5),"c"===t)for(var a=new Int8Array(e.buffer),i=0;i<r;i+=1)n[i]=a[i];else if("C"===t)for(var o=new Uint8Array(e.buffer),s=0;s<r;s+=1)n[s]=o[s];else if("s"===t)for(var c=new Int16Array(e.buffer),u=0;u<r;u+=1)n[u]=c[u];else if("S"===t)for(var f=new Uint16Array(e.buffer),h=0;h<r;h+=1)n[h]=f[h];else if("i"===t)for(var l=new Int32Array(e.buffer),d=0;d<r;d+=1)n[d]=l[d];else if("I"===t)for(var v=new Uint32Array(e.buffer),p=0;p<r;p+=1)n[p]=v[p];else{if("f"!==t)throw new Error("unknown type: "+t);for(var g=new Float32Array(e.buffer),y=0;y<r;y+=1)n[y]=g[y]}return n}(t);throw new b("Unrecognized tag type ".concat(e))}function ye(e,t,r,n,a,i,o,s,c){var u,f=t("BF"),h=t("CF");if(!Q(n.parsedContent))throw new Error;u=s>1&&-2===n.parsedContent.refSeqId?t("RI"):n.parsedContent.refSeqId;var l=t("RL"),d=t("AP");r.APdelta&&(d+=o.lastAlignmentStart),o.lastAlignmentStart=d;var v,p,g,y,m=t("RG");if(r.readNamesIncluded&&(v=pe(t("RN"))),le.isDetached(h)){var w,k=t("MF");r.readNamesIncluded||(v=w=pe(t("RN")));var S=t("NS"),A=t("NP");(k||S>-1)&&(p={mateFlags:k,mateSequenceId:S,mateAlignmentStart:A,mateReadName:w}),g=t("TS"),de.isUnmapped(k)&&(f=he.setMateUnmapped(f)),de.isOnNegativeStrand(k)&&(f=he.setMateReverseComplemented(f))}else le.isWithMateDownstream(h)&&(y=t("NF")+c+1);var R=t("TL");if(R<0)throw new b("invalid TL index");for(var _,B,x,C,M={},E=r.getTagNames(R),Z=E.length,I=0;I<Z;I+=1){var F=E[I],q=F.substr(0,2),U=F.substr(2,1),P=r.getCodecForTag(F);if(!P)throw new b("no codec defined for auxiliary tag ".concat(F));var L=P.decode(e,a,i,o);M[q]=ge(U,L)}var D=void 0;if(he.isSegmentUnmapped(f))if(le.isDecodeSequenceAsStar(h))D=null,C=null;else{for(var W=new Array(l),N=0;N<W.length;N+=1)W[N]=t("BA");if(D=String.fromCharCode.apply(String,W),le.isPreservingQualityScores(h)){C=new Array(l);for(var z=0;z<W.length;z+=1)C[z]=t("QS")}}else{var T=t("FN");if(T&&(_=function(e,t,r,n,a){var i=0,o=e-1,s=new Array(t);function c(e){var t=(0,oe.Z)(e,2),n=t[0],a=t[1],i=r(a);if("character"===n)return String.fromCharCode(i);if("string"===n){for(var o="",s=0;s<i.byteLength;s++)o+=String.fromCharCode(i[s]);return o}return"numArray"===n?i.toArray():i}for(var u=0;u<t;u+=1){var f=String.fromCharCode(r("FC")),h=r("FP"),l={B:["character","BA"],S:["string",a>1?"SC":"IN"],X:["number","BS"],D:["number","DL"],I:["string","IN"],i:["character","BA"],b:["string","BB"],q:["numArray","QQ"],Q:["number","QS"],H:["number","HC"],P:["number","PD"],N:["number","RS"]}[f];if(!l)throw new b('invalid read feature code "'.concat(f,'"'));var d=c(l),v={B:["number","QS"]}[f];v&&(d=[d,c(v)]);var p=i+=h,g=o+=h;"D"===f||"N"===f?o+=d:"I"===f||"S"===f?o-=d.length:"i"===f&&(o-=1),s[u]={code:f,pos:p,refPos:g,data:d}}return s}(d,T,t,0,s)),B=l,_){var H,O=(0,ie.Z)(_);try{for(O.s();!(H=O.n()).done;){var V=H.value,j=V.code,G=V.data;"D"===j||"N"===j?B+=G:"I"===j||"S"===j?B-=G.length:"i"===j&&(B-=1)}}catch(K){O.e(K)}finally{O.f()}}if(Number.isNaN(B)&&(console.warn("".concat(v||"".concat(u,":").concat(d)," record has invalid read features")),B=l),x=t("MQ"),le.isPreservingQualityScores(h)){C=new Array(l);for(var X=0;X<C.length;X++)C[X]=t("QS")}}return{readLength:l,sequenceId:u,cramFlags:h,flags:f,alignmentStart:d,readGroupId:m,readName:v,mateToUse:p,templateSize:g,mateRecordNumber:y,readFeatures:_,lengthOnRef:B,mappingQuality:x,qualityScores:C,readBases:D,tags:M}}function me(e,t,r,n){if(!n)throw new b("could not resolve intra-slice mate pairs, file seems truncated or malformed");var a=!!(n.mate||void 0!==n.mateRecordNumber&&n.mateRecordNumber!==t);r.readName||(r.readName=String(r.uniqueId),n.readName=r.readName),r.mate={sequenceId:n.sequenceId,alignmentStart:n.alignmentStart,uniqueId:n.uniqueId},n.readName&&(r.mate.readName=n.readName),n.mate||void 0!==n.mateRecordNumber||(n.mate={sequenceId:r.sequenceId,alignmentStart:r.alignmentStart,uniqueId:r.uniqueId},r.readName&&(n.mate.readName=r.readName)),r.flags|=ae.BAM_FPAIRED,n.flags&ae.BAM_FUNMAP&&(r.flags|=ae.BAM_FMUNMAP),r.flags&ae.BAM_FUNMAP&&(n.flags|=ae.BAM_FMUNMAP),n.flags&ae.BAM_FREVERSE&&(r.flags|=ae.BAM_FMREVERSE),r.flags&ae.BAM_FREVERSE&&(n.flags|=ae.BAM_FMREVERSE),void 0===r.templateLength&&(a?function(e,t,r){var n=function t(r){var n=[r];if(void 0!==r.mateRecordNumber&&r.mateRecordNumber>=0){var a=e[r.mateRecordNumber];if(!a)throw new b("intra-slice mate record not found, this file seems malformed");n.push.apply(n,(0,ne.Z)(t(a)))}return n}(r),a=n.map((function(e){return e.alignmentStart})),i=n.map((function(e){return e.alignmentStart+e.readLength-1})),o=Math.max.apply(Math,(0,ne.Z)(i))-Math.min.apply(Math,(0,ne.Z)(a))+1;o>=0&&n.forEach((function(e){if(void 0!==e.templateLength)throw new b("mate pair group has some members that have template lengths already, this file seems malformed");e.templateLength=o}))}(e,0,r):function(e,t){var r=Math.min(e.alignmentStart,t.alignmentStart),n=Math.max(e.alignmentStart+e.readLength-1,t.alignmentStart+t.readLength-1)-r+1;e.templateLength=n,t.templateLength=n}(r,n)),delete r.mateRecordNumber}var we=function(){function e(t,r,n){(0,o.Z)(this,e),this.container=t,this.containerPosition=r,this.file=t.file}return(0,s.Z)(e,[{key:"getHeader",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r,i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.file.getSectionParsers();case 2:return t=e.sent,e.next=5,this.container.getHeader();case 5:return r=e.sent,e.next=8,this.file.readBlock(r._endPosition+this.containerPosition);case 8:if(void 0!==(i=e.sent)){e.next=11;break}throw new Error;case 11:if("MAPPED_SLICE_HEADER"!==i.contentType){e.next=16;break}return o=ee(i.content,t.cramMappedSliceHeader.parser,0,r._endPosition),e.abrupt("return",(0,n.Z)((0,n.Z)({},i),{},{parsedContent:o}));case 16:if("UNMAPPED_SLICE_HEADER"!==i.contentType){e.next=21;break}return s=ee(i.content,t.cramUnmappedSliceHeader.parser,0,r._endPosition),e.abrupt("return",(0,n.Z)((0,n.Z)({},i),{},{parsedContent:s}));case 21:throw new b("error reading slice header block, invalid content type ".concat(i.contentType));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBlocks",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r,n,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:t=e.sent,r=t._endPosition,n=new Array(t.parsedContent.numBlocks),i=0;case 6:if(!(i<n.length)){e.next=17;break}return e.next=9,this.file.readBlock(r);case 9:if(void 0!==(o=e.sent)){e.next=12;break}throw new Error;case 12:n[i]=o,r=n[i]._endPosition;case 14:i+=1,e.next=6;break;case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCoreDataBlock",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBlocks();case 2:return t=e.sent,e.abrupt("return",t[0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getBlocksContentIdIndex",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBlocks();case 2:return t=e.sent,r={},t.forEach((function(e){"EXTERNAL_DATA"===e.contentType&&(r[e.contentId]=e)})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBlockByContentId",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBlocksContentIdIndex();case 2:return r=e.sent,e.abrupt("return",r[t]);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReferenceRegion",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r,n,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:if(Q(t=e.sent.parsedContent)){e.next=5;break}throw new Error;case 5:if(!(t.refSeqId<0)){e.next=7;break}return e.abrupt("return",void 0);case 7:return e.next=9,this.container.getCompressionScheme();case 9:if(void 0!==(r=e.sent)){e.next=12;break}throw new Error;case 12:if(!(t.refBaseBlockId>=0)){e.next=19;break}return e.next=15,this.getBlockByContentId(t.refBaseBlockId);case 15:if(n=e.sent){e.next=18;break}throw new b("embedded reference specified, but reference block does not exist");case 18:return e.abrupt("return",{seq:n.data.toString("utf8"),start:t.refSeqStart,end:t.refSeqStart+t.refSeqSpan-1,span:t.refSeqSpan});case 19:if(!r.referenceRequired&&!this.file.fetchReferenceSequenceCallback){e.next=28;break}if(this.file.fetchReferenceSequenceCallback){e.next=22;break}throw new Error("reference sequence not embedded, and seqFetch callback not provided, cannot fetch reference sequence");case 22:return e.next=24,this.file.fetchReferenceSequenceCallback(t.refSeqId,t.refSeqStart,t.refSeqStart+t.refSeqSpan-1);case 24:if((i=e.sent).length===t.refSeqSpan){e.next=27;break}throw new S("seqFetch callback returned a reference sequence of the wrong length");case 27:return e.abrupt("return",{seq:i,start:t.refSeqStart,end:t.refSeqStart+t.refSeqSpan-1,span:t.refSeqSpan});case 28:return e.abrupt("return",void 0);case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllRecords",value:function(){return this.getRecords((function(){return!0}))}},{key:"_fetchRecords",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r,i,o,s,c,u,f,h,l,d,v,p,g,y,m,w,k,S,A=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.file.getDefinition();case 2:return t=e.sent,r=t.majorVersion,e.next=6,this.container.getCompressionScheme();case 6:if(void 0!==(i=e.sent)){e.next=9;break}throw new Error;case 9:return e.next=11,this.getHeader();case 11:if(void 0!==(o=e.sent)){e.next=14;break}throw new Error;case 14:return e.next=16,this._getBlocksContentIdIndex();case 16:if(s=e.sent,!(r>1&&this.file.options.checkSequenceMD5&&Q(o.parsedContent)&&o.parsedContent.refSeqId>=0&&"0000000000000000"!==o.parsedContent.md5.join(""))){e.next=27;break}return e.next=20,this.getReferenceRegion();case 20:if(!(c=e.sent)){e.next=27;break}if(u=c.seq,f=c.start,h=c.end,l=re(u),d=o.parsedContent.md5.map((function(e){return(e<16?"0":"")+e.toString(16)})).join(""),l===d){e.next=27;break}throw new b("MD5 checksum reference mismatch for ref ".concat(o.parsedContent.refSeqId," pos ").concat(f,"..").concat(h,". recorded MD5: ").concat(d,", calculated MD5: ").concat(l));case 27:return e.next=29,this.getCoreDataBlock();case 29:v=e.sent,p={lastAlignmentStart:Q(o.parsedContent)?o.parsedContent.refSeqStart:0,coreBlock:{bitPosition:7,bytePosition:0},externalBlocks:{map:new Map,getCursor:function(e){var t=this.map.get(e);return void 0===t&&(t={bitPosition:7,bytePosition:0},this.map.set(e,t)),t}}},g=function(e){var t=i.getCodecForDataSeries(e);if(!t)throw new b("no codec defined for ".concat(e," data series"));return t.decode(A,v,s,p)},y=new Array(o.parsedContent.numRecords),m=0;case 34:if(!(m<y.length)){e.next=52;break}e.prev=35,w=ye(this,g,i,o,v,s,p,r,m),y[m]=new ve((0,n.Z)((0,n.Z)({},w),{},{uniqueId:o.contentPosition+o.parsedContent.recordCounter+m+1})),e.next=49;break;case 40:if(e.prev=40,e.t0=e.catch(35),!(e.t0 instanceof J)){e.next=48;break}return console.warn("read attempted beyond end of buffer, file seems truncated."),y=y.filter((function(e){return!!e})),e.abrupt("break",52);case 48:throw e.t0;case 49:m+=1,e.next=34;break;case 52:for(k=0;k<y.length;k+=1)void 0!==(S=y[k].mateRecordNumber)&&S>=0&&me(y,k,y[k],y[S]);return e.abrupt("return",y);case 54:case"end":return e.stop()}}),e,this,[[35,40]])})));return function(){return e.apply(this,arguments)}}()},{key:"getRecords",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r,o,s,c,u,f,h,l,d,v,p,g,y,m,w,b,k=this;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.container.filePosition+this.containerPosition,(o=this.file.featureCache.get(r.toString()))||(o=this._fetchRecords(),this.file.featureCache.set(r.toString(),o)),e.next=5,o;case 5:if(s=e.sent,!(c=s.filter(t)).length||!this.file.fetchReferenceSequenceCallback){e.next=23;break}return e.next=10,this.getHeader();case 10:if(!Q((u=e.sent).parsedContent)||!(u.parsedContent.refSeqId>=0||-2===u.parsedContent.refSeqId)){e.next=23;break}return f=u.parsedContent.refSeqId>=0?u.parsedContent.refSeqId:void 0,e.next=15,this.container.getCompressionScheme();case 15:if(void 0!==(h=e.sent)){e.next=18;break}throw new Error;case 18:for(l={},d=0;d<c.length;d+=1)v=void 0!==f?f:c[d].sequenceId,(p=l[v])||(p={id:v,start:c[d].alignmentStart,end:-1/0,seq:null},l[v]=p),(g=c[d].alignmentStart+(c[d].lengthOnRef||c[d].readLength)-1)>p.end&&(p.end=g),c[d].alignmentStart<p.start&&(p.start=c[d].alignmentStart);return e.next=22,Promise.all(Object.values(l).map(function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(-1!==t.id&&t.start<=t.end)){e.next=4;break}return e.next=3,k.file.fetchReferenceSequenceCallback(t.id,t.start,t.end);case 3:t.seq=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 22:for(y=0;y<c.length;y+=1)m=void 0!==f?f:c[y].sequenceId,(w=l[m])&&w.seq&&(b=w.seq,c[y].addReferenceSequence((0,n.Z)((0,n.Z)({},w),{},{seq:b}),h));case 23:return e.abrupt("return",c);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();"getHeader getBlocks _getBlocksContentIdIndex".split(" ").forEach((function(e){return te(we,e)}));var be=(0,s.Z)((function e(t,r){(0,o.Z)(this,e),this.parameters=t,this.dataType=r}));var ke=function(e){(0,p.Z)(r,e);var t=(0,g.Z)(r);function r(e,n){var a;if((0,o.Z)(this,r),(a=t.call(this,e,n)).codes={},a.codeBook={},a.sortedByValue=[],a.sortedCodes=[],a.sortedValuesByBitCode=[],a.sortedBitCodes=[],a.sortedBitLengthsByBitCode=[],a.bitCodeToValue=[],!["byte","int"].includes(a.dataType))throw new TypeError("".concat(a.dataType," decoding not yet implemented by HUFFMAN_INT codec"));return a.buildCodeBook(),a.buildCodes(),a.buildCaches(),0===a.sortedCodes[0].bitLength&&(a._decode=a._decodeZeroLengthCode),a}return(0,s.Z)(r,[{key:"buildCodeBook",value:function(){for(var e=this,t=new Array(this.parameters.numCodes),r=0;r<this.parameters.numCodes;r+=1)t[r]={symbol:this.parameters.symbols[r],bitLength:this.parameters.bitLengths[r]};t=t.sort((function(e,t){return e.bitLength-t.bitLength||e.symbol-t.symbol})),this.codeBook={},t.forEach((function(t){e.codeBook[t.bitLength]||(e.codeBook[t.bitLength]=[]),e.codeBook[t.bitLength].push(t.symbol)}))}},{key:"buildCodes",value:function(){var e=this;this.codes={};var t=0,r=-1;Object.entries(this.codeBook).forEach((function(n){var a=(0,oe.Z)(n,2),i=a[0],o=a[1],s=parseInt(i,10);o.forEach((function(n){var a={bitLength:s,value:n,bitCode:0};r+=1;var i=s-t;if(r<<=i,a.bitCode=r,t+=i,function(e){var t=e-(e>>1)&1431655765;return 16843009*((t=(858993459&t)+(t>>2&858993459))+(t>>4)&252645135)>>24}(r)>s)throw new b("Symbol out of range");e.codes[n]=a}))}))}},{key:"buildCaches",value:function(){this.sortedCodes=Object.values(this.codes).sort((function(e,t){return e.bitLength-t.bitLength||e.bitCode-t.bitCode})),this.sortedByValue=Object.values(this.codes).sort((function(e,t){return e.value-t.value})),this.sortedValuesByBitCode=this.sortedCodes.map((function(e){return e.value})),this.sortedBitCodes=this.sortedCodes.map((function(e){return e.bitCode})),this.sortedBitLengthsByBitCode=this.sortedCodes.map((function(e){return e.bitLength}));var e=Math.max.apply(Math,(0,ne.Z)(this.sortedBitCodes));this.bitCodeToValue=new Array(e+1).fill(-1);for(var t=0;t<this.sortedBitCodes.length;t+=1)this.bitCodeToValue[this.sortedCodes[t].bitCode]=t}},{key:"decode",value:function(e,t,r,n){return this._decode(e,t,n.coreBlock)}},{key:"_decodeZeroLengthCode",value:function(){return this.sortedCodes[0].value}},{key:"_decode",value:function(e,t,r){for(var n=t.content,a=0,i=0,o=0;o<this.sortedCodes.length;o+=1){var s=this.sortedCodes[o].bitLength;i<<=s-a,i|=$(n,r,s-a),a=s;var c=this.bitCodeToValue[i];if(c>-1&&this.sortedBitLengthsByBitCode[c]===s)return this.sortedValuesByBitCode[c];for(var u=o;this.sortedCodes[u+1].bitLength===s&&u<this.sortedCodes.length;u+=1)o+=1}throw new b("Huffman symbol not found.")}}]),r}(be),Se=function(e){(0,p.Z)(r,e);var t=(0,g.Z)(r);function r(e,n){var a;if((0,o.Z)(this,r),"int"===(a=t.call(this,e,n)).dataType)a._decodeData=a._decodeInt;else{if("byte"!==a.dataType)throw new w("".concat(a.dataType," decoding not yet implemented by EXTERNAL codec"));a._decodeData=a._decodeByte}return a}return(0,s.Z)(r,[{key:"decode",value:function(e,t,r,n){var a=this.parameters.blockContentId,i=r[a];if(!i)throw new b("no block found with content ID ".concat(a));var o=n.externalBlocks.getCursor(a);return this._decodeData(i,o)}},{key:"_decodeInt",value:function(e,t){var r=function(e,t){var r,n=t,a=e[n];if(a<128?(r=a,n+=1):a<192?(r=16383&(a<<8|e[n+1]),n+=2):a<224?(r=2097151&(a<<16|e[n+1]<<8|e[n+2]),n+=3):a<240?(r=268435455&(a<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),n+=4):(r=(15&a)<<28|e[n+1]<<20|e[n+2]<<12|e[n+3]<<4|15&e[n+4],n+=5),n>e.length)throw new J("Attempted to read beyond end of buffer; this file seems truncated.");return[r,n-t]}(e.content,t.bytePosition),n=(0,oe.Z)(r,2),a=n[0],i=n[1];return t.bytePosition=t.bytePosition+i,a}},{key:"_decodeByte",value:function(e,t){if(t.bytePosition>=e.content.length)throw new J("attempted to read beyond end of block. this file seems truncated.");return e.content[t.bytePosition++]}}]),r}(be),Ae=function(e){(0,p.Z)(r,e);var t=(0,g.Z)(r);function r(e,n){var a;if((0,o.Z)(this,r),a=t.call(this,e,n),"byteArray"!==n)throw new TypeError("byteArrayStop codec does not support data type ".concat(n));return a}return(0,s.Z)(r,[{key:"decode",value:function(e,t,r,n){var a=this.parameters.blockContentId,i=r[a];if(!i)throw new b("no block found with content ID ".concat(a));var o=n.externalBlocks.getCursor(a);return this._decodeByteArray(i,o)}},{key:"_decodeByteArray",value:function(e,t){for(var r=e.content,n=this.parameters.stopByte,a=t.bytePosition,i=t.bytePosition;r[i]!==n&&i<r.length;){if(i===r.length)throw new J("byteArrayStop reading beyond length of data buffer?");i+=1}return t.bytePosition=i+1,r.subarray(a,i)}}]),r}(be),Re=function(e){(0,p.Z)(r,e);var t=(0,g.Z)(r);function r(e,n,a){var i;if((0,o.Z)(this,r),(i=t.call(this,e,n)).instantiateCodec=a,"byteArray"!==n)throw new TypeError("byteArrayLength does not support data type ".concat(n));return i}return(0,s.Z)(r,[{key:"decode",value:function(e,t,r,n){for(var a=this._getLengthCodec().decode(e,t,r,n),i=this._getDataCodec(),o=new Uint8Array(a),s=0;s<a;s+=1)o[s]=i.decode(e,t,r,n);return o}},{key:"_getLengthCodec",value:function(){var e=this.parameters.lengthsEncoding;return this.instantiateCodec(e,"int")}},{key:"_getDataCodec",value:function(){var e=this.parameters.valuesEncoding;return this.instantiateCodec(e,"byte")}}]),r}(be);"_getLengthCodec _getDataCodec".split(" ").forEach((function(e){return te(Re,e)}));var _e=function(e){(0,p.Z)(r,e);var t=(0,g.Z)(r);function r(e,n){var a;if((0,o.Z)(this,r),"int"!==(a=t.call(this,e,n)).dataType)throw new w("".concat(a.dataType," decoding not yet implemented by BETA codec"));return a}return(0,s.Z)(r,[{key:"decode",value:function(e,t,r,n){return $(t.content,n.coreBlock,this.parameters.length)-this.parameters.offset}}]),r}(be),Be=function(e){(0,p.Z)(r,e);var t=(0,g.Z)(r);function r(e,n){var a;if((0,o.Z)(this,r),"int"!==(a=t.call(this,e,n)).dataType)throw new w("".concat(a.dataType," decoding not yet implemented by GAMMA codec"));return a}return(0,s.Z)(r,[{key:"decode",value:function(e,t,r,n){for(var a=1;0===$(t.content,n.coreBlock,1);)a+=1;return($(t.content,n.coreBlock,a-1)|1<<a-1)-this.parameters.offset}}]),r}(be),xe={1:Se,3:ke,4:Re,5:Ae,6:_e,7:function(e){(0,p.Z)(r,e);var t=(0,g.Z)(r);function r(e,n){var a;if((0,o.Z)(this,r),"int"!==(a=t.call(this,e,n)).dataType)throw new w("".concat(a.dataType," decoding not yet implemented by SUBEXP codec"));return a}return(0,s.Z)(r,[{key:"decode",value:function(e,t,r,n){for(var a,i,o=0;$(t.content,n.coreBlock,1);)o+=1;0===o?(a=this.parameters.K,i=$(t.content,n.coreBlock,a)):i=1<<(a=o+this.parameters.K-1)|$(t.content,n.coreBlock,a);return i-this.parameters.offset}}]),r}(be),9:Be};function Ce(e,t){var r,n=(r="ignore"===t?0:e.codecId,xe[r]);if(!n)throw new w("no codec implemented for codec ID ".concat(e.codecId));return new n(e.parameters,t,Ce)}var Me={BF:"int",CF:"int",RI:"int",RL:"int",AP:"int",RG:"int",MF:"int",NS:"int",NP:"int",TS:"int",NF:"int",TC:"byte",TN:"int",FN:"int",FC:"byte",FP:"int",BS:"byte",IN:"byteArray",SC:"byteArray",DL:"int",BA:"byte",BB:"byteArray",RS:"int",PD:"int",HC:"int",MQ:"int",RN:"byteArray",QS:"byte",QQ:"byteArray",TL:"int"};var Ee=function(){function e(t){(0,o.Z)(this,e),this.dataSeriesCodecCache={},this.tagCodecCache={},this.tagEncoding={},this.readNamesIncluded=t.preservation.RN,this.APdelta=t.preservation.AP,this.referenceRequired=!!t.preservation.RR,this.tagIdsDictionary=t.preservation.TD,this.substitutionMatrix=function(e){for(var t=new Array(5),r=0;r<5;r+=1)t[r]=new Array(4);return t[0][e[0]>>6&3]="C",t[0][e[0]>>4&3]="G",t[0][e[0]>>2&3]="T",t[0][e[0]>>0&3]="N",t[1][e[1]>>6&3]="A",t[1][e[1]>>4&3]="G",t[1][e[1]>>2&3]="T",t[1][e[1]>>0&3]="N",t[2][e[2]>>6&3]="A",t[2][e[2]>>4&3]="C",t[2][e[2]>>2&3]="T",t[2][e[2]>>0&3]="N",t[3][e[3]>>6&3]="A",t[3][e[3]>>4&3]="C",t[3][e[3]>>2&3]="G",t[3][e[3]>>0&3]="N",t[4][e[4]>>6&3]="A",t[4][e[4]>>4&3]="C",t[4][e[4]>>2&3]="G",t[4][e[4]>>0&3]="T",t}(t.preservation.SM),this.dataSeriesEncoding=t.dataSeriesEncoding,this.tagEncoding=t.tagEncoding,this.preservation=t.preservation,this._size=t._size,this._endPosition=t._endPosition}return(0,s.Z)(e,[{key:"getCodecForTag",value:function(e){if(!this.tagCodecCache[e]){var t=this.tagEncoding[e];t&&(this.tagCodecCache[e]=Ce(t,"byteArray"))}return this.tagCodecCache[e]}},{key:"getTagNames",value:function(e){return this.tagIdsDictionary[e]}},{key:"getCodecForDataSeries",value:function(e){var t=this.dataSeriesCodecCache[e];if(void 0===t){var r=this.dataSeriesEncoding[e];if(r){var n=Me[e];if(!n)throw new b("data series name ".concat(e," not defined in file compression header"));t=Ce(r,n),this.dataSeriesCodecCache[e]=t}}return t}},{key:"toJSON",value:function(){var e=this,t={};return Object.keys(this).forEach((function(r){/Cache$/.test(r)||(t[r]=e[r])})),t}}]),e}(),Ze=r(97960).lW,Ie=function(){function e(t,r){(0,o.Z)(this,e),this.file=t,this.filePosition=r}return(0,s.Z)(e,[{key:"getHeader",value:function(){return this._readContainerHeader(this.filePosition)}},{key:"getCompressionHeaderBlock",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:if(e.sent.numRecords){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.file.getSectionParsers();case 7:return t=e.sent,e.next=10,this.getFirstBlock();case 10:if(void 0!==(r=e.sent)){e.next=13;break}return e.abrupt("return",void 0);case 13:if("COMPRESSION_HEADER"===r.contentType){e.next=15;break}throw new b("invalid content type ".concat(r.contentType," in what is supposed to be the compression header block"));case 15:return i=ee(r.content,t.cramCompressionHeader.parser,0,r.contentPosition),e.abrupt("return",(0,n.Z)((0,n.Z)({},r),{},{parsedContent:i}));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFirstBlock",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:return t=e.sent,e.abrupt("return",this.file.readBlock(t._endPosition));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCompressionScheme",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompressionHeaderBlock();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.abrupt("return",new Ee(t.parsedContent));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSlice",value:function(e,t){return new we(this,e,t)}},{key:"_readContainerHeader",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r,n,i,o,s,c,u,f,h,l,d;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.file.getSectionParsers();case 2:return r=e.sent,n=r.cramContainerHeader1,i=r.cramContainerHeader2,e.next=6,this.file.stat();case 6:if(o=e.sent,s=o.size,!(t>=s)){e.next=10;break}return e.abrupt("return",void 0);case 10:return c=Ze.allocUnsafe(n.maxLength),e.next=13,this.file.read(c,0,n.maxLength,t);case 13:if(u=ee(c,n.parser),a=u.numLandmarks,f=-128&a?-16384&a?-2097152&a?-268435456&a?5:4:3:2:1,!(t+u.length>=s)){e.next=18;break}return console.warn("".concat(this.file,": container header at ").concat(t," indicates that the container has length ").concat(u.length,", which extends beyond the length of the file. Skipping this container.")),e.abrupt("return",void 0);case 18:return h=Ze.allocUnsafe(i.maxLength(u.numLandmarks)),e.next=21,this.file.read(h,0,i.maxLength(u.numLandmarks),t+u._size-f);case 21:if(l=ee(h,i.parser),!this.file.validateChecksums||void 0===l.crc32){e.next=25;break}return e.next=25,this.file.checkCrc32(t,u._size+l._size-f-4,l.crc32,"container header beginning at position ".concat(t));case 25:return d=Object.assign(u,l,{_size:u._size+l._size-f,_endPosition:u._size+l._size-f+t}),e.abrupt("return",d);case 27:case"end":return e.stop()}var a}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();"getHeader getCompressionHeaderBlock getCompressionScheme".split(" ").forEach((function(e){return te(Ie,e)}));var Fe=r(33472);var qe=r(18973);function Ue(e){var t=Fe.parse(e),r=t.protocol,n=t.pathname;return"file:"===r?new qe.S9(unescape(function(e){if(null===e||void 0===e)throw new Error("Value must not be nullish.");return e}(n))):new qe.kC(e)}function Pe(e,t,r){if(r)return r;if(e)return Ue(e);if(t)return new qe.S9(t);throw new Error("no url, path, or filehandle provided, cannot open")}var Le=r(46840);function De(e){var t=e.split(/\r?\n/),r=[];return t.forEach((function(e){var t=e.split(/\t/),n=(0,Le.Z)(t),a=n[0],i=n.slice(1).map((function(e){var t=e.split(":",2),r=(0,oe.Z)(t,2);return{tag:r[0],value:r[1]}}));a&&r.push({tag:a.substr(1),data:i})})),r}var We=r(97960).lW;var Ne=function(){function e(t){var r;if((0,o.Z)(this,e),this.file=Pe(t.url,t.path,t.filehandle),this.validateChecksums=!0,this.fetchReferenceSequenceCallback=t.seqFetch,this.options={checkSequenceMD5:t.checkSequenceMD5,cacheSize:null!==(r=t.cacheSize)&&void 0!==r?r:2e4},this.featureCache=new(v())({maxSize:this.options.cacheSize}),function(){var e=new Uint32Array([287454020]),t=new Uint8Array(e.buffer);return 68===t[0]?0:17===t[0]?1:2}()>0)throw new Error("Detected big-endian machine, may be unable to run")}return(0,s.Z)(e,[{key:"read",value:function(e,t,r,n){return this.file.read(e,t,r,n)}},{key:"stat",value:function(){return this.file.stat()}},{key:"getDefinition",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=We.allocUnsafe(L.maxLength),e.next=3,this.file.read(t,0,L.maxLength,0);case 3:if(2===(r=L.parser.parse(t).result).majorVersion||3===r.majorVersion){e.next=6;break}throw new w("CRAM version ".concat(r.majorVersion," not supported"));case 6:return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSamHeader",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r,n,i,o;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContainerById(0);case 2:if(t=e.sent){e.next=5;break}throw new b("file contains no containers");case 5:return e.next=7,t.getFirstBlock();case 7:if(void 0!==(r=e.sent)){e.next=10;break}return e.abrupt("return",De(""));case 10:return n=r.content,i=n.readInt32LE(0),4,o=n.toString("utf8",4,4+i),this.header=o,e.abrupt("return",De(o));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeaderText",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSamHeader();case 2:return e.abrupt("return",this.header);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSectionParsers",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDefinition();case 2:return t=e.sent,r=t.majorVersion,e.abrupt("return",j(r));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getContainerById",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r,n,i,o,s,c,u,f,h,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSectionParsers();case 2:return r=e.sent,n=r.cramFileDefinition.maxLength,e.next=6,this.file.stat();case 6:i=e.sent,o=i.size,s=r.cramContainerHeader1,u=0;case 10:if(!(u<=t)){e.next=38;break}if(!(n+s.maxLength+8>=o)){e.next=13;break}return e.abrupt("return",void 0);case 13:return c=this.getContainerAtPosition(n),e.next=16,c.getHeader();case 16:if(f=e.sent){e.next=19;break}throw new b("container ".concat(t," not found in file"));case 19:if(0!==u){e.next=34;break}n=f._endPosition,h=0;case 22:if(!(h<f.numBlocks)){e.next=32;break}return e.next=25,this.readBlock(n);case 25:if(void 0!==(l=e.sent)){e.next=28;break}return e.abrupt("return",void 0);case 28:n=l._endPosition;case 29:h+=1,e.next=22;break;case 32:e.next=35;break;case 34:n+=f._size+f.length;case 35:u+=1,e.next=10;break;case 38:return e.abrupt("return",c);case 39:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCrc32",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,r,n,i){var o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=We.allocUnsafe(r),e.next=3,this.file.read(o,0,r,t);case 3:if((s=l().unsigned(o))===n){e.next=6;break}throw new b("crc mismatch in ".concat(i,": recorded CRC32 = ").concat(n,", but calculated CRC32 = ").concat(s));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"containerCount",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,r,n,i,o,s,c,u,f;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSectionParsers();case 2:return t=e.sent,e.next=5,this.file.stat();case 5:r=e.sent,n=r.size,i=t.cramContainerHeader1,o=0,s=t.cramFileDefinition.maxLength;case 10:if(!(s+i.maxLength+8<n)){e.next=35;break}return e.next=13,this.getContainerAtPosition(s).getHeader();case 13:if(c=e.sent){e.next=16;break}return e.abrupt("break",35);case 16:if(0!==o){e.next=31;break}s=c._endPosition,u=0;case 19:if(!(u<c.numBlocks)){e.next=29;break}return e.next=22,this.readBlock(s);case 22:if(void 0!==(f=e.sent)){e.next=25;break}return e.abrupt("return",void 0);case 25:s=f._endPosition;case 26:u+=1,e.next=19;break;case 29:e.next=32;break;case 31:s+=c._size+c.length;case 32:o+=1,e.next=10;break;case 35:return e.abrupt("return",o);case 36:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getContainerAtPosition",value:function(e){return new Ie(this,e)}},{key:"readBlockHeader",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r,n,i,o,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSectionParsers();case 2:return r=e.sent,n=r.cramBlockHeader,e.next=6,this.file.stat();case 6:if(i=e.sent,o=i.size,!(t+n.maxLength>=o)){e.next=10;break}return e.abrupt("return",void 0);case 10:return s=We.allocUnsafe(n.maxLength),e.next=13,this.file.read(s,0,n.maxLength,t);case 13:return e.abrupt("return",ee(s,n.parser,0,t));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_parseSection",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,r){var n,i,o,s,c,u,f=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=f.length>2&&void 0!==f[2]?f[2]:t.maxLength,!(i=f.length>3&&void 0!==f[3]?f[3]:void 0)){e.next=6;break}o=i,e.next=15;break;case 6:return e.next=8,this.file.stat();case 8:if(s=e.sent,c=s.size,!(r+n>=c)){e.next=12;break}return e.abrupt("return",void 0);case 12:return o=We.allocUnsafe(n),e.next=15,this.file.read(o,0,n,r);case 15:if((u=ee(o,t.parser,0,r))._size===n){e.next=18;break}throw new b("section read error: requested size ".concat(n," does not equal parsed size ").concat(u._size));case 18:return e.abrupt("return",u);case 19:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"_uncompress",value:function(e,t,r){if("gzip"===e)f(t).copy(r);else if("bzip2"===e){var n,a=bzip2.array(t),i=bzip2.header(a),o=0;do{-1!=(n=bzip2.decompress(a,i))&&(We.from(n).copy(r,o),o+=n.length,i-=n.length)}while(-1!=n)}else if("rans"===e)!function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===e.length)return t.fill(0),t;var n=new q(e,r),a=n.get();if(0!==a&&1!==a)throw new b("Invalid rANS order ".concat(a));if(n.getInt()!==n.remaining()-4)throw new b("Incorrect input length.");var i=n.getInt(),o=new q(t||Z.allocUnsafe(i));if(o.length<i)throw new b("Output buffer too small to fit ".concat(i," bytes."));switch(a){case 0:return I(n,o);case 1:return F(n,o);default:throw new b("Invalid rANS order: ".concat(a))}}(t,r);else if("rans4x16"===e)X().r4x16_uncompress(t,r);else if("arith"===e)X().arith_uncompress(t,r);else if("fqzcomp"===e)X().fqzcomp_uncompress(t,r);else{if("tok3"!==e)throw new w("".concat(e," decompression not yet implemented"));X().tok3_uncompress(t,r)}}},{key:"readBlock",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){var r,i,o,s,c,u,f,h,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDefinition();case 2:return r=e.sent,i=r.majorVersion,e.next=6,this.getSectionParsers();case 6:return o=e.sent,e.next=9,this.readBlockHeader(t);case 9:if(void 0!==(s=e.sent)){e.next=12;break}return e.abrupt("return",void 0);case 12:if(c=s._endPosition,u=We.allocUnsafe(s.uncompressedSize),f=(0,n.Z)((0,n.Z)({},s),{},{_endPosition:c,contentPosition:c,content:u}),"raw"===s.compressionMethod){e.next=22;break}return h=We.allocUnsafe(s.compressedSize),e.next=19,this.read(h,0,s.compressedSize,c);case 19:this._uncompress(s.compressionMethod,h,u),e.next=24;break;case 22:return e.next=24,this.read(u,0,s.uncompressedSize,c);case 24:if(!(i>=3)){e.next=38;break}return e.next=27,this._parseSection(o.cramBlockCrc32,c+s.compressedSize);case 27:if(void 0!==(l=e.sent)){e.next=30;break}return e.abrupt("return",void 0);case 30:if(f.crc32=l.crc32,!this.validateChecksums){e.next=34;break}return e.next=34,this.checkCrc32(t,s._size+s.compressedSize,l.crc32,"block data");case 34:f._endPosition=l._endPosition,f._size=f.compressedSize+o.cramBlockCrc32.maxLength,e.next=40;break;case 38:f._endPosition=c+f.compressedSize,f._size=f.compressedSize;case 40:return e.abrupt("return",f);case 41:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();"getDefinition getSectionParsers getSamHeader".split(" ").forEach((function(e){return te(Ne,e)}));var ze=Ne,Te=function(){function e(t){if((0,o.Z)(this,e),t.cram?this.cram=t.cram:this.cram=new ze({url:t.cramUrl,path:t.cramPath,filehandle:t.cramFilehandle,seqFetch:t.seqFetch,checkSequenceMD5:t.checkSequenceMD5,cacheSize:t.cacheSize}),!(this.cram instanceof ze))throw new Error("invalid arguments: no cramfile");if(this.index=t.index,!this.index.getEntriesForRange)throw new Error("invalid arguments: not an index");this.fetchSizeLimit=t.fetchSizeLimit||3e6}return(0,s.Z)(e,[{key:"getRecordsForRange",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,r,n){var i,o,s,c,u,f,h,l,d,v,p,g,y,m,b,S,A,R,_,B,x,C,M,E,Z,I,F,q,U=this,P=arguments;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((o=P.length>3&&void 0!==P[3]?P[3]:{}).viewAsPairs=o.viewAsPairs||!1,o.pairAcrossChr=o.pairAcrossChr||!1,o.maxInsertSize=o.maxInsertSize||2e5,"string"!==typeof t){e.next=6;break}throw new w("string sequence names not yet supported");case 6:return s=t,e.next=9,this.index.getEntriesForRange(s,r,n);case 9:if(c=e.sent,!((u=c.map((function(e){return e.sliceBytes})).reduce((function(e,t){return e+t}),0))>this.fetchSizeLimit)){e.next=13;break}throw new k("data size of ".concat(u.toLocaleString()," bytes exceeded fetch size limit of ").concat(this.fetchSizeLimit.toLocaleString()," bytes"));case 13:return f=function(e){return e.sequenceId===t&&e.alignmentStart<=n&&void 0!==e.lengthOnRef&&e.alignmentStart+e.lengthOnRef-1>=r},e.next=16,Promise.all(c.map((function(e){return U.getRecordsInSlice(e,f)})));case 16:if(h=e.sent,l=(i=Array.prototype).concat.apply(i,(0,ne.Z)(h)),!o.viewAsPairs){e.next=62;break}d={},v={},p=0;case 22:if(!(p<l.length)){e.next=33;break}if(void 0!==(g=l[p].readName)){e.next=26;break}throw new Error;case 26:y=l[p].uniqueId,d[g]||(d[g]=0),d[g]+=1,v[y]=1;case 30:p+=1,e.next=22;break;case 33:m={},Object.entries(d).forEach((function(e){var t=(0,oe.Z)(e,2),r=t[0];1===t[1]&&(m[r]=!0)})),b=[],S=0;case 37:if(!(S<l.length)){e.next=46;break}if(A=l[S],void 0!==(R=A.readName)){e.next=42;break}throw new Error;case 42:m[R]&&A.mate&&(A.mate.sequenceId===s||o.pairAcrossChr)&&Math.abs(A.alignmentStart-A.mate.alignmentStart)<o.maxInsertSize&&(_=this.index.getEntriesForRange(A.mate.sequenceId,A.mate.alignmentStart,A.mate.alignmentStart+1),b.push(_));case 43:S+=1,e.next=37;break;case 46:return e.next=48,Promise.all(b);case 48:for(B=e.sent,x=[],C=0;C<B.length;C+=1)(M=x).push.apply(M,(0,ne.Z)(B[C]));if(x=x.sort((function(e,t){return e.toString().localeCompare(t.toString())})).filter((function(e,t,r){return!t||e.toString()!==r[t-1].toString()})),E=[],Z=[],!((I=x.map((function(e){return e.sliceBytes})).reduce((function(e,t){return e+t}),0))>this.fetchSizeLimit)){e.next=57;break}throw new Error("mate data size of ".concat(I.toLocaleString()," bytes exceeded fetch size limit of ").concat(this.fetchSizeLimit.toLocaleString()," bytes"));case 57:return x.forEach((function(e){var t=U.cram.featureCache.get(e.toString());t||(t=U.getRecordsInSlice(e,(function(){return!0})),U.cram.featureCache.set(e.toString(),t)),E.push(t);var r=t.then((function(e){for(var t=[],r=0;r<e.length;r+=1){var n=e[r];if(void 0===n.readName)throw new Error;m[n.readName]&&!v[n.uniqueId]&&t.push(n)}return t}));Z.push(r)})),e.next=60,Promise.all(Z);case 60:(F=e.sent).length&&(q=F.reduce((function(e,t){return e.concat(t)})),l=l.concat(q));case 62:return e.abrupt("return",l);case 63:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getRecordsInSlice",value:function(e,t){var r=e.containerStart,n=e.sliceStart,a=e.sliceBytes;return this.cram.getContainerAtPosition(r).getSlice(n,a).getRecords(t)}},{key:"hasDataForReferenceSequence",value:function(e){return this.index.hasDataForReferenceSequence(e)}}]),e}(),He=r(64926),Oe=r.n(He);function Qe(e,t){if(t.some((function(e){return void 0===e})))throw new b("invalid .crai index file");var r=(0,oe.Z)(t,6),n=r[0],a=r[1],i=r[2],o=r[3],s=r[4],c=r[5];e[n]||(e[n]=[]),e[n].push({start:a,span:i,containerStart:o,sliceStart:s,sliceBytes:c})}var Ve=function(){function e(t){var r=this;(0,o.Z)(this,e),this.filehandle=Pe(t.url,t.path,t.filehandle),this._parseCache=new(Oe())({cache:new(v())({maxSize:1}),fill:function(e,t){return r.parseIndex()}})}return(0,s.Z)(e,[{key:"parseIndex",value:function(){var e={};return this.filehandle.readFile().then((function(e){return 31===e[0]&&139===e[1]?f(e):e})).then((function(t){if(t.length>4&&21578050===t.readUInt32LE(0))throw new b("invalid .crai index file. note: file appears to be a .bai index. this is technically legal but please open a github issue if you need support");for(var r=[],n="",a=0;a<t.length;a+=1){var i=t[a];if(i>=48&&i<=57||!n&&45===i)n+=String.fromCharCode(i);else if(9===i)r.push(Number.parseInt(n,10)),n="";else if(10===i)r.push(Number.parseInt(n,10)),n="",Qe(e,r),r=[];else if(13!==i&&32!==i)throw new b("invalid .crai index file")}return n&&r.push(Number.parseInt(n,10)),6===r.length&&Qe(e,r),Object.entries(e).forEach((function(t){var r=(0,oe.Z)(t,2),n=r[0],a=r[1];e[n]=a.sort((function(e,t){return e.start-t.start||e.span-t.span}))})),e}))}},{key:"getIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._parseCache.get("index",null,e.signal)}},{key:"hasDataForReferenceSequence",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIndex();case 2:return e.t0=t,e.abrupt("return",!!e.sent[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEntriesForRange",value:function(){var e=(0,i.Z)((0,a.Z)().mark((function e(t,r,n){var i,o,s,c;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIndex();case 2:if(e.t0=t,i=e.sent[e.t0]){e.next=6;break}return e.abrupt("return",[]);case 6:for(o=function(e){var t=e.start,a=e.start+e.span;return t>n?-1:a<=r?1:0},s=[],c=0;c<i.length;c+=1)0===o(i[c])&&s.push(i[c]);return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}()},6779:function(e,t,r){var n=r(97960).lW,a=r(43681).default,i=r(53100).default,o=r(98870).default,s=r(78147),c=r(94467),u=r(94012),f=r(13934),h=128;e.exports=function(){"use strict";function e(){i(this,e)}return o(e,[{key:"decode",value:function(e){return this.stream=new c(e),this.decodeStream(this.stream)}},{key:"decodeStream",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.stream.ReadByte();16&r||(t=this.stream.ReadUint7());var n=t,i=1&r;if(8&r)return this.decodeStripe(this.stream,t);if(r&h){var o,s=this.decodePackMeta(this.stream),c=a(s,2);o=c[0],n=c[1]}if(32&r)var u=this.decodeCat(this.stream,n);else if(4&r)u=this.decodeExt(this.stream,n);else if(64&r)u=i?this.decodeRLE1(this.stream,n):this.decodeRLE0(this.stream,n);else u=i?this.decode1(this.stream,n):this.decode0(this.stream,n);return r&h&&(u=this.decodePack(u,o,t)),u}},{key:"encode",value:function(e,t){if(this.stream=new c("",0,1.1*e.length+100),this.stream.WriteByte(t),16&t||this.stream.WriteUint7(e.length),8&t)return n.concat([this.stream.buf.slice(0,this.stream.pos),this.encodeStripe(this.stream,e,t>>8)]);var r,i=1&t,o=e.length;if(t&h){var s=this.encodePack(e),u=a(s,3);r=u[0],e=u[1],o=u[2]}return t&h&&this.stream.WriteStream(r),64&t?i?this.encodeRLE1(e,o,this.stream):this.encodeRLE0(e,o,this.stream):i?this.encode1(e,o,this.stream):this.encode0(e,o,this.stream)}},{key:"decode0",value:function(e,t){var r=new n.allocUnsafe(t),a=e.ReadByte();0==a&&(a=256);var i=new u(a),o=new s(e);o.RangeStartDecode(e);for(var c=0;c<t;c++)r[c]=i.ModelDecode(e,o);return r}},{key:"encode0",value:function(e,t,r){for(var n=0,a=0;a<t;a++)n<e[a]&&(n=e[a]);n++;var i=new u(n);r.WriteByte(n);var o=new s(r);for(a=0;a<t;a++)i.ModelEncode(r,o,e[a]);return o.RangeFinishEncode(r),r.buf.slice(0,r.pos)}},{key:"decode1",value:function(e,t){var r=new n.allocUnsafe(t),a=e.ReadByte();0==a&&(a=256);for(var i=new Array(a),o=0;o<a;o++)i[o]=new u(a);var c=new s(e);c.RangeStartDecode(e);var f=0;for(o=0;o<t;o++)r[o]=i[f].ModelDecode(e,c),f=r[o];return r}},{key:"encode1",value:function(e,t,r){for(var n=0,a=0;a<t;a++)n<e[a]&&(n=e[a]);n++;var i=new Array(n);for(a=0;a<n;a++)i[a]=new u(n);r.WriteByte(n);var o=new s(r),c=0;for(a=0;a<t;a++)i[c].ModelEncode(r,o,e[a]),c=e[a];return o.RangeFinishEncode(r),r.buf.slice(0,r.pos)}},{key:"decodeExt",value:function(e,t){var r=new n.allocUnsafe(t),a=f.array(e.buf.slice(e.pos)),i=f.header(a),o=0;do{var s=f.decompress(a,i);-1!=s&&(n.from(s).copy(r,o),o+=s.length,i-=s.length)}while(-1!=s);return r}},{key:"encodeExt",value:function(e,t){}},{key:"decodeRLE0",value:function(e,t){var r=new n.allocUnsafe(t),a=e.ReadByte();0==a&&(a=256);for(var i=new u(a),o=new Array(258),c=0;c<=257;c++)o[c]=new u(4);var f=new s(e);f.RangeStartDecode(e);for(c=0;c<t;){r[c]=i.ModelDecode(e,f);for(var h=o[r[c]].ModelDecode(e,f),l=h,d=256;3==h;)h=o[d].ModelDecode(e,f),d=257,l+=h;for(var v=1;v<=l;v++)r[c+v]=r[c];c+=l+1}return r}},{key:"encodeRLE0",value:function(e,t,r){for(var n=0,a=0;a<t;a++)n<e[a]&&(n=e[a]);n++;var i=new u(n),o=new Array(258);for(a=0;a<=257;a++)o[a]=new u(4);r.WriteByte(n);var c=new s(r);for(a=0;a<t;){i.ModelEncode(r,c,e[a]);for(var f=1;a+f<t&&e[a+f]==e[a];)f++;f--;var h=e[a];e[a];a+=f+1;var l=f>=3?3:f;for(o[h].ModelEncode(r,c,l),f-=l,h=256;3==l;)l=f>=3?3:f,o[h].ModelEncode(r,c,l),h=257,f-=l}return c.RangeFinishEncode(r),r.buf.slice(0,r.pos)}},{key:"decodeRLE1",value:function(e,t){var r=new n.allocUnsafe(t),a=e.ReadByte();0==a&&(a=256);for(var i=new Array(a),o=0;o<a;o++)i[o]=new u(a);var c=new Array(258);for(o=0;o<=257;o++)c[o]=new u(4);var f=new s(e);f.RangeStartDecode(e);var h=0;for(o=0;o<t;){r[o]=i[h].ModelDecode(e,f),h=r[o];for(var l=c[r[o]].ModelDecode(e,f),d=l,v=256;3==l;)l=c[v].ModelDecode(e,f),v=257,d+=l;for(var p=1;p<=d;p++)r[o+p]=r[o];o+=d+1}return r}},{key:"encodeRLE1",value:function(e,t,r){for(var n=0,a=0;a<t;a++)n<e[a]&&(n=e[a]);n++;var i=new Array(n);for(a=0;a<n;a++)i[a]=new u(n);var o=new Array(258);for(a=0;a<=257;a++)o[a]=new u(4);r.WriteByte(n);for(var c=new s(r),f=(a=0,0);a<t;){i[f].ModelEncode(r,c,e[a]);for(var h=1;a+h<t&&e[a+h]==e[a];)h++;h--;var l=e[a];f=e[a],a+=h+1;var d=h>=3?3:h;for(o[l].ModelEncode(r,c,d),h-=d,l=256;3==d;)d=h>=3?3:h,o[l].ModelEncode(r,c,d),l=257,h-=d}return c.RangeFinishEncode(r),r.buf.slice(0,r.pos)}},{key:"decodePackMeta",value:function(e){this.nsym=e.ReadByte();for(var t=new Array(this.nsym),r=0;r<this.nsym;r++)t[r]=e.ReadByte();return[t,e.ReadUint7()]}},{key:"decodePack",value:function(e,t,r){var a=new n.allocUnsafe(r);if(this.nsym<=1)for(var i=0;i<r;i++)a[i]=t[0];else if(this.nsym<=2){i=0;for(var o=0;i<r;i++){if(i%8==0)var s=e[o++];a[i]=t[1&s],s>>=1}}else if(this.nsym<=4)for(i=0,o=0;i<r;i++){if(i%4==0)s=e[o++];a[i]=t[3&s],s>>=2}else{if(!(this.nsym<=16))return e;for(i=0,o=0;i<r;i++){if(i%2==0)s=e[o++];a[i]=t[15&s],s>>=4}}return a}},{key:"packMeta",value:function(e){for(var t=new c("",0,1024),r=new Array(256),n=0;n<e.length;n++)r[e[n]]=1;var a=0;for(n=0;n<256;n++)r[n]&&(r[n]=++a);t.WriteByte(a);for(n=0;n<256;n++)r[n]&&(t.WriteByte(n),r[n]--);return[t,r,a]}},{key:"encodePack",value:function(e){var t,r,i,o=this.packMeta(e),s=a(o,3);t=s[0],r=s[1],i=s[2];var c=e.length,u=0;if(i<=1)return t.WriteUint7(0),[t,new n.allocUnsafe(0),0];if(i<=2){for(var f=new n.allocUnsafe(Math.floor((c+7)/8)),h=(u=0,0);u<(-8&c);u+=8,h++)f[h]=(r[e[u+0]]<<0)+(r[e[u+1]]<<1)+(r[e[u+2]]<<2)+(r[e[u+3]]<<3)+(r[e[u+4]]<<4)+(r[e[u+5]]<<5)+(r[e[u+6]]<<6)+(r[e[u+7]]<<7);if(u<c){f[h]=0;for(var l=0;u<c;)f[h]|=r[e[u++]]<<l,l++;h++}return t.WriteUint7(h),[t,f,f.length]}if(i<=4){for(f=new n.allocUnsafe(Math.floor((c+3)/4)),u=0,h=0;u<(-4&c);u+=4,h++)f[h]=(r[e[u+0]]<<0)+(r[e[u+1]]<<2)+(r[e[u+2]]<<4)+(r[e[u+3]]<<6);if(u<c){f[h]=0;for(l=0;u<c;)f[h]|=r[e[u++]]<<l,l+=2;h++}return t.WriteUint7(h),[t,f,f.length]}if(i<=16){for(f=new n.allocUnsafe(Math.floor((c+1)/2)),u=0,h=0;u<(-2&c);u+=2,h++)f[h]=(r[e[u+0]]<<0)+(r[e[u+1]]<<4);return u<c&&(f[h++]=r[e[u++]]),t.WriteUint7(h),[t,f,f.length]}return t.WriteUint7(e.length),[t,e,e.length]}},{key:"encodeStripe",value:function(e,t,r){0==r&&(r=4);for(var n=new Array(r),a=new Array(r),i=0;i<r;i++)a[i]=Math.floor(t.length/r)+(t.length%r>i),n[i]=new Array(a[i]);for(var o=0,s=0;s<t.length;s+=r,o++)for(var u=0;u<r;u++)o<n[u].length&&(n[u][o]=t[s+u]);var f=new Array(r),h=0;for(i=0;i<r;i++){var l=this.encode(n[i],0),d=this.encode(n[i],1);f[i]=d.length<l.length?d:l,h+=f[i].length}var v=new c("",0,h+5*r+1);v.WriteByte(r);for(i=0;i<r;i++)v.WriteUint7(f[i].length);for(i=0;i<r;i++)v.WriteData(f[i],f[i].length);return v.buf.slice(0,v.buf.pos)}},{key:"decodeStripe",value:function(e,t){for(var r=e.ReadByte(),a=new Array(r),i=new Array(r),o=0;o<r;o++)a[o]=e.ReadUint7();var s=new Array(r);for(o=0;o<r;o++)i[o]=Math.floor(t/r)+(t%r>o),s[o]=this.decodeStream(e,i[o]);var c=new n.allocUnsafe(t);for(o=0;o<r;o++)for(var u=0;u<i[o];u++)c[u*r+o]=s[o][u];return c}},{key:"decodeCat",value:function(e,t){for(var r=new n.allocUnsafe(t),a=0;a<t;a++)r[a]=e.ReadByte();return r}}]),e}()},78147:function(e,t,r){var n=r(53100).default,a=r(98870).default;e.exports=function(){"use strict";function e(t){n(this,e),this.low=0,this.range=4294967295,this.code=0,this.FFnum=0,this.carry=0,this.cache=0}return a(e,[{key:"RangeStartDecode",value:function(e){for(var t=0;t<5;t++)this.code=(this.code<<8)+e.ReadByte();this.code&=4294967295,this.code>>>=0}},{key:"RangeGetFrequency",value:function(e){return this.range=Math.floor(this.range/e),Math.floor(this.code/this.range)}},{key:"RangeDecode",value:function(e,t,r,n){for(this.code-=t*this.range,this.range*=r;this.range<1<<24;)this.range*=256,this.code=256*this.code+e.ReadByte()}},{key:"RangeShiftLow",value:function(e){if(this.low<4278190080|this.carry){for(e.WriteByte(this.cache+this.carry);this.FFnum;)e.WriteByte(this.carry-1),this.FFnum--;this.cache=this.low>>>24,this.carry=0}else this.FFnum++;this.low<<=8,this.low>>>=0}},{key:"RangeEncode",value:function(e,t,r,n){var a=this.low;for(this.range=Math.floor(this.range/n),this.low+=t*this.range,this.low>>>=0,this.range*=r,this.low<a&&(0!=this.carry&&console.log("ERROR: Multiple carry"),this.carry=1);this.range<1<<24;)this.range*=256,this.RangeShiftLow(e)}},{key:"RangeFinishEncode",value:function(e){for(var t=0;t<5;t++)this.RangeShiftLow(e)}}]),e}()},94012:function(e,t,r){var n=r(53100).default,a=r(98870).default;e.exports=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;n(this,e),this.total_freq=t,this.max_sym=t-1,this.S=new Array,this.F=new Array;for(var r=0;r<=this.max_sym;r++)this.S[r]=r,this.F[r]=1}return a(e,[{key:"ModelDecode",value:function(e,t){for(var r=t.RangeGetFrequency(this.total_freq),n=0,a=0;n+this.F[a]<=r;)n+=this.F[a++];t.RangeDecode(e,n,this.F[a],this.total_freq),this.F[a]+=16,this.total_freq+=16,this.total_freq>65519&&this.ModelRenormalise();var i=this.S[a];if(a>0&&this.F[a]>this.F[a-1]){var o=this.F[a];this.F[a]=this.F[a-1],this.F[a-1]=o,o=this.S[a],this.S[a]=this.S[a-1],this.S[a-1]=o}return i}},{key:"ModelRenormalise",value:function(){this.total_freq=0;for(var e=0;e<=this.max_sym;e++)this.F[e]-=Math.floor(this.F[e]/2),this.total_freq+=this.F[e]}},{key:"ModelEncode",value:function(e,t,r){for(var n=0,a=0;this.S[a]!=r;a++)n+=this.F[a];t.RangeEncode(e,n,this.F[a],this.total_freq),this.F[a]+=16,this.total_freq+=16,this.total_freq>65519&&this.ModelRenormalise();r=this.S[a];if(a>0&&this.F[a]>this.F[a-1]){var i=this.F[a];this.F[a]=this.F[a-1],this.F[a-1]=i,i=this.S[a],this.S[a]=this.S[a-1],this.S[a-1]=i}}}]),e}()},63154:function(e,t,r){var n=r(97960).lW,a=r(80341),i=r(26290).default,o=r(94467),s=r(94012),c=r(78147);function u(e,t,r){for(var n=0,a=0,i=-1,o=new Array(1024);a<r;){var s=e.ReadByte();if(o[n++]=s,a+=s,s==i){var c=e.ReadByte();for(a+=s*c;c--;)o[n++]=s}i=s}var u=0;for(n=0,a=0;a<r;){var f=0;do{var h=o[n++];f+=h}while(255==h);for(;f--;)t[a++]=u;u++}}function f(e,t,r){var n=e.context;return t.qctx=(t.qctx<<e.qshift)+e.qtab[r],n+=(t.qctx&(1<<e.qbits)-1)<<e.qloc,e.do_pos&&(n+=e.ptab[Math.min(t.p,1023)]<<e.ploc),e.do_delta&&(n+=e.dtab[Math.min(t.delta,255)]<<e.dloc,t.delta+=t.prevq!=r?1:0,t.prevq=r),e.do_sel&&(n+=t.s<<e.sloc),t.p--,65535&n}function h(e){var t={};t.context=e.ReadUint16(),t.pflags=e.ReadByte(),t.do_dedup=2&t.pflags,t.fixed_len=4&t.pflags,t.do_sel=8&t.pflags,t.do_qmap=16&t.pflags,t.do_pos=32&t.pflags,t.do_delta=64&t.pflags,t.do_qtab=128&t.pflags,t.max_sym=e.ReadByte();var r=e.ReadByte();if(t.qbits=r>>4,t.qshift=15&r,r=e.ReadByte(),t.qloc=r>>4,t.sloc=15&r,r=e.ReadByte(),t.ploc=r>>4,t.dloc=15&r,t.qmap=new Array(256),16&t.pflags)for(var n=0;n<t.max_sym;n++)t.qmap[n]=e.ReadByte();else for(n=0;n<256;n++)t.qmap[n]=n;if(t.qtab=new Array(1024),t.qbits>0&&128&t.pflags)u(e,t.qtab,256);else for(n=0;n<256;n++)t.qtab[n]=n;return t.ptab=new Array(1024),32&t.pflags&&u(e,t.ptab,1024),t.dtab=new Array(256),64&t.pflags&&u(e,t.dtab,256),t}function l(e,t,r,n,a,i){r.max_sel>0?a.s=n.sel.ModelDecode(e,t):a.s=0,a.x=r.stab[a.s];var o=r.params[a.x];if(o.fixed_len>=0){var s=n.len[0].ModelDecode(e,t);s|=n.len[1].ModelDecode(e,t)<<8,s|=n.len[2].ModelDecode(e,t)<<16,s|=n.len[3].ModelDecode(e,t)<<24,o.fixed_len>0&&(o.fixed_len=-s)}else s=-o.fixed_len;a.len=s,r.do_rev&&(i[a.rec]=n.rev.ModelDecode(e,t)),a.is_dup=0,2&o.pflags&&n.dup.ModelDecode(e,t)&&(a.is_dup=1),a.p=s,a.delta=0,a.qctx=0,a.prevq=0,a.rec++}function d(e,t){var r=e.ReadUint7(),a=function(e){var t={max_sym:0};if(5==e.ReadByte()){var r=e.ReadByte(),n=1&r?e.ReadByte():1,a=r.nparam>1?r.nparam-1:0,i=new Array(256);if(2&r)a=e.ReadByte(),u(e,i,256);else{for(var o=0;o<n;o++)i[o]=o;for(;o<256;o++)i[o]=n-1}t.do_rev=4&r,t.stab=i,t.max_sel=a,t.params=new Array(t.nparam);for(var s=0;s<n;s++)t.params[s]=h(e),t.max_sym<t.params[s].max_sym&&(t.max_sym=t.params[s].max_sym);return t}console.error("Invalid FQZComp version number")}(e);if(a){var i=a.params,o=new Array(t.length),d=function(e){var t={};t.qual=new Array(65536);for(var r=0;r<65536;r++)t.qual[r]=new s(e.max_sym+1);for(t.len=new Array(4),r=0;r<4;r++)t.len[r]=new s(256);return t.rev=new s(2),t.dup=new s(2),e.max_sel>0&&(t.sel=new s(e.max_sel+1)),t}(a),v=new c(e);v.RangeStartDecode(e);for(var p=new n.allocUnsafe(r),g={qctx:0,prevq:0,delta:0,p:0,s:0,x:0,len:0,is_dup:0,rec:0},y=0;y<r;){if(0==g.p){if(l(e,v,a,d,g,o),g.is_dup>0&&d.dup.ModelDecode(e,v)){for(var m=0;m<len;m++)p[y+m]=p[y+m-g.len];y+=g.len,g.p=0;continue}t.push(g.len);var w=(i=a.params[g.x]).context}var b=d.qual[w].ModelDecode(e,v);p[y++]=i.qmap[b],w=f(i,g,b)}return a.do_rev&&function(e,t,r,n){var a=0,i=0;for(;i<t;){if(r[a])for(var o=0,s=n[a]-1;o<s;){var c=e[i+o];e[i+o]=e[i+s],e[i+s]=c,o++,s--}i+=n[a++]}}(p,r,o,t),p}}function v(e,t,r){for(var n=0,a=0,i=new Array(2*r),o=0;n<r;){for(var s=n;n<r&&t[n]==a;)n++;var c=n-s;do{var u=Math.min(255,c);i[o++]=u,c-=u}while(255==u);a++}var f=-1,h=new Array(2*r),l=0;for(n=0;n<o;){var d=i[n++];if(h[l++]=d,d==f){for(s=n;n<o&&i[n]==f&&n-s<255;)n++;h[l++]=n-s}else f=d}e.WriteData(h,l)}e.exports={decode:function(e,t){return d(new o(e),t)},encode:function(e,t,r){for(var n=new Array(2),u=new Array(2),f=new Array(2),h=new Array(2),l=new Array(256),d=0;d<2;d++)n[d]=new Array(256),u[d]=new Array(256),f[d]=new Array(1024),h[d]=new Array(256);(g=new o("",0,1.1*e.length+100)).WriteUint7(e.length);var p=function(e,t,r,n){for(var a,o=r[0],s=0;s<r.length&&r[s]==o;s++);var c=s==r.length?1:0,u=0,f=0;for(s=0;s<256;s++)n[0][s]=0;var h=0,l=0;for(s=0;s<e.length;s++)0==l&&(l=t[h<t.length-1?h++:h]),n[0][e[s]]++,l--;for(s=0;s<256;s++)n[0][s]&&(f<s&&(f=s),u++);var d=5,v=0;return u<=16&&(v=1,d=u<=2?1:u<=4?2:u<=8?3:4),[(a={qbits:8+(d>4),qshift:d,qloc:7,pbits:7,pshift:t[0]>128?1:0,ploc:0,dbits:d>4?0:1,dshift:3,dloc:15,sbits:0,sloc:15,do_stab:0,context:0,max_sym:f,nsym:u,do_qmap:v,do_dedup:0,fixed_len:1==t.length?1:0,do_sel:0,do_rev:0,do_pos:1,do_delta:d<=4?1:0,do_qtab:0},i(a,"qbits",8+(d>4)-(0==c)),i(a,"sbits",1),i(a,"sloc",15-(d<=4)),i(a,"do_stab",1),i(a,"do_sel",1),a)]}(e,t,r,n),g=function(e,t,r,n,a,i,o){for(var s=[0,1,1,1,2,2,2,2,2,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],c=0;c<t.length;c++)o[c]=c;for(;c<256;c++)o[c]=t.length-1;e.WriteByte(5);var u=(t.length>1?1:0)|(t[0].do_stab?2:0);if(e.WriteByte(u),1&u&&e.WriteByte(t.length),2&u){var f=1<<t[0].sbits;f>0&&f--,e.WriteByte(f),v(e,o,256)}for(var h=0;h<t.length;h++){if(e.WriteUint16(t[h].context),e.WriteByte((t[h].do_qtab?128:0)|(t[h].do_delta?64:0)|(t[h].do_pos?32:0)|(t[h].do_qmap?16:0)|(t[h].do_sel?8:0)|(t[h].fixed_len?4:0)|(t[h].do_dedup?2:0)),t[h].do_qmap?e.WriteByte(t[h].nsym):e.WriteByte(t[h].max_sym),e.WriteByte(t[h].qbits<<4|t[h].qshift),e.WriteByte(t[h].qloc<<4|t[h].sloc),e.WriteByte(t[h].ploc<<4|t[h].dloc),t[h].do_qmap){t[h].max_sym=t[h].nsym;var l=0;for(c=0;c<256;c++)r[h][c]&&(e.WriteByte(c),r[h][c]=l++);for(;l<t[h].nsym;l++)e.WriteByte(0)}else for(c=0;c<256;c++)r[h][c]=c;if(t[h].qbits>0){for(c=0;c<256;c++)n[h][c]=c;t[h].do_qtab&&v(e,n[h],256)}if(t[h].pbits>0){for(c=0;c<1024;c++)a[h][c]=Math.min((1<<t[h].pbits)-1,c>>t[h].pshift);v(e,a[h],1024)}if(t[h].dbits>0){for(c=0;c<256;c++)s[c]>(1<<t[h].dbits)-1&&(s[c]=(1<<t[h].dbits)-1);for(c=0;c<256;c++)i[h][c]=s[Math.min(s.length-1,c>>t[h].dshift)];v(e,i[h],256)}}return e}(g,p,n,u,f,h,l);return function(e,t,r,n,i,o,u,f,h,l){var d=1<<i[0].sbits;d>0&&d--;for(var v=t.length,p=0,g=0;g<i.length;g++)p<i[g].max_sym&&(p=i[g].max_sym);for(var y=new Array(65536),m=0;m<65536;m++)y[m]=new s(p+1);var w=new Array(4);for(m=0;m<4;m++)w[m]=new s(256);new s(2),new s(2);for(var b=new s(d+1),k=new c(t),S=(g=0,m=0,0);m<v;){if(0==g){var A=n[S];i[0].sbits>0&&b.ModelEncode(e,k,A);var R=l[A],_=r[Math.min(r.length-1,S++)];i[R].fixed_len?i[R].fixed_len>0&&(w[0].ModelEncode(e,k,255&_),w[1].ModelEncode(e,k,_>>8&255),w[2].ModelEncode(e,k,_>>16&255),w[3].ModelEncode(e,k,_>>24&255),i[R].fixed_len=-1):(w[0].ModelEncode(e,k,255&_),w[1].ModelEncode(e,k,_>>8&255),w[2].ModelEncode(e,k,_>>16&255),w[3].ModelEncode(e,k,_>>24&255)),i[R].do_dedup&&a.exit(1),g=_;var B=0,x=i[R].context,C=0,M=0}var E=t[m++],Z=o[R][E];y[x].ModelEncode(e,k,Z),C=(C<<i[R].qshift)+u[R][Z],x=i[R].context,x+=(C&(1<<i[R].qbits)-1)<<i[R].qloc,i[R].pbits>0&&(x+=f[R][Math.min(g,1023)]<<i[R].ploc),i[R].dbits>0&&(x+=h[R][Math.min(B,255)]<<i[R].dloc,B+=M!=Z?1:0,M=Z),i[R].do_sel&&(x+=A<<i[R].sloc),x&=65535,g--}return k.RangeFinishEncode(e),e.buf.slice(0,e.pos)}(g,e,t,r,p,n,u,f,h,l)}}},39989:function(e,t,r){"use strict";var n=r(97960).lW,a=r(42123),i=r(29670),o=r(6779),s=r(63154),c=r(80199);e.exports={r4x8_uncompress:function(e,t){a.decode(e).copy(t,0,0)},r4x16_uncompress:function(e,t){i.decode(e).copy(t,0,0)},arith_uncompress:function(e,t){o.decode(e).copy(t,0,0)},fqzcomp_uncompress:function(e,t){var r=new Array;s.decode(e,r).copy(t,0,0)},tok3_uncompress:function(e,t){var r=c.decode(e,0,"\0");n.from(r,"binary").copy(t,0,0)}}},94467:function(e,t,r){var n=r(97960).lW,a=r(53100).default,i=r(98870).default;e.exports=function(){"use strict";function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;a(this,e),0!=i?(this.buf=n.allocUnsafe(i),this.length=i):(this.buf=t,this.length=t.length),this.pos=r}return i(e,[{key:"EOF",value:function(){return this.pos>=this.length}},{key:"ReadData",value:function(e){var t=this.buf.slice(this.pos,this.pos+e);return this.pos+=e,t}},{key:"ReadByte",value:function(){var e=this.buf[this.pos];return this.pos++,e}},{key:"ReadChar",value:function(){var e=this.buf[this.pos];return this.pos++,String.fromCharCode(e)}},{key:"ReadUint16",value:function(){var e=this.ReadByte();return e|=this.ReadByte()<<8}},{key:"ReadUint32",value:function(){var e=this.buf.readInt32LE(this.pos);return this.pos+=4,e}},{key:"ReadString",value:function(){var e="";do{var t=this.buf[this.pos++];t&&(e+=String.fromCharCode(t))}while(t);return e}},{key:"ReadUint7",value:function(){var e=0;do{var t=this.ReadByte();e=e<<7|127&t}while(128&t);return e}},{key:"ReadITF8",value:function(){var e=this.buf[this.pos];return this.pos++,e>=240?(e=(15&e)<<28,e+=(this.buf[this.pos+0]<<20)+(this.buf[this.pos+1]<<12)+(this.buf[this.pos+2]<<4)+(this.buf[this.pos+3]>>4),this.pos+=4):e>=224?(e=(15&e)<<24,e+=(this.buf[this.pos+0]<<16)+(this.buf[this.pos+1]<<8)+(this.buf[this.pos+2]<<0),this.pos+=3):e>=192?(e=(31&e)<<16,e+=(this.buf[this.pos+0]<<8)+(this.buf[this.pos+1]<<0),this.pos+=2):e>=128&&(e=(63&e)<<8,e+=this.buf[this.pos],this.pos++),e}},{key:"WriteByte",value:function(e){this.buf[this.pos++]=e}},{key:"WriteChar",value:function(e){this.buf[this.pos++]=e.charCodeAt(0)}},{key:"WriteString",value:function(e){for(var t=0;t<e.length;t++)this.buf[this.pos++]=e.charCodeAt(t);this.buf[this.pos++]=0}},{key:"WriteData",value:function(e,t){for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]}},{key:"WriteStream",value:function(e){this.WriteData(e.buf,e.pos)}},{key:"WriteUint16",value:function(e){this.WriteByte(255&e),this.WriteByte(e>>8&255)}},{key:"WriteUint32",value:function(e){this.buf.writeInt32LE(e,this.pos),this.pos+=4}},{key:"WriteUint7",value:function(e){var t=0,r=e;do{t+=7,r>>=7}while(r>0);do{t-=7,this.WriteByte((e>>t&127)+((t>0)<<7))}while(t>0)}},{key:"WriteITF8",value:function(e){e<0&&(e=1+e),e<=127?this.buf[this.pos++]=e:e<=16383?(this.buf[this.pos++]=128|Math.floor(e/256),this.buf[this.pos++]=255&e):e<131071?(this.buf[this.pos++]=192|Math.floor(e/65536),this.buf[this.pos++]=255&Math.floor(e/256),this.buf[this.pos++]=255&e):e<268435455?(this.buf[this.pos++]=224|Math.floor(e/16777216),this.buf[this.pos++]=255&Math.floor(e/65536),this.buf[this.pos++]=255&Math.floor(e/256),this.buf[this.pos++]=255&e):(this.buf[this.pos++]=240|Math.floor(e/268435456),this.buf[this.pos++]=255&Math.floor(e/1048576),this.buf[this.pos++]=255&Math.floor(e/4096),this.buf[this.pos++]=255&Math.floor(e/4),this.buf[this.pos++]=15&e)}},{key:"WriteByteNeg",value:function(e){this.buf[--this.pos]=e}}]),e}()},42123:function(e,t,r){var n=r(97960).lW,a=r(94467);function i(e){return 4095&e}function o(e,t){for(var r=0;t>=e[r+1];)r++;return r}function s(e){for(var t=new Array(4096),r=0,n=0;n<4096;n++){for(;n>=e[r+1];)r++;t[n]=r}return t}function c(e,t,r){return r*(e>>12)+(4095&e)-t}function u(e,t){for(;t<1<<23;)t=(t<<8)+e.ReadByte();return t}function f(e,t){t.WriteByteNeg(e>>24&255),t.WriteByteNeg(e>>16&255),t.WriteByteNeg(e>>8&255),t.WriteByteNeg(e>>0&255)}function h(e,t,r,n,a){return e=function(e,t,r,n){for(var a=(1<<23>>n<<8)*r;e>=a;)t.WriteByteNeg(255&e),e>>=8;return e}(e,t,n,a),e=(Math.floor(e/n)<<a)+e%n+r}function l(e,t,r){for(var n=0;n<256;n++)t[n]=0;var a=e.ReadByte(),i=a,o=0;do{var s=e.ReadITF8();t[a]=s,o>0?(o--,a++):(a=e.ReadByte())==i+1&&(o=e.ReadByte()),i=a}while(0!=a);r[0]=0;for(n=0;n<=255;n++)r[n+1]=r[n]+t[n]}function d(e){for(var t=0,r=0;r<256;r++)t+=e[r];var n=4096,a=n/t;do{var i=0,o=0,s=0;t=0;for(r=0;r<256;r++)0!=e[r]&&(i<e[r]&&(i=e[r],o=r),e[r]=Math.floor(e[r]*a),0==e[r]&&(e[r]=1),t+=e[r]);t<n?e[o]+=n-t:t-n<e[o]/2&&e[o]>2?e[o]-=t-n:t!=n&&(a*=.99,s=1)}while(s)}function v(e,t){for(var r=0,n=0;n<256;n++)if(t[n]){if(r>0)r--;else if(e.WriteByte(n),n>0&&t[n-1]>0){for(r=n+1;r<256&&t[r];r++);r-=n+1,e.WriteByte(r)}e.WriteITF8(t[n])}e.WriteByte(0)}e.exports={decode:function(e){var t=new a(e),r=t.ReadByte(),f=(t.ReadUint32(),t.ReadUint32());return 0==r?function(e,t){var r=new Array(256),a=new Array(256);l(e,r,a);for(var o=s(a),f=new Array(4),h=0;h<4;h++)f[h]=e.ReadUint32();var d=new n.allocUnsafe(t);for(h=0;h<t;h++){var v=h%4,p=o[i(f[v])];d[h]=p,f[v]=c(f[v],a[p],r[p]),f[v]=u(e,f[v])}return d}(t,f):function(e,t){var r=new Array(256),a=new Array(256);!function(e,t,r){for(var n=0;n<256;n++){t[n]=new Array(256),r[n]=new Array(256);for(var a=0;a<256;a++)t[n][a]=0}var i=e.ReadByte(),o=i,s=0;do{l(e,t[i],r[i]),s>0?(s--,i++):(i=e.ReadByte())==o+1&&(s=e.ReadByte()),o=i}while(0!=i)}(e,r,a);for(var f=new Array(256),h=0;h<256;h++)f[h]=s(a[h]);for(var d=new Array(4),v=new Array(4),p=0;p<4;p++)d[p]=e.ReadUint32(),v[p]=0;var g=new n.allocUnsafe(t),y=Math.floor(t/4);for(h=0;h<y;h++)for(p=0;p<4;p++){var m=i(d[p]),w=f[v[p]][m];g[h+p*y]=w,d[p]=c(d[p],a[v[p]][w],r[v[p]][w]),d[p]=u(e,d[p]),v[p]=w}h*=4;for(;h<t;){m=i(d[3]),w=o(a[v[3]],m);g[h++]=w,d[3]=c(d[3],a[v[3]][w],r[v[3]][w]),d[3]=u(e,d[3]),v[3]=w}return g}(t,f)},encode:function(e,t){return 0==t?function(e){var t=e.length,r=new a("",0,780);r.WriteByte(0),r.WriteUint32(0),r.WriteUint32(0);var i=new Array(256);(function(e,t){for(var r=0;r<256;r++)t[r]=0;for(r=0;r<e.length;r++)t[e[r]]++})(e,i),d(i),v(r,i);var o=new Array(256);o[0]=0;for(var s=1;s<256;s++)o[s]=o[s-1]+i[s-1];var c=new Array(4);for(s=0;s<4;s++)c[s]=1<<23;var u=Math.floor(1.05*t+100),l=new a("",u,u);for(s=t-1;s>=0;s--)c[s%4]=h(c[s%4],l,o[e[s]],i[e[s]],12);for(s=3;s>=0;s--)f(c[s],l);var p=r.pos;return r.buf.writeInt32LE(p-9+(l.length-l.pos),1),r.buf.writeInt32LE(t,5),n.concat([r.buf.slice(0,r.pos),l.buf.slice(l.pos,l.length)],r.pos+l.length-l.pos)}(e):function(e){var t=e.length,r=new a("",0,198156);r.WriteByte(1),r.WriteUint32(0),r.WriteUint32(0);for(var i=new Array(256),o=new Array(256),s=new Array(256),c=0;c<256;c++)o[c]=new Array(256),s[c]=new Array(256);(function(e,t,r){for(var n=0;n<256;n++){r[n]=0;for(var a=0;a<256;a++)t[n][a]=0}var i=0;for(n=0;n<e.length;n++)r[e[n]]++,t[i][e[n]]++,i=e[n];t[0][e[1*(e.length>>2)]]++,t[0][e[2*(e.length>>2)]]++,t[0][e[3*(e.length>>2)]]++,r[0]+=3})(e,o,i),function(e,t){for(var r=0;r<256;r++)t[r]&&d(e[r])}(o,i),function(e,t,r){for(var n=0,a=0;a<256;a++)if(r[a]){if(n>0)n--;else if(e.WriteByte(a),a>0&&r[a-1]>0){for(n=a+1;n<256&&r[n];n++);n-=a+1,e.WriteByte(n)}v(e,t[a])}e.WriteByte(0)}(r,o,i);for(c=0;c<256;c++)if(i[c]){s[c][0]=0;for(var u=1;u<256;u++)s[c][u]=s[c][u-1]+o[c][u-1]}var l=new Array(4),p=new Array(4);for(u=0;u<4;u++)l[u]=1<<23,p[u]=0;var g=new a("",t,t),y=Math.floor(t/4),m=new Array(4),w=new Array(4);for(u=0;u<4;u++)m[u]=(u+1)*y-2,w[u]=e[m[u]+1];w[3]=e[t-1];for(c=t-2;c>4*y-2;c--)l[3]=h(l[3],g,s[e[c]][w[3]],o[e[c]][w[3]],12),w[3]=e[c];for(;m[0]>=0;)for(u=3;u>=0;u--){var b=e[m[u]];l[u]=h(l[u],g,s[b][w[u]],o[b][w[u]],12),w[u]=b,m[u]--}for(u=3;u>=0;u--)l[u]=h(l[u],g,s[0][w[u]],o[0][w[u]],12);for(c=3;c>=0;c--)f(l[c],g);var k=r.pos;return r.buf.writeInt32LE(k-9+(g.length-g.pos),1),r.buf.writeInt32LE(t,5),n.concat([r.buf.slice(0,r.pos),g.buf.slice(g.pos,g.length)],r.pos+g.length-g.pos)}(e)}}},29670:function(e,t,r){var n=r(97960).lW,a=r(43681).default,i=r(94467);function o(e,t){return e&(1<<t)-1}function s(e,t){for(var r=0;t>=e[r+1];)r++;return r}function c(e,t){for(var r=1<<t,n=new Array(r),a=0,i=0;i<r;i++){for(;i>=e[a+1];)a++;n[i]=a}return n}function u(e,t,r,n){return r*(e>>n)+(e&(1<<n)-1)-t}function f(e,t){return t<32768&&(t=(t<<16)+e.ReadUint16()),t}function h(e,t){t.WriteByteNeg(e>>24&255),t.WriteByteNeg(e>>16&255),t.WriteByteNeg(e>>8&255),t.WriteByteNeg(e>>0&255)}function l(e,t,r,n,a){return e=function(e,t,r,n){for(var a=(1<<31-n)*r;e>=a;)t.WriteByteNeg(e>>8&255),t.WriteByteNeg(255&e),e>>=16;return e}(e,t,n,a),e=(Math.floor(e/n)<<a)+e%n+r}function d(e,t,r){0==r&&(r=4);for(var n=new Array(r),a=new Array(r),o=0;o<r;o++)a[o]=Math.floor(t.length/r)+(t.length%r>o),n[o]=new Array(a[o]);for(var s=0,c=0;c<t.length;c+=r,s++)for(var u=0;u<r;u++)s<n[u].length&&(n[u][s]=t[c+u]);var f=new Array(r),h=0;for(o=0;o<r;o++){var l=p(n[o],0),d=p(n[o],1);f[o]=d.length<l.length?d:l,h+=f[o].length}var v=new i("",0,h+5*r+1);v.WriteByte(r);for(o=0;o<r;o++)v.WriteUint7(f[o].length);for(o=0;o<r;o++)v.WriteData(f[o],f[o].length);return v.buf.slice(0,v.buf.pos)}function v(e,t){var r=e.ReadByte(),h=1&r,l=8&r,d=32&r,p=64&r,m=128&r;if(16&r||(t=e.ReadUint7()),l)return function(e,t){for(var r=e.ReadByte(),a=new Array(r),i=new Array(r),o=0;o<r;o++)a[o]=e.ReadUint7();var s=new Array(r);for(o=0;o<r;o++)i[o]=Math.floor(t/r)+(t%r>o),s[o]=v(e,i[o]);var c=new n.allocUnsafe(t);for(o=0;o<r;o++)for(var u=0;u<i[o];u++)c[u*r+o]=s[o][u];return c}(e,t);if(m){var b=t,k=function(e){for(var t=e.ReadByte(),r=new Array(t),n=0;n<t;n++)r[n]=e.ReadByte();return[r,t,e.ReadUint7()]}(e),S=a(k,3),A=S[0],R=S[1];t=S[2]}if(p){var _=t,B=function(e){var t=e.ReadUint7(),r=e.ReadUint7();if(1&t)var n=e.ReadData((t-1)/2);else{var a=e.ReadUint7();n=e.ReadData(a),n=y(new i(n),t/2)}n=new i(n);var o=new Array(256),s=n.ReadByte();0==s&&(s=256);for(var c=0;c<s;c++)o[n.ReadByte()]=1;return[o,n,r]}(e),x=a(B,3),C=x[0],M=x[1];t=x[2]}if(d)var E=e.ReadData(t);else if(0==h)E=y(e,t);else E=function(e,t){var r=(d=e.ReadByte())>>4,a=e;if(1&d){var h=e.ReadUint7(),l=e.ReadUint7(),d=new i(e.ReadData(l));a=new i(y(d,h))}var v=new Array(256),p=new Array(256);!function(e,t,r,n){for(var a=0;a<256;a++){t[a]=new Array(256),r[a]=new Array(256);for(var i=0;i<256;i++)t[a][i]=0}var o=g(e);for(a=0;a<256;a++)if(o[a]){var s=0;for(i=0;i<256;i++)o[i]&&(s>0?s--:(t[a][i]=e.ReadUint7(),0==t[a][i]&&(s=e.ReadByte())));w(t[a],n),r[a][0]=0;for(i=0;i<256;i++)r[a][i+1]=r[a][i]+t[a][i]}}(a,v,p,r);for(var m=new Array(256),b=0;b<256;b++)m[b]=c(p[b],r);for(var k=new Array(4),S=new Array(4),A=0;A<4;A++)k[A]=e.ReadUint32(),S[A]=0;var R=new n.allocUnsafe(t),_=Math.floor(t/4);for(b=0;b<_;b++)for(A=0;A<4;A++){var B=o(k[A],r),x=m[S[A]][B];R[b+A*_]=x,k[A]=u(k[A],p[S[A]][x],v[S[A]][x],r),k[A]=f(e,k[A]),S[A]=x}b*=4;for(;b<t;){B=o(k[3],r),x=s(p[S[3]],B);R[b++]=x,k[3]=u(k[3],p[S[3]][x],v[S[3]][x],r),k[3]=f(e,k[3]),S[3]=x}return R}(e,t);return p&&(E=function(e,t,r,a){new i(e);for(var o=new n.allocUnsafe(a),s=0,c=0;s<a;c++){var u=e[c];if(t[u])for(var f=r.ReadUint7(),h=0;h<=f;h++)o[s++]=u;else o[s++]=u}return o}(E,C,M,_)),m&&(E=function(e,t,r,a){var i=new n.allocUnsafe(a),o=0;if(r<=1)for(var s=0;s<a;s++)i[s]=t[0];else if(r<=2)for(s=0;s<a;s++){if(s%8==0)var c=e[o++];i[s]=t[1&c],c>>=1}else if(r<=4)for(s=0;s<a;s++)s%4==0&&(c=e[o++]),i[s]=t[3&c],c>>=2;else if(r<=16)for(s=0;s<a;s++)s%2==0&&(c=e[o++]),i[s]=t[15&c],c>>=4;return i}(E,A,R,b)),E}function p(e,t){var r=new i("",0,10);r.WriteByte(t);var o=1&t,s=8&t,c=32&t,u=64&t,f=128&t,v=t>>8;if(16&t||r.WriteUint7(e.length),s)return n.concat([r.buf.slice(0,r.pos),d(0,e,v)]);var p=new n.alloc(0);if(f){var g=function(e){for(var t=new Array(256),r=0;r<256;r++)t[r]=0;for(r=0;r<e.length;r++)t[e[r]]++;var a=new Array(256),o=0;for(r=0;r<256;r++)t[r]>0&&(a[r]=o++);if(!(o>16)){if(o<=1)var s=new n.allocUnsafe(0);else if(o<=2){s=new n.allocUnsafe(Math.ceil(e.length/8));var c=-1;for(r=0;r<e.length;r++)r%8==0&&(s[++c]=0),s[c]+=a[e[r]]<<r%8}else if(o<=4)for(s=new n.allocUnsafe(Math.ceil(e.length/4)),c=-1,r=0;r<e.length;r++)r%4==0&&(s[++c]=0),s[c]+=a[e[r]]<<r%4*2;else for(s=new n.allocUnsafe(Math.ceil(e.length/2)),c=-1,r=0;r<e.length;r++)r%2==0&&(s[++c]=0),s[c]+=a[e[r]]<<r%2*4;var u=new i("",0,o+5);for(u.WriteByte(o),c=0,r=0;r<256;r++)t[r]>0&&(t[r]=c++,u.WriteByte(r));return u.WriteUint7(s.length),[u.buf.slice(0,u.pos),s]}}(e),y=a(g,2);p=y[0],e=y[1]}var S=new n.alloc(0);if(u){var A=function(e){for(var t=new Array(256),r=0;r<256;r++)t[r]=0;var a=-1;for(r=0;r<e.length;r++)t[e[r]]+=e[r]==a?1:-1,a=e[r];var o=0;for(r=0;r<256;r++)t[r]>0&&o++;for(o||(o=1,t[0]=1),(f=new i("",0,o+1+e.length)).WriteByte(o),r=0;r<256;r++)t[r]>0&&f.WriteByte(r);var s=new n.allocUnsafe(e.length),c=0;for(r=0;r<e.length;r++)if(s[c++]=e[r],t[e[r]]>0){a=e[r];for(var u=0;r+u+1<e.length&&e[r+u+1]==a;)u++;f.WriteUint7(u),r+=u}var f,h=k(f.buf.slice(0,f.pos)),l=new i("",0,16);return l.WriteUint7(2*f.pos),l.WriteUint7(c),l.WriteUint7(h.length),[f=n.concat([l.buf.slice(0,l.pos),h]),s.slice(0,c)]}(e),R=a(A,2);S=R[0],e=R[1]}if(e.length<4&&1==o&&(o=0,r.buf[0]&=-2),c)var _=e;else if(0==o)_=k(e);else _=function(e){for(var t=e.length,r=new i("",0,198156),a=new Array(256),o=new Array(256),s=new Array(256),c=0;c<256;c++)o[c]=new Array(256),s[c]=new Array(256);var u=12;(function(e,t,r){for(var n=0;n<256;n++){r[n]=0;for(var a=0;a<256;a++)t[n][a]=0}var i=0;for(n=0;n<e.length;n++)r[i]++,t[i][e[n]]++,i=e[n];r[i]++,t[0][e[1*(e.length>>2)]]++,t[0][e[2*(e.length>>2)]]++,t[0][e[3*(e.length>>2)]]++,r[0]+=3})(e,o,a),function(e,t,r){for(var n=0;n<256;n++)if(t[n]){var a=Math.ceil(Math.log2(t[n]));a>r&&(a=r),m(e[n],a)}}(o,a,u);var f=new i("",0,198156);!function(e,t,r){b(e,r);for(var n=0;n<256;n++)if(r[n])for(var a=0,i=0;i<256;i++)if(r[i])if(a)a--;else if(e.WriteUint7(t[n][i]),!t[n][i]){for(var o=i+1;o<256;o++)if(r[o]){if(0!=t[n][o])break;a++}e.WriteByte(a)}}(f,o,a);var d=k(f.buf.slice(0,f.pos));d.length<f.pos?(r.WriteByte(1|u<<4),r.WriteUint7(f.pos),r.WriteUint7(d.length),r.WriteData(d,d.length)):(r.WriteByte(0|u<<4),r.WriteData(f.buf,f.pos));!function(e,t,r){for(var n=0;n<256;n++)t[n]&&w(e[n],r)}(o,a,u);for(c=0;c<256;c++)if(a[c]){s[c][0]=0;for(var v=1;v<256;v++)s[c][v]=s[c][v-1]+o[c][v-1]}var p=new Array(4),g=new Array(4);for(v=0;v<4;v++)p[v]=32768,g[v]=0;var y=new i("",1.05*t+100>>0,1.05*t+100>>0),S=Math.floor(t/4),A=new Array(4),R=new Array(4);for(v=0;v<4;v++)A[v]=(v+1)*S-2,R[v]=e[A[v]+1];R[3]=e[t-1];for(c=t-2;c>4*S-2;c--)p[3]=l(p[3],y,s[e[c]][R[3]],o[e[c]][R[3]],u),R[3]=e[c];for(;A[0]>=0;)for(v=3;v>=0;v--){var _=e[A[v]];p[v]=l(p[v],y,s[_][R[v]],o[_][R[v]],u),R[v]=_,A[v]--}for(v=3;v>=0;v--)p[v]=l(p[v],y,s[0][R[v]],o[0][R[v]],u);for(c=3;c>=0;c--)h(p[c],y);return n.concat([r.buf.slice(0,r.pos),y.buf.slice(y.pos,y.length)],r.pos+y.length-y.pos)}(e);return n.concat([r.buf.slice(0,r.pos),p,S,_])}function g(e){for(var t=new Array(256),r=0;r<256;r++)t[r]=0;var n=0,a=e.ReadByte(),i=a;do{t[a]=1,n>0?(n--,a++):(a=e.ReadByte())==i+1&&(n=e.ReadByte()),i=a}while(0!=a);return t}function y(e,t){var r=new Array(256),a=new Array(256);!function(e,t,r){for(var n=0;n<256;n++)t[n]=0;var a=g(e);for(n=0;n<256;n++)a[n]>0&&(t[n]=e.ReadUint7());for(w(t,12),r[0]=0,n=0;n<=255;n++)r[n+1]=r[n]+t[n]}(e,r,a);for(var i=c(a,12),s=new Array(4),h=0;h<4;h++)s[h]=e.ReadUint32();var l=new n.allocUnsafe(t);for(h=0;h<t;h++){var d=h%4,v=i[o(s[d],12)];l[h]=v,s[d]=u(s[d],a[v],r[v],12),s[d]=f(e,s[d])}return l}function m(e,t){for(var r=0,n=0;n<256;n++)r+=e[n];var a=1<<t,i=a/r;do{var o=0,s=0,c=0;r=0;for(n=0;n<256;n++)0!=e[n]&&(o<e[n]&&(o=e[n],s=n),e[n]=Math.floor(e[n]*i),0==e[n]&&(e[n]=1),r+=e[n]);r<a?e[s]+=a-r:r-a<e[s]/2&&e[s]>2?e[s]-=r-a:r!=a&&(i=a/r,c=1)}while(c)}function w(e,t){for(var r=0,n=0;n<256;n++)r+=e[n];if(0!=r&&r!=1<<t){for(var a=0;r<1<<t;)r*=2,a++;for(n=0;n<256;n++)e[n]<<=a}}function b(e,t){for(var r=0,n=0;n<256;n++)if(t[n])if(r>0)r--;else if(e.WriteByte(n),n>0&&t[n-1]>0){for(r=n+1;r<256&&t[r];r++);r-=n+1,e.WriteByte(r)}e.WriteByte(0)}function k(e){var t=e.length,r=new i("",0,780),a=new Array(256);!function(e,t){for(var r=0;r<256;r++)t[r]=0;for(r=0;r<e.length;r++)t[e[r]]++}(e,a);var o=Math.ceil(Math.log2(t));o>12&&(o=12),m(a,o),function(e,t){b(e,t);for(var r=0;r<256;r++)t[r]&&e.WriteUint7(t[r])}(r,a),m(a,12);var s=new Array(256);s[0]=0;for(var c=1;c<256;c++)s[c]=s[c-1]+a[c-1];var u=new Array(4);for(c=0;c<4;c++)u[c]=32768;var f=new i("",1.05*t+100>>0,1.05*t+100>>0);for(c=t-1;c>=0;c--)u[c%4]=l(u[c%4],f,s[e[c]],a[e[c]],12);for(c=3;c>=0;c--)h(u[c],f);return n.concat([r.buf.slice(0,r.pos),f.buf.slice(f.pos,f.length)],r.pos+f.length-f.pos)}e.exports={decode:function(e){return v(new i(e),0)},encode:p}},80199:function(e,t,r){var n=r(97960).lW,a=r(43681).default,i=r(94467),o=r(29670),s=new(r(6779));function c(e,t){for(var r=e+"";r.length<t;)r="0"+r;return r}function u(e,t,r,n){var a=e[0][0].ReadByte(),i=n-e[0][a].ReadUint32();if(5==a)return t[n]=t[i],r[n]=r[i],t[n];var o=1;t[n]="",r[n]=new Array(256);do{switch(a=e[o][0].ReadByte()){case 2:r[n][o]=e[o][2].ReadChar();break;case 1:r[n][o]=e[o][1].ReadString();break;case 7:r[n][o]=e[o][7].ReadUint32();break;case 3:var s=e[o][3].ReadUint32(),u=e[o][4].ReadByte();r[n][o]=c(s,u);break;case 8:r[n][o]=(r[i][o]>>0)+e[o][8].ReadByte();break;case 9:s=(r[i][o]>>0)+e[o][9].ReadByte(),u=r[i][o].length;r[n][o]=c(s,u);break;case 10:r[n][o]=r[i][o];break;default:r[n][o]=""}t[n]+=r[n][o++]}while(12!=a);return t[n]}function f(e,t,r,n,a,i){for(var o=0;o<n.length;o++)if(!(r>0&&5==t[o][0].type)&&t[o][r])switch(e[0].WriteByte(t[o][r].type),t[o][r].type){case 6:e[6].WriteUint32(t[o][r].val);break;case 5:e[5].WriteUint32(t[o][r].val);break;case 1:e[1].WriteString(t[o][r].val);break;case 2:e[2].WriteChar(t[o][r].val);break;case 7:e[7].WriteUint32(t[o][r].val);break;case 3:e[3].WriteUint32(t[o][r].val),e[4].WriteByte(t[o][r].val.length);break;case 8:case 9:e[t[o][r].type].WriteByte(t[o][r].val)}}function h(e,t,r,n){for(var a=0;a<=12;a++)if(!(e[a].pos<=0)){n.WriteByte(a+(0==a?128:0)),e[a]=e[a].buf.slice(0,e[a].pos);var i=l(e[a],r);n.WriteUint7(i.length),n.WriteData(i,i.length)}}function l(e,t){var r,n=1<<30,a=[0,1,64,65,128,129,201];for(var i in a){var c=a[i];if(!(1&c&&e.length<100)&&!(8&c&&e.length%4!=0)){try{var u=t?s.encode(e,c):o.encode(e,c)}catch(f){u=0}u&&n>u.length&&(n=u.length,r=u)}}return r}function d(e,t,r,n,a){var i=0,o=a-1;e[a]=new Array(256),t[n]?e[a][0]={type:5,val:a-t[n]}:e[a][0]={type:6,val:0==a?0:1},t[n]=a;for(var s=n.match(/([a-zA-Z0-9]{1,9})|([^a-zA-Z0-9]+)/g),c=0;c<s.length;c++){var u=c+1,f=1,h=s[c];if(s[c].match(/^0+[0-9]*$/g)?f=3:s[c].match(/^[0-9]+$/g)?f=7:1==s[c].length&&(f=2),o>=0&&e[o][u])if(e[o][u].str==s[c])f=10,h="";else if(7==e[o][u].type||8==e[o][u].type){var l=h-e[o][u].str;r[u]++,l>=0&&l<256&&r[u]>a/2&&(f=8,h=l)}else if((3==e[o][u].type||9==e[o][u].type)&&e[o][u].str.length==h.length){l=h-e[o][u].str;r[u]++,l>=0&&l<256&&r[u]>a/2&&(f=9,h=l)}e[a][u]={str:s[c],val:h,type:f},i<e[a][u].val.length+3&&(i=e[a][u].val.length+3)}return e[a][++u]={type:12},[u+1,i]}e.exports={encode:function(e,t){var r=e.toString();"\n"==r[r.length-1]&&(r=r.substring(0,r.length-1));var n=r.split("\n"),o=new i("",0,2*r.length+1e4);o.WriteUint32(r.length),o.WriteUint32(n.length),o.WriteByte(t);for(var s=new Array(n.length),c={},u=new Array(256).fill(0),l=0,v=0,p=0;p<n.length;p++){var g=d(s,c,u,n[p],p),y=a(g,2),m=y[0],w=y[1];l<m&&(l=m),v<w&&(v=w)}for(var b=0;b<l;b++){for(var k=new Array(13),S=0;S<=12;S++)k[S]=new i("",0,n.length*v);f(k,s,b,n,l,v),h(k,b,t,o)}return o.buf.slice(0,o.pos)},decode:function(e,t,r){(e=new i(e)).ReadUint32();var a=e.ReadUint32(),c=e.ReadByte(),f=function(e,t,r,a){for(var c=-1,u=new Array(256);!e.EOF();){var f=e.ReadByte(),h=128&f,l=64&f,d=63&f;if(h&&(u[++c]=new Array(13)),0!=d&&h){var v=new Array(a-1).fill(10);u[c][0]=new i(n.from([d].concat(v)))}if(l){var p=e.ReadByte(),g=e.ReadByte();u[c][d]=new i(u[p][g].buf)}else{var y=e.ReadUint7(),m=e.ReadData(y);u[c][d]=r?s.decode(m):o.decode(m),u[c][d]=new i(u[c][d])}}return u}(e,0,c,a),h=new Array(a),l=new Array(a),d="";"undefined"===typeof r&&(r="\n");for(var v=0;v<a;v++)d+=u(f,h,l,v)+r;return d}}},13934:function(e){var t={array:function(e){var t=0,r=0,n=[0,1,3,7,15,31,63,127,255];return function(a){for(var i=0;a>0;){var o=8-t;a>=o?(i<<=o,i|=n[o]&e[r++],t=0,a-=o):(i<<=a,i|=(e[r]&n[a]<<8-a-t)>>8-a-t,t+=a,a=0)}return i}},simple:function(e){var r,n,a=t.header(e),i=[],o=0;do{-1!=(n=t.decompress(e,a))&&(i.push(n),o+=n.byteLength)}while(-1!=n);r=new Uint8Array(o),o=0;for(var s=0;s<i.length;++s)n=i[s],r.set(n,o),o+=n.byteLength;return r},header:function(e){if(4348520!=e(24))throw"No magic number found";var t=e(8)-48;if(t<1||t>9)throw"Not a BZIP archive";return t},decompress:function(e,t,r){for(var n=9e5,a="",i=0;i<6;i++)a+=e(8).toString(16);if("177245385090"==a)return-1;if("314159265359"!=a)throw"eek not valid bzip data";if(e(32),e(1))throw"unsupported obsolete version";var o=e(24);if(o>n)throw"Initial position larger than buffer size";var s=e(16),c=new Uint8Array(256),u=0;for(i=0;i<16;i++)if(s&1<<15-i){var f=e(16);for(p=0;p<16;p++)f&1<<15-p&&(c[u++]=16*i+p)}var h=e(3);if(h<2||h>6)throw"another error";var l=e(15);if(0==l)throw"meh";var d=[];for(i=0;i<h;i++)d[i]=i;var v=new Uint8Array(32768);for(i=0;i<l;i++){for(var p=0;e(1);p++)if(p>=h)throw"whoops another error";var g=d[p];d.splice(p,1),d.splice(0,0,g),v[i]=g}var y=u+2,m=[];for(p=0;p<h;p++){var w,b,k,S=new Uint8Array(258),A=new Uint8Array(21);s=e(5);for(i=0;i<y;i++){for(;;){if(s<1||s>20)throw"I gave up a while ago on writing error messages";if(!e(1))break;e(1)?s--:s++}S[i]=s}w=b=S[0];for(i=1;i<y;i++)S[i]>b?b=S[i]:S[i]<w&&(w=S[i]);(k=m[p]={}).permute=new Uint32Array(258),k.limit=new Uint32Array(21),k.base=new Uint32Array(21),k.minLen=w,k.maxLen=b;var R=k.base.subarray(1),_=k.limit.subarray(1),B=0;for(i=w;i<=b;i++)for(s=0;s<y;s++)S[s]==i&&(k.permute[B++]=s);for(i=w;i<=b;i++)A[i]=_[i]=0;for(i=0;i<y;i++)A[S[i]]++;for(B=s=0,i=w;i<b;i++)B+=A[i],_[i]=B-1,B<<=1,R[i+1]=B-(s+=A[i]);_[b]=B+A[b]-1,R[w]=0}var x,C,M,E=new Uint32Array(256);for(i=0;i<256;i++)d[i]=i;x=C=y=M=0;for(var Z=new Uint32Array(n);;){if(!y--){if(y=49,M>=l)throw"meow i'm a kitty, that's an error";R=(k=m[v[M++]]).base.subarray(1),_=k.limit.subarray(1)}for(p=e(i=k.minLen);;){if(i>k.maxLen)throw"rawr i'm a dinosaur";if(p<=_[i])break;i++,p=p<<1|e(1)}if((p-=R[i])<0||p>=258)throw"moo i'm a cow";var I=k.permute[p];if(0!=I&&1!=I){if(x){if(x=0,C+s>=n)throw"Boom.";for(E[g=c[d[0]]]+=s;s--;)Z[C++]=g}if(I>u)break;if(C>=n)throw"I can't think of anything. Error";g=d[i=I-1],d.splice(i,1),d.splice(0,0,g),E[g=c[g]]++,Z[C++]=g}else x||(x=1,s=0),s+=0==I?x:2*x,x<<=1}if(o<0||o>=C)throw"I'm a monkey and I'm throwing something at someone, namely you";for(p=0,i=0;i<256;i++)f=p+E[i],E[i]=p,p=f;for(i=0;i<C;i++)Z[E[g=255&Z[i]]]|=i<<8,E[g]++;var F=0,q=0,U=0;C&&(q=255&(F=Z[o]),F>>=8,U=-1);var P,L,D,W=new Uint8Array(n),N=0;for(r||(r=1/0);C;){for(C--,L=q,q=255&(F=Z[F]),F>>=8,3==U++?(P=q,D=L,q=-1):(P=1,D=q);P--;)if(W[N++]=D,!--r)return W;q!=L&&(U=0)}return W.subarray(0,N)}};e.exports=t},71979:function(e){var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=t},66112:function(e){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var a=e[n]<<16|e[n+1]<<8|e[n+2],i=0;i<4;i++)8*n+6*i<=8*e.length?r.push(t.charAt(a>>>6*(3-i)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,a=0;n<e.length;a=++n%4)0!=a&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*a+8)-1)<<2*a|t.indexOf(e.charAt(n))>>>6-2*a);return r}};e.exports=r}()},94896:function(e){function t(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},70920:function(e,t,r){!function(){var t=r(66112),n=r(71979).utf8,a=r(94896),i=r(71979).bin,o=function e(r,o){r.constructor==String?r=o&&"binary"===o.encoding?i.stringToBytes(r):n.stringToBytes(r):a(r)?r=Array.prototype.slice.call(r,0):Array.isArray(r)||r.constructor===Uint8Array||(r=r.toString());for(var s=t.bytesToWords(r),c=8*r.length,u=1732584193,f=-271733879,h=-1732584194,l=271733878,d=0;d<s.length;d++)s[d]=16711935&(s[d]<<8|s[d]>>>24)|4278255360&(s[d]<<24|s[d]>>>8);s[c>>>5]|=128<<c%32,s[14+(c+64>>>9<<4)]=c;var v=e._ff,p=e._gg,g=e._hh,y=e._ii;for(d=0;d<s.length;d+=16){var m=u,w=f,b=h,k=l;u=v(u,f,h,l,s[d+0],7,-680876936),l=v(l,u,f,h,s[d+1],12,-389564586),h=v(h,l,u,f,s[d+2],17,606105819),f=v(f,h,l,u,s[d+3],22,-1044525330),u=v(u,f,h,l,s[d+4],7,-176418897),l=v(l,u,f,h,s[d+5],12,1200080426),h=v(h,l,u,f,s[d+6],17,-1473231341),f=v(f,h,l,u,s[d+7],22,-45705983),u=v(u,f,h,l,s[d+8],7,1770035416),l=v(l,u,f,h,s[d+9],12,-1958414417),h=v(h,l,u,f,s[d+10],17,-42063),f=v(f,h,l,u,s[d+11],22,-1990404162),u=v(u,f,h,l,s[d+12],7,1804603682),l=v(l,u,f,h,s[d+13],12,-40341101),h=v(h,l,u,f,s[d+14],17,-1502002290),u=p(u,f=v(f,h,l,u,s[d+15],22,1236535329),h,l,s[d+1],5,-165796510),l=p(l,u,f,h,s[d+6],9,-1069501632),h=p(h,l,u,f,s[d+11],14,643717713),f=p(f,h,l,u,s[d+0],20,-373897302),u=p(u,f,h,l,s[d+5],5,-701558691),l=p(l,u,f,h,s[d+10],9,38016083),h=p(h,l,u,f,s[d+15],14,-660478335),f=p(f,h,l,u,s[d+4],20,-405537848),u=p(u,f,h,l,s[d+9],5,568446438),l=p(l,u,f,h,s[d+14],9,-1019803690),h=p(h,l,u,f,s[d+3],14,-187363961),f=p(f,h,l,u,s[d+8],20,1163531501),u=p(u,f,h,l,s[d+13],5,-1444681467),l=p(l,u,f,h,s[d+2],9,-51403784),h=p(h,l,u,f,s[d+7],14,1735328473),u=g(u,f=p(f,h,l,u,s[d+12],20,-1926607734),h,l,s[d+5],4,-378558),l=g(l,u,f,h,s[d+8],11,-2022574463),h=g(h,l,u,f,s[d+11],16,1839030562),f=g(f,h,l,u,s[d+14],23,-35309556),u=g(u,f,h,l,s[d+1],4,-1530992060),l=g(l,u,f,h,s[d+4],11,1272893353),h=g(h,l,u,f,s[d+7],16,-155497632),f=g(f,h,l,u,s[d+10],23,-1094730640),u=g(u,f,h,l,s[d+13],4,681279174),l=g(l,u,f,h,s[d+0],11,-358537222),h=g(h,l,u,f,s[d+3],16,-722521979),f=g(f,h,l,u,s[d+6],23,76029189),u=g(u,f,h,l,s[d+9],4,-640364487),l=g(l,u,f,h,s[d+12],11,-421815835),h=g(h,l,u,f,s[d+15],16,530742520),u=y(u,f=g(f,h,l,u,s[d+2],23,-995338651),h,l,s[d+0],6,-198630844),l=y(l,u,f,h,s[d+7],10,1126891415),h=y(h,l,u,f,s[d+14],15,-1416354905),f=y(f,h,l,u,s[d+5],21,-57434055),u=y(u,f,h,l,s[d+12],6,1700485571),l=y(l,u,f,h,s[d+3],10,-1894986606),h=y(h,l,u,f,s[d+10],15,-1051523),f=y(f,h,l,u,s[d+1],21,-2054922799),u=y(u,f,h,l,s[d+8],6,1873313359),l=y(l,u,f,h,s[d+15],10,-30611744),h=y(h,l,u,f,s[d+6],15,-1560198380),f=y(f,h,l,u,s[d+13],21,1309151649),u=y(u,f,h,l,s[d+4],6,-145523070),l=y(l,u,f,h,s[d+11],10,-1120210379),h=y(h,l,u,f,s[d+2],15,718787259),f=y(f,h,l,u,s[d+9],21,-343485551),u=u+m>>>0,f=f+w>>>0,h=h+b>>>0,l=l+k>>>0}return t.endian([u,f,h,l])};o._ff=function(e,t,r,n,a,i,o){var s=e+(t&r|~t&n)+(a>>>0)+o;return(s<<i|s>>>32-i)+t},o._gg=function(e,t,r,n,a,i,o){var s=e+(t&n|r&~n)+(a>>>0)+o;return(s<<i|s>>>32-i)+t},o._hh=function(e,t,r,n,a,i,o){var s=e+(t^r^n)+(a>>>0)+o;return(s<<i|s>>>32-i)+t},o._ii=function(e,t,r,n,a,i,o){var s=e+(r^(t|~n))+(a>>>0)+o;return(s<<i|s>>>32-i)+t},o._blocksize=16,o._digestsize=16,e.exports=function(e,r){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var n=t.wordsToBytes(o(e,r));return r&&r.asBytes?n:r&&r.asString?i.bytesToString(n):t.bytesToHex(n)}}()}}]);
//# sourceMappingURL=2142.1c071447.chunk.js.map