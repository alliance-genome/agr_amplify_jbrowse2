"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[8066,9101],{63977:function(e,n,t){t.d(n,{Z:function(){return c}});t(30969);var r=t(81073),o=t(59767),a=t(37574);function c(e){var n=e.value,t=(0,r.getUriLink)(n);return(0,a.jsx)(o.SanitizedHTML,{html:'<a href="'.concat(t,'">').concat(t,"</a>")})}},9101:function(e,n,t){t.r(n),t.d(n,{ColorPicker:function(){return F},ColorPopover:function(){return q},PopoverPicker:function(){return Y},default:function(){return G}});var r=t(96234),o=t(30969),a=t(10346),c=t(83176),l=t(70983),i=t(2689),u=t(87006),s=t(53276),f=t(94069),d=t(81073);function h(){return(h=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function v(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n.indexOf(t=a[r])>=0||(o[t]=e[t]);return o}function g(e){var n=(0,o.useRef)(e),t=(0,o.useRef)((function(e){n.current&&n.current(e)}));return n.current=e,t.current}var m=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e>t?t:e<n?n:e},p=function(e){return"touches"in e},x=function(e){return e&&e.ownerDocument.defaultView||self},b=function(e,n,t){var r=e.getBoundingClientRect(),o=p(n)?function(e,n){for(var t=0;t<e.length;t++)if(e[t].identifier===n)return e[t];return e[0]}(n.touches,t):n;return{left:m((o.pageX-(r.left+x(e).pageXOffset))/r.width),top:m((o.pageY-(r.top+x(e).pageYOffset))/r.height)}},C=function(e){!p(e)&&e.preventDefault()},j=o.memo((function(e){var n=e.onMove,t=e.onKey,a=v(e,["onMove","onKey"]),c=(0,o.useRef)(null),l=g(n),i=g(t),u=(0,o.useRef)(null),s=(0,o.useRef)(!1),f=(0,o.useMemo)((function(){var e=function(e){C(e),(p(e)?e.touches.length>0:e.buttons>0)&&c.current?l(b(c.current,e,u.current)):t(!1)},n=function(){return t(!1)};function t(t){var r=s.current,o=x(c.current),a=t?o.addEventListener:o.removeEventListener;a(r?"touchmove":"mousemove",e),a(r?"touchend":"mouseup",n)}return[function(e){var n=e.nativeEvent,r=c.current;if(r&&(C(n),!function(e,n){return n&&!p(e)}(n,s.current)&&r)){if(p(n)){s.current=!0;var o=n.changedTouches||[];o.length&&(u.current=o[0].identifier)}r.focus(),l(b(r,n,u.current)),t(!0)}},function(e){var n=e.which||e.keyCode;n<37||n>40||(e.preventDefault(),i({left:39===n?.05:37===n?-.05:0,top:40===n?.05:38===n?-.05:0}))},t]}),[i,l]),d=(0,r.Z)(f,3),m=d[0],j=d[1],w=d[2];return(0,o.useEffect)((function(){return w}),[w]),o.createElement("div",h({},a,{onTouchStart:m,onMouseDown:m,className:"react-colorful__interactive",ref:c,onKeyDown:j,tabIndex:0,role:"slider"}))})),w=function(e){return e.filter(Boolean).join(" ")},_=function(e){var n=e.className,t=e.color,r=e.left,a=e.top,c=void 0===a?.5:a,l=w(["react-colorful__pointer",n]);return o.createElement("div",{className:l,style:{top:100*c+"%",left:100*r+"%"}},o.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},Z=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.pow(10,n);return Math.round(t*e)/t},k=(Math.PI,function(e){var n=e.h,t=e.s,r=e.v,o=e.a,a=(200-t)*r/100;return{h:Z(n),s:Z(a>0&&a<200?t*r/100/(a<=100?a:200-a)*100:0),l:Z(a/2),a:Z(o,2)}}),y=function(e){var n=k(e),t=n.h,r=n.s,o=n.l;return"hsl(".concat(t,", ").concat(r,"%, ").concat(o,"%)")},M=function(e){var n=k(e),t=n.h,r=n.s,o=n.l,a=n.a;return"hsla(".concat(t,", ").concat(r,"%, ").concat(o,"%, ").concat(a,")")},E=function(e){var n=e.h,t=e.s,r=e.v,o=e.a;n=n/360*6,t/=100,r/=100;var a=Math.floor(n),c=r*(1-t),l=r*(1-(n-a)*t),i=r*(1-(1-n+a)*t),u=a%6;return{r:Z(255*[r,l,c,c,i,r][u]),g:Z(255*[i,r,r,l,c,c][u]),b:Z(255*[c,c,i,r,r,l][u]),a:Z(o,2)}},N=function(e){var n=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(e);return n?S({r:Number(n[1])/(n[2]?100/255:1),g:Number(n[3])/(n[4]?100/255:1),b:Number(n[5])/(n[6]?100/255:1),a:void 0===n[7]?1:Number(n[7])/(n[8]?100:1)}):{h:0,s:0,v:0,a:1}},S=function(e){var n=e.r,t=e.g,r=e.b,o=e.a,a=Math.max(n,t,r),c=a-Math.min(n,t,r),l=c?a===n?(t-r)/c:a===t?2+(r-n)/c:4+(n-t)/c:0;return{h:Z(60*(l<0?l+6:l)),s:Z(a?c/a*100:0),v:Z(a/255*100),a:o}},O=o.memo((function(e){var n=e.className,t=e.hue,r=e.onChange,a=w(["react-colorful__hue",n]);return o.createElement("div",{className:a},o.createElement(j,{onMove:function(e){r({h:360*e.left})},onKey:function(e){r({h:m(t+360*e.left,0,360)})},"aria-label":"Hue","aria-valuetext":Z(t)},o.createElement(_,{className:"react-colorful__hue-pointer",left:t/360,color:y({h:t,s:100,v:100,a:1})})))})),H=o.memo((function(e){var n=e.hsva,t=e.onChange,r={backgroundColor:y({h:n.h,s:100,v:100,a:1})};return o.createElement("div",{className:"react-colorful__saturation",style:r},o.createElement(j,{onMove:function(e){t({s:100*e.left,v:100-100*e.top})},onKey:function(e){t({s:m(n.s+100*e.left,0,100),v:m(n.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation ".concat(Z(n.s),"%, Brightness ").concat(Z(n.v),"%")},o.createElement(_,{className:"react-colorful__saturation-pointer",top:1-n.v/100,left:n.s/100,color:y(n)})))})),L=function(e,n){if(e===n)return!0;for(var t in e)if(e[t]!==n[t])return!1;return!0},R=function(e,n){return e.replace(/\s/g,"")===n.replace(/\s/g,"")};function T(e,n,t){var a=g(t),c=(0,o.useState)((function(){return e.toHsva(n)})),l=(0,r.Z)(c,2),i=l[0],u=l[1],s=(0,o.useRef)({color:n,hsva:i});(0,o.useEffect)((function(){if(!e.equal(n,s.current.color)){var t=e.toHsva(n);s.current={hsva:t,color:n},u(t)}}),[n,e]),(0,o.useEffect)((function(){var n;L(i,s.current.hsva)||e.equal(n=e.fromHsva(i),s.current.color)||(s.current={hsva:i,color:n},a(n))}),[i,e,a]);var f=(0,o.useCallback)((function(e){u((function(n){return Object.assign({},n,e)}))}),[]);return[i,f]}var P,z="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,D=new Map,I=function(e){z((function(){var n=e.current?e.current.ownerDocument:document;if(void 0!==n&&!D.has(n)){var r=n.createElement("style");r.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',D.set(n,r);var o=P||t.nc;o&&r.setAttribute("nonce",o),n.head.appendChild(r)}}),[])},K=function(e){var n=e.className,t=e.hsva,r=e.onChange,a={backgroundImage:"linear-gradient(90deg, ".concat(M(Object.assign({},t,{a:0})),", ").concat(M(Object.assign({},t,{a:1})),")")},c=w(["react-colorful__alpha",n]);return o.createElement("div",{className:c},o.createElement("div",{className:"react-colorful__alpha-gradient",style:a}),o.createElement(j,{onMove:function(e){r({a:e.left})},onKey:function(e){r({a:m(t.a+e.left)})},"aria-label":"Alpha","aria-valuetext":"".concat(Z(100*t.a),"%")},o.createElement(_,{className:"react-colorful__alpha-pointer",left:t.a,color:M(t)})))},A=function(e){var n=e.className,t=e.colorModel,a=e.color,c=void 0===a?t.defaultColor:a,l=e.onChange,i=v(e,["className","colorModel","color","onChange"]),u=(0,o.useRef)(null);I(u);var s=T(t,c,l),f=(0,r.Z)(s,2),d=f[0],g=f[1],m=w(["react-colorful",n]);return o.createElement("div",h({},i,{ref:u,className:m}),o.createElement(H,{hsva:d,onChange:g}),o.createElement(O,{hue:d.h,onChange:g}),o.createElement(K,{hsva:d,onChange:g,className:"react-colorful__last-control"}))},B={defaultColor:"rgba(0, 0, 0, 1)",toHsva:N,fromHsva:function(e){var n=E(e),t=n.r,r=n.g,o=n.b,a=n.a;return"rgba(".concat(t,", ").concat(r,", ").concat(o,", ").concat(a,")")},equal:R},W=function(e){return o.createElement(A,h({},e,{colorModel:B}))},U=t(37574),V=(0,s.ZL)()({picker:{position:"relative"},swatches:{display:"flex",padding:12,flexWrap:"wrap"},swatch:{width:24,height:24,margin:4,border:"none",padding:0,cursor:"pointer",outline:"none"}}),Y=function(e){var n=e.color,t=e.onChange,a=(0,o.useState)(null),c=(0,r.Z)(a,2),l=c[0],i=c[1],u=V().classes;return(0,U.jsxs)("div",{className:u.picker,children:[(0,U.jsx)("div",{className:u.swatch,style:{backgroundColor:n},onClick:function(e){return i(e.currentTarget)}}),(0,U.jsx)(q,{anchorEl:l,onClose:function(){return i(null)},color:n,onChange:t})]})};function q(e){var n=e.anchorEl,t=e.onChange,r=e.onClose,o=e.color;return(0,U.jsx)(c.ZP,{open:!!n,anchorEl:n,onClose:r,children:(0,U.jsx)(F,{color:o,onChange:t})})}function F(e){var n=e.onChange,t=e.color,c=V().classes,s=(0,d.useLocalStorage)("colorPickerPalette","set1"),h=(0,r.Z)(s,2),v=h[0],g=h[1],m=f[v],p=Object.keys(f),x=(0,o.useState)(t),b=(0,r.Z)(x,2),C=b[0],j=b[1],w=(0,a.V)(t).toRgbString(),_=(0,d.useDebounce)(w,1e3),Z=function(e){j(e);try{n((0,a.V)(e).toRgbString())}catch(t){}};return(0,U.jsxs)("div",{style:{display:"flex",padding:10},children:[(0,U.jsx)("div",{style:{width:200,margin:5},children:(0,U.jsx)(W,{color:_,onChange:Z})}),(0,U.jsxs)("div",{style:{width:200,margin:5},children:[(0,U.jsx)(l.Z,{value:v,onChange:function(e){var n=e.target.value;g(n)},children:p.map((function(e){return(0,U.jsx)(i.Z,{value:e,children:e},e)}))}),(0,U.jsx)("div",{className:c.swatches,children:m.map((function(e,n){return(0,U.jsx)("button",{className:c.swatch,style:{background:e},onClick:function(){return Z(e)}},"".concat(e,"-").concat(n))}))}),(0,U.jsx)(u.Z,{helperText:"Manually set color (hex, rgb, or css color name)",value:C,onChange:function(e){return Z(e.target.value)}})]})]})}var G=Y},58066:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var r=t(59740),o=t(68079),a=t(96234),c=t(30969),l=t(59071),i=t(72097),u=t(96074),s=t(53276),f=t(81073),d=t(59563),h=t(39554),v=t.n(h),g=t(33028),m=t(46672),p=t(84636),x=t(50006),b=t(38357),C=t(94551),j=t(75295),w=t(90550),_=t(8034),Z=t.n(_),k=t(88581),y=t(37574),M=(0,s.ZL)()((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}));function E(e){return(0,y.jsx)(Z(),{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:(0,y.jsx)(m.Z,(0,g.Z)({},e))})}var N=(0,w.observer)((function(e){var n=M().classes,t=e.title,r=e.children,o=e.onClose;return(0,y.jsx)(p.Z,(0,g.Z)((0,g.Z)({},e),{},{PaperComponent:E,"aria-labelledby":"draggable-dialog-title",children:(0,y.jsxs)(x.Z,{children:[(0,y.jsxs)(b.Z,{style:{cursor:"move"},id:"draggable-dialog-title",children:[t,o?(0,y.jsx)(C.Z,{className:n.closeButton,onClick:function(){o()},children:(0,y.jsx)(k.Z,{})}):null]}),(0,y.jsx)(j.Z,{}),r]})}))})),S=t(9101),O=t(29477),H=t(23816),L=t(42351),R=t(96979),T=t(32152),P=t(63977),z=["name","color","baseUri"],D=(0,s.ZL)()({content:{minWidth:800},cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}});function I(e){var n=e.model,t=e.handleClose,r=D().classes,s=n.sources,d=(0,c.useState)(v()(s||[])),h=(0,a.Z)(d,2),g=h[0],m=h[1],p=(0,f.useLocalStorage)("multiwiggle-showTips",!0),x=(0,a.Z)(p,2),b=x[0],C=x[1];return(0,y.jsxs)(N,{open:!0,onClose:t,maxWidth:"xl",title:"Multi-wiggle color/arrangement editor",children:[(0,y.jsxs)(l.Z,{className:r.content,children:[(0,y.jsx)(i.Z,{variant:"contained",style:{float:"right"},onClick:function(){return C(!b)},children:b?"Hide tips":"Show tips"}),(0,y.jsx)("br",{}),b?(0,y.jsxs)(y.Fragment,{children:["Helpful tips",(0,y.jsxs)("ul",{children:[(0,y.jsx)("li",{children:"You can select rows in the table with the checkboxes"}),(0,y.jsx)("li",{children:"Multi-select is enabled with shift-click and control-click"}),(0,y.jsx)("li",{children:'The "Move selected items up/down" can re-arrange subtracks'}),(0,y.jsx)("li",{children:"Sorting the data grid itself can also re-arrange subtracks"}),(0,y.jsx)("li",{children:"Changes are applied when you hit Submit"}),(0,y.jsx)("li",{children:"You can click and drag the dialog box to move it on the screen"}),(0,y.jsx)("li",{children:"Columns in the table can be hidden using a vertical '...' menu on the right side of each column"})]})]}):null,(0,y.jsx)(K,{rows:g,onChange:m,showTips:b})]}),(0,y.jsxs)(u.Z,{children:[(0,y.jsx)(i.Z,{variant:"contained",type:"submit",color:"inherit",onClick:function(){n.clearLayout(),m(n.sources||[])},children:"Clear custom settings"}),(0,y.jsx)(i.Z,{variant:"contained",color:"secondary",onClick:function(){t(),m((0,o.Z)(n.sources||[]))},children:"Cancel"}),(0,y.jsx)(i.Z,{variant:"contained",color:"primary",type:"submit",onClick:function(){n.setLayout(g),t()},children:"Submit"})]})]})}function K(e){var n=e.rows,t=e.onChange,l=e.showTips,u=D().classes,s=(0,c.useState)(null),h=(0,a.Z)(s,2),v=h[0],g=h[1],m=(0,c.useState)([]),p=(0,a.Z)(m,2),x=p[0],b=p[1],C=n[0],j=(C.name,C.color,C.baseUri,(0,r.Z)(C,z)),w=(0,c.useState)("blue"),_=(0,a.Z)(w,2),Z=_[0],k=_[1],M=(0,c.useState)({idx:0,field:null}),E=(0,a.Z)(M,2),N=E[0],I=E[1];return(0,y.jsxs)("div",{children:[(0,y.jsx)(i.Z,{disabled:!x.length,onClick:function(e){return g(e.currentTarget)},children:"Change color of selected items"}),(0,y.jsxs)(i.Z,{onClick:function(){return t((0,O.A1)((0,o.Z)(n),x))},disabled:!x.length,children:[(0,y.jsx)(T.Z,{}),l?"Move selected items up":null]}),(0,y.jsxs)(i.Z,{onClick:function(){return t((0,O.vi)((0,o.Z)(n),x))},disabled:!x.length,children:[(0,y.jsx)(R.Z,{}),l?"Move selected items down":null]}),(0,y.jsxs)(i.Z,{onClick:function(){return t((0,O.A1)((0,o.Z)(n),x,n.length))},disabled:!x.length,children:[(0,y.jsx)(H.Z,{}),l?"Move selected items to top":null]}),(0,y.jsxs)(i.Z,{onClick:function(){return t((0,O.vi)((0,o.Z)(n),x,n.length))},disabled:!x.length,children:[(0,y.jsx)(L.Z,{}),l?"Move selected items to bottom":null]}),(0,y.jsx)(S.ColorPopover,{anchorEl:v,color:Z,onChange:function(e){k(e),x.forEach((function(t){var r=n.find((function(e){return e.name===t}));r&&(r.color=e)})),t((0,o.Z)(n))},onClose:function(){return g(null)}}),(0,y.jsx)("div",{style:{height:400,width:"100%"},children:(0,y.jsx)(d._$,{getRowId:function(e){return e.name},checkboxSelection:!0,disableRowSelectionOnClick:!0,onRowSelectionModelChange:function(e){return b(e)},rows:n,rowHeight:25,columnHeaderHeight:33,columns:[{field:"color",headerName:"Color",renderCell:function(e){var r=e.value,a=e.id;return(0,y.jsx)(S.default,{color:r||"blue",onChange:function(e){var r=n.find((function(e){return e.name===a}));r&&(r.color=e),t((0,o.Z)(n))}})}},{field:"name",sortingOrder:[null],headerName:"Name",width:(0,f.measureGridWidth)(n.map((function(e){return e.name})))}].concat((0,o.Z)(Object.keys(j).map((function(e){return{field:e,sortingOrder:[null],renderCell:function(e){var n=e.value;return(0,y.jsx)("div",{className:u.cell,children:(0,f.isUriLocation)(n)?(0,y.jsx)(P.Z,{value:n}):(0,y.jsx)(y.Fragment,{children:(0,f.getStr)(n)})})},width:(0,f.measureGridWidth)(n.map((function(n){return n[e]})))}})))),sortModel:[],onSortModelChange:function(e){var r=e[0],a=(N.idx+1)%2,c=(null===r||void 0===r?void 0:r.field)||N.field;I({idx:a,field:c}),t(c?(0,o.Z)(n).sort((function(e,n){var t=(0,f.getStr)(e[c]),r=(0,f.getStr)(n[c]);return 1===a?t.localeCompare(r):r.localeCompare(t)})):n)}})})]})}},29477:function(e,n,t){t.d(n,{A1:function(){return c},os:function(){return u},vi:function(){return l}});var r=t(41361),o=t(81073),a=t(9077);function c(e,n){var t,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=n.map((function(n){return e.findIndex((function(e){return e.name===n}))})).sort((function(e,n){return e-n})),c=0,l=(0,r.Z)(a);try{for(l.s();!(t=l.n()).done;){var i=t.value,u=Math.max(c,i-o);u>=c&&e.splice(u,0,e.splice(i,1)[0]),c+=1}}catch(s){l.e(s)}finally{l.f()}return e}function l(e,n){var t,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=n.map((function(n){return e.findIndex((function(e){return e.name===n}))})).sort((function(e,n){return n-e})),c=e.length-1,l=(0,r.Z)(a);try{for(l.s();!(t=l.n()).done;){var i=t.value,u=Math.min(c,i+o);u<=c&&e.splice(u,0,e.splice(i,1)[0]),c-=1}}catch(s){l.e(s)}finally{l.f()}return e}var i=12.8;function u(e){var n=e.prefersOffset,t=(0,o.getContainingView)(e).trackLabels,r=(0,o.getContainingTrack)(e),c=(0,a.getConf)(r,"name");return"overlapping"!==t||n?10:(0,o.measureText)(c,i)+100}}}]);
//# sourceMappingURL=8066.28067772.chunk.js.map