{"version":3,"file":"static/js/2311.f096e599.chunk.js","mappings":"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","sources":["../../../plugins/menus/src/ImportSessionWidget/components/ImportSessionWidget.tsx"],"sourcesContent":["import React, { useState } from 'react'\nimport { Button, Paper, Typography, alpha } from '@mui/material'\nimport { getSession } from '@jbrowse/core/util'\nimport { makeStyles } from 'tss-react/mui'\nimport { observer } from 'mobx-react'\nimport { useDropzone } from 'react-dropzone'\n\n// icons\nimport CloudUploadIcon from '@mui/icons-material/CloudUpload'\nimport ErrorIcon from '@mui/icons-material/Error'\n\nconst MAX_FILE_SIZE = 512 * 1024 ** 2 // 512 MiB\n\nfunction styledBy(property: string, mapping: { [key: string]: string }) {\n  return (props: { [key: string]: string }) => mapping[props[property]]\n}\n\n// @ts-ignore\nconst useStyles = makeStyles()(theme => ({\n  root: {\n    margin: theme.spacing(1),\n  },\n  paper: {\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  dropZone: {\n    textAlign: 'center',\n    margin: theme.spacing(2),\n    padding: theme.spacing(2),\n    borderWidth: 2,\n    borderRadius: 2,\n    borderColor: styledBy('isDragActive', {\n      true: theme.palette.secondary.light,\n      false: theme.palette.divider,\n    }),\n    borderStyle: 'dashed',\n    backgroundColor: styledBy('isDragActive', {\n      true: alpha(\n        theme.palette.text.primary,\n        theme.palette.action.hoverOpacity,\n      ),\n      false: theme.palette.background.default,\n    }),\n    outline: 'none',\n    transition: 'border .24s ease-in-out',\n    '&:focus': {\n      borderColor: theme.palette.secondary.light,\n    },\n  },\n  uploadIcon: {\n    color: theme.palette.text.secondary,\n  },\n  rejectedFiles: {\n    marginTop: theme.spacing(4),\n  },\n  listItem: {\n    padding: theme.spacing(0, 4),\n  },\n  expandIcon: {\n    color: '#FFFFFF',\n  },\n  error: {\n    margin: theme.spacing(2),\n  },\n  errorHeader: {\n    background: theme.palette.error.light,\n    color: theme.palette.error.contrastText,\n    padding: theme.spacing(2),\n    textAlign: 'center',\n  },\n  errorMessage: {\n    padding: theme.spacing(2),\n  },\n}))\n\nexport function readBlobAsText(blob: Blob): Promise<string> {\n  const a = new FileReader()\n  return new Promise((resolve, reject) => {\n    a.onload = e => {\n      if (e.target) {\n        resolve(e.target.result as string)\n      } else {\n        reject(new Error('unknown result reading blob from canvas'))\n      }\n    }\n    a.readAsText(blob)\n  })\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction ImportSession({ model }: { model: any }) {\n  const [error, setError] = useState<unknown>()\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\n    // @ts-ignore\n    accept: 'application/json',\n    maxSize: MAX_FILE_SIZE,\n    multiple: false,\n    onDrop: async (acceptedFiles, rejectedFiles) => {\n      try {\n        if (rejectedFiles.length) {\n          throw new Error(\n            `${rejectedFiles[0].errors.map(e => `${e}`).join(', ')}`,\n          )\n        } else {\n          const sessionText = await readBlobAsText(acceptedFiles[0])\n          getSession(model).setSession(JSON.parse(sessionText).session)\n        }\n      } catch (e) {\n        console.error(e)\n        setError(e)\n      }\n    },\n  })\n\n  // @ts-ignore\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const { classes } = useStyles({ isDragActive }) as any\n\n  return (\n    <div className={classes.root}>\n      <Paper className={classes.paper}>\n        <div {...getRootProps({ className: classes.dropZone })}>\n          <input {...getInputProps()} />\n          <CloudUploadIcon className={classes.uploadIcon} fontSize=\"large\" />\n          <Typography color=\"textSecondary\" align=\"center\" variant=\"body1\">\n            Drag and drop files here\n          </Typography>\n          <Typography color=\"textSecondary\" align=\"center\" variant=\"body2\">\n            or\n          </Typography>\n          <Button color=\"primary\" variant=\"contained\">\n            Browse Files\n          </Button>\n        </div>\n      </Paper>\n      {error ? (\n        <Paper className={classes.error}>\n          <div className={classes.errorHeader}>\n            <ErrorIcon color=\"inherit\" fontSize=\"large\" />\n            <div>\n              <Typography variant=\"h6\" color=\"inherit\" align=\"center\">\n                Import error\n              </Typography>\n            </div>\n          </div>\n          <Typography className={classes.errorMessage}>{`${error}`}</Typography>\n        </Paper>\n      ) : null}\n    </div>\n  )\n}\n\nexport default observer(ImportSession)\n"],"names":["MAX_FILE_SIZE","styledBy","property","mapping","props","useStyles","makeStyles","theme","root","margin","spacing","paper","display","flexDirection","dropZone","textAlign","padding","borderWidth","borderRadius","borderColor","true","palette","secondary","light","false","divider","borderStyle","backgroundColor","alpha","text","primary","action","hoverOpacity","background","default","outline","transition","uploadIcon","color","rejectedFiles","marginTop","listItem","expandIcon","error","errorHeader","contrastText","errorMessage","readBlobAsText","blob","a","FileReader","Promise","resolve","reject","onload","e","target","result","Error","readAsText","observer","model","useState","setError","useDropzone","accept","maxSize","multiple","onDrop","acceptedFiles","length","errors","map","join","sessionText","getSession","setSession","JSON","parse","session","console","getRootProps","getInputProps","isDragActive","classes","className","fontSize","align","variant"],"sourceRoot":""}