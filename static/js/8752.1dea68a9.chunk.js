"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[8752],{58752:function(e,a,t){t.r(a),t.d(a,{default:function(){return ee}});var n=t(33028),r=t(34795),s=t(96234),i=t(77162),o=t.n(i),l=t(30969),c=t(22714),d=t(80975),p=t(94534),u=t(94702),h=t(53492),m=t(80508),f=t(28599),g=t(81073),x=t(9077),v=t(90550),y=t(40909),j=t(56477),b=t(74062),k=t(1720),Z=t(51526),N=t(57071),w=t(34122),T=t(23957),S=t(67071),C=t(57886),M=t(7690),I=t(5877),D=t(32343),A=t(24940),P=t(28224),E=t(93717),O=t(24684),G=t(53017),U=t(10901),_=t(97891),B=t(37574),F=(0,c.Z)((function(e){return{spacing:{marginBottom:e.spacing(3)},paper:{display:"flex",flexDirection:"column",padding:e.spacing(1)},spacer:{height:e.spacing(8)},card:{marginTop:e.spacing(1)}}}));function W(e){var a,t=e.trackAdapter,n=e.trackType,r=F();return"SNPCoverageAdapter"===t.type?(0,B.jsxs)(d.Z,{className:r.spacing,children:["Selected ",(0,B.jsx)("code",{children:n}),". Using adapter"," ",(0,B.jsx)("code",{children:t.type})," with subadapter"," ",(0,B.jsx)("code",{children:null===(a=t.subadapter)||void 0===a?void 0:a.type}),". Please enter a track name and, if necessary, update the track type."]}):(0,B.jsxs)(d.Z,{className:r.spacing,children:["Using adapter ",(0,B.jsx)("code",{children:t.type})," and guessing track type"," ",(0,B.jsx)("code",{children:n}),". Please enter a track name and, if necessary, update the track type."]})}function J(e){var a="",t=[];return e.forEach((function(e){var n;if(null!==(n=e.adapterMetadata)&&void 0!==n&&n.category){var r,s,i,o,l,c,d;if(a!==(null===(r=e.adapterMetadata)||void 0===r?void 0:r.category))a=null===(o=e.adapterMetadata)||void 0===o?void 0:o.category,t.push((0,B.jsx)(b.Z,{value:null===(c=e.adapterMetadata)||void 0===c?void 0:c.category,children:null===(d=e.adapterMetadata)||void 0===d?void 0:d.category},null===(l=e.adapterMetadata)||void 0===l?void 0:l.category));t.push((0,B.jsx)(k.Z,{value:e.name,children:null!==(s=e.adapterMetadata)&&void 0!==s&&s.displayName?null===(i=e.adapterMetadata)||void 0===i?void 0:i.displayName:e.name},e.name))}})),t}var q=(0,v.observer)((function(e){var a=e.model,t=F(),n=(0,l.useState)(""),r=(0,s.Z)(n,2),i=r[0],o=r[1],c=(0,l.useState)(""),d=(0,s.Z)(c,2),p=d[0],u=d[1],h=(0,l.useState)(["Name","ID"]),m=(0,s.Z)(h,2),f=m[0],g=m[1],x=(0,l.useState)(["CDS","exon"]),v=(0,s.Z)(x,2),y=v[0],j=v[1],b=[{label:"Indexing attributes",values:f},{label:"Feature types to exclude",values:y}];return(0,l.useEffect)((function(){a.setTextIndexingConf({attributes:f,exclude:y})}),[a,f,y]),(0,B.jsxs)(Z.Z,{className:t.paper,children:[(0,B.jsx)(N.Z,{children:"Indexing configuration"}),b.map((function(e,a){return(0,B.jsx)(w.Z,{raised:!0,className:t.card,children:(0,B.jsxs)(T.Z,{children:[(0,B.jsx)(N.Z,{children:e.label}),(0,B.jsxs)(S.Z,{disablePadding:!0,children:[e.values.map((function(t,n){return(0,B.jsx)(C.Z,{disableGutters:!0,children:(0,B.jsx)(M.Z,{value:t,InputProps:{endAdornment:(0,B.jsx)(I.Z,{position:"end",children:(0,B.jsx)(D.Z,{color:"secondary",onClick:function(){var t=e.values.filter((function(e,a){return a!==n}));0===a?g(t):j(t)},children:(0,B.jsx)(G.Z,{})})})}})},n)})),(0,B.jsx)(C.Z,{disableGutters:!0,children:(0,B.jsx)(M.Z,{value:0===a?i:p,placeholder:"add new",onChange:function(e){0===a?o(e.target.value):u(e.target.value)},InputProps:{endAdornment:(0,B.jsx)(I.Z,{position:"end",children:(0,B.jsx)(D.Z,{onClick:function(){if(0===a){var e=f;e.push(i),g(e),o("")}else{var t=y;t.push(p),j(t),u("")}},disabled:0===a?""===i:""===p,color:"secondary","data-testid":"stringArrayAdd-Feat",children:(0,B.jsx)(U.Z,{})})})}})})]})]})},e.label)}))]})})),L=(0,v.observer)((function(e){var a=e.model,t=F(),n=(0,g.getSession)(a),r=a.trackAdapter,s=(0,y.getEnv)(n).pluginManager.getElementTypesInGroup("adapter");return(0,B.jsxs)(M.Z,{className:t.spacing,value:"UNKNOWN"!==(null===r||void 0===r?void 0:r.type)?null===r||void 0===r?void 0:r.type:"",label:"adapterType",helperText:"Select an adapter type",select:!0,fullWidth:!0,onChange:function(e){a.setAdapterHint(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"adapterTypeSelect"}},children:[s.filter((function(e){var a,t;return!(null!==(a=e.adapterMetadata)&&void 0!==a&&a.hiddenFromGUI)&&!(null!==(t=e.adapterMetadata)&&void 0!==t&&t.category)})).map((function(e){var a,t;return(0,B.jsx)(k.Z,{value:e.name,children:null!==(a=e.adapterMetadata)&&void 0!==a&&a.displayName?null===(t=e.adapterMetadata)||void 0===t?void 0:t.displayName:e.name},e.name)})),J(s.filter((function(e){var a;return!(null!==(a=e.adapterMetadata)&&void 0!==a&&a.hiddenFromGUI)})))]})}));function R(e){var a=e.model,t=F();return(0,B.jsxs)(B.Fragment,{children:[(0,B.jsxs)(d.Z,{className:t.spacing,children:["JBrowse was not able to guess the adapter type for this data, but it may be in the list below. If not, you can"," ",(0,B.jsx)(A.Z,{href:"https://github.com/GMOD/jbrowse-components/releases",target:"_blank",rel:"noopener noreferrer",children:"check for new releases"})," ","of JBrowse to see if they support this data type or"," ",(0,B.jsx)(A.Z,{href:"https://github.com/GMOD/jbrowse-components/issues/new",target:"_blank",rel:"noopener noreferrer",children:"file an issue"})," ","and add a feature request for this data type."]}),(0,B.jsx)(L,{model:a})]})}var H=(0,v.observer)((function(e){var a=e.model,t=F(),n=(0,g.getSession)(a),r=a.trackType,s=(0,y.getEnv)(n).pluginManager.getElementTypesInGroup("track");return(0,B.jsx)(M.Z,{className:t.spacing,value:r,label:"trackType",helperText:"Select a track type",select:!0,fullWidth:!0,onChange:function(e){a.setTrackType(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"trackTypeSelect"}},children:s.map((function(e){var a=e.name;return(0,B.jsx)(k.Z,{value:a,children:a},a)}))})})),K=(0,v.observer)((function(e){var a=e.model,t=(0,g.getSession)(a),n=a.assembly;return(0,B.jsx)(M.Z,{value:n,label:"assemblyName",helperText:"Assembly to which the track will be added",select:!0,fullWidth:!0,onChange:function(e){return a.setAssembly(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"assemblyNameSelect"}},children:t.assemblies.map((function(e){return(0,x.readConfObject)(e,"name")})).map((function(e){return(0,B.jsx)(k.Z,{value:e,children:e},e)}))})}));var z=(0,v.observer)((function(e){var a=e.model,t=F(),n=(0,l.useState)(!0),r=(0,s.Z)(n,2),i=r[0],o=r[1],c=a.trackName,p=a.trackAdapter,u=a.trackType,h=a.warningMessage,m=a.adapterHint;if(a.unsupported)return(0,B.jsxs)(d.Z,{className:t.spacing,children:["This version of JBrowse cannot display data of this type. It is possible, however, that there is a newer version that can display them. You can"," ",(0,B.jsx)(A.Z,{href:"https://github.com/GMOD/jbrowse-components/releases",target:"_blank",rel:"noopener noreferrer",children:"check for new releases"})," ","of JBrowse or"," ",(0,B.jsx)(A.Z,{href:"https://github.com/GMOD/jbrowse-components/issues/new",target:"_blank",rel:"noopener noreferrer",children:"file an issue"})," ","and add a feature request for this data type."]});if((null===p||void 0===p?void 0:p.type)===_.UNKNOWN)return(0,B.jsx)(R,{model:a});if(""===m&&p&&a.setAdapterHint(p.type),null===p||void 0===p||!p.type)return(0,B.jsx)(d.Z,{children:"Could not recognize this data type."});var f=(0,g.supportedIndexingAdapters)(null===p||void 0===p?void 0:p.type);return(0,B.jsxs)("div",{children:[p?(0,B.jsx)(W,{trackAdapter:p,trackType:u}):null,h?(0,B.jsx)(d.Z,{style:{color:"orange"},children:h}):null,(0,B.jsx)(M.Z,{className:t.spacing,label:"trackName",helperText:"A name for this track",fullWidth:!0,value:c,onChange:function(e){return a.setTrackName(e.target.value)},inputProps:{"data-testid":"trackNameInput"}}),(0,B.jsx)(L,{model:a}),(0,B.jsx)(H,{model:a}),(0,B.jsx)(K,{model:a}),g.isElectron&&f&&(0,B.jsx)(P.Z,{children:(0,B.jsx)(E.Z,{label:"Index track for text searching?",control:(0,B.jsx)(O.Z,{checked:i,onChange:function(e){o(e.target.checked),a.setTextIndexTrack(e.target.checked)}})})}),g.isElectron&&i&&f?(0,B.jsx)(q,{model:a}):null]})})),Y=t(24998),Q=(0,c.Z)((function(e){return{paper:{display:"flex",flexDirection:"column",padding:e.spacing(1)},spacer:{height:e.spacing(8)}}}));var V=(0,v.observer)((function(e){var a=e.model,t=Q(),n=(0,y.getRoot)(a);return(0,B.jsxs)(Z.Z,{className:t.paper,children:[(0,B.jsx)(Y.FileSelector,{name:"Main file",description:"",location:a.trackData,setLocation:a.setTrackData,setName:a.setTrackName,rootModel:n}),(0,B.jsx)("div",{className:t.spacer}),(0,B.jsx)(Y.FileSelector,{name:"Index file",description:"(Optional) The URL of the index file is automatically inferred from the URL of the main file if it is not supplied.",location:a.indexTrackData,setLocation:a.setIndexTrackData,setName:a.setTrackName,rootModel:n})]})})),X=(0,c.Z)((function(e){return{root:{marginTop:e.spacing(1)},stepper:{backgroundColor:e.palette.background.default},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},stepContent:{margin:e.spacing(1)},alertContainer:{padding:"".concat(e.spacing(2),"px 0px ").concat(e.spacing(2),"px 0px")}}})),$=["Enter track data","Confirm track type"];var ee=(0,v.observer)((function(e){var a=e.model,t=(0,l.useState)(0),i=(0,s.Z)(t,2),c=i[0],v=i[1],b=X(),k=(0,g.getSession)(a),Z=(0,y.getEnv)(k).pluginManager.rootModel.jobsManager,N=a.assembly,w=a.trackAdapter,T=a.trackData,S=a.trackName,C=a.trackType,M=a.textIndexTrack,I=a.textIndexingConf,D=(0,l.useState)(),A=(0,s.Z)(D,2),P=A[0],E=A[1];function O(e){switch(e){case 0:return(0,B.jsx)(V,{model:a});case 1:return(0,B.jsx)(z,{model:a});default:return(0,B.jsx)(d.Z,{children:"Unknown step"})}}function G(){return U.apply(this,arguments)}function U(){return(U=(0,r.Z)(o().mark((function e(){var t,r,s,i,l,d,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c===$.length-1){e.next=3;break}return v(c+1),e.abrupt("return");case 3:t="".concat(S.toLowerCase().replace(/ /g,"_"),"-").concat(Date.now()).concat(k.adminMode?"":"-sessionTrack"),r=k.assemblyManager.get(N),w&&"UNKNOWN"!==w.type?(k.addTrackConf({trackId:t,type:C,name:S,assemblyNames:[N],adapter:(0,n.Z)((0,n.Z)({},w),{},{sequenceAdapter:(0,x.getConf)(r,["sequence","adapter"])})}),s={attributes:["Name","ID"],exclude:["CDS","exon"]},a.view?(a.view.showTrack(t),g.isElectron&&M&&(0,g.supportedIndexingAdapters)(w.type)&&(i=I||s,l=S+"-index",d=(0,n.Z)((0,n.Z)({},i),{},{assemblies:[N],tracks:[t],indexType:"perTrack",name:l,timestamp:(new Date).toISOString()}),p={indexingParams:d,name:l,cancelCallback:function(){Z.abortJob()}},Z.queueJob(p))):k.notify("Open a new view, or use the track selector in an existing view, to view this track","info"),a.clearData(),k.hideWidget(a)):E("Failed to add track.\nThe configuration of this file is not currently supported.");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){E(void 0),v(c-1)}function F(){switch(c){case 0:return!T;case 1:return!(S&&C&&null!==w&&void 0!==w&&w.type&&N);default:return!0}}return(0,B.jsx)("div",{className:b.root,children:(0,B.jsx)(p.Z,{className:b.stepper,activeStep:c,orientation:"vertical",children:$.map((function(e,a){return(0,B.jsxs)(u.Z,{children:[(0,B.jsx)(h.Z,{children:e}),(0,B.jsxs)(m.Z,{children:[O(a),(0,B.jsxs)("div",{className:b.actionsContainer,children:[(0,B.jsx)(f.Z,{disabled:0===c,onClick:_,className:b.button,children:"Back"}),(0,B.jsx)(f.Z,{disabled:F(),variant:"contained",color:"primary",onClick:G,className:b.button,"data-testid":"addTrackNextButton",children:c===$.length-1?"Add":"Next"})]}),P?(0,B.jsx)("div",{className:b.alertContainer,children:(0,B.jsx)(j.Z,{severity:"error",children:P})}):null]})]},e)}))})})}))}}]);
//# sourceMappingURL=8752.1dea68a9.chunk.js.map