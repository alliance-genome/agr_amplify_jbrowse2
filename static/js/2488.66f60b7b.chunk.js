"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[2488],{52488:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var n=a(66204),r=a(80846),o=a(31211),s=a(18569),i=a(43902),c=a(29520),l=a(31617),d=a(90228),m=a(80013),p=a(23540),u=a(2749),h=a(46338),f=a(62301),b=a(7146),w=a(92813),x=a(63765),Z=a(38684),g=a(49084),y=a(2266),k=a(98621),v=a(3212),S=a(86891);const E=(0,Z.ZL)()((e=>({flexItem:{margin:5},expandIcon:{color:e.palette.tertiary?.contrastText||"#fff"}}))),C=(0,r.observer)((function({onClose:e,model:t}){const{classes:a}=E(),[r,Z]=(0,n.useState)(),[C,I]=(0,n.useState)(),[N,A]=(0,n.useState)(""),R=(0,o.getSession)(t),{assemblyNames:j}=R,[M,$]=(0,n.useState)(j[0]),[P,V]=(0,n.useState)("shareLinkAccordion");return n.createElement(i.Dialog,{open:!0,onClose:e,maxWidth:"xl",title:"Import bookmarks"},n.createElement(c.Z,null,n.createElement(l.Z,{expanded:"shareLinkAccordion"===P,onChange:()=>V("shareLinkAccordion")},n.createElement(d.Z,{expandIcon:n.createElement(y.Z,{className:a.expandIcon})},n.createElement(m.Z,{style:{display:"flex",alignItems:"center",gap:"5px"}},"Import from share link"," ",n.createElement(p.Z,{title:"The appropriate share link for sharing bookmarks is one generated via the 'Share' button in the 'Bookmarked regions' drawer. Paste it below to import shared bookmarks."},n.createElement(k.Z,null)))),n.createElement(u.Z,null,n.createElement(h.Z,{label:"Enter URL",variant:"outlined",style:{width:"100%"},value:N,onChange:e=>A(e.target.value)}))),n.createElement(l.Z,{expanded:"fileAccordion"===P,onChange:()=>V("fileAccordion")},n.createElement(d.Z,{expandIcon:n.createElement(y.Z,{className:a.expandIcon})},n.createElement(m.Z,null,"Import from file")),n.createElement(u.Z,null,n.createElement(i.FileSelector,{location:r,setLocation:Z,name:"File",description:"Choose a BED or TSV format file to import."}),n.createElement(x.Z,{onChange:e=>$(e),helperText:"Select the assembly your bookmarks belong to (BED or TSV without assembly column).",session:R,selected:M}))),C?n.createElement(m.Z,{color:"error",variant:"h6"},`${C}`):null),n.createElement(f.Z,null,n.createElement(b.Z,{variant:"contained",color:"secondary",onClick:e},"Cancel"),n.createElement(b.Z,{className:a.flexItem,"data-testid":"dialogImport",variant:"contained",color:"primary",disabled:!r&&!N,startIcon:n.createElement(g.Z,null),onClick:async()=>{try{r?t.importBookmarks(await async function(e,t){return(await(0,w.openLocation)(e).readFile("utf8")).split(/\n|\r\n|\r/).filter((e=>!!e.trim())).filter((e=>!e.startsWith("#")&&!e.startsWith("track")&&!e.startsWith("browser"))).map((e=>{const[a,n,r,o,s]=e.split("\t");return{assemblyName:s??t,refName:a,start:+n,end:+r,label:"."===o?void 0:o}}))}(r,M)):N&&(0,s.gx)(R)&&t.importBookmarks(await async function(e,t){const a=new URL(e),n=a.searchParams.get("bookmarks"),r=a.searchParams.get("password"),o=await(0,S.h)(`${t??"https://share.jbrowse.org/api/v1/"}load`,n||"",r||"");return JSON.parse(await(0,v.cD)(o)).sharedBookmarks}(N,R.shareURL)),e()}catch(e){console.error(e),I(e)}}},"Import")))}))},86891:(e,t,a)=>{a.d(t,{h:()=>c,p:()=>i});var n=a(3212);const r=async(e,t)=>(await Promise.all([a.e(1034),a.e(5456),a.e(633)]).then(a.t.bind(a,55456,23))).encrypt(e,t).toString(),o=async(e,t)=>{const n=await Promise.all([a.e(1034),a.e(5456),a.e(633)]).then(a.t.bind(a,55456,23)),r=await Promise.all([a.e(1034),a.e(7926)]).then(a.t.bind(a,99693,23));return n.decrypt(e,t).toString(r)};function s(e){try{return JSON.parse(e).message}catch(t){return e}}async function i(e,t,a){const o=await(0,n.JY)(JSON.stringify(e)),i=(5,window.btoa([...window.crypto.getRandomValues(new Uint8Array(10))].map((e=>String.fromCharCode(e))).join("")).replaceAll(/[+/]/g,"").slice(0,5));const c=await r(o,i),l=new FormData;l.append("session",c),l.append("dateShared",`${Date.now()}`),l.append("referer",a);const d=await fetch(`${t}share`,{method:"POST",mode:"cors",body:l});if(!d.ok){const e=await d.text();throw new Error(s(e))}return{json:await d.json(),encryptedSession:c,password:i}}async function c(e,t,a,n){const r=t.split("share-")[1],i=`${e}?sessionId=${encodeURIComponent(r)}`,c=await fetch(i,{signal:n});if(!c.ok){const e=await c.text();throw new Error(s(e))}const l=await c.json();return o(l.session,a)}},2266:(e,t,a)=>{var n=a(57739);t.Z=void 0;var r=n(a(53948)),o=a(43188),s=(0,r.default)((0,o.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");t.Z=s},2749:(e,t,a)=>{a.d(t,{Z:()=>h});var n=a(30984),r=a(55559),o=a(66204),s=a(56317),i=a(58029),c=a(61125),l=a(57369),d=a(72197),m=a(43188);const p=["className"],u=(0,c.ZP)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({padding:e.spacing(1,2,2)}))),h=o.forwardRef((function(e,t){const a=(0,l.Z)({props:e,name:"MuiAccordionDetails"}),{className:o}=a,c=(0,r.Z)(a,p),h=a,f=(e=>{const{classes:t}=e;return(0,i.Z)({root:["root"]},d.s,t)})(h);return(0,m.jsx)(u,(0,n.Z)({className:(0,s.Z)(f.root,o),ref:t,ownerState:h},c))}))},72197:(e,t,a)=>{a.d(t,{Z:()=>s,s:()=>o});var n=a(58109),r=a(95201);function o(e){return(0,r.Z)("MuiAccordionDetails",e)}const s=(0,n.Z)("MuiAccordionDetails",["root"])},90228:(e,t,a)=>{a.d(t,{Z:()=>y});var n=a(55559),r=a(30984),o=a(66204),s=a(56317),i=a(58029),c=a(61125),l=a(57369),d=a(42870),m=a(86032),p=a(58109),u=a(95201);function h(e){return(0,u.Z)("MuiAccordionSummary",e)}const f=(0,p.Z)("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]);var b=a(43188);const w=["children","className","expandIcon","focusVisibleClassName","onClick"],x=(0,c.ZP)(d.Z,{name:"MuiAccordionSummary",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e,ownerState:t})=>{const a={duration:e.transitions.duration.shortest};return(0,r.Z)({display:"flex",minHeight:48,padding:e.spacing(0,2),transition:e.transitions.create(["min-height","background-color"],a),[`&.${f.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${f.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`&:hover:not(.${f.disabled})`]:{cursor:"pointer"}},!t.disableGutters&&{[`&.${f.expanded}`]:{minHeight:64}})})),Z=(0,c.ZP)("div",{name:"MuiAccordionSummary",slot:"Content",overridesResolver:(e,t)=>t.content})((({theme:e,ownerState:t})=>(0,r.Z)({display:"flex",flexGrow:1,margin:"12px 0"},!t.disableGutters&&{transition:e.transitions.create(["margin"],{duration:e.transitions.duration.shortest}),[`&.${f.expanded}`]:{margin:"20px 0"}}))),g=(0,c.ZP)("div",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper",overridesResolver:(e,t)=>t.expandIconWrapper})((({theme:e})=>({display:"flex",color:(e.vars||e).palette.action.active,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),[`&.${f.expanded}`]:{transform:"rotate(180deg)"}}))),y=o.forwardRef((function(e,t){const a=(0,l.Z)({props:e,name:"MuiAccordionSummary"}),{children:c,className:d,expandIcon:p,focusVisibleClassName:u,onClick:f}=a,y=(0,n.Z)(a,w),{disabled:k=!1,disableGutters:v,expanded:S,toggle:E}=o.useContext(m.Z),C=(0,r.Z)({},a,{expanded:S,disabled:k,disableGutters:v}),I=(e=>{const{classes:t,expanded:a,disabled:n,disableGutters:r}=e,o={root:["root",a&&"expanded",n&&"disabled",!r&&"gutters"],focusVisible:["focusVisible"],content:["content",a&&"expanded",!r&&"contentGutters"],expandIconWrapper:["expandIconWrapper",a&&"expanded"]};return(0,i.Z)(o,h,t)})(C);return(0,b.jsxs)(x,(0,r.Z)({focusRipple:!1,disableRipple:!0,disabled:k,component:"div","aria-expanded":S,className:(0,s.Z)(I.root,d),focusVisibleClassName:(0,s.Z)(I.focusVisible,u),onClick:e=>{E&&E(e),f&&f(e)},ref:t,ownerState:C},y,{children:[(0,b.jsx)(Z,{className:I.content,ownerState:C,children:c}),p&&(0,b.jsx)(g,{className:I.expandIconWrapper,ownerState:C,children:p})]}))}))}}]);
//# sourceMappingURL=2488.66f60b7b.chunk.js.map