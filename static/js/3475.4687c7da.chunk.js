"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[3475],{93475:function(e,t,r){r.r(t),r.d(t,{default:function(){return O}});var n=r(33028),a=r(41361),o=r(32723),s=r(34795),i=r(96234),c=r(59740),l=r(30969),u=r(33528),d=r(39712),f=r(70054),p=r(3562),h=r(81235),v=r(72243),Z=r(21777),m=r(78742),b=r(52849),x=r(2374),g=r(81073),y=r(53557),j=r(8118),S=r(40506),w=r(65410),C=r(10679),k=r(75286),R=r(66581),M=r(73701),N=r(16374),L=r(37574);var z=function(e){var t=(0,l.useState)(),r=(0,i.Z)(t,2),n=r[0],a=r[1],c=(0,l.useState)(),p=(0,i.Z)(c,2),h=p[0],v=p[1],Z=e.hub,m=Z.url,b=Z.longLabel,x=Z.shortLabel;return(0,l.useEffect)((function(){function e(){return(e=(0,s.Z)((0,o.Z)().mark((function e(){var t,r,n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=(0,u.openLocation)({uri:m,locationType:"UriLocation"}),e.next=4,t.readFile("utf8");case 4:r=e.sent,n=new j.HubFile(r),a(n),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),v(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[m]),h?(0,L.jsx)(S.Z,{children:(0,L.jsx)(w.Z,{children:(0,L.jsx)(f.Z,{color:"error",children:"".concat(h)})})}):n?(0,L.jsxs)(S.Z,{children:[(0,L.jsx)(C.Z,{title:x}),(0,L.jsx)(w.Z,{children:(0,L.jsx)(y.SanitizedHTML,{html:b})}),(0,L.jsxs)(k.Z,{children:[(0,L.jsx)(R.Z,{href:"mailto:".concat(n.get("email")),rel:"noopener noreferrer",target:"_blank",color:"secondary",children:(0,L.jsx)(M.Z,{})}),n.get("descriptionUrl")?(0,L.jsx)(R.Z,{href:new URL(n.get("descriptionUrl")||"",new URL(m)).href,rel:"noopener noreferrer",target:"_blank",children:(0,L.jsx)(N.Z,{color:"secondary"})}):null]})]}):(0,L.jsx)(d.Z,{variant:"query"})},T=r(49197),P=r(89003),H=r(28712),A=r(64640),I=(0,x.ZL)()((function(e){return{formControl:{minWidth:192,marginLeft:e.spacing(2),marginRight:e.spacing(2)}}}));var F=function(e){var t=e.selectList,r=e.selectedItem,n=e.handleSelect,a=e.label,o=e.helpText,s=I().classes;return(0,L.jsxs)(p.Z,{className:s.formControl,children:[(0,L.jsx)(T.Z,{children:a}),(0,L.jsx)(P.Z,{value:r,onChange:n,label:o,children:t.map((function(e){var t,r;return e.name&&(t=e.name,r="".concat(e.name," (").concat(e.synonyms.join(" "),")")),(0,L.jsx)(H.Z,{value:t||e,children:r||e},r||e)}))}),(0,L.jsx)(A.Z,{children:o})]})},_=r(34744),E=["children"];function U(e){var t=e.status;return(0,L.jsxs)(L.Fragment,{children:[(0,L.jsx)(d.Z,{variant:"query"}),(0,L.jsx)(f.Z,{children:t})]})}function q(e){return(0,e.children)((0,c.Z)(e,E))}var B=(0,x.ZL)()((function(e){return{hubList:{maxHeight:400,overflowY:"auto"},genomeSelector:{marginTop:e.spacing(1)}}}));var O=function(e){var t=e.model,r=e.session,c=(0,l.useState)(),d=(0,i.Z)(c,2),x=d[0],j=d[1],S=(0,l.useState)(),w=(0,i.Z)(S,2),C=w[0],k=w[1],R=(0,l.useState)(""),M=(0,i.Z)(R,2),N=M[0],T=M[1],P=(0,l.useState)(""),H=(0,i.Z)(P,2),A=H[0],I=H[1],E=(0,l.useState)(new Map),O=(0,i.Z)(E,2),J=O[0],V=O[1],D=(0,l.useState)(!1),G=(0,i.Z)(D,2),Q=G[0],W=G[1],Y=(0,l.useState)(""),K=(0,i.Z)(Y,2),X=K[0],$=K[1],ee=(0,l.useState)(),te=(0,i.Z)(ee,2),re=te[0],ne=te[1],ae=B().classes;(0,l.useEffect)((function(){var e=new AbortController,t=e.signal;function r(){return(r=(0,s.Z)((0,o.Z)().mark((function e(){var r;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,_.Q)("https://www.trackhubregistry.org/api/info/ping",{signal:t});case 3:if(1===e.sent.ping){e.next=7;break}return j("Registry is not available"),e.abrupt("return");case 7:return e.next=9,(0,_.Q)("https://www.trackhubregistry.org/api/info/assemblies",{signal:t});case 9:r=e.sent,k(r),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),(0,g.isAbortException)(e.t0)||(console.error(e.t0),j(e.t0));case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))).apply(this,arguments)}return function(){r.apply(this,arguments)}(),function(){e.abort()}}),[]),(0,l.useEffect)((function(){var e=new AbortController,t=e.signal;function r(e){return n.apply(this,arguments)}function n(){return(n=(0,s.Z)((0,o.Z)().mark((function e(r){var n,s,i,c,l,d,f;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,10,n=r?new Map:new Map(J),s=Math.floor(J.size/10)+1,e.next=6,(0,_.F)("https://www.trackhubregistry.org/api/search",{page:s,entries_per_page:10},{body:JSON.stringify({assembly:A}),signal:t});case 6:if(!(i=e.sent)){e.next=39;break}c=(0,a.Z)(i.items),e.prev=9,c.s();case 11:if((l=c.n()).done){e.next=29;break}if(!(d=l.value).hub.url.startsWith("ftp://")){e.next=17;break}d.error="JBrowse cannot add connections from FTP sources",e.next=26;break;case 17:return f=(0,u.openLocation)({uri:d.hub.url,locationType:"UriLocation"}),e.prev=18,e.next=21,f.stat();case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(18),d.error="".concat(e.t0);case 26:n.set(d.id,d);case 27:e.next=11;break;case 29:e.next=34;break;case 31:e.prev=31,e.t1=e.catch(9),c.e(e.t1);case 34:return e.prev=34,c.f(),e.finish(34);case 37:V(n),n.size===i.total_entries&&W(!0);case 39:e.next=44;break;case 41:e.prev=41,e.t2=e.catch(0),(0,g.isAbortException)(e.t2)||(console.error(e.t2),j(e.t2));case 44:case"end":return e.stop()}}),e,null,[[0,41],[9,31,34,37],[18,23]])})))).apply(this,arguments)}return(0,s.Z)((0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x||(A&&!J.size?r(!0):J.size&&!Q&&r());case 1:case"end":return e.stop()}}),e)})))(),function(){e.abort()}}),[A,x,J,Q]);var oe=[(0,L.jsx)(f.Z,{variant:"h6",children:"The Track Hub Registry"},"heading")];if(x)return oe.push((0,L.jsx)(f.Z,{color:"error",children:"".concat(x)},"error")),(0,L.jsx)("div",{children:oe});if(!C)return oe.push((0,L.jsx)(U,{status:"Connecting to registry..."},"queryStatus")),(0,L.jsx)("div",{children:oe});var se=Object.keys(C).sort();if(oe.push((0,L.jsx)(F,{selectList:se,selectedItem:N,handleSelect:function(e){T(e.target.value),I(""),V(new Map),$(""),W(!1)},label:"Species",helpText:"Select a species"},"speciesSelect")),N){var ie=C[N].filter((function(e){return!("GRCh37"===e.name&&"hg38"===e.synonyms[0])}));oe.push((0,L.jsx)(F,{selectList:ie,selectedItem:A,handleSelect:function(e){I(e.target.value),V(new Map),$(""),W(!1)},label:"Assembly",helpText:"Select an assembly"},"assemblySelect"))}return A&&(oe.push((0,L.jsxs)("div",{children:[(0,L.jsx)(f.Z,{children:"Select an assembly from our local tracklist if it doesn't match the assembly name on the remote trackhub"}),(0,L.jsx)(y.AssemblySelector,{session:r,onChange:function(e){return ne(e)},selected:re||A}),(0,L.jsx)("br",{}),(0,L.jsxs)(p.Z,{children:[(0,L.jsx)(h.Z,{children:"Hubs:"}),(0,L.jsx)("div",{className:ae.hubList,children:(0,L.jsx)(v.Z,{value:X,onChange:function(e){var r=e.target.value;$(r),t.target.name.set(J.get(r).hub.shortLabel),t.target.assemblyNames.set([A]),t.target.trackDbId.set(r)},children:Array.from(J.values()).filter((function(e){var t=e.assembly;return t.name===A||t.synonyms.includes(A)})).map((function(e){var t=e.error,r=e.id,a=e.hub,o=a.shortLabel,s=a.longLabel;return(0,L.jsx)(q,{value:r,children:function(e){return(0,L.jsx)(Z.Z,{title:t||(0,L.jsx)(y.SanitizedHTML,{html:s}),placement:"left",children:(0,L.jsx)(m.Z,(0,n.Z)({value:r,label:(0,L.jsx)(y.SanitizedHTML,{html:o}),disabled:Boolean(t),control:(0,L.jsx)(b.Z,{})},e),r)})}},r)}))})})]})]},"hubSelect")),Q||oe.push((0,L.jsx)(U,{status:"Retrieving hubs"},"hubStatus"))),X&&oe.push((0,L.jsx)(z,{hub:J.get(X).hub},"hubDetails")),(0,L.jsx)(L.Fragment,{children:oe})}},73701:function(e,t,r){var n=r(71600);t.Z=void 0;var a=n(r(48035)),o=r(37574),s=(0,a.default)((0,o.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4-8 5-8-5V6l8 5 8-5v2z"}),"Email");t.Z=s},40506:function(e,t,r){var n=r(7896),a=r(31461),o=r(30969),s=r(81856),i=r(26540),c=r(62221),l=r(2441),u=r(65629),d=r(65394),f=r(37574),p=["className","raised"],h=(0,c.ZP)(u.Z,{name:"MuiCard",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{overflow:"hidden"}})),v=o.forwardRef((function(e,t){var r=(0,l.Z)({props:e,name:"MuiCard"}),o=r.className,c=r.raised,u=void 0!==c&&c,v=(0,a.Z)(r,p),Z=(0,n.Z)({},r,{raised:u}),m=function(e){var t=e.classes;return(0,i.Z)({root:["root"]},d.y,t)}(Z);return(0,f.jsx)(h,(0,n.Z)({className:(0,s.default)(m.root,o),elevation:u?8:void 0,ref:t,ownerState:Z},v))}));t.Z=v},65394:function(e,t,r){r.d(t,{y:function(){return a}});var n=r(2975);function a(e){return(0,n.Z)("MuiCard",e)}var o=(0,r(62746).Z)("MuiCard",["root"]);t.Z=o},75286:function(e,t,r){var n=r(31461),a=r(7896),o=r(30969),s=r(81856),i=r(26540),c=r(62221),l=r(2441),u=r(96046),d=r(37574),f=["disableSpacing","className"],p=(0,c.ZP)("div",{name:"MuiCardActions",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,!r.disableSpacing&&t.spacing]}})((function(e){var t=e.ownerState;return(0,a.Z)({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})})),h=o.forwardRef((function(e,t){var r=(0,l.Z)({props:e,name:"MuiCardActions"}),o=r.disableSpacing,c=void 0!==o&&o,h=r.className,v=(0,n.Z)(r,f),Z=(0,a.Z)({},r,{disableSpacing:c}),m=function(e){var t=e.classes,r={root:["root",!e.disableSpacing&&"spacing"]};return(0,i.Z)(r,u.s,t)}(Z);return(0,d.jsx)(p,(0,a.Z)({className:(0,s.default)(m.root,h),ownerState:Z,ref:t},v))}));t.Z=h},96046:function(e,t,r){r.d(t,{s:function(){return a}});var n=r(2975);function a(e){return(0,n.Z)("MuiCardActions",e)}var o=(0,r(62746).Z)("MuiCardActions",["root","spacing"]);t.Z=o},65410:function(e,t,r){var n=r(7896),a=r(31461),o=r(30969),s=r(81856),i=r(26540),c=r(62221),l=r(2441),u=r(76512),d=r(37574),f=["className","component"],p=(0,c.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),h=o.forwardRef((function(e,t){var r=(0,l.Z)({props:e,name:"MuiCardContent"}),o=r.className,c=r.component,h=void 0===c?"div":c,v=(0,a.Z)(r,f),Z=(0,n.Z)({},r,{component:h}),m=function(e){var t=e.classes;return(0,i.Z)({root:["root"]},u.N,t)}(Z);return(0,d.jsx)(p,(0,n.Z)({as:h,className:(0,s.default)(m.root,o),ownerState:Z,ref:t},v))}));t.Z=h},76512:function(e,t,r){r.d(t,{N:function(){return a}});var n=r(2975);function a(e){return(0,n.Z)("MuiCardContent",e)}var o=(0,r(62746).Z)("MuiCardContent",["root"]);t.Z=o},10679:function(e,t,r){var n=r(56666),a=r(31461),o=r(7896),s=r(30969),i=r(81856),c=r(26540),l=r(70054),u=r(2441),d=r(62221),f=r(25303),p=r(37574),h=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],v=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:function(e,t){var r;return(0,o.Z)((r={},(0,n.Z)(r,"& .".concat(f.Z.title),t.title),(0,n.Z)(r,"& .".concat(f.Z.subheader),t.subheader),r),t.root)}})({display:"flex",alignItems:"center",padding:16}),Z=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:function(e,t){return t.avatar}})({display:"flex",flex:"0 0 auto",marginRight:16}),m=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:function(e,t){return t.action}})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),b=(0,d.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:function(e,t){return t.content}})({flex:"1 1 auto"}),x=s.forwardRef((function(e,t){var r=(0,u.Z)({props:e,name:"MuiCardHeader"}),n=r.action,s=r.avatar,d=r.className,x=r.component,g=void 0===x?"div":x,y=r.disableTypography,j=void 0!==y&&y,S=r.subheader,w=r.subheaderTypographyProps,C=r.title,k=r.titleTypographyProps,R=(0,a.Z)(r,h),M=(0,o.Z)({},r,{component:g,disableTypography:j}),N=function(e){var t=e.classes;return(0,c.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},f.J,t)}(M),L=C;null==L||L.type===l.Z||j||(L=(0,p.jsx)(l.Z,(0,o.Z)({variant:s?"body2":"h5",className:N.title,component:"span",display:"block"},k,{children:L})));var z=S;return null==z||z.type===l.Z||j||(z=(0,p.jsx)(l.Z,(0,o.Z)({variant:s?"body2":"body1",className:N.subheader,color:"text.secondary",component:"span",display:"block"},w,{children:z}))),(0,p.jsxs)(v,(0,o.Z)({className:(0,i.default)(N.root,d),as:g,ref:t,ownerState:M},R,{children:[s&&(0,p.jsx)(Z,{className:N.avatar,ownerState:M,children:s}),(0,p.jsxs)(b,{className:N.content,ownerState:M,children:[L,z]}),n&&(0,p.jsx)(m,{className:N.action,ownerState:M,children:n})]}))}));t.Z=x},25303:function(e,t,r){r.d(t,{J:function(){return a}});var n=r(2975);function a(e){return(0,n.Z)("MuiCardHeader",e)}var o=(0,r(62746).Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"]);t.Z=o},52849:function(e,t,r){r.d(t,{Z:function(){return N}});var n=r(56666),a=r(31461),o=r(7896),s=r(30969),i=r(81856),c=r(26540),l=r(74262),u=r(56844),d=r(2441),f=r(12104),p=r(37574),h=(0,f.Z)((0,p.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),v=(0,f.Z)((0,p.jsx)("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),Z=r(62221),m=(0,Z.ZP)("span")({position:"relative",display:"flex"}),b=(0,Z.ZP)(h)({transform:"scale(1)"}),x=(0,Z.ZP)(v)((function(e){var t=e.theme,r=e.ownerState;return(0,o.Z)({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest})},r.checked&&{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})})}));var g=function(e){var t=e.checked,r=void 0!==t&&t,n=e.classes,a=void 0===n?{}:n,s=e.fontSize,i=(0,o.Z)({},e,{checked:r});return(0,p.jsxs)(m,{className:a.root,ownerState:i,children:[(0,p.jsx)(b,{fontSize:s,className:a.background,ownerState:i}),(0,p.jsx)(x,{fontSize:s,className:a.dot,ownerState:i})]})},y=r(99853),j=r(74223),S=r(67889),w=r(5318),C=["checked","checkedIcon","color","icon","name","onChange","size","className"],k=(0,Z.ZP)(u.Z,{shouldForwardProp:function(e){return(0,Z.FO)(e)||"classes"===e},name:"MuiRadio",slot:"Root",overridesResolver:function(e,t){var r=e.ownerState;return[t.root,t["color".concat((0,y.Z)(r.color))]]}})((function(e){var t=e.theme,r=e.ownerState;return(0,o.Z)({color:(t.vars||t).palette.text.secondary,"&:hover":{backgroundColor:t.vars?"rgba(".concat("default"===r.color?t.vars.palette.action.activeChannel:t.vars.palette[r.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,l.Fq)("default"===r.color?t.palette.action.active:t.palette[r.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==r.color&&(0,n.Z)({},"&.".concat(w.Z.checked),{color:(t.vars||t).palette[r.color].main}),(0,n.Z)({},"&.".concat(w.Z.disabled),{color:(t.vars||t).palette.action.disabled}))}));var R=(0,p.jsx)(g,{checked:!0}),M=(0,p.jsx)(g,{}),N=s.forwardRef((function(e,t){var r,n,l,u,f=(0,d.Z)({props:e,name:"MuiRadio"}),h=f.checked,v=f.checkedIcon,Z=void 0===v?R:v,m=f.color,b=void 0===m?"primary":m,x=f.icon,g=void 0===x?M:x,N=f.name,L=f.onChange,z=f.size,T=void 0===z?"medium":z,P=f.className,H=(0,a.Z)(f,C),A=(0,o.Z)({},f,{color:b,size:T}),I=function(e){var t=e.classes,r=e.color,n={root:["root","color".concat((0,y.Z)(r))]};return(0,o.Z)({},t,(0,c.Z)(n,w.l,t))}(A),F=(0,S.Z)(),_=h,E=(0,j.Z)(L,F&&F.onChange),U=N;return F&&("undefined"===typeof _&&(l=F.value,_="object"===typeof(u=f.value)&&null!==u?l===u:String(l)===String(u)),"undefined"===typeof U&&(U=F.name)),(0,p.jsx)(k,(0,o.Z)({type:"radio",icon:s.cloneElement(g,{fontSize:null!=(r=M.props.fontSize)?r:T}),checkedIcon:s.cloneElement(Z,{fontSize:null!=(n=R.props.fontSize)?n:T}),ownerState:A,classes:I,name:U,checked:_,onChange:E,ref:t,className:(0,i.default)(I.root,P)},H))}))},5318:function(e,t,r){r.d(t,{l:function(){return a}});var n=r(2975);function a(e){return(0,n.Z)("MuiRadio",e)}var o=(0,r(62746).Z)("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary"]);t.Z=o},72243:function(e,t,r){var n=r(96234),a=r(7896),o=r(31461),s=r(30969),i=r(20098),c=r(63970),l=r(61506),u=r(72038),d=r(41806),f=r(37574),p=["actions","children","defaultValue","name","onChange","value"],h=s.forwardRef((function(e,t){var r=e.actions,h=e.children,v=e.defaultValue,Z=e.name,m=e.onChange,b=e.value,x=(0,o.Z)(e,p),g=s.useRef(null),y=(0,l.Z)({controlled:b,default:v,name:"RadioGroup"}),j=(0,n.Z)(y,2),S=j[0],w=j[1];s.useImperativeHandle(r,(function(){return{focus:function(){var e=g.current.querySelector("input:not(:disabled):checked");e||(e=g.current.querySelector("input:not(:disabled)")),e&&e.focus()}}}),[]);var C=(0,c.Z)(t,g),k=(0,d.Z)(Z);return(0,f.jsx)(u.Z.Provider,{value:{name:k,onChange:function(e){w(e.target.value),m&&m(e,e.target.value)},value:S},children:(0,f.jsx)(i.Z,(0,a.Z)({role:"radiogroup",ref:C},x,{children:h}))})}));t.Z=h},72038:function(e,t,r){var n=r(30969).createContext(void 0);t.Z=n},67889:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(30969),a=r(72038);function o(){return n.useContext(a.Z)}}}]);
//# sourceMappingURL=3475.4687c7da.chunk.js.map