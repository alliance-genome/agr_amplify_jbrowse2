{"version":3,"file":"static/js/6261.e2eee674.chunk.js","mappings":"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","sources":["../../../plugins/config/src/FromConfigAdapter/FromConfigAdapter.ts"],"sourcesContent":["import { BaseFeatureDataAdapter } from '@jbrowse/core/data_adapters/BaseAdapter'\nimport SimpleFeature, {\n  Feature,\n  SimpleFeatureSerialized,\n} from '@jbrowse/core/util/simpleFeature'\nimport { ObservableCreate } from '@jbrowse/core/util/rxjs'\nimport { NoAssemblyRegion } from '@jbrowse/core/util/types'\nimport {\n  AnyConfigurationModel,\n  readConfObject,\n} from '@jbrowse/core/configuration'\nimport PluginManager from '@jbrowse/core/PluginManager'\nimport { getSubAdapterType } from '@jbrowse/core/data_adapters/dataAdapterCache'\n\n/**\n * Adapter that just returns the features defined in its `features` configuration\n * key, like:\n *   `\"features\": [ { \"refName\": \"ctgA\", \"start\":1, \"end\":20 }, ... ]`\n */\n\nexport default class FromConfigAdapter extends BaseFeatureDataAdapter {\n  protected features: Map<string, Feature[]>\n\n  constructor(\n    conf: AnyConfigurationModel,\n    getSubAdapter?: getSubAdapterType,\n    pluginManager?: PluginManager,\n  ) {\n    super(conf, getSubAdapter, pluginManager)\n    const feats = readConfObject(conf, 'features') as SimpleFeatureSerialized[]\n    this.features = FromConfigAdapter.makeFeatures(feats || [])\n  }\n\n  static makeFeatures(fdata: SimpleFeatureSerialized[]) {\n    const features = new Map<string, Feature[]>()\n    for (let i = 0; i < fdata.length; i += 1) {\n      if (fdata[i]) {\n        const f = this.makeFeature(fdata[i])\n        const refName = f.get('refName') as string\n        let bucket = features.get(refName)\n        if (!bucket) {\n          bucket = []\n          features.set(refName, bucket)\n        }\n\n        bucket.push(f)\n      }\n    }\n\n    // sort the features on each reference sequence by start coordinate\n    for (const refFeatures of features.values()) {\n      refFeatures.sort((a, b) => a.get('start') - b.get('start'))\n    }\n\n    return features\n  }\n\n  static makeFeature(data: SimpleFeatureSerialized) {\n    return new SimpleFeature(data)\n  }\n\n  async getRefNames() {\n    return [...this.features.keys()]\n  }\n\n  async getRefNameAliases() {\n    return Array.from(this.features.values()).map(featureArray => ({\n      refName: featureArray[0].get('refName'),\n      aliases: featureArray[0].get('aliases'),\n    }))\n  }\n\n  getFeatures(region: NoAssemblyRegion) {\n    const { refName, start, end } = region\n\n    return ObservableCreate<Feature>(async observer => {\n      const features = this.features.get(refName) || []\n      for (let i = 0; i < features.length; i++) {\n        const f = features[i]\n\n        if (f.get('end') > start && f.get('start') < end) {\n          observer.next(f)\n        }\n      }\n      observer.complete()\n    })\n  }\n\n  freeResources(/* { region } */): void {}\n}\n"],"names":["FromConfigAdapter","_BaseFeatureDataAdapt","_inherits","_super","_createSuper","conf","getSubAdapter","pluginManager","_this","_classCallCheck","call","features","feats","readConfObject","makeFeatures","_createClass","key","value","_getRefNames","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","abrupt","_toConsumableArray","this","keys","stop","apply","arguments","_getRefNameAliases","_callee2","_context2","Array","from","values","map","featureArray","refName","get","aliases","region","_this2","start","end","ObservableCreate","_ref","_callee3","observer","i","f","_context3","length","complete","_x","fdata","Map","makeFeature","bucket","set","push","_step","_iterator","_createForOfIteratorHelper","s","n","done","sort","a","b","err","e","data","SimpleFeature","BaseFeatureDataAdapter"],"sourceRoot":""}