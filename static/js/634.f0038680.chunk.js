"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[634],{40634:function(e,n,r){r.r(n),r.d(n,{default:function(){return L}});var t=r(96234),i=r(41867),o=r(97486),s=r(3762),a=r(90872),d=r(28164),l=r(86163),c=r(7229),u=r(47192),g=r(54560),v=r(80838),h=(0,u.ZL)()((function(e){return{paper:{overflowY:"auto",height:"100%",zIndex:e.zIndex.drawer,outline:"none",background:e.palette.background.default},resizeHandle:{width:4,position:"fixed",top:0,zIndex:e.zIndex.drawer+1}}})),f=(0,s.observer)((function(e){var n=e.children,r=e.session,t=r.drawerPosition,o=r.drawerWidth,s=h().classes,a=(0,i.useRef)(null);return(0,i.useEffect)((function(){function e(e){if(e.target instanceof Element&&null!==a&&void 0!==a&&a.current&&a.current.contains(e.target)){var n,t,i=null===(n=r.visibleWidget)||void 0===n||null===(t=n.view)||void 0===t?void 0:t.id;i&&r.setFocusedViewId(i)}}return document.addEventListener("mousedown",e),document.addEventListener("keydown",e),function(){document.removeEventListener("mousedown",e),document.removeEventListener("keydown",e)}}),[a,r]),(0,v.jsxs)(c.Z,{ref:a,className:s.paper,elevation:16,square:!0,children:["right"===t?(0,v.jsx)(g.Z,{onDrag:r.resizeDrawer,className:s.resizeHandle,vertical:!0}):null,n,"left"===t?(0,v.jsx)(g.Z,{onDrag:r.resizeDrawer,className:s.resizeHandle,style:{left:o},vertical:!0}):null]})})),x=r(68079),w=r(70974),m=r(69625),j=r(90552),p=r(36669),Z=r(51590),b=r(59231),k=r(68367),y=r(77573),C=r(89301),W=r(98662),z=r(22177),D=r(18087),E=r(30340),H=(0,u.ZL)()((function(e){return{formControl:{margin:0},spacer:{flexGrow:1},drawerSelect:{margin:0,color:e.palette.secondary.contrastText},dropDownIcon:{color:e.palette.secondary.contrastText},headerFocused:{background:e.palette.secondary.main},headerUnfocused:{background:e.palette.secondary.dark}}})),I=(0,s.observer)((function(e){var n,r,t=e.session,i=e.setToolbarHeight,o=H().classes,s=t.focusedViewId,a=null===(n=t.visibleWidget)||void 0===n||null===(r=n.view)||void 0===r?void 0:r.id;return(0,v.jsx)(w.Z,{position:"sticky",className:s===a?o.headerFocused:o.headerUnfocused,ref:function(e){return i((null===e||void 0===e?void 0:e.getBoundingClientRect().height)||0)},children:(0,v.jsxs)(m.Z,{disableGutters:!0,children:[(0,v.jsx)(T,{session:t}),(0,v.jsx)("div",{className:o.spacer}),(0,v.jsx)(N,{session:t})]})})})),T=(0,s.observer)((function(e){var n=e.session,r=n.visibleWidget,t=n.activeWidgets,i=H().classes,o=(0,a.getEnv)(n).pluginManager;return(0,v.jsx)(j.Z,{className:i.formControl,children:(0,v.jsx)(p.Z,{value:null===r||void 0===r?void 0:r.id,"data-testid":"widget-drawer-selects",className:i.drawerSelect,classes:{icon:i.dropDownIcon},renderValue:function(e){var r=n.activeWidgets.get(e);if(!r)return(0,v.jsx)(Z.Z,{variant:"h6",color:"inherit",children:"Unknown widget"});var t=o.getWidgetType(r.type),i=t.HeadingComponent,s=t.heading;return i?(0,v.jsx)(i,{model:r}):(0,v.jsx)(Z.Z,{variant:"h6",color:"inherit",children:s})},onChange:function(e){var r=n.activeWidgets.get(e.target.value);r?n.showWidget(r):n.notify("Widget not found ".concat(e.target.value),"warning")},children:(0,x.Z)(t.values()).map((function(e){var r=o.getWidgetType(e.type),t=r.HeadingComponent,i=r.heading;return(0,v.jsxs)(b.Z,{"data-testid":"widget-drawer-selects-item-".concat(e.type),value:e.id,children:[t?(0,v.jsx)(t,{model:e}):(0,v.jsx)(Z.Z,{variant:"h6",color:"inherit",children:i}),(0,v.jsx)(k.Z,{"data-testid":"".concat(e.type,"-drawer-delete"),color:"inherit","aria-label":"Delete",onClick:function(){return n.hideWidget(e)},children:(0,v.jsx)(W.Z,{})})]},e.id)}))})})})),N=(0,s.observer)((function(e){var n=e.session,r=(0,i.useState)(null),o=(0,t.Z)(r,2),s=o[0],a=o[1],d=n.drawerPosition,l=n.visibleWidget;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(k.Z,{color:"inherit",onClick:function(e){return a(e.currentTarget)},children:(0,v.jsx)(E.Z,{})}),(0,v.jsx)(y.Z,{title:"Minimize drawer",children:(0,v.jsx)(k.Z,{"data-testid":"drawer-minimize",color:"inherit",onClick:function(){n.notify("Drawer minimized, click button on ".concat(d," side of screen to re-open"),"info"),n.minimizeWidgetDrawer()},children:(0,v.jsx)(D.Z,{})})}),(0,v.jsx)(y.Z,{title:"Close drawer",children:(0,v.jsx)(k.Z,{color:"inherit",onClick:function(){return n.hideWidget(l)},children:(0,v.jsx)(z.Z,{})})}),(0,v.jsx)(C.Z,{anchorEl:s,open:Boolean(s),onClose:function(){return a(null)},children:["left","right"].map((function(e){return(0,v.jsx)(b.Z,{selected:"option"===d,onClick:function(){n.setDrawerPosition(e),a(null)},children:e},e)}))})]})})),F=I,L=(0,s.observer)((function(e){var n=e.session,r=n.visibleWidget,s=(0,a.getEnv)(n).pluginManager,c=r?s.evaluateExtensionPoint("Core-replaceWidget",s.getWidgetType(r.type).ReactComponent,{session:n,model:r}):null,u=(0,i.useState)(0),g=(0,t.Z)(u,2),h=g[0],x=g[1];return(0,v.jsxs)(f,{session:n,children:[(0,v.jsx)(F,{session:n,setToolbarHeight:x}),(0,v.jsx)(i.Suspense,{fallback:(0,v.jsx)(d.Z,{}),children:(0,v.jsx)(o.SV,{FallbackComponent:function(e){var n=e.error;return(0,v.jsx)(l.Z,{error:n})},children:c?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(c,{model:r,session:n,toolbarHeight:h}),(0,v.jsx)("div",{style:{height:300}})]}):null})})]})}))}}]);
//# sourceMappingURL=634.f0038680.chunk.js.map