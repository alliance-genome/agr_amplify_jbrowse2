(this["webpackJsonp@jbrowse/web"]=this["webpackJsonp@jbrowse/web"]||[]).push([[27],{1598:function(e,t,n){"use strict";var a=n(90),o=n(93);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(1)),l=(0,a(n(94)).default)(r.createElement("path",{d:"M18.99 11.5c.34 0 .67.03 1 .07L20 0 0 20h11.56c-.04-.33-.07-.66-.07-1 0-4.14 3.36-7.5 7.5-7.5zm3.71 7.99c.02-.16.04-.32.04-.49 0-.17-.01-.33-.04-.49l1.06-.83c.09-.08.12-.21.06-.32l-1-1.73c-.06-.11-.19-.15-.31-.11l-1.24.5c-.26-.2-.54-.37-.85-.49l-.19-1.32c-.01-.12-.12-.21-.24-.21h-2c-.12 0-.23.09-.25.21l-.19 1.32c-.3.13-.59.29-.85.49l-1.24-.5c-.11-.04-.24 0-.31.11l-1 1.73c-.06.11-.04.24.06.32l1.06.83c-.02.16-.03.32-.03.49 0 .17.01.33.03.49l-1.06.83c-.09.08-.12.21-.06.32l1 1.73c.06.11.19.15.31.11l1.24-.5c.26.2.54.37.85.49l.19 1.32c.02.12.12.21.25.21h2c.12 0 .23-.09.25-.21l.19-1.32c.3-.13.59-.29.84-.49l1.25.5c.11.04.24 0 .31-.11l1-1.73c.06-.11.03-.24-.06-.32l-1.07-.83zm-3.71 1.01c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"PermDataSetting");t.default=l},1744:function(e,t,n){"use strict";n.r(t);var a=n(29),o=n(1),r=n.n(o),l=n(51),c=n(1687),i=n(1646),s=n(1686),u=n(1763),m=n(84),d=n(118),p=n(455),b=n.n(p),f=n(1649),g=n(1642),h=n(1684),v=n(811),E=n(1651),w=n(857),C=n(1656),N=n(1753),y=n(1752),M=n(1639),S=n(85),O=n(83),j=n(289),k=Object(l.a)((function(e){return{buttonContainer:{marginTop:e.spacing(1)}}})),x=Object(m.observer)((function(e){var t=e.model,n=e.disabled,l=e.modelPropName,c=e.modelSetterName,i=Object(o.useState)(t[l]),s=Object(a.a)(i,2),u=s[0],m=s[1];return Object(o.useEffect)((function(){var e=parseInt(u,10);Number.isNaN(e)||(e>0?t[c](e):m(1))}),[t,c,u]),r.a.createElement(f.a,{value:u,disabled:n,type:"number",onChange:function(e){return m(e.target.value)},style:{width:"2rem",verticalAlign:"baseline"}})})),P=Object(m.observer)((function(e){var t=e.error;return r.a.createElement(g.a,{variant:"h6",color:"error"},"".concat(t))})),F=Object(m.observer)((function(e){var t,n=e.model,l=Object(O.getSession)(n),i=k(),u=l.assemblyNames,m=l.assemblyManager,p=n.fileType,b=n.fileTypes,f=n.setFileType,g=n.hasColumnNameLine,F=n.toggleHasColumnNameLine,T=Object(o.useState)(u[0]),B=Object(a.a)(T,2),I=B[0],z=B[1],R=null===(t=m.get(I))||void 0===t?void 0:t.error,L="CSV"===n.fileType||"TSV"===n.fileType,A=Object(S.getRoot)(n);return r.a.createElement(h.a,null,R?r.a.createElement(P,{error:R}):null,r.a.createElement(c.a,{style:{width:"25rem",margin:"0 auto"},container:!0,spacing:1,direction:"column",alignItems:"flex-start"},r.a.createElement(c.a,{item:!0},r.a.createElement(v.a,{component:"fieldset"},r.a.createElement(E.a,{component:"legend"},"Tabular file"),r.a.createElement(s.a,null,r.a.createElement(d.FileSelector,{location:n.fileSource,setLocation:n.setFileSource,rootModel:A})))),r.a.createElement(c.a,{item:!0},r.a.createElement(v.a,{component:"fieldset",className:i.formControl},r.a.createElement(E.a,{component:"legend"},"File Type"),r.a.createElement(w.a,{"aria-label":"file type",name:"type",value:p},r.a.createElement(c.a,{container:!0,spacing:1,direction:"row"},b.map((function(e){return r.a.createElement(c.a,{item:!0,key:e},r.a.createElement(C.a,{checked:p===e,value:e,onClick:function(){return f(e)},control:r.a.createElement(N.a,null),label:e}))})))))),L?r.a.createElement(c.a,{item:!0},r.a.createElement(v.a,{component:"fieldset",className:i.formControl},r.a.createElement(E.a,{component:"legend"},"Column Names"),r.a.createElement("div",null,r.a.createElement(C.a,{disabled:!L,label:"has column names on line",labelPlacement:"end",control:r.a.createElement(y.a,{checked:g,onClick:F})}),r.a.createElement(x,{model:n,disabled:!L||!g,modelPropName:"columnNameLineNumber",modelSetterName:"setColumnNameLineNumber"})))):null,r.a.createElement(c.a,{item:!0},r.a.createElement(j.a,{session:l,selected:I,onChange:function(e){return z(e)}})),r.a.createElement(c.a,{item:!0,className:i.buttonContainer},n.canCancel?r.a.createElement(M.a,{variant:"contained",color:"default",onClick:n.cancelButton,disabled:!n.canCancel},"Cancel"):null," ",r.a.createElement(M.a,{disabled:!n.isReadyToOpen||!!R,variant:"contained","data-testid":"open_spreadsheet",color:"primary",onClick:function(){return n.import(I)}},"Open"))))})),T=Object(m.observer)((function(e){var t=e.model,n=k();return r.a.createElement(r.a.Fragment,null,t.error?r.a.createElement(h.a,{className:n.errorContainer},r.a.createElement(P,{errorMessage:"".concat(t.error)})):null,r.a.createElement(F,{model:t}))})),B=n(18),I=n(19),z=n(1640),R=n(642),L=n.n(R),A=n(590),D=n.n(A),H=n(350),_=n.n(H),W=n(443),V=n.n(W),J=n(867),U=n.n(J),G=n(652),K=n.n(G),q=n(1598),Q=n.n(q),X=n(863),Y=n.n(X),Z=Object(m.observer)((function(e){var t=e.viewModel,n=e.spreadsheetModel,o=e.currentColumnMenu,l=e.setColumnMenu,c=function(){l(null)};var i=o&&o.colNumber,s=function(e){n.setSortColumns([{columnNumber:i,descending:e}])},u=n.dataTypeChoices,m=new Map;u.forEach((function(e){var t=e.displayName,n=e.categoryName;n?(m.has(n)||m.set(n,{isCategory:!0,subMenuItems:[]}),m.get(n).subMenuItems.push(e)):m.set(t,e)}));var p=o&&n.columns[i].dataType,b=p&&p.type||"",f=o&&n.columns[i].dataType.displayName||"",g=Boolean(n.sortColumns.length&&o&&n.sortColumns.find((function(e){return e.columnNumber===o.colNumber&&!e.descending}))),h=Boolean(n.sortColumns.length&&o&&n.sortColumns.find((function(e){return e.columnNumber===o.colNumber&&e.descending})));function v(){c(),n.setSortColumns([])}var E=[{label:"Sort ascending",icon:Y.a,type:"radio",checked:g,onClick:g?v:s.bind(null,!1)},{label:"Sort descending",icon:Y.a,type:"radio",checked:h,onClick:h?v:s.bind(null,!0)},{label:"Type: ".concat(f),icon:Q.a,subMenu:Object(O.iterMap)(m.entries(),(function(e){var t=Object(a.a)(e,2),o=t[0],r=t[1],l=r.subMenuItems,c=r.typeName;if(c){var s={label:o||c,onClick:function(){n.setColumnType(i,c)}};return b===c&&(s.icon=U.a),s}return l?{label:o,icon:l.find((function(e){return e.typeName===b}))?U.a:void 0,subMenu:l.map((function(e){var t=e.typeName;return{label:e.displayName,icon:t===b?U.a:void 0,onClick:function(){n.setColumnType(i,t)}}}))}:null})).filter(Boolean)}];return p&&p.hasFilter&&E.push({label:"Create filter",icon:K.a,onClick:function(){t.filterControls.addBlankColumnFilter(i)}.bind(null,!0)}),r.a.createElement(d.Menu,{anchorEl:o&&o.anchorEl,open:Boolean(o),onMenuItemClick:function(e,t){t(),c()},onClose:c,menuItems:E,anchorOrigin:{vertical:"bottom",horizontal:"right"}})})),$=n(86),ee=Object(m.observer)((function(e){var t,n=e.viewModel,a=e.spreadsheetModel,o=a.rowMenuPosition,l=a.setRowMenuPosition,c=function(){l(null)},i=null===(t=a.rowMenuPosition)||void 0===t?void 0:t.rowNumber;if(void 0===i)return null;var s=a.rowSet.rows[i-1];var u=n.rowMenuItems.map((function(e){if("function"===typeof e.disabled){var t=e.disabled(n,a,i,s);return Object($.a)(Object($.a)({},e),{},{disabled:t})}return e}));return r.a.createElement(d.Menu,{anchorEl:o&&o.anchorEl,open:Boolean(o),onMenuItemClick:function(e,t){t(n,a,i,s),c()},onClose:c,menuItems:u,anchorOrigin:{vertical:"bottom",horizontal:"right"}})}));var te=Object(l.a)((function(e){return{root:{position:"relative",marginBottom:e.spacing(1),background:B.a[500],overflow:"auto"},dataTable:{borderCollapse:"collapse",borderSpacing:0,boxSizing:"border-box","& td":{border:"1px solid ".concat(B.a[300]),padding:"0.2rem",maxWidth:"50em",overflow:"hidden",textOverflow:"ellipsis"}},dataTableBody:{background:"white"},rowNumCell:{background:B.a[200],textAlign:"left",border:"1px solid ".concat(B.a[300]),position:"relative",padding:"0 2px 0 0",whiteSpace:"nowrap",userSelect:"none"},rowNumber:{fontWeight:"normal",display:"inline-block",flex:"none",paddingRight:"20px",margin:0,whiteSpace:"nowrap"},rowMenuButton:{padding:0,margin:0,position:"absolute",right:0,display:"inline-block",whiteSpace:"nowrap",flex:"none"},rowMenuButtonIcon:{},rowSelector:{position:"relative",top:"-2px",margin:0,padding:"0 0.2rem"},columnHead:{fontWeight:"normal",background:B.a[200],border:"1px solid ".concat(B.a[300]),position:"sticky",top:"-1px",zIndex:2,whiteSpace:"nowrap",padding:[[0,e.spacing(1)]]},sortIndicator:{position:"relative",top:"0.2rem",fontSize:"1rem"},columnButtonContainer:{display:"none",position:"absolute",right:0,top:0,background:B.a[100],height:"100%",boxSizing:"border-box",borderLeft:"1px solid ".concat(B.a[300])},columnButton:{padding:0},topLeftCorner:{background:B.a[300],position:"sticky",top:"-1px",zIndex:2,minWidth:e.spacing(2),textAlign:"left"},dataRowSelected:{background:I.a[100],"& th":{background:I.a[100]}},emptyMessage:{captionSide:"bottom"}}})),ne=Object(m.observer)((function(e){var t=e.cell,n=e.spreadsheetModel,a=e.columnNumber,o=n.columns.get(a).dataType;return o.DataCellReactComponent?r.a.createElement(o.DataCellReactComponent,{cell:t,dataType:o,columnNumber:a,spreadsheet:n}):t.text})),ae=Object(m.observer)((function(e){var t=e.rowModel,n=e.rowNumber,a=e.spreadsheetModel,o=te(),l=a.hideRowSelection,c=a.columnDisplayOrder,s=o.dataRow;function u(e){t.toggleSelect(),e.stopPropagation(),e.preventDefault()}return t.isSelected&&(s+=" ".concat(o.dataRowSelected)),r.a.createElement("tr",{className:s},r.a.createElement("th",{className:o.rowNumCell,onClick:u},r.a.createElement(C.a,{className:o.rowNumber,control:l?null:r.a.createElement(y.a,{className:o.rowSelector,checked:t.isSelected,onClick:u}),label:t.id}),r.a.createElement(i.a,{className:o.rowMenuButton,onClick:function(e){a.setRowMenuPosition({anchorEl:e.currentTarget,rowNumber:n}),e.preventDefault(),e.stopPropagation()},color:"secondary"},r.a.createElement(V.a,{className:o.rowMenuButtonIcon}))),c.map((function(e){return r.a.createElement("td",{key:e},r.a.createElement(ne,{cell:t.cellsWithDerived[e],spreadsheetModel:a,columnNumber:e}))})))}));function oe(e){var t=e.model,n=e.columnNumber,a=te(),o=t.sortColumns.find((function(e){return e.columnNumber===n}));return o?o.descending?r.a.createElement(L.a,{className:a.sortIndicator}):r.a.createElement(D.a,{className:a.sortIndicator}):null}var re=Object(m.observer)((function(e){var t=e.rows,n=e.spreadsheetModel,a=e.page,o=e.rowsPerPage,l=te();return r.a.createElement("tbody",{className:l.dataTableBody},t.slice(o*a,o*(a+1)).map((function(e){return r.a.createElement(ae,{key:e.id,rowNumber:e.id,spreadsheetModel:n,rowModel:e})})))})),le=Object(m.observer)((function(e){var t=e.model,n=e.page,l=e.rowsPerPage,c=t.columnDisplayOrder,s=t.columns,u=t.hasColumnNames,m=t.rowSet,d=te(),p=Object(o.useState)(null),b=Object(a.a)(p,2),f=b[0],g=b[1];function h(e,t){g({colNumber:e,anchorEl:t.currentTarget})}var v=Object(o.useState)(null),E=Object(a.a)(v,2),w=E[0],C=E[1];function N(e){C(e)}function y(){C(null)}var M=m.count,O=m.sortedFilteredRows;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z,{viewModel:Object(S.getParent)(t),spreadsheetModel:t,currentColumnMenu:f,setColumnMenu:g}),r.a.createElement(ee,{viewModel:Object(S.getParent)(t),spreadsheetModel:t}),r.a.createElement("table",{className:d.dataTable},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:d.topLeftCorner},r.a.createElement(z.a,{title:"Unselect all",placement:"right"},r.a.createElement("span",null,r.a.createElement(i.a,{className:d.unselectAllButton,onClick:t.unselectAll,disabled:!t.rowSet.selectedCount,color:"secondary"},r.a.createElement(_.a,{className:d.columnButtonIcon}))))),c.map((function(e){return r.a.createElement("th",{className:d.columnHead,key:e,onMouseOver:N.bind(null,e),onMouseOut:y.bind(null,e)},r.a.createElement(oe,{model:t,columnNumber:e}),u&&s.get(e).name||function(e){function t(e){return String.fromCharCode(e+65)}if(e>=0){if(e<26)return t(e);if(e<702)return t(Math.floor(e/26-1))+t(e%26)}throw new RangeError("column number out of range")}(e),r.a.createElement("div",{className:d.columnButtonContainer,style:{display:w===e||f&&f.colNumber===e?"block":"none"}},r.a.createElement(i.a,{className:d.columnButton,onClick:h.bind(null,e),color:"secondary"},r.a.createElement(V.a,{className:d.columnButtonIcon}))))})))),r.a.createElement(re,{rows:O,spreadsheetModel:t,page:n,rowsPerPage:l}),O.length?null:r.a.createElement("caption",{className:d.emptyMessage},M?"no rows match criteria":"no rows present")))})),ce=Object(m.observer)((function(e){var t=e.model,n=e.height,a=e.page,o=e.rowsPerPage,l=te();return r.a.createElement("div",{className:l.root,style:{height:n}},t&&t.rowSet&&t.rowSet.isLoaded&&t.initialized?r.a.createElement(le,{model:t,page:a,rowsPerPage:o}):r.a.createElement("div",null,"Loading..."))})),ie=n(1689),se=n(348),ue=n.n(se),me=Object(l.a)((function(){return{textFilterControlEndAdornment:{marginRight:"-18px"}}})),de=Object(m.observer)((function(e){var t=e.textFilter,n=me(),l=Object(o.useState)(t.stringToFind),c=Object(a.a)(l,2),s=c[0],u=c[1],m=Object(O.useDebounce)(s,500);return Object(o.useEffect)((function(){t.setString(m)}),[m,t]),r.a.createElement("div",{className:n.filterControls},r.a.createElement(f.a,{label:"text filter",value:s,onChange:function(e){return u(e.target.value)},className:n.textFilterControl,variant:"outlined",InputProps:{startAdornment:r.a.createElement(ie.a,{className:n.textFilterControlStartAdornment,position:"start"},r.a.createElement(K.a,null)),endAdornment:r.a.createElement(ie.a,{className:n.textFilterControlEndAdornment,position:"end"},r.a.createElement(i.a,{"aria-label":"clear filter",onClick:function(){return u("")},color:"secondary"},r.a.createElement(ue.a,null)))}}))})),pe=Object(m.observer)((function(e){var t=e.model.filterControls.rowFullText;return r.a.createElement(de,{textFilter:t})})),be=n(113),fe=n.n(be),ge=Object(l.a)((function(e){return{columnName:{verticalAlign:"middle",paddingRight:"0.3em"},columnFilter:{overflow:"hidden",whiteSpace:"nowrap",boxSizing:"border-box",width:"100%",position:"relative"},filterIcon:{position:"relative",top:"12px"},filterIconBg:{background:e.palette.tertiary.main,color:"white",padding:[[0,e.spacing(1.5)]]}}}));function he(e){var t=e.filterModel;return t?r.a.createElement(t.ReactComponent,{filterModel:t}):null}var ve=Object(m.observer)((function(e){var t=e.viewModel,n=e.filterModel,a=e.columnNumber,o=e.height,l=ge(),s=t.spreadsheet.columns[a];if(!s)throw new Error("no column definition! filters are probably out of date");return r.a.createElement(c.a,{container:!0,direction:"row",className:l.columnFilter,style:{height:o}},r.a.createElement(c.a,{item:!0,className:l.filterIconBg},r.a.createElement(K.a,{className:l.filterIcon})),r.a.createElement(c.a,{item:!0},r.a.createElement(i.a,{onClick:function(){Object(S.getParent)(n,2).removeColumnFilter(n)},title:"remove filter",color:"secondary"},r.a.createElement(fe.a,null)),r.a.createElement(g.a,{className:l.columnName,component:"span"},s.name)," ",r.a.createElement(he,{filterModel:n})))})),Ee=Object(l.a)((function(e){return{root:{position:"relative",marginBottom:e.spacing(1),background:"white",overflow:"hidden"},header:{overflow:"hidden",whiteSpace:"nowrap",boxSizing:"border-box",height:52,paddingLeft:e.spacing(1)},contentArea:{overflow:"auto"},columnFilter:{overflow:"hidden",whiteSpace:"nowrap",boxSizing:"border-box",height:52,paddingLeft:e.spacing(1)},viewControls:{margin:0},rowCount:{marginLeft:e.spacing(1)},statusBar:{position:"absolute",background:e.palette.background.light,left:0,bottom:0,height:40,width:"100%",boxSizing:"border-box",borderTop:"1px outset #b1b1b1",paddingLeft:e.spacing(1)},verticallyCenter:{display:"flex",justifyContent:"center",flexDirection:"column"},spacer:{flexGrow:1},textFilterControlAdornment:{marginRight:"-18px"}}})),we=Object(m.observer)((function(e){var t=e.model,n=Ee();return r.a.createElement(c.a,{className:n.viewControls,container:!0,spacing:1,direction:"row",alignItems:"center"},r.a.createElement(c.a,{item:!0},r.a.createElement(i.a,{onClick:function(){return t.setImportMode()},className:n.iconButton,title:"open a tabular file","data-testid":"spreadsheet_view_open",color:"secondary"},r.a.createElement(b.a,null))))})),Ce=Object(m.observer)((function(e){var t=e.spreadsheet;if(t&&t.rowSet.isLoaded){var n,a=t.rowSet,o=a.passingFiltersCount,r=a.count,l=a.selectedCount,c=a.selectedAndPassingFiltersCount;if(o!==r){if(n="".concat(t.rowSet.passingFiltersCount," rows of ").concat(t.rowSet.count," total"),l){n+=", ".concat(c," selected");var i=l-c;i&&(n+=" (".concat(i," selected rows do not pass filters)"))}}else n="".concat(t.rowSet.count," rows"),l&&(n+=", ".concat(l," selected"));return n}return null})),Ne=Object(m.observer)((function(e){var t=e.model,n=Ee(),o=t.spreadsheet,l=t.filterControls.columnFilters.length,i=r.a.useState(0),m=Object(a.a)(i,2),p=m[0],b=m[1],f=r.a.useState(100),g=Object(a.a)(f,2),h=g[0],v=g[1];return r.a.createElement("div",{className:n.root,style:{height:t.height,width:t.width},"data-testid":t.id},r.a.createElement(c.a,{container:!0,direction:"row",className:n.header},t.hideViewControls?null:r.a.createElement(c.a,{item:!0},r.a.createElement(we,{model:t})),"display"!==t.mode||t.hideFilterControls?null:r.a.createElement(c.a,{item:!0},r.a.createElement(pe,{model:t}))),"display"!==t.mode||t.hideFilterControls?null:t.filterControls.columnFilters.map((function(e,n){return r.a.createElement(ve,{key:"".concat(e.columnNumber,"-").concat(n),viewModel:t,filterModel:e,columnNumber:e.columnNumber,height:46})})),r.a.createElement("div",{className:n.contentArea,style:{height:t.height-52}},"import"!==t.mode?null:r.a.createElement(T,{model:t.importWizard}),r.a.createElement("div",{style:{position:"relative",display:"display"===t.mode?void 0:"none"}},r.a.createElement(ce,{page:p,rowsPerPage:h,model:o,height:t.height-52-46*l-40}))),r.a.createElement("div",{className:n.statusBar,style:{display:"display"===t.mode?void 0:"none"}},o?r.a.createElement(s.a,{row:!0},r.a.createElement("div",{className:n.verticallyCenter},r.a.createElement(Ce,{spreadsheet:o})),r.a.createElement("div",{className:n.spacer}),r.a.createElement(u.a,{rowsPerPageOptions:[10,25,100,1e3],count:o.rowSet.count,component:"div",rowsPerPage:h,page:p,onPageChange:function(e,t){b(t)},onRowsPerPageChange:function(e){v(+e.target.value),b(0)}}),r.a.createElement("div",{className:n.spacer})):null),t.hideVerticalResizeHandle?null:r.a.createElement(d.ResizeHandle,{onDrag:t.resizeHeight,style:{height:t.dragHandleHeight,position:"absolute",bottom:0,left:0,background:"#ccc",boxSizing:"border-box",borderTop:"1px solid #fafafa"}}))}));t.default=Ne},642:function(e,t,n){"use strict";var a=n(90),o=n(93);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(1)),l=(0,a(n(94)).default)(r.createElement("path",{d:"M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"}),"KeyboardArrowUp");t.default=l},652:function(e,t,n){"use strict";var a=n(90),o=n(93);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(n(1)),l=(0,a(n(94)).default)(r.createElement("path",{d:"M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z"}),"FilterList");t.default=l}}]);
//# sourceMappingURL=27.1abc6b5b.chunk.js.map