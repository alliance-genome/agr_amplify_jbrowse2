{"version":3,"file":"static/js/5981.72839771.chunk.js","mappings":"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WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,YAAYA,GAAW,WACnoI,ECHA1B,EAAoB6B,SAAW,SAASH,GAGxC,ECJA1B,EAAoB7a,EAAI,WACvB,GAA0B,kBAAf2c,WAAyB,OAAOA,WAC3C,IACC,OAAOtO,MAAQ,IAAI5E,SAAS,cAAb,EAGhB,CAFE,MAAOzlB,GACR,GAAsB,kBAAX7M,OAAqB,OAAOA,MACxC,CACA,CAPuB,GCAxB0jC,EAAoBuB,EAAI,SAASlpB,EAAK0pB,GAAQ,OAAO9W,OAAOgI,UAAU+O,eAAe1B,KAAKjoB,EAAK0pB,EAAO,ECCtG/B,EAAoBrb,EAAI,SAAS6W,GACX,qBAAXyG,QAA0BA,OAAOC,aAC1CjX,OAAOuW,eAAehG,EAASyG,OAAOC,YAAa,CAAEzkC,MAAO,WAE7DwtB,OAAOuW,eAAehG,EAAS,aAAc,CAAE/9B,OAAO,GACvD,ECNAuiC,EAAoBmC,IAAM,SAAShC,GAGlC,OAFAA,EAAOiC,MAAQ,GACVjC,EAAOh+B,WAAUg+B,EAAOh+B,SAAW,IACjCg+B,CACR,E,WCJA,IAAI/F,EACA4F,EAAoB7a,EAAEmV,gBAAeF,EAAY4F,EAAoB7a,EAAE5oB,SAAW,IACtF,IAAI8M,EAAW22B,EAAoB7a,EAAE9b,SACrC,IAAK+wB,GAAa/wB,IACbA,EAASg5B,gBACZjI,EAAY/wB,EAASg5B,cAAcnR,MAC/BkJ,GAAW,CACf,IAAIkI,EAAUj5B,EAASk5B,qBAAqB,UACzCD,EAAQjlC,SAAQ+8B,EAAYkI,EAAQA,EAAQjlC,OAAS,GAAG6zB,IAC5D,CAID,IAAKkJ,EAAW,MAAM,IAAIz7B,MAAM,yDAChCy7B,EAAYA,EAAUrb,QAAQ,OAAQ,IAAIA,QAAQ,QAAS,IAAIA,QAAQ,YAAa,KACpFihB,EAAoB/I,EAAImD,EAAY,Q,eCXpC,IAAIoI,EAAkB,CACrB,KAAM,GAkBPxC,EAAoB9yB,EAAE2P,EAAI,SAAS6kB,EAASC,GAEvCa,EAAgBd,IAElBpH,cAAc0F,EAAoB/I,EAAI+I,EAAoB4B,EAAEF,GAG/D,EAEA,IAAIe,EAAqB9f,KAA+B,yBAAIA,KAA+B,0BAAK,GAC5F+f,EAA6BD,EAAmB/O,KAAKmL,KAAK4D,GAC9DA,EAAmB/O,KAzBA,SAASnQ,GAC3B,IAAImd,EAAWnd,EAAK,GAChBof,EAAcpf,EAAK,GACnBqf,EAAUrf,EAAK,GACnB,IAAI,IAAI0c,KAAY0C,EAChB3C,EAAoBuB,EAAEoB,EAAa1C,KACrCD,EAAoBza,EAAE0a,GAAY0C,EAAY1C,IAIhD,IADG2C,GAASA,EAAQ5C,GACdU,EAASrjC,QACdmlC,EAAgB9B,EAASmC,OAAS,EACnCH,EAA2Bnf,EAC5B,C,ICtBAyc,EAAoB8C,QAAK7hC,E,WCAzB,IAAI8hC,EAAO/C,EAAoBve,EAC/Bue,EAAoBve,EAAI,WACvB,OAAO3I,QAAQ2T,IAAI,CAAC,KAAK,KAAK,MAAM1uB,IAAIiiC,EAAoB72B,EAAG62B,IAAsB/lB,KAAK8oB,EAC3F,C,ICF0B/C,EAAoBve,G","sources":["../../../packages/core/rpc/remoteAbortSignals.ts","../../../packages/core/ui/AssemblySelector.tsx","../../../packages/core/ui/CascadingMenu.tsx","../../../packages/core/ui/Dialog.tsx","../../../packages/core/ui/EditableTypography.tsx","../../../packages/core/ui/ErrorMessage.tsx","../../../packages/core/ui/FactoryResetDialog.tsx","../../../packages/core/ui/Icons.tsx","../../../packages/core/ui/Logo.tsx","../../../packages/core/ui/Menu.tsx","../../../packages/core/ui/ResizeHandle.tsx","../../../packages/core/ui/App.tsx","../../../packages/core/ui/FileSelector/FileSelector.tsx","../../../packages/core/ui/FileSelector/index.ts","../../../packages/core/ui/PrerenderedCanvas.tsx","../../../packages/core/ui/Tooltip.tsx","../../../packages/core/ui/ReturnToImportFormDialog.tsx","../../../packages/core/ui/SanitizedHTML.tsx","../../../packages/core/ui/theme.ts","../../../packages/core/util/aborting.ts","../../../packages/core/util/when.ts","../../../packages/core/util/index.ts","../../../packages/core/util/offscreenCanvasPonyfill.tsx","../../../packages/core/util/offscreenCanvasUtils.tsx","../../../packages/core/util/types/index.ts","../../../packages/core/PluginManager.ts","../../../packages/core/PluginLoader.ts","../../../plugins/data-management/src/index.ts","corePlugins.ts","rpc.worker.ts","workerPolyfill.js","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/compat get default export","../webpack/runtime/create fake namespace object","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/node module decorator","../webpack/runtime/publicPath","../webpack/runtime/importScripts chunk loading","../webpack/runtime/nonce","../webpack/runtime/startup chunk dependencies","../webpack/startup"],"sourcesContent":["/* ---------------- for the RPC client ----------------- */\n\nlet abortSignalCounter = 0\nexport type RemoteAbortSignal = { abortSignalId: number }\nconst abortSignalIds: WeakMap<AbortSignal, number> = new WeakMap() // map of abortsignal => numerical ID\n\n/**\n * assign an ID to the given abort signal and return a plain object\n * representation\n *\n * @param signal - the signal to serialize\n * @param callfunc - function used to call\n *  a remote method, will be called like callfunc('signalAbort', signalId)\n */\nexport function serializeAbortSignal(\n  signal: AbortSignal,\n  callfunc: (name: string, abortSignalId: number) => void,\n): RemoteAbortSignal {\n  let abortSignalId = abortSignalIds.get(signal)\n  if (!abortSignalId) {\n    abortSignalCounter += 1\n    abortSignalIds.set(signal, abortSignalCounter)\n    abortSignalId = abortSignalCounter\n    signal.addEventListener('abort', () => {\n      const signalId = abortSignalIds.get(signal)\n      if (signalId !== undefined) {\n        callfunc('signalAbort', signalId)\n      }\n    })\n  }\n  return { abortSignalId }\n}\n\n/* ---------------- for the RPC server ----------------- */\n\n/**\n * test whether a given object\n * @param thing - the thing to test\n * @returns true if the thing is a remote abort signal\n */\nexport function isRemoteAbortSignal(\n  thing: unknown,\n): thing is RemoteAbortSignal {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'abortSignalId' in thing &&\n    // @ts-ignore\n    typeof thing.abortSignalId === 'number'\n  )\n}\n\n// the server side keeps a set of surrogate abort controllers that can be\n// aborted based on ID\nconst surrogateAbortControllers: Map<number, AbortController> = new Map() // numerical ID => surrogate abort controller\n\n/**\n * deserialize the result of serializeAbortSignal into an AbortSignal\n *\n * @param signal -\n * @returns an abort signal that corresponds to the given ID\n */\nexport function deserializeAbortSignal({\n  abortSignalId,\n}: RemoteAbortSignal): AbortSignal {\n  let surrogateAbortController = surrogateAbortControllers.get(abortSignalId)\n  if (!surrogateAbortController) {\n    surrogateAbortController = new AbortController()\n    surrogateAbortControllers.set(abortSignalId, surrogateAbortController)\n  }\n  return surrogateAbortController.signal\n}\n\n/**\n * fire an abort signal from a remote abort signal ID\n *\n * @param abortSignalId -\n */\nexport function remoteAbort(props: { signalId: number }) {\n  const { signalId: abortSignalId } = props\n  const surrogateAbortController = surrogateAbortControllers.get(abortSignalId)\n\n  if (surrogateAbortController) {\n    surrogateAbortController.abort()\n  }\n}\n\nexport function remoteAbortRpcHandler() {\n  return {\n    signalAbort: remoteAbort,\n  }\n}\n","import React, { useState, useEffect } from 'react'\nimport {\n  TextField,\n  MenuItem,\n  InputProps as IIP,\n  TextFieldProps as TFP,\n} from '@mui/material'\nimport { observer } from 'mobx-react'\nimport { makeStyles } from 'tss-react/mui'\n\n// locals\nimport { getConf } from '../configuration'\nimport { useLocalStorage, AbstractSessionModel } from '../util'\n\nconst useStyles = makeStyles()({\n  importFormEntry: {\n    minWidth: 180,\n  },\n})\n\nconst AssemblySelector = observer(\n  ({\n    session,\n    onChange,\n    selected,\n    InputProps,\n    TextFieldProps,\n    localStorageKey,\n    helperText = 'Select assembly to view',\n  }: {\n    session: AbstractSessionModel\n    helperText?: string\n    onChange: (arg: string) => void\n    selected?: string\n    localStorageKey?: string\n    InputProps?: IIP\n    TextFieldProps?: TFP\n  }) => {\n    const { classes } = useStyles()\n    const { assemblyNames, assemblyManager } = session\n\n    // constructs a localstorage key based on host/path/config to help\n    // remember. non-config assists usage with e.g. embedded apps\n    const config = new URLSearchParams(window.location.search).get('config')\n    const [lastSelected, setLastSelected] =\n      typeof jest === 'undefined' && localStorageKey\n        ? useLocalStorage(\n            `lastAssembly-${[\n              window.location.host + window.location.pathname,\n              config,\n              localStorageKey,\n            ].join('-')}`,\n            selected,\n          )\n        : useState(selected)\n\n    const selection = assemblyNames.includes(lastSelected || '')\n      ? lastSelected\n      : selected\n\n    useEffect(() => {\n      if (selection && selection !== selected) {\n        onChange(selection)\n      }\n    }, [selection, onChange, selected])\n\n    const error = assemblyNames.length ? '' : 'No configured assemblies'\n    return (\n      <TextField\n        select\n        label=\"Assembly\"\n        variant=\"outlined\"\n        helperText={error || helperText}\n        value={selection || ''}\n        inputProps={{ 'data-testid': 'assembly-selector' }}\n        onChange={event => setLastSelected(event.target.value)}\n        error={!!error}\n        InputProps={InputProps}\n        disabled={!!error}\n        className={classes.importFormEntry}\n        {...TextFieldProps}\n      >\n        {assemblyNames.map(name => {\n          const assembly = assemblyManager.get(name)\n          const displayName = assembly ? getConf(assembly, 'displayName') : ''\n          return (\n            <MenuItem key={name} value={name}>\n              {displayName || name}\n            </MenuItem>\n          )\n        })}\n      </TextField>\n    )\n  },\n)\n\nexport default AssemblySelector\n","import React, { useContext, useMemo, useCallback } from 'react'\nimport {\n  Divider,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader,\n  Menu,\n  MenuItem,\n  PopoverOrigin,\n} from '@mui/material'\nimport { MenuItem as JBMenuItem, MenuItemEndDecoration } from './Menu'\nimport {\n  bindHover,\n  bindFocus,\n  bindMenu,\n  usePopupState,\n  PopupState,\n} from 'material-ui-popup-state/hooks'\nimport HoverMenu from 'material-ui-popup-state/HoverMenu'\nimport ChevronRight from '@mui/icons-material/ChevronRight'\n\nconst CascadingContext = React.createContext({\n  parentPopupState: null,\n  rootPopupState: null,\n} as { parentPopupState: PopupState | null; rootPopupState: PopupState | null })\n\nfunction CascadingMenuItem({\n  onClick,\n  ...props\n}: {\n  onClick?: Function\n  disabled?: boolean\n  children: React.ReactNode\n}) {\n  const { rootPopupState } = useContext(CascadingContext)\n  if (!rootPopupState) {\n    throw new Error('must be used inside a CascadingMenu')\n  }\n  const handleClick = useCallback(\n    (event: React.MouseEvent) => {\n      rootPopupState.close()\n      onClick?.(event)\n    },\n    [rootPopupState, onClick],\n  )\n\n  return <MenuItem {...props} onClick={handleClick} />\n}\n\nfunction CascadingSubmenu({\n  title,\n  inset,\n  popupId,\n  ...props\n}: {\n  children: React.ReactNode\n  title: string\n  onMenuItemClick: Function\n  menuItems: JBMenuItem[]\n  inset: boolean\n  popupId: string\n}) {\n  const { parentPopupState } = React.useContext(CascadingContext)\n  const popupState = usePopupState({\n    popupId,\n    variant: 'popover',\n    parentPopupState,\n  })\n  return (\n    <>\n      <MenuItem {...bindHover(popupState)} {...bindFocus(popupState)}>\n        <ListItemText primary={title} inset={inset} />\n        <ChevronRight />\n      </MenuItem>\n      <CascadingSubmenuHover\n        {...props}\n        anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n        transformOrigin={{ vertical: 'top', horizontal: 'left' }}\n        popupState={popupState}\n      />\n    </>\n  )\n}\n\nfunction CascadingSubmenuHover({\n  popupState,\n  onMenuItemClick,\n  menuItems,\n  classes,\n  ...props\n}: {\n  classes?: Record<string, string>\n  popupState: PopupState\n  anchorOrigin: PopoverOrigin\n  transformOrigin: PopoverOrigin\n  onMenuItemClick: Function\n  menuItems: JBMenuItem[]\n}) {\n  const { rootPopupState } = useContext(CascadingContext)\n  const context = useMemo(\n    () => ({\n      rootPopupState: rootPopupState || popupState,\n      parentPopupState: popupState,\n    }),\n    [rootPopupState, popupState],\n  )\n\n  return (\n    <CascadingContext.Provider value={context}>\n      <HoverMenu {...props} {...bindMenu(popupState)} />\n    </CascadingContext.Provider>\n  )\n}\n\nfunction CascadingMenu({\n  popupState,\n  onMenuItemClick,\n  menuItems,\n  ...props\n}: {\n  popupState: PopupState\n  onMenuItemClick: Function\n  menuItems: JBMenuItem[]\n}) {\n  const { rootPopupState } = React.useContext(CascadingContext)\n  const context = React.useMemo(\n    () => ({\n      rootPopupState: rootPopupState || popupState,\n      parentPopupState: popupState,\n    }),\n    [rootPopupState, popupState],\n  )\n\n  return (\n    <CascadingContext.Provider value={context}>\n      <Menu {...props} {...bindMenu(popupState)} />\n    </CascadingContext.Provider>\n  )\n}\n\nfunction EndDecoration({ item }: { item: JBMenuItem }) {\n  if ('subMenu' in item) {\n    return <MenuItemEndDecoration type=\"subMenu\" />\n  } else if (item.type === 'checkbox' || item.type === 'radio') {\n    return (\n      <MenuItemEndDecoration\n        type={item.type}\n        checked={item.checked}\n        disabled={item.disabled}\n      />\n    )\n  }\n  return null\n}\n\nfunction CascadingMenuList({\n  onMenuItemClick,\n  menuItems,\n  ...props\n}: {\n  menuItems: JBMenuItem[]\n  onMenuItemClick: Function\n}) {\n  function handleClick(callback: Function) {\n    return (event: React.MouseEvent<HTMLLIElement, MouseEvent>) => {\n      onMenuItemClick(event, callback)\n    }\n  }\n\n  const hasIcon = menuItems.some(\n    menuItem => 'icon' in menuItem && menuItem.icon,\n  )\n  return (\n    <>\n      {menuItems.map((item, idx) => {\n        return 'subMenu' in item ? (\n          <CascadingSubmenu\n            key={`subMenu-${item.label}-${idx}`}\n            popupId={`subMenu-${item.label}`}\n            title={item.label}\n            inset={hasIcon}\n            onMenuItemClick={onMenuItemClick}\n            menuItems={item.subMenu}\n          >\n            <CascadingMenuList\n              {...props}\n              onMenuItemClick={onMenuItemClick}\n              menuItems={item.subMenu}\n            />\n          </CascadingSubmenu>\n        ) : item.type === 'divider' ? (\n          <Divider key={`divider-${idx}`} component=\"li\" />\n        ) : item.type === 'subHeader' ? (\n          <ListSubheader key={`subHeader-${item.label}-${idx}`}>\n            {item.label}\n          </ListSubheader>\n        ) : (\n          <CascadingMenuItem\n            key={`${item.label}-${idx}`}\n            onClick={'onClick' in item ? handleClick(item.onClick) : undefined}\n            disabled={Boolean(item.disabled)}\n          >\n            {item.icon ? (\n              <ListItemIcon>\n                <item.icon />\n              </ListItemIcon>\n            ) : null}{' '}\n            <ListItemText\n              primary={item.label}\n              secondary={item.subLabel}\n              inset={hasIcon && !item.icon}\n            />\n            <div style={{ flexGrow: 1, minWidth: 10 }} />\n            <EndDecoration item={item} />\n          </CascadingMenuItem>\n        )\n      })}\n    </>\n  )\n}\n\nfunction CascadingMenuChildren(props: {\n  onMenuItemClick: Function\n  menuItems: JBMenuItem[]\n  popupState: PopupState\n}) {\n  return (\n    <CascadingMenu {...props}>\n      <CascadingMenuList {...props} />\n    </CascadingMenu>\n  )\n}\n\nexport default CascadingMenuChildren\n","import React from 'react'\nimport {\n  Dialog,\n  DialogTitle,\n  IconButton,\n  Divider,\n  DialogProps,\n  ScopedCssBaseline,\n} from '@mui/material'\nimport { observer } from 'mobx-react'\nimport { makeStyles } from 'tss-react/mui'\nimport { ErrorBoundary } from 'react-error-boundary'\n\n// icons\nimport CloseIcon from '@mui/icons-material/Close'\n// locals\nimport ErrorMessage from './ErrorMessage'\n\nconst useStyles = makeStyles()(theme => ({\n  closeButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500],\n  },\n}))\n\nfunction DialogError({ error }: { error: unknown }) {\n  return (\n    <div style={{ width: 800, margin: 40 }}>\n      <ErrorMessage error={error} />\n    </div>\n  )\n}\n\nfunction JBrowseDialog(props: DialogProps & { title: string }) {\n  const { classes } = useStyles()\n  const { title, children, onClose } = props\n\n  return (\n    <Dialog {...props}>\n      <ScopedCssBaseline>\n        <DialogTitle>\n          {title}\n          {onClose ? (\n            <IconButton\n              className={classes.closeButton}\n              onClick={() => {\n                // @ts-ignore\n                onClose()\n              }}\n            >\n              <CloseIcon />\n            </IconButton>\n          ) : null}\n        </DialogTitle>\n        <Divider />\n\n        <ErrorBoundary FallbackComponent={DialogError}>\n          {children}\n        </ErrorBoundary>\n      </ScopedCssBaseline>\n    </Dialog>\n  )\n}\nexport default observer(JBrowseDialog)\n","import React, { useEffect, useState } from 'react'\nimport { InputBase, Typography, TypographyProps, useTheme } from '@mui/material'\nimport { makeStyles } from 'tss-react/mui'\n\ntype Variant = TypographyProps['variant']\n\ntype EditableTypographyClassKey =\n  | 'input'\n  | 'inputBase'\n  | 'inputRoot'\n  | 'inputFocused'\n\nconst useStyles = makeStyles()(theme => ({\n  input: {},\n  inputBase: {},\n  typography: {\n    top: 6,\n    left: 2,\n    position: 'absolute',\n    whiteSpace: 'nowrap',\n    visibility: 'hidden',\n  },\n  inputRoot: {\n    padding: theme.spacing(0.5),\n  },\n  inputFocused: {\n    borderStyle: 'solid',\n    borderWidth: 2,\n  },\n}))\n\ninterface Props {\n  value: string\n  setValue: (value: string) => void\n  variant: Variant\n  classes?: Partial<Record<EditableTypographyClassKey, string>>\n}\n\n// using forwardRef so that MUI Tooltip can wrap this component\nconst EditableTypography = React.forwardRef<HTMLDivElement, Props>(\n  (props, ref) => {\n    const { value, setValue, variant, ...other } = props\n    const [editedValue, setEditedValue] = useState<string>()\n    const [sizerNode, setSizerNode] = useState<HTMLSpanElement | null>(null)\n    const [inputNode, setInputNode] = useState<HTMLInputElement | null>(null)\n    const [blur, setBlur] = useState(false)\n\n    useEffect(() => {\n      if (blur) {\n        inputNode?.blur()\n        setBlur(false)\n      }\n    }, [blur, inputNode])\n\n    // possibly tss-react does not understand the passing of props to\n    // useStyles, but it appears to work\n    // @ts-ignore\n    const { classes } = useStyles(props, { props })\n    const theme = useTheme()\n\n    const clientWidth = sizerNode?.clientWidth\n    const width = clientWidth || 0\n\n    const val = editedValue === undefined ? value : editedValue\n\n    return (\n      <div {...other} ref={ref}>\n        <div style={{ position: 'relative' }}>\n          <Typography\n            ref={(node: HTMLSpanElement) => setSizerNode(node)}\n            component=\"span\"\n            variant={variant}\n            className={classes.typography}\n          >\n            {val}\n          </Typography>\n        </div>\n        <InputBase\n          inputRef={node => setInputNode(node)}\n          className={classes.inputBase}\n          inputProps={{\n            style: {\n              width,\n              ...(variant && variant !== 'inherit'\n                ? theme.typography[variant]\n                : {}),\n            },\n          }}\n          classes={{\n            input: classes.input,\n            root: classes.inputRoot,\n            focused: classes.inputFocused,\n          }}\n          value={val}\n          onChange={event => setEditedValue(event.target.value)}\n          onKeyDown={event => {\n            if (event.key === 'Enter') {\n              inputNode?.blur()\n            } else if (event.key === 'Escape') {\n              setEditedValue(undefined)\n              setBlur(true)\n            }\n          }}\n          onBlur={() => {\n            setValue(editedValue || value || '')\n            setEditedValue(undefined)\n          }}\n        />\n      </div>\n    )\n  },\n)\n\nexport default EditableTypography\n","import React from 'react'\n\nconst ErrorMessage = ({ error }: { error: unknown }) => {\n  let snapshotError = ''\n  let str = `${error}`\n  const findStr = 'is not assignable'\n  const idx = str.indexOf(findStr)\n  if (idx !== -1) {\n    const trim = str.slice(0, idx + findStr.length)\n    // best effort to make a better error message than the default\n    // mobx-state-tree\n\n    // case 1. element has a path\n    const match = trim.match(\n      /.*at path \"(.*)\" snapshot `(.*)` is not assignable/m,\n    )\n    if (match) {\n      str = `Failed to load element at ${match[1]}...Failed element had snapshot`\n      snapshotError = match[2]\n    }\n\n    // case 2. element has no path\n    const match2 = trim.match(/.*snapshot `(.*)` is not assignable/)\n    if (match2) {\n      str = `Failed to load element...Failed element had snapshot`\n      snapshotError = match2[1]\n    }\n  }\n  return (\n    <div\n      style={{\n        padding: 4,\n        margin: 4,\n        overflow: 'auto',\n        maxHeight: 200,\n        background: '#f88',\n        border: '1px solid black',\n      }}\n    >\n      {str.slice(0, 10000)}\n      {snapshotError ? (\n        <pre\n          style={{\n            background: 'lightgrey',\n            border: '1px solid black',\n            margin: 20,\n          }}\n        >\n          {JSON.stringify(JSON.parse(snapshotError), null, 2)}\n        </pre>\n      ) : null}\n    </div>\n  )\n}\n\nexport default ErrorMessage\n","import React from 'react'\nimport {\n  Button,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n} from '@mui/material'\nimport Dialog from '@jbrowse/core/ui/Dialog'\n\nexport default ({\n  onClose,\n  open,\n  onFactoryReset,\n}: {\n  onClose: Function\n  open: boolean\n  onFactoryReset: Function\n}) => {\n  function handleDialogClose(action?: string) {\n    if (action === 'reset') {\n      onFactoryReset()\n    }\n    onClose()\n  }\n\n  return (\n    <Dialog title=\"Reset\" onClose={() => handleDialogClose()} open={open}>\n      <DialogContent>\n        <DialogContentText>\n          Are you sure you want to reset? This will restore the default\n          configuration.\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={() => handleDialogClose()} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={() => handleDialogClose('reset')}\n          color=\"primary\"\n          variant=\"contained\"\n        >\n          OK\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n","import SvgIcon, { SvgIconProps } from '@mui/material/SvgIcon'\nimport React from 'react'\n\n// Icons below come from https://material.io/resources/icons/?icon=line_style&style=baseline\nexport function ContentCopy(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z\" />\n    </SvgIcon>\n  )\n}\n\n// https://materialdesignicons.com/ text-search icon\nexport function Indexing(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M19.31 18.9L22.39 22L21 23.39L17.88 20.32C17.19 20.75 16.37 21 15.5 21C13 21 11 19 11 16.5C11 14 13 12 15.5 12C18 12 20 14 20 16.5C20 17.38 19.75 18.21 19.31 18.9M15.5 19C16.88 19 18 17.88 18 16.5C18 15.12 16.88 14 15.5 14C14.12 14 13 15.12 13 16.5C13 17.88 14.12 19 15.5 19M21 4V6H3V4H21M3 16V14H9V16H3M3 11V9H21V11H18.97C17.96 10.37 16.77 10 15.5 10C14.23 10 13.04 10.37 12.03 11H3Z\" />\n    </SvgIcon>\n  )\n}\n\nexport function ContentCut(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M19,3L13,9L15,11L22,4V3M12,12.5A0.5,0.5 0 0,1 11.5,12A0.5,0.5 0 0,1 12,11.5A0.5,0.5 0 0,1 12.5,12A0.5,0.5 0 0,1 12,12.5M6,20A2,2 0 0,1 4,18C4,16.89 4.9,16 6,16A2,2 0 0,1 8,18C8,19.11 7.1,20 6,20M6,8A2,2 0 0,1 4,6C4,4.89 4.9,4 6,4A2,2 0 0,1 8,6C8,7.11 7.1,8 6,8M9.64,7.64C9.87,7.14 10,6.59 10,6A4,4 0 0,0 6,2A4,4 0 0,0 2,6A4,4 0 0,0 6,10C6.59,10 7.14,9.87 7.64,9.64L10,12L7.64,14.36C7.14,14.13 6.59,14 6,14A4,4 0 0,0 2,18A4,4 0 0,0 6,22A4,4 0 0,0 10,18C10,17.41 9.87,16.86 9.64,16.36L12,14L19,21H22V20L9.64,7.64Z\" />\n    </SvgIcon>\n  )\n}\n\nexport function ContentPaste(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M19,20H5V4H7V7H17V4H19M12,2A1,1 0 0,1 13,3A1,1 0 0,1 12,4A1,1 0 0,1 11,3A1,1 0 0,1 12,2M19,2H14.82C14.4,0.84 13.3,0 12,0C10.7,0 9.6,0.84 9.18,2H5A2,2 0 0,0 3,4V20A2,2 0 0,0 5,22H19A2,2 0 0,0 21,20V4A2,2 0 0,0 19,2Z\" />\n    </SvgIcon>\n  )\n}\n\n//  format-list-checkbox from https://materialdesignicons.com/\nexport function TrackSelector(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M21 19v-2H8v2h13m0-6v-2H8v2h13M8 7h13V5H8v2M4 5v2h2V5H4M3 5a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V5m1 6v2h2v-2H4m-1 0a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2m1 6v2h2v-2H4m-1 0a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1v-2z\" />\n    </SvgIcon>\n  )\n}\n\n//  content-save-edit from https://materialdesignicons.com/\nexport function SaveAs(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M10,19L10.14,18.86C8.9,18.5 8,17.36 8,16A3,3 0 0,1 11,13C12.36,13 13.5,13.9 13.86,15.14L20,9V7L16,3H4C2.89,3 2,3.9 2,5V19A2,2 0 0,0 4,21H10V19M4,5H14V9H4V5M20.04,12.13C19.9,12.13 19.76,12.19 19.65,12.3L18.65,13.3L20.7,15.35L21.7,14.35C21.92,14.14 21.92,13.79 21.7,13.58L20.42,12.3C20.31,12.19 20.18,12.13 20.04,12.13M18.07,13.88L12,19.94V22H14.06L20.12,15.93L18.07,13.88Z\"\n      />\n    </SvgIcon>\n  )\n}\n\n//  content-save from https://materialdesignicons.com/\nexport function Save(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z\"\n      />\n    </SvgIcon>\n  )\n}\n\n//  dna from https://materialdesignicons.com/\nexport function DNA(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path\n        fill=\"currentColor\"\n        d=\"M4,2H6V4C6,5.44 6.68,6.61 7.88,7.78C8.74,8.61 9.89,9.41 11.09,10.2L9.26,11.39C8.27,10.72 7.31,10 6.5,9.21C5.07,7.82 4,6.1 4,4V2M18,2H20V4C20,6.1 18.93,7.82 17.5,9.21C16.09,10.59 14.29,11.73 12.54,12.84C10.79,13.96 9.09,15.05 7.88,16.22C6.68,17.39 6,18.56 6,20V22H4V20C4,17.9 5.07,16.18 6.5,14.79C7.91,13.41 9.71,12.27 11.46,11.16C13.21,10.04 14.91,8.95 16.12,7.78C17.32,6.61 18,5.44 18,4V2M14.74,12.61C15.73,13.28 16.69,14 17.5,14.79C18.93,16.18 20,17.9 20,20V22H18V20C18,18.56 17.32,17.39 16.12,16.22C15.26,15.39 14.11,14.59 12.91,13.8L14.74,12.61M7,3H17V4L16.94,4.5H7.06L7,4V3M7.68,6H16.32C16.08,6.34 15.8,6.69 15.42,7.06L14.91,7.5H9.07L8.58,7.06C8.2,6.69 7.92,6.34 7.68,6M9.09,16.5H14.93L15.42,16.94C15.8,17.31 16.08,17.66 16.32,18H7.68C7.92,17.66 8.2,17.31 8.58,16.94L9.09,16.5M7.06,19.5H16.94L17,20V21H7V20L7.06,19.5Z\"\n      />\n    </SvgIcon>\n  )\n}\n\nexport function Cable(props: SvgIconProps) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"M20 5V4c0-.55-.45-1-1-1h-2c-.55 0-1 .45-1 1v1h-1v4c0 .55.45 1 1 1h1v7c0 1.1-.9 2-2 2s-2-.9-2-2V7c0-2.21-1.79-4-4-4S5 4.79 5 7v7H4c-.55 0-1 .45-1 1v4h1v1c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-1h1v-4c0-.55-.45-1-1-1H7V7c0-1.1.9-2 2-2s2 .9 2 2v10c0 2.21 1.79 4 4 4s4-1.79 4-4v-7h1c.55 0 1-.45 1-1V5h-1z\" />\n    </SvgIcon>\n  )\n}\n","import React from 'react'\n\ntype LogoVariant = 'color' | 'black' | 'white'\n\ninterface LogoProps {\n  variant?: LogoVariant\n}\n\nfunction getColors(variant?: LogoVariant) {\n  if (variant === 'black') {\n    return {\n      midnight: '#808080',\n      forrest: '#666666',\n      grape: '#4d4d4d',\n      mandarin: '#333333',\n      gray: '#1a1a1a',\n    }\n  }\n  if (variant === 'white') {\n    return {\n      midnight: '#ffffff',\n      forrest: '#e6e6e6',\n      grape: '#cccccc',\n      mandarin: '#b3b3b3',\n      gray: '#999999',\n    }\n  }\n  return {\n    midnight: '#0d233f',\n    forrest: '#135560',\n    grape: '#721e63',\n    mandarin: '#ffb11d',\n    gray: '#dadada',\n  }\n}\n\nexport function Logomark({ variant }: LogoProps) {\n  return (\n    <svg viewBox=\"0 0 175 175\">\n      <Icon variant={variant} />\n    </svg>\n  )\n}\n\nexport function LogoFull({ variant }: LogoProps) {\n  return (\n    <svg viewBox=\"0 0 641 175\">\n      <Text variant={variant} />\n      <Icon variant={variant} />\n    </svg>\n  )\n}\n\nfunction Icon({ variant }: LogoProps) {\n  const colors = getColors(variant)\n  return (\n    <>\n      <path\n        style={{ fill: colors.midnight }}\n        d=\"M120.5,57.5c.168,0,.333.012.5.013V40.506c-.167,0-.333-.006-.5-.006a98.325,98.325,0,0,0-77.4,37.565q-2.664,3.378-5.023,6.994l14.206,9.327Q54.043,91.709,56,89.179A81.363,81.363,0,0,1,120.5,57.5Z\"\n      />\n      <path\n        style={{ fill: colors.forrest }}\n        d=\"M148.668,86.223c.308.133.6.283.908.42l6.746-15.618c-.153-.067-.3-.143-.454-.21a81.36,81.36,0,0,0-71.777,3.5q-2.8,1.544-5.469,3.309l9.249,14.054A63.93,63.93,0,0,1,148.668,86.223Z\"\n      />\n      <path\n        style={{ fill: colors.grape }}\n        d=\"M170.894,109.37A63.929,63.929,0,0,0,113.4,88.861l2.336,15.474a48.456,48.456,0,0,1,44.322,15.42c.111.125.214.255.324.381l11.16-10C171.323,109.879,171.118,109.62,170.894,109.37Z\"\n      />\n      <path\n        style={{ fill: colors.mandarin }}\n        d=\"M150.921,150.314c.04.163.07.326.107.489l16.509-4.058c-.039-.163-.067-.326-.107-.489A48.457,48.457,0,0,0,135.575,111.8l-5.515,15.591A32.466,32.466,0,0,1,150.921,150.314Z\"\n      />\n      <path\n        style={{ fill: colors.gray }}\n        d=\"M134.1,138.129l-9.779,13.213a32.486,32.486,0,0,1,7.823,14.463l15.147.852c.012-.166.032-.331.041-.5A32.464,32.464,0,0,0,134.1,138.129Z\"\n      />\n    </>\n  )\n}\n\nfunction Text({ variant }: LogoProps) {\n  const colors = getColors(variant)\n  return (\n    <g\n      aria-label=\"JBrowse\"\n      transform=\"translate(213.084 144.241)\"\n      style={{ fill: colors.midnight }}\n    >\n      <path d=\"m 26.355,-71.505 v 54.075 2.835 q 0,6.825 -0.42,10.185 -0.735,5.67 -2.835,9.135 -3.255,5.355 -8.505,8.4 -4.83,2.73 -11.55,3.57 L 1.47,11.76 Q 7.35,10.185 9.24,4.2 10.605,-0.105 10.605,-9.975 v -5.565 -55.965 q 1.785,0 4.62,0.315 2.835,0.21 3.255,0.21 1.785,0 2.94,-0.105 4.515,-0.42 4.935,-0.42 z\" />\n      <path d=\"m 60.68836,-65.415 v 24.78 h 3.255 q 2.94,0 4.935,-0.525 2.1,-0.525 3.885,-2.1 2.31,-1.995 3.36,-4.83 1.155,-2.835 1.155,-6.09 0,-5.565 -2.94,-8.61 -2.94,-3.045 -8.295,-3.045 -2.52,0 -5.355,0.42 z m 0,30.87 V -6.09 h 5.25 q 4.725,0 8.505,-3.675 3.885,-3.78 3.885,-10.08 0,-8.19 -4.62,-11.655 -4.095,-3.045 -13.02,-3.045 z M 44.93836,0 v -71.505 h 27.09 q 9.135,0 14.385,3.255 6.51,3.99 6.51,12.6 0,7.035 -5.25,11.655 -4.62,4.095 -11.97,5.145 v 0.945 q 7.56,0.735 12.285,3.99 6.615,4.62 6.615,13.335 0,10.185 -7.98,15.75 -6.93,4.83 -17.43,4.83 z\" />\n      <path d=\"M 109.44281,0.525 V -50.4 q 1.785,0.21 3.99,0.42 2.31,0.105 3.255,0.105 2.31,0 4.2,-0.21 1.89,-0.21 3.045,-0.315 v 13.02 q 1.89,-6.51 5.46,-9.87 4.41,-4.095 11.655,-4.095 -0.315,2.73 -0.42,6.825 -0.105,3.99 -0.105,7.455 l -0.945,0.84 q -0.945,-0.735 -2.415,-1.05 -1.47,-0.315 -2.94,-0.315 -3.57,0 -6.195,1.89 -2.52,1.785 -3.465,5.04 -0.42,1.155 -0.525,3.15 -0.105,1.89 -0.105,4.515 v 4.515 19.005 q -1.785,-0.21 -2.625,-0.21 -3.675,-0.315 -4.62,-0.315 -2.31,0 -4.2,0.21 -1.89,0.21 -3.045,0.315 z\" />\n      <path d=\"m 173.77337,1.47 q -11.655,0 -18.585,-6.825 -6.93,-6.825 -6.93,-18.48 0,-12.6 6.72,-20.055 6.825,-7.455 18.9,-7.455 11.97,0 18.9,6.72 6.93,6.72 6.93,18.48 0,12.285 -6.72,19.74 -7.14,7.875 -19.215,7.875 z m 0.735,-48.09 q -5.88,0 -8.505,6.51 -2.205,5.565 -2.205,15.96 0,8.19 1.47,12.915 2.415,7.98 8.505,7.98 5.565,0 8.19,-7.875 2.205,-6.51 2.205,-16.695 0,-8.505 -2.1,-13.23 -2.52,-5.565 -7.56,-5.565 z\" />\n      <path d=\"m 222.03563,-50.4 10.5,36.015 q 3.675,-11.235 5.67,-17.85 2.415,-8.085 5.04,-18.165 1.05,0.105 3.045,0.315 2.1,0.21 2.835,0.21 1.995,0 3.15,-0.105 1.26,-0.21 2.73,-0.42 l 10.71,36.015 q 5.88,-17.43 10.71,-36.015 l 4.2,0.315 4.095,-0.315 q -5.145,13.125 -9.135,24.57 -5.04,14.28 -8.505,26.355 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.205,-0.105 -1.89,0 -3.36,0.21 -1.365,0.21 -2.31,0.315 l -10.605,-34.755 q -4.41,13.65 -6.72,21.105 -2.31,7.35 -4.095,13.65 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.31,-0.105 -1.995,0 -3.465,0.21 -1.365,0.21 -2.31,0.315 -3.78,-12.81 -5.04,-17.01 -2.205,-7.245 -5.46,-17.01 -2.835,-8.4 -5.88,-16.905 1.575,0 4.305,0.315 2.73,0.21 3.36,0.21 1.47,0 4.305,-0.21 2.835,-0.315 3.465,-0.315 z\" />\n      <path d=\"m 292.84172,-12.81 h 2.625 q 1.47,4.095 4.62,6.51 3.15,2.415 7.35,2.415 2.94,0 5.46,-1.785 2.625,-1.89 2.625,-4.62 0,-3.885 -6.195,-6.615 -10.395,-4.62 -11.655,-5.46 -6.405,-4.515 -6.405,-12.285 0,-7.77 5.25,-12.18 5.25,-4.515 12.81,-4.515 3.99,0 8.085,1.365 4.095,1.26 7.14,3.57 l -2.52,9.24 h -2.94 q -0.63,-3.57 -3.57,-6.195 -2.835,-2.625 -6.405,-2.625 -3.15,0 -5.46,1.575 -2.31,1.47 -2.31,4.515 0,3.885 6.405,6.51 10.185,4.095 11.865,5.25 6.405,4.41 6.405,12.81 0,7.455 -5.46,12.18 -5.355,4.62 -14.805,4.62 -8.19,0 -14.49,-4.305 z\" />\n      <path d=\"m 349.61228,-29.925 h 15.54 q 0,-6.51 -1.05,-10.395 -1.68,-6.3 -5.88,-6.3 -5.04,0 -7.14,6.195 -1.47,4.305 -1.47,10.5 z m 30.03,5.04 h -30.03 q 0,9.135 3.045,13.86 3.57,5.67 11.55,5.67 3.255,0 6.405,-1.26 3.15,-1.26 5.88,-3.465 l 1.26,0.945 -2.31,5.88 q -6.72,4.725 -15.015,4.725 -12.915,0 -19.635,-7.245 -6.72,-7.245 -6.72,-20.37 0,-11.235 6.405,-18.165 6.51,-7.035 17.64,-7.035 11.655,0 16.905,7.56 4.62,6.615 4.62,18.9 z\" />\n    </g>\n  )\n}\n","import React, { useEffect, useRef, useState } from 'react'\nimport {\n  Divider,\n  Grow,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader,\n  MenuProps as MUIMenuProps,\n  MenuItem as MUIMenuItem,\n  MenuItemProps,\n  MenuList,\n  Paper,\n  Popover,\n  PopoverProps,\n  SvgIconProps,\n} from '@mui/material'\nimport { makeStyles } from 'tss-react/mui'\n// icons\nimport ArrowRightIcon from '@mui/icons-material/ArrowRight'\nimport CheckBoxIcon from '@mui/icons-material/CheckBox'\nimport CheckBoxOutlineBlankIcon from '@mui/icons-material/CheckBoxOutlineBlank'\nimport RadioButtonCheckedIcon from '@mui/icons-material/RadioButtonChecked'\nimport RadioButtonUncheckedIcon from '@mui/icons-material/RadioButtonUnchecked'\n\n// other\nimport { findLastIndex } from '../util'\n\nconst useStyles = makeStyles()({\n  paper: {\n    position: 'fixed',\n    overflowY: 'auto',\n    overflowX: 'hidden',\n    // So we see the popover when it's empty.\n    minWidth: 16,\n    minHeight: 16,\n    maxWidth: 'calc(100% - 32px)',\n    maxHeight: 'calc(100% - 32px)',\n    top: 0,\n    left: 0,\n    // We disable the focus ring for mouse, touch and keyboard users.\n    outline: 0,\n  },\n  menuItemEndDecoration: {\n    padding: 0,\n    margin: 0,\n    height: 16,\n  },\n})\n\ninterface MenuItemEndDecorationSubMenuProps {\n  type: 'subMenu'\n}\n\ninterface MenuItemEndDecorationSelectorProps {\n  type: 'checkbox' | 'radio'\n  checked: boolean\n  disabled?: boolean\n}\n\ntype MenuItemEndDecorationProps =\n  | MenuItemEndDecorationSubMenuProps\n  | MenuItemEndDecorationSelectorProps\n\nexport function MenuItemEndDecoration(props: MenuItemEndDecorationProps) {\n  const { classes } = useStyles()\n  const { type } = props\n  let checked\n  let disabled\n  if ('checked' in props) {\n    ;({ checked, disabled } = props)\n  }\n  let icon\n  if (type === 'subMenu') {\n    icon = <ArrowRightIcon color=\"action\" />\n  } else if (type === 'checkbox') {\n    if (checked) {\n      const color = disabled ? 'inherit' : undefined\n      icon = <CheckBoxIcon color={color} />\n    } else {\n      icon = <CheckBoxOutlineBlankIcon color=\"action\" />\n    }\n  } else if (type === 'radio') {\n    if (checked) {\n      const color = disabled ? 'inherit' : undefined\n      icon = <RadioButtonCheckedIcon color={color} />\n    } else {\n      icon = <RadioButtonUncheckedIcon color=\"action\" />\n    }\n  }\n  return <div className={classes.menuItemEndDecoration}>{icon}</div>\n}\n\nexport interface MenuDivider {\n  priority?: number\n  type: 'divider'\n}\n\nexport interface MenuSubHeader {\n  type: 'subHeader'\n  priority?: number\n  label: string\n}\n\nexport interface BaseMenuItem {\n  label: string\n  priority?: number\n  subLabel?: string\n  icon?: React.ComponentType<SvgIconProps>\n  disabled?: boolean\n}\n\nexport interface NormalMenuItem extends BaseMenuItem {\n  type?: 'normal'\n  onClick: Function\n}\n\nexport interface CheckboxMenuItem extends BaseMenuItem {\n  type: 'checkbox'\n  checked: boolean\n  onClick: Function\n}\n\nexport interface RadioMenuItem extends BaseMenuItem {\n  type: 'radio'\n  checked: boolean\n  onClick: Function\n}\n\nexport interface SubMenuItem extends BaseMenuItem {\n  type?: 'subMenu'\n  subMenu: MenuItem[]\n}\n\nexport type MenuItem =\n  | MenuDivider\n  | MenuSubHeader\n  | NormalMenuItem\n  | CheckboxMenuItem\n  | RadioMenuItem\n  | SubMenuItem\n\ntype AnchorElProp = MUIMenuProps['anchorEl']\ntype OpenProp = MUIMenuProps['open']\ntype OnCloseProp = MUIMenuProps['onClose']\n\ninterface MenuPageProps {\n  menuItems: MenuItem[]\n  onMenuItemClick: (\n    event: React.MouseEvent<HTMLLIElement, MouseEvent>,\n    callback: Function,\n  ) => void\n  anchorEl?: AnchorElProp\n  open: OpenProp\n  onClose: OnCloseProp\n  top?: boolean\n}\n\ntype MenuItemStyleProp = MenuItemProps['style']\n\nfunction findNextValidIdx(menuItems: MenuItem[], currentIdx: number) {\n  const idx = menuItems\n    .slice(currentIdx + 1)\n    .findIndex(\n      menuItem =>\n        menuItem.type !== 'divider' &&\n        menuItem.type !== 'subHeader' &&\n        !menuItem.disabled,\n    )\n  if (idx === -1) {\n    return idx\n  }\n  return currentIdx + 1 + idx\n}\n\nfunction findPreviousValidIdx(menuItems: MenuItem[], currentIdx: number) {\n  return findLastIndex(\n    menuItems.slice(0, currentIdx),\n    menuItem =>\n      menuItem.type !== 'divider' &&\n      menuItem.type !== 'subHeader' &&\n      !menuItem.disabled,\n  )\n}\n\nconst MenuPage = React.forwardRef<HTMLDivElement, MenuPageProps>(\n  (props, ref) => {\n    const [subMenuAnchorEl, setSubMenuAnchorEl] = useState<HTMLElement>()\n    const [openSubMenuIdx, setOpenSubMenuIdx] = useState<number>()\n    const [isSubMenuOpen, setIsSubMenuOpen] = useState(false)\n    const [selectedMenuItemIdx, setSelectedMenuItemIdx] = useState<number>()\n    const [position, setPosition] = useState<{\n      top?: number\n      left?: number\n    }>()\n    const paperRef = useRef<HTMLDivElement | null>(null)\n    const { classes } = useStyles()\n\n    const {\n      menuItems,\n      onMenuItemClick,\n      open,\n      onClose,\n      anchorEl,\n      top = false,\n    } = props\n\n    useEffect(() => {\n      if (!open) {\n        setSubMenuAnchorEl(undefined)\n        setOpenSubMenuIdx(undefined)\n      }\n    }, [open])\n\n    useEffect(() => {\n      const shouldSubMenuBeOpen = open && Boolean(subMenuAnchorEl)\n      let timer: ReturnType<typeof setTimeout>\n      if (shouldSubMenuBeOpen && !isSubMenuOpen) {\n        timer = setTimeout(() => {\n          setIsSubMenuOpen(true)\n        }, 300)\n      } else if (!shouldSubMenuBeOpen && isSubMenuOpen) {\n        timer = setTimeout(() => {\n          setIsSubMenuOpen(false)\n        }, 300)\n      }\n      return () => {\n        clearTimeout(timer)\n      }\n    }, [isSubMenuOpen, open, subMenuAnchorEl])\n\n    useEffect(() => {\n      if (anchorEl) {\n        const rect = (anchorEl as HTMLElement).getBoundingClientRect()\n        if (position) {\n          if (\n            rect.top !== position.top ||\n            rect.left + rect.width !== position.left\n          ) {\n            setPosition({ top: rect.top, left: rect.left + rect.width })\n          }\n        } else {\n          setPosition({ top: rect.top, left: rect.left + rect.width })\n        }\n      } else if (!position) {\n        setPosition({})\n      }\n    }, [position, anchorEl])\n\n    const hasIcon = menuItems.some(\n      menuItem => 'icon' in menuItem && menuItem.icon,\n    )\n    const menuItemStyle: MenuItemStyleProp = {}\n\n    function handleClick(callback: Function) {\n      return (event: React.MouseEvent<HTMLLIElement, MouseEvent>) => {\n        onMenuItemClick(event, callback)\n      }\n    }\n\n    const ListContents = (\n      <>\n        <MenuList autoFocusItem={open && !isSubMenuOpen} dense>\n          {menuItems\n            .sort((a, b) => (b.priority || 0) - (a.priority || 0))\n            .map((menuItem, idx) => {\n              if (menuItem.type === 'divider') {\n                return <Divider key={`divider-${idx}`} component=\"li\" />\n              }\n              if (menuItem.type === 'subHeader') {\n                return (\n                  <ListSubheader key={`subHeader-${menuItem.label}-${idx}`}>\n                    {menuItem.label}\n                  </ListSubheader>\n                )\n              }\n              let icon = null\n              let endDecoration = null\n              if (menuItem.icon) {\n                const Icon = menuItem.icon\n                icon = (\n                  <ListItemIcon>\n                    <Icon />\n                  </ListItemIcon>\n                )\n              }\n              if ('subMenu' in menuItem) {\n                endDecoration = <MenuItemEndDecoration type=\"subMenu\" />\n              } else if (\n                menuItem.type === 'checkbox' ||\n                menuItem.type === 'radio'\n              ) {\n                endDecoration = (\n                  <MenuItemEndDecoration\n                    type={menuItem.type}\n                    checked={menuItem.checked}\n                    disabled={menuItem.disabled}\n                  />\n                )\n              }\n              const onClick =\n                'onClick' in menuItem\n                  ? handleClick(menuItem.onClick)\n                  : undefined\n              return (\n                <MUIMenuItem\n                  key={menuItem.label}\n                  style={menuItemStyle}\n                  selected={idx === selectedMenuItemIdx}\n                  onClick={onClick}\n                  onMouseMove={e => {\n                    if (e.currentTarget !== document.activeElement) {\n                      e.currentTarget.focus()\n                      setSelectedMenuItemIdx(idx)\n                    }\n                    if ('subMenu' in menuItem) {\n                      if (openSubMenuIdx !== idx) {\n                        setSubMenuAnchorEl(e.currentTarget)\n                        setOpenSubMenuIdx(idx)\n                      }\n                    } else {\n                      setSubMenuAnchorEl(undefined)\n                      setOpenSubMenuIdx(undefined)\n                    }\n                  }}\n                  onKeyDown={e => {\n                    if (e.key === 'ArrowLeft' || e.key === 'Escape') {\n                      onClose && onClose(e, 'escapeKeyDown')\n                    } else if (e.key === 'ArrowUp') {\n                      setSelectedMenuItemIdx(\n                        findPreviousValidIdx(menuItems, idx),\n                      )\n                    } else if (e.key === 'ArrowDown') {\n                      const a = findNextValidIdx(menuItems, idx)\n                      setSelectedMenuItemIdx(a)\n                    } else if ('subMenu' in menuItem) {\n                      if (e.key === 'ArrowRight' || e.key === 'Enter') {\n                        setSubMenuAnchorEl(e.currentTarget)\n                        setOpenSubMenuIdx(idx)\n                        setIsSubMenuOpen(true)\n                      }\n                    }\n                  }}\n                  disabled={Boolean(menuItem.disabled)}\n                >\n                  {icon}\n                  <ListItemText\n                    primary={menuItem.label}\n                    secondary={menuItem.subLabel}\n                    inset={hasIcon && !menuItem.icon}\n                  />\n                  {endDecoration}\n                </MUIMenuItem>\n              )\n            })}\n        </MenuList>\n        {menuItems.map((menuItem, idx) => {\n          let subMenu = null\n          if ('subMenu' in menuItem) {\n            subMenu = (\n              <MenuPage\n                key={menuItem.label}\n                anchorEl={subMenuAnchorEl}\n                open={isSubMenuOpen && openSubMenuIdx === idx}\n                onClose={() => {\n                  setIsSubMenuOpen(false)\n                  setSubMenuAnchorEl(undefined)\n                }}\n                onMenuItemClick={onMenuItemClick}\n                menuItems={menuItem.subMenu}\n              />\n            )\n          }\n          return subMenu\n        })}\n      </>\n    )\n\n    return top ? (\n      ListContents\n    ) : (\n      <Grow in={open} style={{ transformOrigin: `0 0 0` }} ref={ref}>\n        <Paper\n          elevation={8}\n          ref={paperRef}\n          className={classes.paper}\n          style={{ ...position }}\n        >\n          {ListContents}\n        </Paper>\n      </Grow>\n    )\n  },\n)\n\ninterface MenuProps extends PopoverProps {\n  menuItems: MenuItem[]\n  onMenuItemClick: (\n    event: React.MouseEvent<HTMLLIElement, MouseEvent>,\n    callback: Function,\n  ) => void\n}\n\nfunction Menu(props: MenuProps) {\n  const { open, onClose, menuItems, onMenuItemClick, ...other } = props\n\n  return (\n    <Popover\n      open={open}\n      onClose={onClose}\n      BackdropProps={{ invisible: true }}\n      anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'right',\n        ...other.anchorOrigin,\n      }}\n      transformOrigin={{\n        vertical: 'top',\n        horizontal: 'left',\n        ...other.transformOrigin,\n      }}\n      {...other}\n    >\n      <MenuPage\n        open={open}\n        onClose={onClose}\n        menuItems={menuItems}\n        onMenuItemClick={onMenuItemClick}\n        top\n      />\n    </Popover>\n  )\n}\n\nexport default Menu\n","import React, { useEffect, useState, useRef } from 'react'\nimport { makeStyles } from 'tss-react/mui'\n\nconst useStyles = makeStyles()({\n  horizontalHandle: {\n    cursor: 'row-resize',\n    width: '100%',\n  },\n  verticalHandle: {\n    cursor: 'col-resize',\n    height: '100%',\n  },\n  flexbox_verticalHandle: {\n    cursor: 'col-resize',\n    alignSelf: 'stretch', // the height: 100% is actually unable to function inside flexbox\n  },\n  flexbox_horizontalHandle: {\n    cursor: 'row-resize',\n    alignSelf: 'stretch', // similar to above\n  },\n})\n\nfunction ResizeHandle({\n  onDrag,\n  vertical = false,\n  flexbox = false,\n  className: originalClassName,\n  ...props\n}: {\n  onDrag: (arg: number) => number | void\n  vertical?: boolean\n  flexbox?: boolean\n  className?: string\n  [props: string]: unknown\n}) {\n  const [mouseDragging, setMouseDragging] = useState(false)\n  const prevPos = useRef(0)\n  const { classes, cx } = useStyles()\n\n  useEffect(() => {\n    function mouseMove(event: MouseEvent) {\n      event.preventDefault()\n      const pos = vertical ? event.clientX : event.clientY\n      const distance = pos - prevPos.current\n      if (distance) {\n        onDrag(distance)\n        prevPos.current = pos\n      }\n    }\n\n    function mouseUp() {\n      setMouseDragging(false)\n    }\n    if (mouseDragging) {\n      window.addEventListener('mousemove', mouseMove, true)\n      window.addEventListener('mouseup', mouseUp, true)\n      return () => {\n        window.removeEventListener('mousemove', mouseMove, true)\n        window.removeEventListener('mouseup', mouseUp, true)\n      }\n    }\n    return () => {}\n  }, [mouseDragging, onDrag, vertical])\n\n  let className\n  if (flexbox) {\n    if (vertical) {\n      className = classes.flexbox_verticalHandle\n    } else {\n      className = classes.flexbox_horizontalHandle\n    }\n  } else if (vertical) {\n    className = classes.verticalHandle\n  } else {\n    className = classes.horizontalHandle\n  }\n\n  return (\n    <div\n      data-resizer=\"true\"\n      onMouseDown={event => {\n        event.preventDefault()\n        prevPos.current = vertical ? event.clientX : event.clientY\n        setMouseDragging(true)\n      }}\n      className={cx(className, originalClassName)}\n      {...props}\n    />\n  )\n}\n\nexport default ResizeHandle\n","import React, { Suspense } from 'react'\nimport { AppBar, Fab, Tooltip } from '@mui/material'\nimport { makeStyles } from 'tss-react/mui'\nimport LaunchIcon from '@mui/icons-material/Launch'\nimport { observer } from 'mobx-react'\n\n// locals\nimport {\n  NotificationLevel,\n  SessionWithDrawerWidgets,\n  SnackAction,\n} from '../util'\n\n// ui elements\nimport DrawerWidget from './DrawerWidget'\nimport AppToolbar from './AppToolbar'\nimport Snackbar from './Snackbar'\nimport ViewLauncher from './ViewLauncher'\nimport { MenuItem as JBMenuItem } from './Menu'\nimport ViewPanel from './ViewPanel'\n\nconst useStyles = makeStyles()(theme => ({\n  root: {\n    fontFamily: 'Roboto',\n    display: 'grid',\n    height: '100vh',\n    width: '100%',\n    colorScheme: theme.palette.mode,\n  },\n  fabLeft: {\n    zIndex: 10000,\n    position: 'fixed',\n    bottom: theme.spacing(2),\n    left: theme.spacing(2),\n  },\n  fabRight: {\n    zIndex: 10000,\n    position: 'fixed',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  },\n  menuBarAndComponents: {\n    gridColumn: 'main',\n    display: 'grid',\n    gridTemplateRows: '[menubar] min-content [components] auto',\n    height: '100vh',\n  },\n  menuBar: {\n    gridRow: 'menubar',\n  },\n  components: {\n    overflowY: 'auto',\n    gridRow: 'components',\n  },\n  appBar: {\n    flexGrow: 1,\n  },\n}))\n\ntype SnackbarMessage = [string, NotificationLevel, SnackAction]\n\nconst App = observer(function (props: {\n  HeaderButtons?: React.ReactElement\n  session: SessionWithDrawerWidgets & {\n    savedSessionNames: string[]\n    menus: { label: string; menuItems: JBMenuItem[] }[]\n    renameCurrentSession: (arg: string) => void\n    snackbarMessages: SnackbarMessage[]\n    popSnackbarMessage: () => unknown\n  }\n}) {\n  const { session } = props\n  const { classes } = useStyles()\n\n  const {\n    minimized,\n    visibleWidget,\n    drawerWidth,\n    activeWidgets,\n    views,\n    drawerPosition,\n  } = session\n\n  const drawerVisible = visibleWidget && !minimized\n\n  let grid\n  if (drawerPosition === 'right') {\n    grid = [\n      `[main] 1fr`,\n      drawerVisible ? `[drawer] ${drawerWidth}px` : undefined,\n    ]\n  } else if (drawerPosition === 'left') {\n    grid = [\n      drawerVisible ? `[drawer] ${drawerWidth}px` : undefined,\n      `[main] 1fr`,\n    ]\n  }\n  return (\n    <div\n      className={classes.root}\n      style={{\n        gridTemplateColumns: grid?.filter(f => !!f).join(' '),\n      }}\n    >\n      {drawerVisible && drawerPosition === 'left' ? (\n        <DrawerWidget session={session} />\n      ) : null}\n\n      {session.DialogComponent ? (\n        <Suspense fallback={<div />}>\n          <session.DialogComponent {...session.DialogProps} />\n        </Suspense>\n      ) : null}\n      <div className={classes.menuBarAndComponents}>\n        <div className={classes.menuBar}>\n          <AppBar className={classes.appBar} position=\"static\">\n            <AppToolbar {...props} />\n          </AppBar>\n        </div>\n        <div className={classes.components}>\n          {views.length ? (\n            views.map(view => (\n              <ViewPanel\n                key={`view-${view.id}`}\n                view={view}\n                session={session}\n              />\n            ))\n          ) : (\n            <ViewLauncher {...props} />\n          )}\n\n          {/* blank space at the bottom of screen allows scroll */}\n          <div style={{ height: 300 }} />\n        </div>\n      </div>\n\n      {activeWidgets.size > 0 && minimized ? (\n        <Tooltip title=\"Open drawer widget\">\n          <Fab\n            className={\n              drawerPosition === 'right' ? classes.fabRight : classes.fabLeft\n            }\n            color=\"primary\"\n            data-testid=\"drawer-maximize\"\n            onClick={() => session.showWidgetDrawer()}\n          >\n            <LaunchIcon />\n          </Fab>\n        </Tooltip>\n      ) : null}\n\n      {drawerVisible && drawerPosition === 'right' ? (\n        <DrawerWidget session={session} />\n      ) : null}\n\n      <Snackbar session={session} />\n    </div>\n  )\n})\n\nexport default App\n","import React, { useState } from 'react'\nimport { observer } from 'mobx-react'\nimport {\n  Box,\n  FormHelperText,\n  InputLabel,\n  Menu,\n  MenuItem,\n  Tooltip,\n  ToggleButtonGroup,\n  ToggleButton,\n  ToggleButtonProps,\n} from '@mui/material'\n\n// locals\nimport {\n  FileLocation,\n  UriLocation,\n  AbstractRootModel,\n  isUriLocation,\n  isAppRootModel,\n} from '../../util/types'\nimport LocalFileChooser from './LocalFileChooser'\nimport UrlChooser from './UrlChooser'\n\n// icons\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown'\n\nfunction ToggleButtonWithTooltip(props: ToggleButtonProps) {\n  const { title, children, ...other } = props\n  return (\n    <Tooltip title={title || ''}>\n      <ToggleButton {...other}>{children}</ToggleButton>\n    </Tooltip>\n  )\n}\n\nfunction shorten(str: string, len: number) {\n  if (typeof str === 'string' && str.length > len) {\n    return `${str.substring(0, len)}`\n  }\n  return str\n}\n\nconst FileSelector = observer(\n  (props: {\n    location?: FileLocation\n    setLocation: (param: FileLocation) => void\n    setName?: (str: string) => void\n    name?: string\n    description?: string\n    rootModel?: AbstractRootModel\n  }) => {\n    const { location, name, description, rootModel, setLocation } = props\n    const fileOrUrl = !location || isUriLocation(location) ? 'url' : 'file'\n    const [toggleButtonValue, setToggleButtonValue] = useState(\n      location && 'internetAccountId' in location && location.internetAccountId\n        ? location.internetAccountId\n        : fileOrUrl,\n    )\n    const accts = isAppRootModel(rootModel)\n      ? rootModel.internetAccounts.slice()\n      : []\n    const numShown = 2\n    const [shownAccts, setShownAccts] = useState(accts.slice(0, numShown))\n    const [hiddenAccts, setHiddenAccts] = useState(accts.slice(numShown))\n    const [anchorEl, setAnchorEl] = useState<HTMLElement | null>(null)\n\n    const selectedAcct = accts.find(\n      ia => ia.internetAccountId === toggleButtonValue,\n    )\n\n    const setLocationWithAccount = (location: UriLocation) => {\n      setLocation({\n        ...location,\n        internetAccountId: selectedAcct\n          ? selectedAcct.internetAccountId\n          : undefined,\n      })\n    }\n\n    // if you swap account selection after inputting url\n    if (\n      location &&\n      selectedAcct &&\n      isUriLocation(location) &&\n      location.internetAccountId !== selectedAcct.internetAccountId\n    ) {\n      setLocationWithAccount(location)\n    }\n\n    let locationInput = (\n      <UrlChooser\n        {...props}\n        setLocation={setLocationWithAccount}\n        label={selectedAcct?.selectorLabel}\n      />\n    )\n    if (toggleButtonValue === 'file') {\n      locationInput = <LocalFileChooser {...props} />\n    }\n    if (selectedAcct?.SelectorComponent) {\n      const { SelectorComponent } = selectedAcct\n      locationInput = (\n        <SelectorComponent {...props} setLocation={setLocationWithAccount} />\n      )\n    }\n\n    return (\n      <>\n        <Box display=\"flex\">\n          <InputLabel shrink>{name}</InputLabel>\n        </Box>\n        <Box display=\"flex\" flexDirection=\"row\">\n          <Box>\n            <ToggleButtonGroup\n              value={toggleButtonValue}\n              exclusive\n              onChange={(_event, newState) => {\n                if (newState) {\n                  setToggleButtonValue(newState)\n                }\n                if (isUriLocation(location)) {\n                  setLocationWithAccount(location)\n                }\n              }}\n              aria-label=\"file, url, or account picker\"\n            >\n              {new URLSearchParams(window.location.search).get(\n                'adminKey',\n              ) ? null : (\n                <ToggleButton value=\"file\" aria-label=\"local file\">\n                  File\n                </ToggleButton>\n              )}\n              <ToggleButton value=\"url\" aria-label=\"url\">\n                URL\n              </ToggleButton>\n              {shownAccts.map(({ internetAccountId, toggleContents, name }) => (\n                <ToggleButtonWithTooltip\n                  key={internetAccountId}\n                  value={internetAccountId}\n                  aria-label={name}\n                  title={name}\n                >\n                  {typeof toggleContents === 'string'\n                    ? shorten(toggleContents, 5)\n                    : toggleContents || shorten(name, 5)}\n                </ToggleButtonWithTooltip>\n              ))}\n              {hiddenAccts.length ? (\n                // @ts-ignore\n                <ToggleButton\n                  onClick={event => setAnchorEl(event.target as HTMLElement)}\n                  selected={false}\n                >\n                  More\n                  <ArrowDropDownIcon />\n                </ToggleButton>\n              ) : null}\n            </ToggleButtonGroup>\n\n            <Menu\n              open={Boolean(anchorEl)}\n              anchorEl={anchorEl}\n              onClose={() => setAnchorEl(null)}\n              anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'center',\n              }}\n              transformOrigin={{\n                vertical: 'top',\n                horizontal: 'center',\n              }}\n            >\n              {hiddenAccts?.map((acct, idx) => (\n                <MenuItem\n                  key={acct.internetAccountId}\n                  value={acct.internetAccountId}\n                  onClick={() => {\n                    const prev = shownAccts[shownAccts.length - 1]\n                    setShownAccts([\n                      ...shownAccts.slice(0, shownAccts.length - 1),\n                      acct,\n                    ])\n                    setHiddenAccts([\n                      prev,\n                      ...hiddenAccts.slice(0, idx),\n                      ...hiddenAccts.slice(idx + 1),\n                    ])\n                    setToggleButtonValue(acct.internetAccountId)\n                    setAnchorEl(null)\n                  }}\n                >\n                  {acct.name}\n                </MenuItem>\n              ))}\n            </Menu>\n          </Box>\n        </Box>\n        {locationInput}\n        <FormHelperText>{description}</FormHelperText>\n      </>\n    )\n  },\n)\n\nexport default FileSelector\n","import FileSelector from './FileSelector'\n\nexport default FileSelector\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useState, useRef, useEffect } from 'react'\nimport { drawImageOntoCanvasContext } from '../util/offscreenCanvasPonyfill'\n\nfunction PrerenderedCanvas(props: {\n  width: number\n  height: number\n  highResolutionScaling?: number\n  style?: any\n  imageData?: any\n  showSoftClip?: boolean\n  blockKey?: string\n}) {\n  const {\n    width,\n    height,\n    highResolutionScaling = 1,\n    style = {},\n    imageData,\n    blockKey,\n    showSoftClip,\n  } = props\n  const [done, setDone] = useState(false)\n\n  const featureCanvas = useRef<HTMLCanvasElement>(null)\n\n  useEffect(() => {\n    if (!imageData) {\n      return\n    }\n    const canvas = featureCanvas.current\n    if (!canvas) {\n      return\n    }\n    const context = canvas.getContext('2d')\n    if (!context) {\n      return\n    }\n    drawImageOntoCanvasContext(imageData, context)\n    setDone(true)\n  }, [imageData])\n\n  const softClipString = showSoftClip ? '_softclipped' : ''\n  const blockKeyStr = blockKey ? '_' + blockKey : ''\n  const testId = `prerendered_canvas${softClipString}${blockKeyStr}${\n    done ? '_done' : ''\n  }`\n  return (\n    <canvas\n      data-testid={testId}\n      ref={featureCanvas}\n      width={width * highResolutionScaling}\n      height={height * highResolutionScaling}\n      style={{ width, height, ...style }}\n    />\n  )\n}\n\nexport default PrerenderedCanvas\n","import React, { useEffect, useState } from 'react'\nimport { makeStyles } from 'tss-react/mui'\nimport { observer } from 'mobx-react'\nimport { Feature } from '../util'\nimport { readConfObject, AnyConfigurationModel } from '../configuration'\n\nconst useStyles = makeStyles()({\n  hoverLabel: {\n    border: '1px solid black',\n    position: 'absolute',\n    background: '#fffa',\n    pointerEvents: 'none',\n    zIndex: 10000,\n  },\n})\n\nconst Tooltip = ({\n  offsetX,\n  offsetY,\n  configuration,\n  feature,\n  timeout = 300,\n}: {\n  offsetX: number\n  offsetY: number\n  configuration: AnyConfigurationModel\n  feature?: Feature\n  timeout?: number\n}) => {\n  const { classes } = useStyles()\n  const [shown, setShown] = useState(false)\n  useEffect(() => {\n    // only show the loading message after short timeout to prevent excessive\n    // flickering\n    const handle = setTimeout(() => setShown(true), timeout)\n    return () => clearTimeout(handle)\n  })\n  if (feature && shown) {\n    const text = readConfObject(configuration, 'mouseover', { feature })\n    return (\n      <div\n        className={classes.hoverLabel}\n        style={{ left: offsetX, top: offsetY }}\n      >\n        {text}\n      </div>\n    )\n  }\n  return null\n}\n\nexport default observer(Tooltip)\n","import React from 'react'\nimport { observer } from 'mobx-react'\nimport { Button, DialogActions, DialogContent, Typography } from '@mui/material'\nimport Dialog from './Dialog'\n\nfunction ReturnToImportFormDialog({\n  model,\n  handleClose,\n}: {\n  model: { clearView: Function }\n  handleClose: () => void\n}) {\n  return (\n    <Dialog maxWidth=\"xl\" open onClose={handleClose} title=\"Reference sequence\">\n      <DialogContent>\n        <Typography>\n          Are you sure you want to return to the import form? This will lose\n          your current view\n        </Typography>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={() => {\n            model.clearView()\n            handleClose()\n          }}\n          variant=\"contained\"\n          color=\"primary\"\n          autoFocus\n        >\n          OK\n        </Button>\n        <Button\n          onClick={() => handleClose()}\n          color=\"secondary\"\n          variant=\"contained\"\n        >\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default observer(ReturnToImportFormDialog)\n","import React from 'react'\nimport escapeHTML from 'escape-html'\nimport dompurify from 'dompurify'\n\n// source https://github.com/sindresorhus/html-tags/blob/master/html-tags.json\n// with some random uncommon ones removed. note: we just use this to run the content\n// through dompurify without escaping if we see an htmlTag from this list\n// otherwise we escape angle brackets and things prematurely because it might be\n// something like <TRA> in VCF. Ref #657\nconst htmlTags = [\n  'a',\n  'b',\n  'br',\n  'code',\n  'div',\n  'em',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'i',\n  'img',\n  'li',\n  'p',\n  'pre',\n  'span',\n  'small',\n  'strong',\n  'table',\n  'tbody',\n  'td',\n  'tfoot',\n  'th',\n  'thead',\n  'tr',\n  'u',\n  'ul',\n]\n\nlet added = false\n\n// adapted from is-html\n// https://github.com/sindresorhus/is-html/blob/master/index.js\nconst full = new RegExp(htmlTags.map(tag => `<${tag}\\\\b[^>]*>`).join('|'), 'i')\nexport function isHTML(str: string) {\n  return full.test(str)\n}\n\nexport default function SanitizedHTML({ html }: { html: string }) {\n  const value = isHTML(html) ? html : escapeHTML(html)\n  if (!added) {\n    added = true\n    // see https://github.com/cure53/DOMPurify/issues/317\n    // only have to add this once, and can't do it globally because dompurify\n    // not yet initialized at global scope\n    dompurify.addHook(\n      'afterSanitizeAttributes',\n      (node: {\n        tagName: string\n        setAttribute: (arg0: string, arg1: string) => void\n      }) => {\n        if (node.tagName === 'A') {\n          node.setAttribute('rel', 'noopener noreferrer')\n          node.setAttribute('target', '_blank')\n        }\n      },\n    )\n  }\n\n  return (\n    <span\n      // eslint-disable-next-line react/no-danger\n      dangerouslySetInnerHTML={{\n        __html: dompurify.sanitize(value),\n      }}\n    />\n  )\n}\n","import { blue, green, red, grey, amber } from '@mui/material/colors'\nimport { createTheme, ThemeOptions } from '@mui/material/styles'\nimport type { PaletteAugmentColorOptions } from '@mui/material/styles/createPalette'\nimport deepmerge from 'deepmerge'\n\ndeclare module '@mui/material/styles/createPalette' {\n  interface Palette {\n    tertiary: Palette['primary']\n    quaternary: Palette['primary']\n    stopCodon?: string\n    startCodon?: string\n    bases: {\n      A: Palette['primary']\n      C: Palette['primary']\n      G: Palette['primary']\n      T: Palette['primary']\n    }\n  }\n  interface PaletteOptions {\n    tertiary?: PaletteOptions['primary']\n    quaternary?: PaletteOptions['primary']\n    stopCodon?: string\n    startCodon?: string\n    bases?: {\n      A?: PaletteOptions['primary']\n      C?: PaletteOptions['primary']\n      G?: PaletteOptions['primary']\n      T?: PaletteOptions['primary']\n    }\n  }\n}\n\nconst midnight = '#0D233F'\nconst grape = '#721E63'\nconst forest = '#135560'\nconst mandarin = '#FFB11D'\n\nconst refTheme = createTheme()\n\nfunction getDefaultTheme() {\n  return {\n    name: 'Default (from config)',\n    palette: {\n      mode: undefined,\n      primary: { main: midnight },\n      secondary: { main: grape },\n      tertiary: refTheme.palette.augmentColor({ color: { main: forest } }),\n      quaternary: refTheme.palette.augmentColor({ color: { main: mandarin } }),\n      stopCodon: '#e22',\n      startCodon: '#3e3',\n      bases: {\n        A: refTheme.palette.augmentColor({ color: green }),\n        C: refTheme.palette.augmentColor({ color: blue }),\n        G: refTheme.palette.augmentColor({ color: amber }),\n        T: refTheme.palette.augmentColor({ color: red }),\n      },\n    },\n  }\n}\n\nfunction getLightStockTheme() {\n  return {\n    name: 'Light (stock)',\n    palette: {\n      mode: undefined,\n      primary: { main: midnight },\n      secondary: { main: grape },\n      tertiary: refTheme.palette.augmentColor({ color: { main: forest } }),\n      quaternary: refTheme.palette.augmentColor({ color: { main: mandarin } }),\n      stopCodon: '#e22',\n      startCodon: '#3e3',\n      bases: {\n        A: refTheme.palette.augmentColor({ color: green }),\n        C: refTheme.palette.augmentColor({ color: blue }),\n        G: refTheme.palette.augmentColor({ color: amber }),\n        T: refTheme.palette.augmentColor({ color: red }),\n      },\n    },\n  }\n}\n\nfunction getDarkStockTheme() {\n  return {\n    name: 'Dark (stock)',\n    palette: {\n      mode: 'dark',\n      primary: { main: midnight },\n      secondary: { main: grape },\n      tertiary: refTheme.palette.augmentColor({ color: { main: forest } }),\n      quaternary: refTheme.palette.augmentColor({ color: { main: mandarin } }),\n      stopCodon: '#e22',\n      startCodon: '#3e3',\n      bases: {\n        A: refTheme.palette.augmentColor({ color: green }),\n        C: refTheme.palette.augmentColor({ color: blue }),\n        G: refTheme.palette.augmentColor({ color: amber }),\n        T: refTheme.palette.augmentColor({ color: red }),\n      },\n    },\n  }\n}\n\nfunction getDarkMinimalTheme() {\n  return {\n    name: 'Dark (minimal)',\n    palette: {\n      mode: 'dark' as const,\n      primary: { main: grey[700] },\n      secondary: { main: grey[800] },\n      tertiary: refTheme.palette.augmentColor({ color: { main: grey[900] } }),\n      quaternary: refTheme.palette.augmentColor({ color: { main: mandarin } }),\n      stopCodon: '#e22',\n      startCodon: '#3e3',\n      bases: {\n        A: refTheme.palette.augmentColor({ color: green }),\n        C: refTheme.palette.augmentColor({ color: blue }),\n        G: refTheme.palette.augmentColor({ color: amber }),\n        T: refTheme.palette.augmentColor({ color: red }),\n      },\n    },\n  }\n}\n\nfunction getMinimalTheme() {\n  return {\n    name: 'Light (minimal)',\n    palette: {\n      primary: { main: grey[900] },\n      secondary: { main: grey[800] },\n      tertiary: refTheme.palette.augmentColor({ color: { main: grey[900] } }),\n      quaternary: refTheme.palette.augmentColor({ color: { main: mandarin } }),\n      stopCodon: '#e22',\n      startCodon: '#3e3',\n      bases: {\n        A: refTheme.palette.augmentColor({ color: green }),\n        C: refTheme.palette.augmentColor({ color: blue }),\n        G: refTheme.palette.augmentColor({ color: amber }),\n        T: refTheme.palette.augmentColor({ color: red }),\n      },\n    },\n  }\n}\n\nexport const defaultThemes = {\n  default: getDefaultTheme(),\n  lightStock: getLightStockTheme(),\n  lightMinimal: getMinimalTheme(),\n  darkMinimal: getDarkMinimalTheme(),\n  darkStock: getDarkStockTheme(),\n} as ThemeMap\n\nfunction createDefaultProps(theme?: ThemeOptions) {\n  return {\n    components: {\n      MuiButton: {\n        defaultProps: {\n          size: 'small' as const,\n        },\n        styleOverrides: {\n          // the default button, especially when not using variant=contained, uses\n          // theme.palette.primary.main for text which is very bad with dark\n          // mode+midnight primary\n          //\n          // keeps text secondary for darkmode, uses\n          // a text-like coloring to ensure contrast\n          // xref https://stackoverflow.com/a/72546130/2129219\n          //\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          root: (props: any) => {\n            const { theme } = props\n            return theme.palette.mode === 'dark'\n              ? {\n                  color: theme.palette.text.primary,\n                }\n              : undefined\n          },\n        },\n      },\n      MuiAccordion: {\n        defaultProps: {\n          disableGutters: true,\n          TransitionProps: { timeout: 150 },\n        },\n      },\n      MuiFilledInput: {\n        defaultProps: {\n          margin: 'dense' as const,\n        },\n      },\n      MuiFormControl: {\n        defaultProps: {\n          margin: 'dense' as const,\n          size: 'small' as const,\n        },\n      },\n      MuiFormHelperText: {\n        defaultProps: {\n          margin: 'dense' as const,\n        },\n      },\n\n      MuiIconButton: {\n        defaultProps: {\n          size: 'small' as const,\n        },\n      },\n      MuiInputBase: {\n        defaultProps: {\n          margin: 'dense' as const,\n        },\n      },\n      MuiAutocomplete: {\n        defaultProps: {\n          size: 'small' as const,\n        },\n      },\n      MuiInputLabel: {\n        defaultProps: {\n          margin: 'dense' as const,\n        },\n      },\n      MuiToolbar: {\n        defaultProps: {\n          variant: 'dense' as const,\n        },\n      },\n      MuiListItem: {\n        defaultProps: {\n          dense: true,\n        },\n      },\n      MuiOutlinedInput: {\n        defaultProps: {\n          margin: 'dense' as const,\n        },\n      },\n      MuiFab: {\n        defaultProps: {\n          size: 'small' as const,\n        },\n        styleOverrides: {\n          secondary: {\n            // @ts-ignore\n            backgroundColor: theme?.palette?.quaternary?.main,\n          },\n        },\n      },\n      MuiTable: {\n        defaultProps: {\n          size: 'small' as const,\n        },\n      },\n      MuiPopover: {\n        defaultProps: {\n          transitionDuration: 0,\n        },\n      },\n      MuiMenu: {\n        defaultProps: {\n          transitionDuration: 0,\n        },\n      },\n      MuiMenuList: {\n        defaultProps: {\n          dense: true,\n        },\n      },\n      MuiMenuItem: {\n        defaultProps: {\n          dense: true,\n        },\n      },\n\n      MuiTextField: {\n        defaultProps: {\n          margin: 'dense' as const,\n          variant: 'standard' as const,\n        },\n      },\n      MuiLink: {\n        styleOverrides: {\n          // the default link color uses theme.palette.primary.main which is\n          // very bad with dark mode+midnight primary\n          //\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          root: ({ theme }: any) => ({\n            color: theme.palette.text.secondary,\n          }),\n        },\n      },\n      MuiCheckbox: {\n        styleOverrides: {\n          // the default checkbox-when-checked color uses\n          // theme.palette.primary.main which is very bad with dark\n          // mode+midnight primary\n          //\n          // keeps the forest-green checkbox by default but for darkmode, uses\n          // a text-like coloring to ensure contrast\n          // xref https://stackoverflow.com/a/72546130/2129219\n          //\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          root: (props: any) => {\n            const { theme } = props\n            return theme.palette.mode === 'dark'\n              ? {\n                  color: theme.palette.text.secondary,\n                  '&.Mui-checked': {\n                    color: theme.palette.text.secondary,\n                  },\n                }\n              : undefined\n          },\n        },\n      },\n      MuiRadio: {\n        styleOverrides: {\n          // the default checkbox-when-checked color uses\n          // theme.palette.primary.main which is very bad with dark\n          // mode+midnight primary\n          //\n          // keeps the forest-green checkbox by default but for darkmode, uses\n          // a text-like coloring to ensure contrast\n          // xref https://stackoverflow.com/a/72546130/2129219\n          //\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          root: (props: any) => {\n            const { theme } = props\n            return theme.palette.mode === 'dark'\n              ? {\n                  color: theme.palette.text.secondary,\n                  '&.Mui-checked': {\n                    color: theme.palette.text.secondary,\n                  },\n                }\n              : undefined\n          },\n        },\n      },\n      MuiFormLabel: {\n        styleOverrides: {\n          // the default checkbox-when-checked color uses\n          // theme.palette.primary.main which is very bad with dark\n          // mode+midnight primary\n          //\n          // keeps the forest-green checkbox by default but for darkmode, uses\n          // a text-like coloring to ensure contrast\n          // xref https://stackoverflow.com/a/72546130/2129219\n          //\n          // eslint-disable-next-line @typescript-eslint/no-explicit-any\n          root: (props: any) => {\n            const { theme } = props\n            return theme.palette.mode === 'dark'\n              ? {\n                  color: theme.palette.text.secondary,\n                  '&.Mui-focused': {\n                    color: theme.palette.text.secondary,\n                  },\n                }\n              : undefined\n          },\n        },\n      },\n      MuiAccordionSummary: {\n        styleOverrides: {\n          root: {\n            // @ts-ignore\n            backgroundColor: theme?.palette?.tertiary?.main,\n          },\n          content: {\n            // @ts-ignore\n            color: theme?.palette?.tertiary?.contrastText,\n          },\n        },\n      },\n    },\n  }\n}\n\nexport function createJBrowseBaseTheme(theme?: ThemeOptions): ThemeOptions {\n  return {\n    palette: theme?.palette,\n    typography: { fontSize: 12 },\n    spacing: 4,\n    ...createDefaultProps(theme),\n  }\n}\n\ntype ThemeMap = { [key: string]: ThemeOptions }\n\nexport function createJBrowseTheme(\n  configTheme: ThemeOptions = {},\n  themes = defaultThemes,\n  paletteName = 'default',\n) {\n  return createTheme(getCurrentTheme(configTheme, themes, paletteName))\n}\n\nfunction augmentTheme(theme: ThemeOptions = {}) {\n  if (theme?.palette?.tertiary) {\n    theme = deepmerge(theme, {\n      palette: {\n        tertiary: refTheme.palette.augmentColor(\n          'color' in theme.palette.tertiary\n            ? (theme.palette.tertiary as PaletteAugmentColorOptions)\n            : { color: theme.palette.tertiary },\n        ),\n      },\n    })\n  }\n\n  if (theme?.palette?.quaternary) {\n    theme = deepmerge(theme, {\n      palette: {\n        quaternary: refTheme.palette.augmentColor(\n          'color' in theme.palette.quaternary\n            ? (theme.palette.quaternary as PaletteAugmentColorOptions)\n            : { color: theme.palette.quaternary },\n        ),\n      },\n    })\n  }\n\n  return theme\n}\n\nexport function getCurrentTheme(\n  theme: ThemeOptions = {},\n  themes = defaultThemes,\n  themeName = 'default',\n) {\n  const baseTheme = augmentTheme(theme)\n  const isDefault = themeName !== 'default'\n  let userChoiceTheme = augmentTheme(themes[themeName] || themes['default'])\n  if (!userChoiceTheme?.palette?.quaternary) {\n    userChoiceTheme = deepmerge(userChoiceTheme, {\n      palette: {\n        quaternary: refTheme.palette.augmentColor({ color: { main: '#aaa' } }),\n      },\n    })\n  }\n  if (!userChoiceTheme?.palette?.tertiary) {\n    userChoiceTheme = deepmerge(userChoiceTheme, {\n      palette: {\n        tertiary: refTheme.palette.augmentColor({ color: { main: '#aaa' } }),\n      },\n    })\n  }\n\n  const obj = createJBrowseBaseTheme(\n    isDefault\n      ? userChoiceTheme\n      : deepmerge(themes['default'] || {}, baseTheme || {}),\n  )\n\n  return deepmerge(obj, theme)\n}\n","import { Observable, fromEvent } from 'rxjs'\n\nclass AbortError extends Error {\n  public code: string | undefined\n}\n\n/**\n * properly check if the given AbortSignal is aborted.\n * per the standard, if the signal reads as aborted,\n * this function throws either a DOMException AbortError, or a regular error\n * with a `code` attribute set to `ERR_ABORTED`.\n *\n * for convenience, passing `undefined` is a no-op\n *\n * @param signal -\n * @returns nothing\n */\nexport function checkAbortSignal(signal?: AbortSignal): void {\n  if (!signal) {\n    return\n  }\n\n  if (!(signal instanceof AbortSignal)) {\n    throw new TypeError('must pass an AbortSignal')\n  }\n\n  if (signal.aborted) {\n    throw makeAbortError()\n  }\n}\n\nfunction timeout(ms: number) {\n  return new Promise(resolve => setTimeout(resolve, ms))\n}\n/**\n * Skips to the next tick, then runs `checkAbortSignal`.\n * Await this to inside an otherwise synchronous loop to\n * provide a place to break when an abort signal is received.\n */\nexport async function abortBreakPoint(signal?: AbortSignal) {\n  // it was observed that an actual timeout is needed to get the aborting (wrap\n  // hicrenderer in a try catch, console.error the error, and rethrow the error\n  // to see). using await Promise.resolve() did not appear to allow aborting to\n  // occur\n  await timeout(1)\n  checkAbortSignal(signal)\n}\n\nexport function makeAbortError() {\n  if (typeof DOMException !== 'undefined') {\n    return new DOMException('aborted', 'AbortError')\n  }\n  const e = new AbortError('aborted')\n  e.code = 'ERR_ABORTED'\n  return e\n}\n\nexport function observeAbortSignal(signal?: AbortSignal): Observable<Event> {\n  if (!signal) {\n    return Observable.create()\n  }\n  return fromEvent(signal, 'abort')\n}\n\n/**\n * check if the given exception was caused by an operation being intentionally aborted\n * @param exception -\n */\nexport function isAbortException(exception: unknown): boolean {\n  return (\n    exception instanceof Error &&\n    // DOMException\n    (exception.name === 'AbortError' ||\n      // standard-ish non-DOM abort exception\n      (exception as AbortError).code === 'ERR_ABORTED' ||\n      // message contains aborted for bubbling through RPC\n      // things we have seen that we want to catch here\n      // Error: aborted\n      // AbortError: aborted\n      // AbortError: The user aborted a request.\n      !!exception.message.match(/\\b(aborted|AbortError)\\b/i))\n  )\n}\n","import { when as mobxWhen, IWhenOptions } from 'mobx'\nimport { makeAbortError } from './aborting'\n\ninterface WhenOpts extends IWhenOptions {\n  signal?: AbortSignal\n}\n\n/**\n * Wrapper for mobx `when` that adds timeout and aborting support.\n */\nexport function when(\n  getter: () => boolean,\n  { timeout, signal, name }: WhenOpts = {},\n) {\n  return new Promise((resolve, reject) => {\n    let finished = false\n\n    const whenPromise = mobxWhen(getter)\n\n    // set up timeout\n    let timeoutId: ReturnType<typeof setTimeout> | undefined\n    let finishTimeout = () => {}\n    if (timeout) {\n      timeoutId = setTimeout(() => {\n        if (!finished) {\n          finished = true\n          whenPromise.cancel()\n          reject(new Error(`timed out waiting for ${name || 'whenPresent'}`))\n        }\n      }, timeout)\n      finishTimeout = () => timeoutId && clearTimeout(timeoutId)\n    }\n\n    // set up aborting\n    if (signal) {\n      signal.addEventListener('abort', () => {\n        if (!finished) {\n          finished = true\n\n          // mobx when supports a cancel method\n          whenPromise.cancel()\n          finishTimeout()\n\n          reject(makeAbortError())\n        }\n      })\n    }\n\n    whenPromise\n      .then(() => {\n        if (!finished) {\n          finished = true\n          finishTimeout()\n\n          resolve(true)\n        }\n      })\n      .catch(err => {\n        if (!finished) {\n          finished = true\n          finishTimeout()\n\n          reject(err)\n        }\n      })\n  })\n}\n\n/**\n * Wrapper for mobx `when` that makes a promise for the return value\n * of the given function at the point in time when it becomes not\n * undefined and not null.\n */\nexport async function whenPresent<FUNCTION extends () => unknown>(\n  getter: FUNCTION,\n  opts: WhenOpts = {},\n): Promise<NonNullable<ReturnType<FUNCTION>>> {\n  await when(() => {\n    const val = getter()\n    return val !== undefined && val !== null\n  }, opts)\n\n  return getter() as NonNullable<ReturnType<FUNCTION>>\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { useEffect, useRef, useState } from 'react'\nimport isObject from 'is-object'\nimport PluginManager from '../PluginManager'\nimport {\n  addDisposer,\n  getParent,\n  getEnv as getEnvMST,\n  isAlive,\n  hasParent,\n  IAnyStateTreeNode,\n  IStateTreeNode,\n} from 'mobx-state-tree'\nimport { reaction, IReactionPublic, IReactionOptions } from 'mobx'\nimport SimpleFeature, {\n  Feature,\n  SimpleFeatureSerialized,\n  isFeature,\n} from './simpleFeature'\nimport {\n  isSessionModel,\n  isDisplayModel,\n  isViewModel,\n  isTrackModel,\n  Region,\n  TypeTestedByPredicate,\n} from './types'\nimport { isAbortException, checkAbortSignal } from './aborting'\nimport { BaseBlock } from './blockTypes'\nimport { isUriLocation } from './types'\n\nexport * from './types'\nexport * from './aborting'\nexport * from './when'\nexport * from './range'\nexport * from './dedupe'\nexport { SimpleFeature, isFeature }\nexport type { Feature, SimpleFeatureSerialized }\nexport * from './offscreenCanvasPonyfill'\nexport * from './offscreenCanvasUtils'\nexport * from './renameRegions'\n\nexport const inDevelopment =\n  typeof process === 'object' &&\n  process.env &&\n  process.env.NODE_ENV === 'development'\nexport const inProduction = !inDevelopment\n\nexport function useDebounce<T>(value: T, delay: number) {\n  const [debouncedValue, setDebouncedValue] = useState(value)\n\n  useEffect(() => {\n    const handle = setTimeout(() => {\n      setDebouncedValue(value)\n    }, delay)\n    return () => {\n      clearTimeout(handle)\n    }\n  }, [value, delay])\n\n  return debouncedValue\n}\n\n// https://stackoverflow.com/questions/56283920/\nexport function useDebouncedCallback<T>(\n  callback: (...args: T[]) => void,\n  wait = 400,\n) {\n  // track args & timeout handle between calls\n  const argsRef = useRef<T[]>()\n  const timeout = useRef<ReturnType<typeof setTimeout>>()\n\n  function cleanup() {\n    if (timeout.current) {\n      clearTimeout(timeout.current)\n    }\n  }\n\n  // make sure our timeout gets cleared if our consuming component gets unmounted\n  useEffect(() => cleanup, [])\n\n  return function debouncedCallback(...args: T[]) {\n    // capture latest args\n    argsRef.current = args\n\n    // clear debounce timer\n    cleanup()\n\n    // start waiting again\n    timeout.current = setTimeout(() => {\n      if (argsRef.current) {\n        callback(...argsRef.current)\n      }\n    }, wait)\n  }\n}\n\n/** find the first node in the hierarchy that matches the given predicate */\nexport function findParentThat(\n  node: IAnyStateTreeNode,\n  predicate: (thing: IAnyStateTreeNode) => boolean,\n) {\n  if (!hasParent(node)) {\n    throw new Error('node does not have parent')\n  }\n  let currentNode: IAnyStateTreeNode | undefined = getParent<any>(node)\n  while (currentNode && isAlive(currentNode)) {\n    if (predicate(currentNode)) {\n      return currentNode\n    }\n    if (hasParent(currentNode)) {\n      currentNode = getParent<any>(currentNode)\n    } else {\n      break\n    }\n  }\n  throw new Error('no matching node found')\n}\n\ninterface Animation {\n  lastPosition: number\n  lastTime?: number\n  lastVelocity?: number\n}\n\n// based on https://github.com/react-spring/react-spring/blob/cd5548a987383b8023efd620f3726a981f9e18ea/src/animated/FrameLoop.ts\nexport function springAnimate(\n  fromValue: number,\n  toValue: number,\n  setValue: (value: number) => void,\n  onFinish = () => {},\n  precision = 0,\n  tension = 170,\n  friction = 26,\n) {\n  const mass = 1\n  if (!precision) {\n    precision = Math.abs(toValue - fromValue) / 1000\n  }\n\n  let animationFrameId: number\n\n  function update(animation: Animation) {\n    const time = Date.now()\n    let position = animation.lastPosition\n    let lastTime = animation.lastTime || time\n    let velocity = animation.lastVelocity || 0\n    // If we lost a lot of frames just jump to the end.\n    if (time > lastTime + 64) {\n      lastTime = time\n    }\n    // http://gafferongames.com/game-physics/fix-your-timestep/\n    const numSteps = Math.floor(time - lastTime)\n    for (let i = 0; i < numSteps; ++i) {\n      const force = -tension * (position - toValue)\n      const damping = -friction * velocity\n      const acceleration = (force + damping) / mass\n      velocity += (acceleration * 1) / 1000\n      position += (velocity * 1) / 1000\n    }\n    const isVelocity = Math.abs(velocity) <= precision\n    const isDisplacement =\n      tension !== 0 ? Math.abs(toValue - position) <= precision : true\n    const endOfAnimation = isVelocity && isDisplacement\n    if (endOfAnimation) {\n      setValue(toValue)\n      onFinish()\n    } else {\n      setValue(position)\n      animationFrameId = requestAnimationFrame(() =>\n        update({\n          lastPosition: position,\n          lastTime: time,\n          lastVelocity: velocity,\n        }),\n      )\n    }\n  }\n\n  return [\n    () => update({ lastPosition: fromValue }),\n    () => cancelAnimationFrame(animationFrameId),\n  ]\n}\n\n/** find the first node in the hierarchy that matches the given 'is' typescript type guard predicate */\nexport function findParentThatIs<\n  PREDICATE extends (thing: IAnyStateTreeNode) => boolean,\n>(\n  node: IAnyStateTreeNode,\n  predicate: PREDICATE,\n): TypeTestedByPredicate<PREDICATE> & IAnyStateTreeNode {\n  return findParentThat(node, predicate) as TypeTestedByPredicate<PREDICATE> &\n    IAnyStateTreeNode\n}\n\n/** get the current JBrowse session model, starting at any node in the state tree */\nexport function getSession(node: IAnyStateTreeNode) {\n  try {\n    return findParentThatIs(node, isSessionModel)\n  } catch (e) {\n    throw new Error('no session model found!')\n  }\n}\n\n/** get the state model of the view in the state tree that contains the given node */\nexport function getContainingView(node: IAnyStateTreeNode) {\n  try {\n    return findParentThatIs(node, isViewModel)\n  } catch (e) {\n    throw new Error('no containing view found')\n  }\n}\n\n/** get the state model of the view in the state tree that contains the given node */\nexport function getContainingTrack(node: IAnyStateTreeNode) {\n  try {\n    return findParentThatIs(node, isTrackModel)\n  } catch (e) {\n    throw new Error('no containing track found')\n  }\n}\n\nexport function getContainingDisplay(node: IAnyStateTreeNode) {\n  try {\n    return findParentThatIs(node, isDisplayModel)\n  } catch (e) {\n    throw new Error('no containing display found')\n  }\n}\n\n/**\n * Assemble a 1-based \"locString\" from an interbase genomic location\n * @param region - Region\n * @example\n * ```ts\n * assembleLocString({ refName: 'chr1', start: 0, end: 100 })\n * //  'chr1:1..100'\n * ```\n * @example\n * ```ts\n * assembleLocString({ assemblyName: 'hg19', refName: 'chr1', start: 0, end: 100 })\n * //  '{hg19}chr1:1..100'\n * ```\n * @example\n * ```ts\n * assembleLocString({ refName: 'chr1' })\n * //  'chr1'\n * ```\n * @example\n * ```ts\n * assembleLocString({ refName: 'chr1', start: 0 })\n * //  'chr1:1..'\n * ```\n * @example\n * ```ts\n * assembleLocString({ refName: 'chr1', end: 100 })\n * //  'chr1:1..100'\n * ```\n * @example\n * ```ts\n * assembleLocString({ refName: 'chr1', start: 0, end: 1 })\n * //  'chr1:1'\n * ```\n */\nexport function assembleLocString(region: ParsedLocString) {\n  return assembleLocStringFast(region, toLocale)\n}\n\n// same as assembleLocString above, but does not perform toLocaleString which\n// can slow down the speed of block calculations which use assembleLocString\n// for block.key\nexport function assembleLocStringFast(\n  region: ParsedLocString,\n  cb = (n: number): string | number => n,\n) {\n  const { assemblyName, refName, start, end, reversed } = region\n  const assemblyNameString = assemblyName ? `{${assemblyName}}` : ''\n  let startString\n  if (start !== undefined) {\n    startString = `:${cb(start + 1)}`\n  } else if (end !== undefined) {\n    startString = ':1'\n  } else {\n    startString = ''\n  }\n  let endString\n  if (end !== undefined) {\n    endString = start !== undefined && start + 1 === end ? '' : `..${cb(end)}`\n  } else {\n    endString = start !== undefined ? '..' : ''\n  }\n  let rev = ''\n  if (reversed) {\n    rev = '[rev]'\n  }\n  return `${assemblyNameString}${refName}${startString}${endString}${rev}`\n}\n\nexport interface ParsedLocString {\n  assemblyName?: string\n  refName: string\n  start?: number\n  end?: number\n  reversed?: boolean\n}\n\nexport function parseLocStringOneBased(\n  locString: string,\n  isValidRefName: (refName: string, assemblyName?: string) => boolean,\n): ParsedLocString {\n  if (!locString) {\n    throw new Error('no location string provided, could not parse')\n  }\n  let reversed = false\n  if (locString.endsWith('[rev]')) {\n    reversed = true\n    locString = locString.replace(/\\[rev\\]$/, '')\n  }\n  // remove any whitespace\n  locString = locString.replace(/\\s/, '')\n  // refNames can have colons, ref https://samtools.github.io/hts-specs/SAMv1.pdf Appendix A\n  const assemblyMatch = locString.match(/(\\{(.+)\\})?(.+)/)\n  if (!assemblyMatch) {\n    throw new Error(`invalid location string: \"${locString}\"`)\n  }\n  const [, , assemblyName, location] = assemblyMatch\n  if (!assemblyName && location.startsWith('{}')) {\n    throw new Error(`no assembly name was provided in location \"${location}\"`)\n  }\n  const lastColonIdx = location.lastIndexOf(':')\n  if (lastColonIdx === -1) {\n    if (isValidRefName(location, assemblyName)) {\n      return { assemblyName, refName: location, reversed }\n    }\n    throw new Error(`Unknown reference sequence \"${location}\"`)\n  }\n  const prefix = location.slice(0, lastColonIdx)\n  const suffix = location.slice(lastColonIdx + 1)\n  if (\n    isValidRefName(prefix, assemblyName) &&\n    isValidRefName(location, assemblyName)\n  ) {\n    throw new Error(`ambiguous location string: \"${locString}\"`)\n  } else if (isValidRefName(prefix, assemblyName)) {\n    if (suffix) {\n      // see if it's a range\n      const rangeMatch = suffix.match(\n        /^(-?(\\d+|\\d{1,3}(,\\d{3})*))(\\.\\.|-)(-?(\\d+|\\d{1,3}(,\\d{3})*))$/,\n      )\n      // see if it's a single point\n      const singleMatch = suffix.match(/^(-?(\\d+|\\d{1,3}(,\\d{3})*))(\\.\\.|-)?$/)\n      if (rangeMatch) {\n        const [, start, , , , end] = rangeMatch\n        if (start !== undefined && end !== undefined) {\n          return {\n            assemblyName,\n            refName: prefix,\n            start: +start.replace(/,/g, ''),\n            end: +end.replace(/,/g, ''),\n            reversed,\n          }\n        }\n      } else if (singleMatch) {\n        const [, start, , , separator] = singleMatch\n        if (start !== undefined) {\n          if (separator) {\n            // indefinite end\n            return {\n              assemblyName,\n              refName: prefix,\n              start: +start.replace(/,/g, ''),\n              reversed,\n            }\n          }\n          return {\n            assemblyName,\n            refName: prefix,\n            start: +start.replace(/,/g, ''),\n            end: +start.replace(/,/g, ''),\n            reversed,\n          }\n        }\n      } else {\n        throw new Error(\n          `could not parse range \"${suffix}\" on location \"${locString}\"`,\n        )\n      }\n    } else {\n      return { assemblyName, refName: prefix, reversed }\n    }\n  } else if (isValidRefName(location, assemblyName)) {\n    return { assemblyName, refName: location, reversed }\n  }\n  throw new Error(`unknown reference sequence name in location \"${locString}\"`)\n}\n\n/**\n * Parse a 1-based location string into an interbase genomic location\n * @param locString - Location string\n * @param isValidRefName - Function that checks if a refName exists in the set\n * of all known refNames, or in the set of refNames for an assembly if\n * assemblyName is given\n * @example\n * ```ts\n * parseLocString('chr1:1..100', isValidRefName)\n * //  { refName: 'chr1', start: 0, end: 100 }\n * ```\n * @example\n * ```ts\n * parseLocString('chr1:1-100', isValidRefName)\n * //  { refName: 'chr1', start: 0, end: 100 }\n * ```\n * @example\n * ```ts\n * parseLocString(`{hg19}chr1:1..100`, isValidRefName)\n * //  { assemblyName: 'hg19', refName: 'chr1', start: 0, end: 100 }\n * ```\n * @example\n * ```ts\n * parseLocString('chr1', isValidRefName)\n * //  { refName: 'chr1' }\n * ```\n * @example\n * ```ts\n * parseLocString('chr1:1', isValidRefName)\n * //  { refName: 'chr1', start: 0, end: 1 }\n * ```\n * @example\n * ```ts\n * parseLocString('chr1:1..', isValidRefName)\n * //  { refName: 'chr1', start: 0}\n * ```\n */\nexport function parseLocString(\n  locString: string,\n  isValidRefName: (refName: string, assemblyName?: string) => boolean,\n) {\n  const parsed = parseLocStringOneBased(locString, isValidRefName)\n  if (typeof parsed.start === 'number') {\n    parsed.start -= 1\n  }\n  return parsed\n}\n\nexport function compareLocs(locA: ParsedLocString, locB: ParsedLocString) {\n  const assemblyComp =\n    locA.assemblyName || locB.assemblyName\n      ? (locA.assemblyName || '').localeCompare(locB.assemblyName || '')\n      : 0\n  if (assemblyComp) {\n    return assemblyComp\n  }\n\n  const refComp =\n    locA.refName || locB.refName\n      ? (locA.refName || '').localeCompare(locB.refName || '')\n      : 0\n  if (refComp) {\n    return refComp\n  }\n\n  if (locA.start !== undefined && locB.start !== undefined) {\n    const startComp = locA.start - locB.start\n    if (startComp) {\n      return startComp\n    }\n  }\n  if (locA.end !== undefined && locB.end !== undefined) {\n    const endComp = locA.end - locB.end\n    if (endComp) {\n      return endComp\n    }\n  }\n  return 0\n}\n\nexport function compareLocStrings(\n  a: string,\n  b: string,\n  isValidRefName: (refName: string, assemblyName?: string) => boolean,\n) {\n  const locA = parseLocString(a, isValidRefName)\n  const locB = parseLocString(b, isValidRefName)\n  return compareLocs(locA, locB)\n}\n\n/**\n * Ensure that a number is at least min and at most max.\n *\n * @param num -\n * @param min -\n * @param  max -\n */\nexport function clamp(num: number, min: number, max: number) {\n  if (num < min) {\n    return min\n  }\n  if (num > max) {\n    return max\n  }\n  return num\n}\n\nfunction roundToNearestPointOne(num: number) {\n  return Math.round(num * 10) / 10\n}\n\n/**\n * @param bp -\n * @param region -\n * @param bpPerPx -\n */\nexport function bpToPx(\n  bp: number,\n  {\n    reversed,\n    end = 0,\n    start = 0,\n  }: { start?: number; end?: number; reversed?: boolean },\n  bpPerPx: number,\n) {\n  return roundToNearestPointOne((reversed ? end - bp : bp - start) / bpPerPx)\n}\n\nconst oneEightyOverPi = 180.0 / Math.PI\nconst piOverOneEighty = Math.PI / 180.0\nexport function radToDeg(radians: number) {\n  return (radians * oneEightyOverPi) % 360\n}\nexport function degToRad(degrees: number) {\n  return (degrees * piOverOneEighty) % (2 * Math.PI)\n}\n\n/**\n * @returns [x, y]\n */\nexport function polarToCartesian(rho: number, theta: number) {\n  return [rho * Math.cos(theta), rho * Math.sin(theta)] as [number, number]\n}\n\n/**\n * @param x - the x\n * @param y - the y\n * @returns [rho, theta]\n */\nexport function cartesianToPolar(x: number, y: number) {\n  const rho = Math.sqrt(x * x + y * y)\n  const theta = Math.atan(y / x)\n  return [rho, theta] as [number, number]\n}\n\nexport function featureSpanPx(\n  feature: Feature,\n  region: { start: number; end: number; reversed?: boolean },\n  bpPerPx: number,\n): [number, number] {\n  return bpSpanPx(feature.get('start'), feature.get('end'), region, bpPerPx)\n}\n\nexport function bpSpanPx(\n  leftBp: number,\n  rightBp: number,\n  region: { start: number; end: number; reversed?: boolean },\n  bpPerPx: number,\n): [number, number] {\n  const start = bpToPx(leftBp, region, bpPerPx)\n  const end = bpToPx(rightBp, region, bpPerPx)\n  return region.reversed ? [end, start] : [start, end]\n}\n\n// do an array map of an iterable\nexport function iterMap<T, U>(\n  iter: Iterable<T>,\n  func: (arg: T) => U,\n  sizeHint?: number,\n) {\n  const results: U[] = sizeHint ? new Array(sizeHint) : []\n  let counter = 0\n  for (const item of iter) {\n    results[counter] = func(item)\n    counter += 1\n  }\n  return results\n}\n\n// https://stackoverflow.com/a/53187807\n/**\n * Returns the index of the last element in the array where predicate is true,\n * and -1 otherwise.\n * @param array - The source array to search in\n * @param predicate - find calls predicate once for each element of the array, in\n * descending order, until it finds one where predicate returns true. If such an\n * element is found, findLastIndex immediately returns that element index.\n * Otherwise, findLastIndex returns -1.\n */\nexport function findLastIndex<T>(\n  array: Array<T>,\n  predicate: (value: T, index: number, obj: T[]) => boolean,\n): number {\n  let l = array.length\n  while (l--) {\n    if (predicate(array[l], l, array)) {\n      return l\n    }\n  }\n  return -1\n}\n\n/**\n * makes a mobx reaction with the given functions, that calls actions on the\n * model for each stage of execution, and to abort the reaction function when\n * the model is destroyed.\n *\n * Will call startedFunction(signal), successFunction(result), and\n * errorFunction(error) when the async reaction function starts, completes, and\n * errors respectively.\n *\n * @param self -\n * @param dataFunction -\n * @param asyncReactionFunction -\n * @param reactionOptions -\n * @param startedFunction -\n * @param successFunction -\n * @param errorFunction -\n */\nexport function makeAbortableReaction<T, U, V>(\n  self: T,\n  dataFunction: (arg: T) => U,\n  asyncReactionFunction: (\n    arg: U | undefined,\n    signal: AbortSignal,\n    model: T,\n    handle: IReactionPublic,\n  ) => Promise<V>,\n  // @ts-ignore\n  reactionOptions: IReactionOptions,\n  startedFunction: (aborter: AbortController) => void,\n  successFunction: (arg: V) => void,\n  errorFunction: (err: unknown) => void,\n) {\n  let inProgress: AbortController | undefined\n\n  function handleError(error: unknown) {\n    if (!isAbortException(error)) {\n      if (isAlive(self)) {\n        errorFunction(error)\n      } else {\n        console.error(error)\n      }\n    }\n  }\n\n  addDisposer(\n    self,\n    reaction(\n      () => {\n        try {\n          return dataFunction(self)\n        } catch (e) {\n          handleError(e)\n          return undefined\n        }\n      },\n      async (data, mobxReactionHandle) => {\n        if (inProgress && !inProgress.signal.aborted) {\n          inProgress.abort()\n        }\n\n        if (!isAlive(self)) {\n          return\n        }\n        inProgress = new AbortController()\n\n        const thisInProgress = inProgress\n        startedFunction(thisInProgress)\n        try {\n          const result = await asyncReactionFunction(\n            data,\n            thisInProgress.signal,\n            self,\n            // @ts-ignore\n            mobxReactionHandle,\n          )\n          checkAbortSignal(thisInProgress.signal)\n          if (isAlive(self)) {\n            successFunction(result)\n          }\n        } catch (e) {\n          if (thisInProgress && !thisInProgress.signal.aborted) {\n            thisInProgress.abort()\n          }\n          handleError(e)\n        }\n      },\n      reactionOptions,\n    ),\n  )\n  addDisposer(self, () => {\n    if (inProgress && !inProgress.signal.aborted) {\n      inProgress.abort()\n    }\n  })\n}\n\nexport function minmax(a: number, b: number) {\n  return [Math.min(a, b), Math.max(a, b)]\n}\n\nexport function shorten(name: string, max = 70, short = 30) {\n  return name.length > max\n    ? name.slice(0, short) + '...' + name.slice(-short)\n    : name\n}\n\nexport function stringify({\n  refName,\n  coord,\n  oob,\n}: {\n  coord: number\n  refName?: string\n  oob?: boolean\n}) {\n  return refName\n    ? `${shorten(refName)}:${toLocale(coord)}${oob ? ' (out of bounds)' : ''}`\n    : ''\n}\n\n// this is recommended in a later comment in\n// https://github.com/electron/electron/issues/2288 for detecting electron in a\n// renderer process, which is the one that has node enabled for us\n//\n// const isElectron = process.versions.electron\n// const i2 = process.versions.hasOwnProperty('electron')\nexport const isElectron = /electron/i.test(\n  typeof navigator !== 'undefined' ? navigator.userAgent : '',\n)\n\nexport function revcom(seqString: string) {\n  return reverse(complement(seqString))\n}\n\nexport function reverse(seqString: string) {\n  return seqString.split('').reverse().join('')\n}\n\nexport const complement = (() => {\n  const complementRegex = /[ACGT]/gi\n\n  // from bioperl: tr/acgtrymkswhbvdnxACGTRYMKSWHBVDNX/tgcayrkmswdvbhnxTGCAYRKMSWDVBHNX/\n  // generated with:\n  // perl -MJSON -E '@l = split \"\",\"acgtrymkswhbvdnxACGTRYMKSWHBVDNX\"; print to_json({ map { my $in = $_; tr/acgtrymkswhbvdnxACGTRYMKSWHBVDNX/tgcayrkmswdvbhnxTGCAYRKMSWDVBHNX/; $in => $_ } @l})'\n  const complementTable = {\n    S: 'S',\n    w: 'w',\n    T: 'A',\n    r: 'y',\n    a: 't',\n    N: 'N',\n    K: 'M',\n    x: 'x',\n    d: 'h',\n    Y: 'R',\n    V: 'B',\n    y: 'r',\n    M: 'K',\n    h: 'd',\n    k: 'm',\n    C: 'G',\n    g: 'c',\n    t: 'a',\n    A: 'T',\n    n: 'n',\n    W: 'W',\n    X: 'X',\n    m: 'k',\n    v: 'b',\n    B: 'V',\n    s: 's',\n    H: 'D',\n    c: 'g',\n    D: 'H',\n    b: 'v',\n    R: 'Y',\n    G: 'C',\n  } as { [key: string]: string }\n\n  return (seqString: string) => {\n    return seqString.replace(complementRegex, m => complementTable[m] || '')\n  }\n})()\n\nexport function blobToDataURL(blob: Blob): Promise<string> {\n  const a = new FileReader()\n  return new Promise((resolve, reject) => {\n    a.onload = e => {\n      if (e.target) {\n        resolve(e.target.result as string)\n      } else {\n        reject(new Error('unknown result reading blob from canvas'))\n      }\n    }\n    a.readAsDataURL(blob)\n  })\n}\n\n// requires immediate execution in jest environment, because (hypothesis) it\n// otherwise listens for prerendered_canvas but reads empty pixels, and doesn't\n// get the contents of the canvas\nexport const rIC =\n  typeof jest === 'undefined'\n    ? // @ts-ignore\n      typeof window !== 'undefined' && window.requestIdleCallback\n      ? // @ts-ignore\n        window.requestIdleCallback\n      : (cb: Function) => setTimeout(() => cb(), 1)\n    : (cb: Function) => cb()\n\n// prettier-ignore\nconst widths = [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0.2796875,0.2765625,0.3546875,0.5546875,0.5546875,0.8890625,0.665625,0.190625,0.3328125,0.3328125,0.3890625,0.5828125,0.2765625,0.3328125,0.2765625,0.3015625,0.5546875,0.5546875,0.5546875,0.5546875,0.5546875,0.5546875,0.5546875,0.5546875,0.5546875,0.5546875,0.2765625,0.2765625,0.584375,0.5828125,0.584375,0.5546875,1.0140625,0.665625,0.665625,0.721875,0.721875,0.665625,0.609375,0.7765625,0.721875,0.2765625,0.5,0.665625,0.5546875,0.8328125,0.721875,0.7765625,0.665625,0.7765625,0.721875,0.665625,0.609375,0.721875,0.665625,0.94375,0.665625,0.665625,0.609375,0.2765625,0.3546875,0.2765625,0.4765625,0.5546875,0.3328125,0.5546875,0.5546875,0.5,0.5546875,0.5546875,0.2765625,0.5546875,0.5546875,0.221875,0.240625,0.5,0.221875,0.8328125,0.5546875,0.5546875,0.5546875,0.5546875,0.3328125,0.5,0.2765625,0.5546875,0.5,0.721875,0.5,0.5,0.5,0.3546875,0.259375,0.353125,0.5890625]\n\n// xref https://gist.github.com/tophtucker/62f93a4658387bb61e4510c37e2e97cf\nexport function measureText(str: unknown, fontSize = 10) {\n  const avg = 0.5279276315789471\n  const s = String(str)\n  let total = 0\n  for (let i = 0; i < s.length; i++) {\n    const code = s.charCodeAt(i)\n    total += widths[code] ?? avg\n  }\n  return total * fontSize\n}\n\nexport const defaultStarts = ['ATG']\nexport const defaultStops = ['TAA', 'TAG', 'TGA']\nexport const defaultCodonTable = {\n  TCA: 'S',\n  TCC: 'S',\n  TCG: 'S',\n  TCT: 'S',\n  TTC: 'F',\n  TTT: 'F',\n  TTA: 'L',\n  TTG: 'L',\n  TAC: 'Y',\n  TAT: 'Y',\n  TAA: '*',\n  TAG: '*',\n  TGC: 'C',\n  TGT: 'C',\n  TGA: '*',\n  TGG: 'W',\n  CTA: 'L',\n  CTC: 'L',\n  CTG: 'L',\n  CTT: 'L',\n  CCA: 'P',\n  CCC: 'P',\n  CCG: 'P',\n  CCT: 'P',\n  CAC: 'H',\n  CAT: 'H',\n  CAA: 'Q',\n  CAG: 'Q',\n  CGA: 'R',\n  CGC: 'R',\n  CGG: 'R',\n  CGT: 'R',\n  ATA: 'I',\n  ATC: 'I',\n  ATT: 'I',\n  ATG: 'M',\n  ACA: 'T',\n  ACC: 'T',\n  ACG: 'T',\n  ACT: 'T',\n  AAC: 'N',\n  AAT: 'N',\n  AAA: 'K',\n  AAG: 'K',\n  AGC: 'S',\n  AGT: 'S',\n  AGA: 'R',\n  AGG: 'R',\n  GTA: 'V',\n  GTC: 'V',\n  GTG: 'V',\n  GTT: 'V',\n  GCA: 'A',\n  GCC: 'A',\n  GCG: 'A',\n  GCT: 'A',\n  GAC: 'D',\n  GAT: 'D',\n  GAA: 'E',\n  GAG: 'E',\n  GGA: 'G',\n  GGC: 'G',\n  GGG: 'G',\n  GGT: 'G',\n}\n\n/**\n * take CodonTable above and generate larger codon table that includes all\n * permutations of upper and lower case nucleotides\n */\nexport function generateCodonTable(table: any) {\n  const tempCodonTable: { [key: string]: string } = {}\n  Object.keys(table).forEach(codon => {\n    const aa = table[codon]\n    const nucs: string[][] = []\n    for (let i = 0; i < 3; i++) {\n      const nuc = codon.charAt(i)\n      nucs[i] = []\n      nucs[i][0] = nuc.toUpperCase()\n      nucs[i][1] = nuc.toLowerCase()\n    }\n    for (let i = 0; i < 2; i++) {\n      const n0 = nucs[0][i]\n      for (let j = 0; j < 2; j++) {\n        const n1 = nucs[1][j]\n        for (let k = 0; k < 2; k++) {\n          const n2 = nucs[2][k]\n          const triplet = n0 + n1 + n2\n          tempCodonTable[triplet] = aa\n        }\n      }\n    }\n  })\n  return tempCodonTable\n}\n\n// call statusCallback with current status and clear when finished\nexport async function updateStatus<U>(\n  msg: string,\n  cb: (arg: string) => void,\n  fn: () => U,\n) {\n  cb(msg)\n  const res = await fn()\n  cb('')\n  return res\n}\n\nexport function hashCode(str: string) {\n  let hash = 0\n  if (str.length === 0) {\n    return hash\n  }\n  for (let i = 0; i < str.length; i++) {\n    const chr = str.charCodeAt(i)\n    hash = (hash << 5) - hash + chr\n    hash |= 0 // Convert to 32bit integer\n  }\n  return hash\n}\n\nexport function objectHash(obj: Record<string, any>) {\n  return `${hashCode(JSON.stringify(obj))}`\n}\n\ninterface VirtualOffset {\n  blockPosition: number\n}\ninterface Block {\n  minv: VirtualOffset\n  maxv: VirtualOffset\n}\n\nexport async function bytesForRegions(\n  regions: Region[],\n  index: {\n    blocksForRange: (\n      ref: string,\n      start: number,\n      end: number,\n    ) => Promise<Block[]>\n  },\n) {\n  const blockResults = await Promise.all(\n    regions.map(r => index.blocksForRange(r.refName, r.start, r.end)),\n  )\n\n  return blockResults\n    .flat()\n    .map(block => ({\n      start: block.minv.blockPosition,\n      end: block.maxv.blockPosition + 65535,\n    }))\n    .reduce((a, b) => a + b.end - b.start, 0)\n}\n\nexport type ViewSnap = {\n  bpPerPx: number\n  interRegionPaddingWidth: number\n  minimumBlockWidth: number\n  width: number\n  offsetPx: number\n  staticBlocks: { contentBlocks: BaseBlock[]; blocks: BaseBlock[] }\n  displayedRegions: (IStateTreeNode & {\n    start: number\n    end: number\n    refName: string\n    reversed: boolean\n    assemblyName: string\n  })[]\n}\n\n// supported adapter types by text indexer\n//  ensure that this matches the method found in @jbrowse/text-indexing/util\nexport function supportedIndexingAdapters(type: string) {\n  return [\n    'Gff3TabixAdapter',\n    'VcfTabixAdapter',\n    'Gff3Adapter',\n    'VcfAdapter',\n  ].includes(type)\n}\n\nexport function getBpDisplayStr(totalBp: number) {\n  let str\n  if (Math.floor(totalBp / 1_000_000) > 0) {\n    str = `${parseFloat((totalBp / 1_000_000).toPrecision(3))}Mbp`\n  } else if (Math.floor(totalBp / 1_000) > 0) {\n    str = `${parseFloat((totalBp / 1_000).toPrecision(3))}Kbp`\n  } else {\n    str = `${toLocale(Math.floor(totalBp))}bp`\n  }\n  return str\n}\n\nexport function toLocale(n: number) {\n  return n.toLocaleString('en-US')\n}\n\nexport function getTickDisplayStr(totalBp: number, bpPerPx: number) {\n  let str\n  if (Math.floor(bpPerPx / 1_000) > 0) {\n    str = `${toLocale(parseFloat((totalBp / 1_000_000).toFixed(2)))}M`\n  } else {\n    str = `${toLocale(Math.floor(totalBp))}`\n  }\n  return str\n}\n\nexport function getViewParams(model: IAnyStateTreeNode, exportSVG?: boolean) {\n  // @ts-ignore\n  const { dynamicBlocks, staticBlocks, offsetPx } = getContainingView(model)\n  const b = dynamicBlocks?.contentBlocks[0] || {}\n  const staticblock = staticBlocks?.contentBlocks[0] || {}\n  const staticblock1 = staticBlocks?.contentBlocks[1] || {}\n  return {\n    offsetPx: exportSVG ? 0 : offsetPx - staticblock.offsetPx,\n    offsetPx1: exportSVG ? 0 : offsetPx - staticblock1.offsetPx,\n    start: b.start,\n    end: b.end,\n  }\n}\n\nexport function getLayoutId({\n  sessionId,\n  layoutId,\n}: {\n  sessionId: string\n  layoutId: string\n}) {\n  return sessionId + '-' + layoutId\n}\n\n// Hook from https://usehooks.com/useLocalStorage/\nexport function useLocalStorage<T>(key: string, initialValue: T) {\n  const [storedValue, setStoredValue] = useState<T>(() => {\n    if (typeof window === 'undefined') {\n      return initialValue\n    }\n    try {\n      const item = window.localStorage.getItem(key)\n      return item ? JSON.parse(item) : initialValue\n    } catch (error) {\n      console.error(error)\n      return initialValue\n    }\n  })\n  const setValue = (value: T | ((val: T) => T)) => {\n    try {\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value\n      setStoredValue(valueToStore)\n      if (typeof window !== 'undefined') {\n        window.localStorage.setItem(key, JSON.stringify(valueToStore))\n      }\n    } catch (error) {\n      console.error(error)\n    }\n  }\n  return [storedValue, setValue] as const\n}\n\nexport function getUriLink(value: { uri: string; baseUri?: string }) {\n  const { uri, baseUri = '' } = value\n  let href\n  try {\n    href = new URL(uri, baseUri).href\n  } catch (e) {\n    href = uri\n  }\n  return href\n}\n\nexport function getStr(obj: unknown) {\n  return isObject(obj)\n    ? isUriLocation(obj)\n      ? getUriLink(obj)\n      : JSON.stringify(obj)\n    : String(obj)\n}\n\n// tries to measure grid width without HTML tags included\nfunction coarseStripHTML(s: string) {\n  return s.replace(/(<([^>]+)>)/gi, '')\n}\n\n// heuristic measurement for a column of a @mui/x-data-grid, pass in values from a column\nexport function measureGridWidth(\n  elements: string[],\n  args?: {\n    minWidth?: number\n    fontSize?: number\n    maxWidth?: number\n    padding?: number\n    stripHTML?: boolean\n  },\n) {\n  const {\n    padding = 30,\n    minWidth = 80,\n    fontSize = 12,\n    maxWidth = 1000,\n    stripHTML = false,\n  } = args || {}\n  return max(\n    elements\n      .map(element => getStr(element))\n      .map(str => (stripHTML ? coarseStripHTML(str) : str))\n      .map(str => measureText(str, fontSize))\n      .map(n => Math.min(Math.max(n + padding, minWidth), maxWidth)),\n  )\n}\n\nexport function getEnv(obj: any) {\n  return getEnvMST<{ pluginManager: PluginManager }>(obj)\n}\n\nexport function localStorageGetItem(item: string) {\n  return typeof localStorage !== 'undefined'\n    ? localStorage.getItem(item)\n    : undefined\n}\n\nexport function localStorageSetItem(str: string, item: string) {\n  return typeof localStorage !== 'undefined'\n    ? localStorage.setItem(str, item)\n    : undefined\n}\n\nexport function max(arr: number[]) {\n  let max = -Infinity\n  for (let i = 0; i < arr.length; i++) {\n    max = arr[i] > max ? arr[i] : max\n  }\n  return max\n}\n\nexport function min(arr: number[]) {\n  let min = Infinity\n  for (let i = 0; i < arr.length; i++) {\n    min = arr[i] < min ? arr[i] : min\n  }\n  return min\n}\n\nexport function sum(arr: number[]) {\n  let sum = 0\n  for (let i = 0; i < arr.length; i++) {\n    sum += arr[i]\n  }\n  return sum\n}\n\nexport function avg(arr: number[]) {\n  return sum(arr) / arr.length\n}\n","// This file is a ponyfill for the HTML5 OffscreenCanvas API.\n\nimport isNode from 'detect-node'\n\nimport { CanvasSequence } from 'canvas-sequencer'\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype AbstractCanvas = any\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype AbstractImageBitmap = any\n\nexport let createCanvas: (width: number, height: number) => AbstractCanvas\nexport let createImageBitmap: (\n  canvas: AbstractCanvas,\n) => Promise<AbstractImageBitmap>\n\n/** the JS class (constructor) for offscreen-generated image bitmap data */\nexport let ImageBitmapType: Function\n\nexport function drawImageOntoCanvasContext(\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  imageData: any,\n  context: CanvasRenderingContext2D,\n) {\n  if (imageData.serializedCommands) {\n    const seq = new CanvasSequence(imageData.serializedCommands)\n    seq.execute(context)\n  } else {\n    context.drawImage(imageData as CanvasImageSource, 0, 0)\n  }\n}\n\nconst weHave = {\n  realOffscreenCanvas: typeof OffscreenCanvas === 'function',\n  node: isNode,\n}\n\nif (weHave.realOffscreenCanvas) {\n  createCanvas = (width, height) => new OffscreenCanvas(width, height)\n  // eslint-disable-next-line no-restricted-globals\n  createImageBitmap = window.createImageBitmap || self.createImageBitmap\n  // eslint-disable-next-line no-restricted-globals\n  ImageBitmapType = window.ImageBitmap || self.ImageBitmap\n} else if (weHave.node) {\n  // use node-canvas if we are running in node (i.e. automated tests)\n  createCanvas = (...args) => {\n    // @ts-ignore\n    // eslint-disable-next-line no-undef\n    return nodeCreateCanvas(...args)\n  }\n  createImageBitmap = async (canvas, ...otherargs) => {\n    if (otherargs.length) {\n      throw new Error(\n        'only one-argument uses of createImageBitmap are supported by the node offscreencanvas ponyfill',\n      )\n    }\n    const dataUri = canvas.toDataURL()\n    // @ts-ignore\n    // eslint-disable-next-line no-undef\n    const img = new nodeImage()\n    return new Promise((resolve, reject) => {\n      img.onload = () => resolve(img)\n      img.onerror = reject\n      img.src = dataUri\n    })\n  }\n} else {\n  createCanvas = (width: number, height: number) => {\n    const context = new CanvasSequence()\n    return {\n      width,\n      height,\n      getContext() {\n        return context\n      },\n    }\n  }\n  createImageBitmap = async canvas => {\n    const ctx = canvas.getContext('2d')\n    return {\n      height: canvas.height,\n      width: canvas.width,\n      serializedCommands: ctx.toJSON(),\n      containsNoTransferables: true,\n    }\n  }\n  ImageBitmapType = String\n}\n","import React from 'react'\nimport { CanvasSequence } from 'canvas-sequencer'\n\n// locals\nimport { createCanvas, createImageBitmap } from './offscreenCanvasPonyfill'\nimport { blobToDataURL } from './index'\n\nexport type RenderReturn = Record<string, unknown>\n\nexport async function renderToAbstractCanvas(\n  width: number,\n  height: number,\n  opts: {\n    exportSVG?: { rasterizeLayers?: boolean }\n    highResolutionScaling: number\n  },\n  cb: (\n    ctx: CanvasRenderingContext2D,\n  ) => Promise<RenderReturn | void> | RenderReturn | void,\n) {\n  const { exportSVG, highResolutionScaling: scaling = 1 } = opts\n\n  if (exportSVG) {\n    if (!exportSVG.rasterizeLayers) {\n      const fakeCtx = new CanvasSequence()\n      const result = await cb(fakeCtx)\n      return {\n        ...result,\n        canvasRecordedData: fakeCtx.toJSON(),\n      }\n    } else {\n      const scale = 4\n      const canvas = createCanvas(Math.ceil(width * scale), height * scale)\n      const ctx = canvas.getContext('2d')\n      if (!ctx) {\n        throw new Error('2d canvas rendering not supported on this platform')\n      }\n      ctx.scale(scale, scale)\n      const result = await cb(ctx)\n\n      // two methods needed for converting canvas to PNG, one for webworker\n      // offscreen canvas, one for main thread\n      return {\n        ...result,\n        reactElement: (\n          <image\n            width={width}\n            height={height}\n            xlinkHref={\n              'convertToBlob' in canvas\n                ? await blobToDataURL(\n                    await canvas.convertToBlob({\n                      type: 'image/png',\n                    }),\n                  )\n                : canvas.toDataURL('image/png')\n            }\n          />\n        ),\n      }\n    }\n  } else {\n    const canvas = createCanvas(Math.ceil(width * scaling), height * scaling)\n    const ctx = canvas.getContext('2d')\n    if (!ctx) {\n      throw new Error('2d canvas rendering not supported on this platform')\n    }\n    ctx.scale(scaling, scaling)\n    const result = await cb(ctx)\n    return { ...result, imageData: await createImageBitmap(canvas) }\n  }\n}\n","import React from 'react'\nimport {\n  isStateTreeNode,\n  Instance,\n  SnapshotIn,\n  IAnyStateTreeNode,\n  IStateTreeNode,\n  IType,\n} from 'mobx-state-tree'\nimport { AnyConfigurationModel } from '../../configuration/configurationSchema'\n\nimport assemblyManager from '../../assemblyManager'\nimport TextSearchManager from '../../TextSearch/TextSearchManager'\nimport { MenuItem } from '../../ui'\nimport {\n  NoAssemblyRegion as MUNoAssemblyRegion,\n  Region as MUIRegion,\n  LocalPathLocation as MULocalPathLocation,\n  UriLocation as MUUriLocation,\n  BlobLocation as MUBlobLocation,\n} from './mst'\nimport RpcManager from '../../rpc/RpcManager'\nimport { Feature } from '../simpleFeature'\nimport { BaseInternetAccountModel } from '../../pluggableElementTypes/models'\n\nexport * from './util'\n\n/** abstract type for a model that contains multiple views */\nexport interface AbstractViewContainer\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  extends IStateTreeNode<IType<any, unknown, any>> {\n  views: AbstractViewModel[]\n  removeView(view: AbstractViewModel): void\n  addView(\n    typeName: string,\n    initialState?: Record<string, unknown>,\n  ): AbstractViewModel\n}\nexport function isViewContainer(\n  thing: unknown,\n): thing is AbstractViewContainer {\n  return (\n    isStateTreeNode(thing) &&\n    'removeView' in thing &&\n    'addView' in thing &&\n    'views' in thing\n  )\n}\n\nexport type NotificationLevel = 'error' | 'info' | 'warning' | 'success'\nexport interface SnackAction {\n  name: string\n  onClick: () => void\n}\n\nexport type AssemblyManager = Instance<ReturnType<typeof assemblyManager>>\nexport type { TextSearchManager }\nexport interface BasePlugin {\n  version?: string\n  name: string\n  url?: string\n}\n\nexport interface JBrowsePlugin {\n  name: string\n  authors: string[]\n  description: string\n  location: string\n  url?: string\n  umdUrl?: string\n  esmUrl?: string\n  cjsUrl?: string\n  license: string\n  image?: string\n}\n\nexport type DialogComponentType =\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  | React.LazyExoticComponent<React.FC<any>>\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  | React.FC<any>\n\n/** minimum interface that all session state models must implement */\nexport interface AbstractSessionModel extends AbstractViewContainer {\n  drawerPosition?: string\n  setSelection(feature: Feature): void\n  clearSelection(): void\n  configuration: AnyConfigurationModel\n  rpcManager: RpcManager\n  assemblyNames: string[]\n  assemblies: AnyConfigurationModel[]\n  selection?: unknown\n  duplicateCurrentSession?(): void\n  notify(message: string, level?: NotificationLevel, action?: SnackAction): void\n  assemblyManager: AssemblyManager\n  version: string\n  getTrackActionMenuItems?: Function\n  addAssembly?: Function\n  removeAssembly?: Function\n  textSearchManager?: TextSearchManager\n  connections: AnyConfigurationModel[]\n  deleteConnection?: Function\n  sessionConnections?: AnyConfigurationModel[]\n  connectionInstances?: {\n    name: string\n    connectionId: string\n    tracks: AnyConfigurationModel[]\n  }[]\n  makeConnection?: Function\n  adminMode?: boolean\n  showWidget?: Function\n  addWidget?: Function\n\n  DialogComponent?: DialogComponentType\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  DialogProps: any\n  queueDialog<T extends DialogComponentType>(\n    callback: (doneCallback: () => void) => [T, React.ComponentProps<T>],\n  ): void\n  name: string\n  id?: string\n  tracks: AnyConfigurationModel[]\n}\nexport function isSessionModel(thing: unknown): thing is AbstractSessionModel {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'rpcManager' in thing &&\n    'configuration' in thing\n  )\n}\n\n/** abstract interface for a session allows editing configurations */\nexport interface SessionWithConfigEditing extends AbstractSessionModel {\n  editConfiguration(configuration: AnyConfigurationModel): void\n}\nexport function isSessionModelWithConfigEditing(\n  thing: unknown,\n): thing is SessionWithConfigEditing {\n  return isSessionModel(thing) && 'editConfiguration' in thing\n}\n\n/** abstract interface for a session allows adding tracks */\nexport interface SessionWithConfigEditing extends AbstractSessionModel {\n  addTrackConf(\n    configuration: AnyConfigurationModel | SnapshotIn<AnyConfigurationModel>,\n  ): void\n}\nexport function isSessionWithAddTracks(\n  thing: unknown,\n): thing is SessionWithConfigEditing {\n  return (\n    // @ts-ignore\n    isSessionModel(thing) && 'addTrackConf' in thing && !thing.disableAddTracks\n  )\n}\n\nexport interface Widget {\n  type: string\n  id: string\n}\n\n/** abstract interface for a session that manages widgets */\nexport interface SessionWithWidgets extends AbstractSessionModel {\n  minimized: boolean\n  visibleWidget?: Widget\n  widgets: Map<string, Widget>\n  activeWidgets: Map<string, Widget>\n  addWidget(\n    typeName: string,\n    id: string,\n    initialState?: Record<string, unknown>,\n    configuration?: { type: string },\n  ): Widget\n  showWidget(widget: unknown): void\n  hideWidget(widget: unknown): void\n}\n\n/* only some sessions with widgets use a drawer widget */\nexport interface SessionWithDrawerWidgets extends SessionWithWidgets {\n  drawerWidth: number\n  resizeDrawer(arg: number): number\n  minimizeWidgetDrawer(): void\n  showWidgetDrawer: () => void\n  drawerPosition: string\n  setDrawerPosition(arg: string): void\n}\n\nexport function isSessionModelWithWidgets(\n  thing: unknown,\n): thing is SessionWithWidgets {\n  return isSessionModel(thing) && 'widgets' in thing\n}\n\ninterface SessionWithConnections {\n  addConnectionConf: (arg: AnyConfigurationModel) => void\n}\n\nexport function isSessionModelWithConnections(\n  thing: unknown,\n): thing is SessionWithConnections {\n  return isSessionModel(thing) && 'addConnectionConf' in thing\n}\n\nexport interface SessionWithSessionPlugins extends AbstractSessionModel {\n  sessionPlugins: JBrowsePlugin[]\n  addSessionPlugin: Function\n  removeSessionPlugin: Function\n}\nexport function isSessionWithSessionPlugins(\n  thing: unknown,\n): thing is SessionWithSessionPlugins {\n  return isSessionModel(thing) && 'sessionPlugins' in thing\n}\n\n/** abstract interface for a session that manages a global selection */\nexport interface SelectionContainer extends AbstractSessionModel {\n  selection?: unknown\n  setSelection(thing: unknown): void\n}\nexport function isSelectionContainer(\n  thing: unknown,\n): thing is SelectionContainer {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'selection' in thing &&\n    'setSelection' in thing\n  )\n}\n\n/** minimum interface that all view state models must implement */\nexport interface AbstractViewModel {\n  id: string\n  type: string\n  width: number\n  minimized: boolean\n  setWidth(width: number): void\n  setMinimized(flag: boolean): void\n  displayName: string | undefined\n  setDisplayName: (arg: string) => void\n  menuItems: () => MenuItem[]\n}\nexport function isViewModel(thing: unknown): thing is AbstractViewModel {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'width' in thing &&\n    'setWidth' in thing\n  )\n}\n\nexport interface AbstractTrackModel {\n  displays: AbstractDisplayModel[]\n}\n\nexport function isTrackModel(thing: unknown): thing is AbstractTrackModel {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'configuration' in thing &&\n    // @ts-ignore\n    thing.configuration.trackId\n  )\n}\n\nexport interface AbstractDisplayModel {\n  id: string\n  parentTrack: AbstractTrackModel\n  renderDelay: number\n  rendererType: any // eslint-disable-line @typescript-eslint/no-explicit-any\n  cannotBeRenderedReason?: string\n}\nexport function isDisplayModel(thing: unknown): thing is AbstractDisplayModel {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'configuration' in thing &&\n    // @ts-ignore\n    thing.configuration.displayId\n  )\n}\n\nexport interface TrackViewModel extends AbstractViewModel {\n  showTrack(trackId: string): void\n  hideTrack(trackId: string): void\n}\nexport function isTrackViewModel(thing: unknown): thing is TrackViewModel {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'showTrack' in thing &&\n    'hideTrack' in thing\n  )\n}\n\n/** minimum interface for the root MST model of a JBrowse app */\nexport interface AbstractRootModel {\n  jbrowse: IAnyStateTreeNode\n  session?: AbstractSessionModel\n  setDefaultSession?(): void\n  adminMode?: boolean\n  error?: unknown\n}\n\n/** root model with more included for the heavier JBrowse web and desktop app */\nexport interface AppRootModel extends AbstractRootModel {\n  isAssemblyEditing: boolean\n  isDefaultSessionEditing: boolean\n  setAssemblyEditing: (arg: boolean) => boolean\n  setDefaultSessionEditing: (arg: boolean) => boolean\n  internetAccounts: BaseInternetAccountModel[]\n  findAppropriateInternetAccount(\n    location: UriLocation,\n  ): BaseInternetAccountModel | undefined\n}\n\nexport function isAppRootModel(thing: unknown): thing is AppRootModel {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'isAssemblyEditing' in thing &&\n    'findAppropriateInternetAccount' in thing\n  )\n}\n\nexport interface RootModelWithInternetAccounts extends AbstractRootModel {\n  internetAccounts: BaseInternetAccountModel[]\n  findAppropriateInternetAccount(\n    location: UriLocation,\n  ): BaseInternetAccountModel | undefined\n}\n\nexport function isRootModelWithInternetAccounts(\n  thing: unknown,\n): thing is RootModelWithInternetAccounts {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'internetAccounts' in thing &&\n    'findAppropriateInternetAccount' in thing\n  )\n}\n\n/** a root model that manages global menus */\nexport interface AbstractMenuManager {\n  appendMenu(menuName: string): void\n  insertMenu(menuName: string, position: number): number\n  insertInMenu(menuName: string, menuItem: MenuItem, position: number): number\n  appendToMenu(menuName: string, menuItem: MenuItem): number\n  appendToSubMenu(menuPath: string[], menuItem: MenuItem): number\n  insertInSubMenu(\n    menuPath: string[],\n    menuItem: MenuItem,\n    position: number,\n  ): number\n}\nexport function isAbstractMenuManager(\n  thing: unknown,\n): thing is AbstractMenuManager {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'appendMenu' in thing &&\n    'appendToSubMenu' in thing\n  )\n}\n\n// Empty interfaces required by mobx-state-tree\n// See https://mobx-state-tree.js.org/tips/typescript#using-a-mst-type-at-design-time\n/* eslint-disable @typescript-eslint/no-empty-interface */\n\nexport interface NoAssemblyRegion\n  extends SnapshotIn<typeof MUNoAssemblyRegion> {}\n\nexport interface Region extends SnapshotIn<typeof MUIRegion> {}\n\nexport interface AugmentedRegion extends Region {\n  originalRefName?: string\n}\n\nexport interface LocalPathLocation\n  extends SnapshotIn<typeof MULocalPathLocation> {}\n\nexport interface UriLocation extends SnapshotIn<typeof MUUriLocation> {}\n\nexport function isUriLocation(location: unknown): location is UriLocation {\n  return (\n    typeof location === 'object' &&\n    location !== null &&\n    'uri' in location &&\n    !!location.uri\n  )\n}\nexport class AuthNeededError extends Error {\n  constructor(public message: string, public url: string) {\n    super(message)\n    this.name = 'AuthNeededError'\n\n    Object.setPrototypeOf(this, AuthNeededError.prototype)\n  }\n}\n\nexport class RetryError extends Error {\n  constructor(public message: string, public internetAccountId: string) {\n    super(message)\n    this.name = 'RetryError'\n  }\n}\n\nexport function isAuthNeededException(\n  exception: unknown,\n): exception is AuthNeededError {\n  return (\n    exception instanceof Error &&\n    // DOMException\n    (exception.name === 'AuthNeededError' ||\n      (exception as AuthNeededError).url !== undefined)\n  )\n}\n\nexport function isRetryException(exception: Error): boolean {\n  return (\n    // DOMException\n    exception.name === 'RetryError' ||\n    (exception as RetryError).internetAccountId !== undefined\n  )\n}\n\nexport interface BlobLocation extends SnapshotIn<typeof MUBlobLocation> {}\n\nexport type FileLocation = LocalPathLocation | UriLocation | BlobLocation\n\n// These types are slightly different than the MST models representing a\n// location because a blob cannot be stored in a MST, so this is the\n// pre-processed file location\nexport type PreUriLocation = { uri: string }\nexport type PreLocalPathLocation = { localPath: string }\nexport type PreBlobLocation = { blob: File }\nexport type PreFileLocation =\n  | PreUriLocation\n  | PreLocalPathLocation\n  | PreBlobLocation\n","import {\n  isModelType,\n  isType,\n  types,\n  IAnyType,\n  IAnyModelType,\n} from 'mobx-state-tree'\n\n// Pluggable elements\nimport PluggableElementBase from './pluggableElementTypes/PluggableElementBase'\nimport RendererType from './pluggableElementTypes/renderers/RendererType'\nimport AdapterType from './pluggableElementTypes/AdapterType'\nimport TrackType from './pluggableElementTypes/TrackType'\nimport DisplayType from './pluggableElementTypes/DisplayType'\nimport ViewType from './pluggableElementTypes/ViewType'\nimport WidgetType from './pluggableElementTypes/WidgetType'\nimport ConnectionType from './pluggableElementTypes/ConnectionType'\nimport RpcMethodType from './pluggableElementTypes/RpcMethodType'\nimport InternetAccountType from './pluggableElementTypes/InternetAccountType'\nimport TextSearchAdapterType from './pluggableElementTypes/TextSearchAdapterType'\nimport AddTrackWorkflowType from './pluggableElementTypes/AddTrackWorkflowType'\n\nimport {\n  ConfigurationSchema,\n  isBareConfigurationSchemaType,\n} from './configuration'\n\nimport Plugin from './Plugin'\nimport ReExports from './ReExports'\n\nimport {\n  PluggableElementType,\n  PluggableElementMember,\n} from './pluggableElementTypes'\nimport { AbstractRootModel } from './util'\nimport CorePlugin from './CorePlugin'\nimport createJexlInstance from './util/jexl'\nimport { PluginDefinition } from './PluginLoader'\n\n/** little helper class that keeps groups of callbacks that are\nthen run in a specified order by group */\nclass PhasedScheduler<PhaseName extends string> {\n  phaseCallbacks = new Map<PhaseName, Function[]>()\n\n  phaseOrder: PhaseName[] = []\n\n  constructor(...phaseOrder: PhaseName[]) {\n    this.phaseOrder = phaseOrder\n  }\n\n  add(phase: PhaseName, callback: Function) {\n    if (!this.phaseOrder.includes(phase)) {\n      throw new Error(`unknown phase ${phase}`)\n    }\n    let phaseCallbacks = this.phaseCallbacks.get(phase)\n    if (!phaseCallbacks) {\n      phaseCallbacks = []\n      this.phaseCallbacks.set(phase, phaseCallbacks)\n    }\n    phaseCallbacks.push(callback)\n  }\n\n  run() {\n    this.phaseOrder.forEach(phaseName => {\n      this.phaseCallbacks.get(phaseName)?.forEach(callback => callback())\n    })\n  }\n}\n\ntype PluggableElementTypeGroup =\n  | 'renderer'\n  | 'adapter'\n  | 'display'\n  | 'track'\n  | 'connection'\n  | 'view'\n  | 'widget'\n  | 'rpc method'\n  | 'internet account'\n  | 'text search adapter'\n  | 'add track workflow'\n\n/** internal class that holds the info for a certain element type */\nclass TypeRecord<ElementClass extends PluggableElementBase> {\n  registeredTypes: { [name: string]: ElementClass } = {}\n\n  constructor(\n    public typeName: string,\n    public baseClass: // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    | { new (...args: any[]): ElementClass }\n      // covers abstract class case\n      | (Function & {\n          prototype: ElementClass\n        }),\n  ) {}\n\n  add(name: string, t: ElementClass) {\n    this.registeredTypes[name] = t\n  }\n\n  has(name: string) {\n    return name in this.registeredTypes\n  }\n\n  get(name: string) {\n    if (!this.has(name)) {\n      throw new Error(\n        `${this.typeName} '${name}' not found, perhaps its plugin is not loaded or its plugin has not added it.`,\n      )\n    }\n    return this.registeredTypes[name]\n  }\n\n  all() {\n    return Object.values(this.registeredTypes)\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype AnyFunction = (...args: any) => any\n\n/**\n * free-form string-to-unknown mapping of metadata related to the instance\n * of this plugin. `isCore` is typically set to `Boolean(true)` if the plugin was\n * loaded as part of the \"core\" set of plugins for this application.\n * Can also use this metadata to stash other things about why the plugin is\n * loaded, such as where it came from, what plugin depends on it, etc.\n */\nexport type PluginMetadata = Record<string, unknown>\n\nexport interface PluginLoadRecord {\n  metadata?: PluginMetadata\n  plugin: Plugin\n}\nexport interface RuntimePluginLoadRecord extends PluginLoadRecord {\n  definition: PluginDefinition\n}\n\nexport default class PluginManager {\n  plugins: Plugin[] = []\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  jexl: any = createJexlInstance()\n\n  pluginMetadata: Record<string, PluginMetadata> = {}\n\n  runtimePluginDefinitions: PluginDefinition[] = []\n\n  elementCreationSchedule = new PhasedScheduler<PluggableElementTypeGroup>(\n    'renderer',\n    'adapter',\n    'text search adapter',\n    'display',\n    'track',\n    'connection',\n    'view',\n    'widget',\n    'rpc method',\n    'internet account',\n    'add track workflow',\n  ) as PhasedScheduler<PluggableElementTypeGroup> | undefined\n\n  rendererTypes = new TypeRecord('RendererType', RendererType)\n\n  adapterTypes = new TypeRecord('AdapterType', AdapterType)\n\n  textSearchAdapterTypes = new TypeRecord(\n    'TextSearchAdapterType',\n    TextSearchAdapterType,\n  )\n\n  trackTypes = new TypeRecord('TrackType', TrackType)\n\n  displayTypes = new TypeRecord('DisplayType', DisplayType)\n\n  connectionTypes = new TypeRecord('ConnectionType', ConnectionType)\n\n  viewTypes = new TypeRecord('ViewType', ViewType)\n\n  widgetTypes = new TypeRecord('WidgetType', WidgetType)\n\n  rpcMethods = new TypeRecord('RpcMethodType', RpcMethodType)\n\n  addTrackWidgets = new TypeRecord('AddTrackWorkflow', AddTrackWorkflowType)\n\n  internetAccountTypes = new TypeRecord(\n    'InternetAccountType',\n    InternetAccountType,\n  )\n\n  configured = false\n\n  rootModel?: AbstractRootModel\n\n  extensionPoints: Map<string, Function[]> = new Map()\n\n  constructor(initialPlugins: (Plugin | PluginLoadRecord)[] = []) {\n    // add the core plugin\n    this.addPlugin({ plugin: new CorePlugin(), metadata: { isCore: true } })\n\n    // add all the initial plugins\n    initialPlugins.forEach(plugin => {\n      this.addPlugin(plugin)\n    })\n  }\n\n  pluginConfigurationSchemas() {\n    const configurationSchemas: { [key: string]: unknown } = {}\n    this.plugins.forEach(plugin => {\n      if (plugin.configurationSchema) {\n        configurationSchemas[plugin.name] = plugin.configurationSchema\n      }\n    })\n    return configurationSchemas\n  }\n\n  addPlugin(load: Plugin | PluginLoadRecord | RuntimePluginLoadRecord) {\n    if (this.configured) {\n      throw new Error('JBrowse already configured, cannot add plugins')\n    }\n\n    // check for availability of 'install' and 'configure' as a proxy for being\n    // an 'instanceof Plugin'\n    const [plugin, metadata = {}] =\n      'install' in load && 'configure' in load\n        ? [load, {}]\n        : [load.plugin, load.metadata]\n\n    if (this.plugins.includes(plugin)) {\n      throw new Error('plugin already installed')\n    }\n\n    this.pluginMetadata[plugin.name] = metadata\n    if ('definition' in load) {\n      // @ts-ignore\n      this.runtimePluginDefinitions.push(load.definition as PluginDefinition)\n    }\n    plugin.install(this)\n    this.plugins.push(plugin)\n    return this\n  }\n\n  getPlugin(name: string) {\n    return this.plugins.find(p => p.name === name)\n  }\n\n  hasPlugin(name: string) {\n    return this.getPlugin(name) !== undefined\n  }\n\n  createPluggableElements() {\n    // run the creation callbacks for each element type in order.\n    // see elementCreationSchedule above for the creation order\n    if (this.elementCreationSchedule) {\n      this.elementCreationSchedule.run()\n      delete this.elementCreationSchedule\n    }\n    return this\n  }\n\n  setRootModel(rootModel: AbstractRootModel) {\n    this.rootModel = rootModel\n  }\n\n  configure() {\n    if (this.configured) {\n      throw new Error('already configured')\n    }\n\n    this.plugins.forEach(plugin => plugin.configure(this))\n\n    this.configured = true\n\n    return this\n  }\n\n  getElementTypeRecord(\n    groupName: PluggableElementTypeGroup,\n  ): TypeRecord<PluggableElementBase> {\n    switch (groupName) {\n      case 'adapter':\n        return this.adapterTypes\n      case 'text search adapter':\n        return this.textSearchAdapterTypes\n      case 'connection':\n        return this.connectionTypes\n      case 'widget':\n        return this.widgetTypes\n      case 'renderer':\n        return this.rendererTypes\n      case 'display':\n        return this.displayTypes\n      case 'track':\n        return this.trackTypes\n      case 'view':\n        return this.viewTypes\n      case 'rpc method':\n        return this.rpcMethods\n      case 'internet account':\n        return this.internetAccountTypes\n      case 'add track workflow':\n        return this.addTrackWidgets\n      default:\n        throw new Error(`invalid element type '${groupName}'`)\n    }\n  }\n\n  addElementType(\n    groupName: PluggableElementTypeGroup,\n    creationCallback: (pluginManager: PluginManager) => PluggableElementType,\n  ) {\n    if (typeof creationCallback !== 'function') {\n      throw new Error(\n        'must provide a callback function that returns the new type object',\n      )\n    }\n    const typeRecord = this.getElementTypeRecord(groupName)\n\n    this.elementCreationSchedule?.add(groupName, () => {\n      const newElement = creationCallback(this)\n      if (!newElement.name) {\n        throw new Error(`cannot add a ${groupName} with no name`)\n      }\n\n      if (typeRecord.has(newElement.name)) {\n        throw new Error(\n          `${groupName} ${newElement.name} already registered, cannot register it again`,\n        )\n      }\n\n      typeRecord.add(\n        newElement.name,\n        this.evaluateExtensionPoint(\n          'Core-extendPluggableElement',\n          newElement,\n        ) as PluggableElementType,\n      )\n    })\n\n    return this\n  }\n\n  getElementType(groupName: PluggableElementTypeGroup, typeName: string) {\n    return this.getElementTypeRecord(groupName).get(typeName)\n  }\n\n  getElementTypesInGroup(groupName: PluggableElementTypeGroup) {\n    return this.getElementTypeRecord(groupName).all()\n  }\n\n  getTrackElements() {\n    return this.getElementTypesInGroup('track') as TrackType[]\n  }\n\n  getAddTrackWorkflowElements() {\n    return this.getElementTypesInGroup(\n      'add track workflow',\n    ) as AddTrackWorkflowType[]\n  }\n\n  getRpcElements() {\n    return this.getElementTypesInGroup('rpc method') as RpcMethodType[]\n  }\n\n  getDisplayElements() {\n    return this.getElementTypesInGroup('display') as DisplayType[]\n  }\n\n  getAdapterElements() {\n    return this.getElementTypesInGroup('adapter') as AdapterType[]\n  }\n\n  /** get a MST type for the union of all specified pluggable MST types */\n  pluggableMstType(\n    groupName: PluggableElementTypeGroup,\n    fieldName: PluggableElementMember,\n    fallback: IAnyType = types.maybe(types.null),\n  ) {\n    const pluggableTypes = this.getElementTypeRecord(groupName)\n      .all()\n      // @ts-ignore\n      .map(t => t[fieldName])\n      .filter(t => isType(t) && isModelType(t)) as IAnyType[]\n\n    // try to smooth over the case when no types are registered, mostly\n    // encountered in tests\n    if (pluggableTypes.length === 0 && typeof jest === 'undefined') {\n      console.warn(\n        `No pluggable types found matching ('${groupName}','${fieldName}')`,\n      )\n      return fallback\n    }\n    return types.union(...pluggableTypes)\n  }\n\n  /** get a MST type for the union of all specified pluggable config schemas */\n  pluggableConfigSchemaType(\n    typeGroup: PluggableElementTypeGroup,\n    fieldName: PluggableElementMember = 'configSchema',\n  ) {\n    const pluggableTypes = this.getElementTypeRecord(typeGroup)\n      .all()\n      // @ts-ignore\n      .map(t => t[fieldName])\n      .filter(t => isBareConfigurationSchemaType(t)) as IAnyType[]\n\n    if (pluggableTypes.length === 0) {\n      pluggableTypes.push(ConfigurationSchema('Null', {}))\n    }\n    return types.union(...pluggableTypes) as IAnyModelType\n  }\n\n  jbrequireCache = new Map()\n\n  lib = ReExports\n\n  load = <FTYPE extends AnyFunction>(lib: FTYPE): ReturnType<FTYPE> => {\n    if (!this.jbrequireCache.has(lib)) {\n      this.jbrequireCache.set(lib, lib(this))\n    }\n    return this.jbrequireCache.get(lib)\n  }\n\n  /**\n   * Get the re-exported version of the given package name.\n   * Throws an error if the package is not re-exported by the plugin manager.\n   *\n   * @returns the library's default export\n   */\n  jbrequire = (\n    lib: keyof typeof ReExports | AnyFunction | { default: AnyFunction },\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ): any => {\n    if (typeof lib === 'string') {\n      const pack = this.lib[lib]\n      if (!pack) {\n        throw new TypeError(\n          `No jbrequire re-export defined for package '${lib}'. If this package must be shared between plugins, add it to ReExports.js. If it does not need to be shared, just import it normally.`,\n        )\n      }\n      return pack\n    }\n\n    if (typeof lib === 'function') {\n      return this.load(lib)\n    }\n\n    if (lib.default) {\n      return this.jbrequire(lib.default)\n    }\n\n    throw new TypeError(\n      'lib passed to jbrequire must be either a string or a function',\n    )\n  }\n\n  getRendererType(typeName: string): RendererType {\n    return this.rendererTypes.get(typeName)\n  }\n\n  getRendererTypes(): RendererType[] {\n    return this.rendererTypes.all()\n  }\n\n  getAdapterType(typeName: string): AdapterType {\n    return this.adapterTypes.get(typeName)\n  }\n\n  getTextSearchAdapterType(typeName: string): TextSearchAdapterType {\n    return this.textSearchAdapterTypes.get(typeName)\n  }\n\n  getTrackType(typeName: string): TrackType {\n    return this.trackTypes.get(typeName)\n  }\n\n  getDisplayType(typeName: string): DisplayType {\n    return this.displayTypes.get(typeName)\n  }\n\n  getViewType(typeName: string): ViewType {\n    return this.viewTypes.get(typeName)\n  }\n\n  getAddTrackWorkflow(typeName: string): AddTrackWorkflowType {\n    return this.addTrackWidgets.get(typeName)\n  }\n\n  getWidgetType(typeName: string): WidgetType {\n    return this.widgetTypes.get(typeName)\n  }\n\n  getConnectionType(typeName: string): ConnectionType {\n    return this.connectionTypes.get(typeName)\n  }\n\n  getRpcMethodType(methodName: string): RpcMethodType {\n    return this.rpcMethods.get(methodName)\n  }\n\n  getInternetAccountType(name: string): InternetAccountType {\n    return this.internetAccountTypes.get(name)\n  }\n\n  addRendererType(cb: (pm: PluginManager) => RendererType) {\n    return this.addElementType('renderer', cb)\n  }\n\n  addAdapterType(cb: (pm: PluginManager) => AdapterType) {\n    return this.addElementType('adapter', cb)\n  }\n\n  addTextSearchAdapterType(cb: (pm: PluginManager) => TextSearchAdapterType) {\n    return this.addElementType('text search adapter', cb)\n  }\n\n  addTrackType(cb: (pm: PluginManager) => TrackType) {\n    // Goes through the already-created displays and registers the ones that\n    // specify this track type\n    const callback = () => {\n      const track = cb(this)\n      const displays = this.getElementTypesInGroup('display') as DisplayType[]\n      displays.forEach(display => {\n        // track may have already added the displayType in its cb\n        if (\n          display.trackType === track.name &&\n          !track.displayTypes.includes(display)\n        ) {\n          track.addDisplayType(display)\n        }\n      })\n      return track\n    }\n    return this.addElementType('track', callback)\n  }\n\n  addDisplayType(cb: (pluginManager: PluginManager) => DisplayType) {\n    return this.addElementType('display', cb)\n  }\n\n  addViewType(cb: (pluginManager: PluginManager) => ViewType) {\n    const callback = () => {\n      const newView = cb(this)\n      const displays = this.getElementTypesInGroup('display') as DisplayType[]\n      displays.forEach(display => {\n        // view may have already added the displayType in its callback\n        // see ViewType for description of extendedName\n        if (\n          (display.viewType === newView.name ||\n            display.viewType === newView.extendedName) &&\n          !newView.displayTypes.includes(display)\n        ) {\n          newView.addDisplayType(display)\n        }\n      })\n      return newView\n    }\n    return this.addElementType('view', callback)\n  }\n\n  addWidgetType(cb: (pm: PluginManager) => WidgetType) {\n    return this.addElementType('widget', cb)\n  }\n\n  addConnectionType(cb: (pm: PluginManager) => ConnectionType) {\n    return this.addElementType('connection', cb)\n  }\n\n  addRpcMethod(cb: (pm: PluginManager) => RpcMethodType) {\n    return this.addElementType('rpc method', cb)\n  }\n\n  addInternetAccountType(cb: (pm: PluginManager) => InternetAccountType) {\n    return this.addElementType('internet account', cb)\n  }\n\n  addAddTrackWorkflowType(cb: (pm: PluginManager) => AddTrackWorkflowType) {\n    return this.addElementType('add track workflow', cb)\n  }\n\n  addToExtensionPoint<T>(\n    extensionPointName: string,\n    callback: (extendee: T, props: Record<string, unknown>) => T,\n  ) {\n    let callbacks = this.extensionPoints.get(extensionPointName)\n    if (!callbacks) {\n      callbacks = []\n      this.extensionPoints.set(extensionPointName, callbacks)\n    }\n    callbacks.push(callback)\n  }\n\n  evaluateExtensionPoint(\n    extensionPointName: string,\n    extendee: unknown,\n    props?: Record<string, unknown>,\n  ) {\n    const callbacks = this.extensionPoints.get(extensionPointName)\n    let accumulator = extendee\n    if (callbacks) {\n      for (const callback of callbacks) {\n        try {\n          accumulator = callback(accumulator, props)\n        } catch (error) {\n          console.error(error)\n        }\n      }\n    }\n    return accumulator\n  }\n\n  async evaluateAsyncExtensionPoint(\n    extensionPointName: string,\n    extendee: unknown,\n    props?: Record<string, unknown>,\n  ) {\n    const callbacks = this.extensionPoints.get(extensionPointName)\n    let accumulator = extendee\n    if (callbacks) {\n      for (const callback of callbacks) {\n        try {\n          accumulator = await callback(accumulator, props)\n        } catch (error) {\n          console.error(error)\n        }\n      }\n    }\n    return accumulator\n  }\n}\n","import domLoadScript from 'load-script2'\n\n// locals\nimport Plugin, { PluginConstructor } from './Plugin'\nimport ReExports from './ReExports'\nimport { isElectron } from './util'\n\nexport interface UMDLocPluginDefinition {\n  umdLoc: {\n    uri: string\n    baseUri?: string\n  }\n  name: string\n}\n\nexport interface UMDUrlPluginDefinition {\n  umdUrl: string\n  name: string\n}\n\nexport interface LegacyUMDPluginDefinition {\n  url: string\n  name: string\n}\n\ntype UMDPluginDefinition = UMDLocPluginDefinition | UMDUrlPluginDefinition\n\nexport function isUMDPluginDefinition(\n  def: PluginDefinition,\n): def is UMDPluginDefinition | LegacyUMDPluginDefinition {\n  return (\n    ((def as UMDUrlPluginDefinition).umdUrl !== undefined ||\n      (def as LegacyUMDPluginDefinition).url !== undefined ||\n      (def as UMDLocPluginDefinition).umdLoc !== undefined) &&\n    (def as LegacyUMDPluginDefinition | UMDPluginDefinition).name !== undefined\n  )\n}\n\nexport interface ESMLocPluginDefinition {\n  esmLoc: { uri: string; baseUri?: string }\n}\nexport interface ESMUrlPluginDefinition {\n  esmUrl: string\n}\n\nexport type ESMPluginDefinition =\n  | ESMLocPluginDefinition\n  | ESMUrlPluginDefinition\n\nexport function isESMPluginDefinition(\n  def: PluginDefinition,\n): def is ESMPluginDefinition {\n  return (\n    (def as ESMUrlPluginDefinition).esmUrl !== undefined ||\n    (def as ESMLocPluginDefinition).esmLoc !== undefined\n  )\n}\n\nexport interface CJSPluginDefinition {\n  cjsUrl: string\n}\n\nexport function isCJSPluginDefinition(\n  def: PluginDefinition,\n): def is CJSPluginDefinition {\n  return (def as CJSPluginDefinition).cjsUrl !== undefined\n}\n\nexport interface PluginDefinition\n  extends Partial<UMDUrlPluginDefinition>,\n    Partial<UMDLocPluginDefinition>,\n    Partial<LegacyUMDPluginDefinition>,\n    Partial<ESMLocPluginDefinition>,\n    Partial<ESMUrlPluginDefinition>,\n    Partial<CJSPluginDefinition> {}\n\nexport interface PluginRecord {\n  plugin: PluginConstructor\n  definition: PluginDefinition\n}\n\nexport interface LoadedPlugin {\n  default: PluginConstructor\n}\n\nfunction getGlobalObject(): Window {\n  // Based on window-or-global\n  // https://github.com/purposeindustries/window-or-global/blob/322abc71de0010c9e5d9d0729df40959e1ef8775/lib/index.js\n  return (\n    // eslint-disable-next-line no-restricted-globals\n    (typeof self === 'object' && self.self === self && self) ||\n    (typeof global === 'object' && global.global === global && global) ||\n    // @ts-ignore\n    this\n  )\n}\n\nfunction isInWebWorker(globalObject: ReturnType<typeof getGlobalObject>) {\n  return Boolean('WorkerGlobalScope' in globalObject)\n}\n\nexport default class PluginLoader {\n  definitions: PluginDefinition[] = []\n\n  fetchESM?: (url: string) => Promise<LoadedPlugin>\n  fetchCJS?: (url: string) => Promise<LoadedPlugin>\n\n  constructor(\n    defs: PluginDefinition[] = [],\n    args?: {\n      fetchESM?: (url: string) => Promise<LoadedPlugin>\n      fetchCJS?: (url: string) => Promise<LoadedPlugin>\n    },\n  ) {\n    this.fetchESM = args?.fetchESM\n    this.fetchCJS = args?.fetchCJS\n    this.definitions = JSON.parse(JSON.stringify(defs))\n  }\n\n  async loadScript(scriptUrl: string) {\n    const globalObject = getGlobalObject()\n    if (!isInWebWorker(globalObject)) {\n      return domLoadScript(scriptUrl)\n    }\n\n    // @ts-ignore\n    if (globalObject?.importScripts) {\n      // @ts-ignore\n      await globalObject.importScripts(scriptUrl)\n      return\n    }\n    throw new Error(\n      'cannot figure out how to load external JS scripts in this environment',\n    )\n  }\n\n  async loadCJSPlugin(def: CJSPluginDefinition, baseUri?: string) {\n    const parsedUrl = new URL(def.cjsUrl, baseUri)\n    if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {\n      throw new Error(\n        `Cannot load plugins using protocol \"${parsedUrl.protocol}\"`,\n      )\n    }\n    if (!this.fetchCJS) {\n      throw new Error('No fetchCJS callback provided')\n    }\n\n    return this.fetchCJS(parsedUrl.href)\n  }\n\n  async loadESMPlugin(def: ESMPluginDefinition, baseUri?: string) {\n    const parsedUrl =\n      'esmUrl' in def\n        ? new URL(def.esmUrl, baseUri)\n        : new URL(def.esmLoc.uri, def.esmLoc.baseUri)\n\n    if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {\n      throw new Error(\n        `cannot load plugins using protocol \"${parsedUrl.protocol}\"`,\n      )\n    }\n\n    if (!this.fetchESM) {\n      throw new Error(`No ESM fetcher installed`)\n    }\n    const plugin = await this.fetchESM(parsedUrl.href)\n\n    if (!plugin) {\n      throw new Error(`Could not load ESM plugin: ${parsedUrl}`)\n    }\n    return plugin\n  }\n\n  async loadUMDPlugin(\n    def: UMDPluginDefinition | LegacyUMDPluginDefinition,\n    baseUri?: string,\n  ) {\n    const parsedUrl =\n      'url' in def\n        ? new URL(def.url, baseUri)\n        : 'umdUrl' in def\n        ? new URL(def.umdUrl, baseUri)\n        : new URL(def.umdLoc.uri, def.umdLoc.baseUri)\n\n    if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {\n      throw new Error(\n        `cannot load plugins using protocol \"${parsedUrl.protocol}\"`,\n      )\n    }\n    const globalObject = getGlobalObject()\n    const moduleName = def.name\n    const umdName = `JBrowsePlugin${moduleName}`\n    if (typeof jest !== 'undefined') {\n      // @ts-ignore\n      globalObject[umdName] = { default: Plugin }\n    } else {\n      await this.loadScript(parsedUrl.href)\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const plugin = (globalObject as any)[umdName] as\n      | { default: PluginConstructor }\n      | undefined\n    if (!plugin) {\n      throw new Error(\n        `Failed to load UMD bundle for ${moduleName}, ${globalObject.constructor.name}.${umdName} is undefined`,\n      )\n    }\n    return plugin\n  }\n\n  async loadPlugin(def: PluginDefinition, baseUri?: string) {\n    let plugin: LoadedPlugin\n    if (isElectron && isCJSPluginDefinition(def)) {\n      plugin = await this.loadCJSPlugin(def, baseUri)\n    } else if (isESMPluginDefinition(def)) {\n      plugin = await this.loadESMPlugin(def, baseUri)\n    } else if (isUMDPluginDefinition(def)) {\n      plugin = await this.loadUMDPlugin(def, baseUri)\n    } else if (!isElectron && isCJSPluginDefinition(def)) {\n      throw new Error(\n        `CommonJS plugin found, but not in a NodeJS environment: ${JSON.stringify(\n          def,\n        )}`,\n      )\n    } else {\n      throw new Error(`Could not determine plugin type: ${JSON.stringify(def)}`)\n    }\n    return plugin.default\n  }\n\n  installGlobalReExports(target: WindowOrWorkerGlobalScope) {\n    // @ts-ignore\n    target.JBrowseExports = Object.fromEntries(\n      Object.entries(ReExports).map(([moduleName, module]) => {\n        return [moduleName, module]\n      }),\n    )\n  }\n\n  async load(baseUri?: string) {\n    return Promise.all(\n      this.definitions.map(async definition => ({\n        plugin: await this.loadPlugin(definition, baseUri),\n        definition,\n      })),\n    )\n  }\n}\n","import { lazy } from 'react'\nimport Plugin from '@jbrowse/core/Plugin'\nimport PluginManager from '@jbrowse/core/PluginManager'\nimport UCSCTrackHubConnectionF from './ucsc-trackhub'\nimport AddTrackWidgetF from './AddTrackWidget'\nimport { AddTrackModel } from './AddTrackWidget/model'\nimport AddConnectionWidgetF from './AddConnectionWidget'\nimport PluginStoreWidgetF from './PluginStoreWidget'\nimport HierarchicalTrackSelectorWidgetF, {\n  HierarchicalTrackSelectorModel,\n} from './HierarchicalTrackSelectorWidget'\n\nconst SetDefaultSession = lazy(() => import('./SetDefaultSession'))\n\nconst AssemblyManager = lazy(() => import('./AssemblyManager'))\n\nexport default class extends Plugin {\n  name = 'DataManagementPlugin'\n\n  exports = {\n    AssemblyManager,\n    SetDefaultSession,\n  }\n\n  install(pluginManager: PluginManager) {\n    UCSCTrackHubConnectionF(pluginManager)\n    AddTrackWidgetF(pluginManager)\n    HierarchicalTrackSelectorWidgetF(pluginManager)\n    AddConnectionWidgetF(pluginManager)\n    PluginStoreWidgetF(pluginManager)\n  }\n\n  configure(_pluginManager: PluginManager) {}\n}\n\nexport { AssemblyManager, SetDefaultSession }\nexport type { HierarchicalTrackSelectorModel, AddTrackModel }\n","import Alignments from '@jbrowse/plugin-alignments'\nimport Authentication from '@jbrowse/plugin-authentication'\nimport Bed from '@jbrowse/plugin-bed'\nimport BreakpointSplitView from '@jbrowse/plugin-breakpoint-split-view'\nimport CircularView from '@jbrowse/plugin-circular-view'\nimport Config from '@jbrowse/plugin-config'\nimport ComparativeAdapters from '@jbrowse/plugin-comparative-adapters'\nimport DataManagement from '@jbrowse/plugin-data-management'\nimport DotplotView from '@jbrowse/plugin-dotplot-view'\nimport GtfPlugin from '@jbrowse/plugin-gtf'\nimport Gff3 from '@jbrowse/plugin-gff3'\nimport LegacyJBrowse from '@jbrowse/plugin-legacy-jbrowse'\nimport LinearGenomeView from '@jbrowse/plugin-linear-genome-view'\nimport LinearComparativeView from '@jbrowse/plugin-linear-comparative-view'\nimport Lollipop from '@jbrowse/plugin-lollipop'\nimport Arc from '@jbrowse/plugin-arc'\nimport Menus from '@jbrowse/plugin-menus'\nimport RDF from '@jbrowse/plugin-rdf'\nimport Sequence from '@jbrowse/plugin-sequence'\nimport SVG from '@jbrowse/plugin-svg'\nimport Variants from '@jbrowse/plugin-variants'\nimport Wiggle from '@jbrowse/plugin-wiggle'\nimport GCContent from '@jbrowse/plugin-gccontent'\nimport SpreadsheetViewPlugin from '@jbrowse/plugin-spreadsheet-view'\nimport SvInspectorPlugin from '@jbrowse/plugin-sv-inspector'\nimport HicPlugin from '@jbrowse/plugin-hic'\nimport TrixPlugin from '@jbrowse/plugin-trix'\nimport GridBookmarkPlugin from '@jbrowse/plugin-grid-bookmark'\n\nconst corePlugins = [\n  SVG,\n  LinearGenomeView,\n  Alignments,\n  Authentication,\n  Bed,\n  CircularView,\n  Config,\n  DataManagement,\n  DotplotView,\n  GtfPlugin,\n  Gff3,\n  LegacyJBrowse,\n  LinearComparativeView,\n  Lollipop,\n  Arc,\n  Menus,\n  RDF,\n  Sequence,\n  Variants,\n  Wiggle,\n  GCContent,\n  SpreadsheetViewPlugin,\n  SvInspectorPlugin,\n  BreakpointSplitView,\n  HicPlugin,\n  TrixPlugin,\n  GridBookmarkPlugin,\n  ComparativeAdapters,\n]\n\nexport default corePlugins\n","/* eslint-disable no-restricted-globals */\nimport './workerPolyfill'\n\n// @ts-ignore\nimport RpcServer from 'librpc-web-mod'\nimport { enableStaticRendering } from 'mobx-react'\n\nimport PluginManager from '@jbrowse/core/PluginManager'\nimport { remoteAbortRpcHandler } from '@jbrowse/core/rpc/remoteAbortSignals'\nimport PluginLoader, { PluginDefinition } from '@jbrowse/core/PluginLoader'\nimport { serializeError } from 'serialize-error'\n\n// locals\nimport corePlugins from './corePlugins'\n\n// static rendering is used for \"SSR\" style rendering which is done on the\n// worker\nenableStaticRendering(true)\n\ninterface WorkerConfiguration {\n  plugins: PluginDefinition[]\n  windowHref: string\n}\n\n// waits for a message from the main thread containing our configuration, which\n// must be sent on boot\nfunction receiveConfiguration() {\n  const configurationP: Promise<WorkerConfiguration> = new Promise(resolve => {\n    function listener(event: MessageEvent) {\n      if (event.data.message === 'config') {\n        resolve(event.data.config as WorkerConfiguration)\n        removeEventListener('message', listener)\n      }\n    }\n    self.addEventListener('message', listener)\n  })\n  postMessage({ message: 'readyForConfig' })\n  return configurationP\n}\n\nasync function getPluginManager() {\n  // Load runtime plugins\n  const config = await receiveConfiguration()\n  const pluginLoader = new PluginLoader(config.plugins, {\n    fetchESM: url => import(/* webpackIgnore:true */ url),\n  })\n  pluginLoader.installGlobalReExports(self)\n  const runtimePlugins = await pluginLoader.load(config.windowHref)\n  const plugins = [...corePlugins.map(p => ({ plugin: p })), ...runtimePlugins]\n  const pluginManager = new PluginManager(plugins.map(P => new P.plugin()))\n  pluginManager.createPluggableElements()\n  pluginManager.configure()\n\n  return pluginManager\n}\n\ninterface WrappedFuncArgs {\n  rpcDriverClassName: string\n  channel: string\n  [key: string]: unknown\n}\n\ntype RpcFunc = (args: unknown, rpcDriverClassName: string) => unknown\n\nfunction wrapForRpc(func: RpcFunc) {\n  return (args: WrappedFuncArgs) => {\n    const { channel, rpcDriverClassName } = args\n    return func(\n      {\n        ...args,\n        statusCallback: (message: string) => {\n          // @ts-ignore\n          self.rpcServer.emit(channel, message)\n        },\n      },\n      rpcDriverClassName,\n    )\n  }\n}\n\ngetPluginManager()\n  .then(pluginManager => {\n    const rpcConfig = Object.fromEntries(\n      pluginManager\n        .getRpcElements()\n        .map(entry => [entry.name, wrapForRpc(entry.execute.bind(entry))]),\n    )\n\n    // @ts-ignore\n    self.rpcServer = new RpcServer.Server({\n      ...rpcConfig,\n      ...remoteAbortRpcHandler(),\n      ping: () => {\n        // the ping method is required by the worker driver for checking the\n        // health of the worker\n      },\n    })\n    postMessage({ message: 'ready' })\n  })\n  .catch(error => {\n    postMessage({ message: 'error', error: serializeError(error) })\n  })\n\nexport default () => {\n  /* do nothing */\n}\n","/* eslint-disable no-restricted-globals */\n\n// this is a little polyfill for running in workers that\n// contains just enough stubbing to make webpack style-loader\n// think that it is actually inserting styles into the DOM\n\nself.window = {\n  addEventListener() {},\n  fetch: self.fetch.bind(self),\n  location: self.location,\n  Date: self.Date,\n  requestIdleCallback: cb => cb(),\n  cancelIdleCallback: () => {},\n  requestAnimationFrame: cb => cb(),\n  cancelAnimationFrame: () => {},\n  navigator: {},\n}\nself.document = {\n  createTextNode() {},\n  querySelector() {\n    return { appendChild() {} }\n  },\n  documentElement: {},\n  querySelectorAll: () => [],\n  createElement() {\n    return {\n      style: {},\n      setAttribute() {},\n      removeAttribute() {},\n      appendChild() {},\n    }\n  },\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = function() {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [4684,7852,6189], function() { return __webpack_require__(25986); })\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + {\"138\":\"789fe39f\",\"140\":\"6d7ec763\",\"157\":\"94b8e92f\",\"264\":\"d423fe09\",\"286\":\"46040287\",\"298\":\"5749a91f\",\"309\":\"19fdde4d\",\"362\":\"3ebbb9fd\",\"389\":\"341f25ff\",\"397\":\"4b770406\",\"409\":\"335f229b\",\"444\":\"b6e0ed27\",\"477\":\"dc6b1fd6\",\"500\":\"34c440ee\",\"506\":\"4ba203de\",\"508\":\"3d677587\",\"534\":\"3d885589\",\"542\":\"d3932adc\",\"551\":\"1eb8a3b3\",\"588\":\"2557319a\",\"590\":\"975afdc2\",\"601\":\"06f4cdbf\",\"644\":\"04644cda\",\"674\":\"715a8f8e\",\"683\":\"37126fa7\",\"705\":\"2a75de09\",\"730\":\"db9bcd98\",\"742\":\"176a6533\",\"764\":\"949b3a07\",\"791\":\"2acef896\",\"829\":\"12345e36\",\"842\":\"cf325089\",\"869\":\"7404ffb8\",\"870\":\"861a4d82\",\"902\":\"ecdd88c2\",\"930\":\"df751369\",\"952\":\"68eb4d7e\",\"1021\":\"7a5df29c\",\"1032\":\"8f019981\",\"1132\":\"e94055c4\",\"1145\":\"ce690b69\",\"1153\":\"f08482cf\",\"1174\":\"31939e06\",\"1241\":\"9d880226\",\"1280\":\"c1d9f4fe\",\"1335\":\"be7115e6\",\"1336\":\"78137ecc\",\"1343\":\"29a58eee\",\"1463\":\"04ef2ddd\",\"1658\":\"e500983a\",\"1770\":\"650c2aa4\",\"1784\":\"f8ae865a\",\"1916\":\"467a84bd\",\"1960\":\"c79d780a\",\"1988\":\"44a5ef28\",\"2018\":\"c4171ff4\",\"2094\":\"8a651a46\",\"2110\":\"c9119d40\",\"2142\":\"b0bd9eaf\",\"2158\":\"3309d70d\",\"2209\":\"5fe26828\",\"2235\":\"b8712150\",\"2243\":\"75f98036\",\"2287\":\"f8c73729\",\"2299\":\"dab23141\",\"2311\":\"5d66b8ed\",\"2361\":\"e059ff5a\",\"2386\":\"501cdeb1\",\"2501\":\"f4904692\",\"2515\":\"34928720\",\"2530\":\"3a759a18\",\"2598\":\"778ade28\",\"2693\":\"c4e8c0ae\",\"2741\":\"781e8c60\",\"2761\":\"f9b7fad4\",\"2792\":\"317b4f1a\",\"2800\":\"21ffe9d7\",\"2835\":\"e2d55953\",\"2868\":\"5460d21f\",\"2909\":\"9c4ebc75\",\"2968\":\"78570e87\",\"2970\":\"396085f5\",\"2996\":\"a6395a23\",\"3069\":\"f2bd38e9\",\"3091\":\"6097f1f3\",\"3175\":\"7e7c7d41\",\"3207\":\"b6682581\",\"3344\":\"0d2f8500\",\"3346\":\"1c9b8557\",\"3382\":\"be439b26\",\"3437\":\"d0bcefc2\",\"3472\":\"22f7b67f\",\"3499\":\"0a44c94b\",\"3596\":\"ef0207de\",\"3600\":\"0919ef4b\",\"3821\":\"23487d0c\",\"3869\":\"854067db\",\"4076\":\"6da1af61\",\"4099\":\"d04af1c5\",\"4161\":\"7cbe71c4\",\"4217\":\"fc3c4732\",\"4243\":\"c7fa02be\",\"4267\":\"82f1e301\",\"4274\":\"7503c0d8\",\"4311\":\"30256b16\",\"4329\":\"ea21dc50\",\"4360\":\"28350085\",\"4390\":\"1f13c404\",\"4391\":\"c0241f15\",\"4460\":\"9331b4e5\",\"4463\":\"68e52d6f\",\"4476\":\"72132624\",\"4514\":\"08c2dfd3\",\"4609\":\"5aa16f8b\",\"4642\":\"f7fbf3e1\",\"4656\":\"e6d4ac9a\",\"4682\":\"b5df4c8d\",\"4684\":\"67488b35\",\"4782\":\"3086c1d1\",\"4788\":\"be6681cd\",\"4822\":\"a23d08e9\",\"4947\":\"7852274a\",\"5185\":\"7e4d4c92\",\"5335\":\"da0532bd\",\"5393\":\"ebf5f662\",\"5394\":\"4f1ff846\",\"5413\":\"f614cc8e\",\"5471\":\"01416d31\",\"5537\":\"cec1596e\",\"5547\":\"bf521b33\",\"5571\":\"3eb57401\",\"5600\":\"a6ddcc2d\",\"5707\":\"7f7e0e7f\",\"5819\":\"a5e02fbd\",\"5868\":\"9ddb658c\",\"5898\":\"16904035\",\"6157\":\"7af93538\",\"6189\":\"ee2b9c82\",\"6219\":\"41d42f6d\",\"6235\":\"78bd126c\",\"6261\":\"e2eee674\",\"6274\":\"cacb789b\",\"6294\":\"b09290da\",\"6369\":\"c2686534\",\"6417\":\"c4ceeca5\",\"6431\":\"f61cbd39\",\"6443\":\"25f68939\",\"6488\":\"9d7043a0\",\"6528\":\"afa9d5b8\",\"6551\":\"39b50035\",\"6616\":\"07811e8b\",\"6631\":\"33896442\",\"6734\":\"854dc5a6\",\"6745\":\"56f5da12\",\"6776\":\"f173f855\",\"6788\":\"a5448520\",\"6809\":\"af862a73\",\"6844\":\"0dda6d3e\",\"6873\":\"14626ea7\",\"6921\":\"0fc10a63\",\"6959\":\"209a1d83\",\"6980\":\"967de9f8\",\"7068\":\"4654f2c0\",\"7098\":\"92c62008\",\"7149\":\"bd521481\",\"7166\":\"8c466e2c\",\"7194\":\"507f28fc\",\"7212\":\"bc37d3b4\",\"7219\":\"fff12213\",\"7221\":\"550de877\",\"7246\":\"2d4f0469\",\"7255\":\"06e9d76a\",\"7296\":\"e00bee32\",\"7389\":\"4109994f\",\"7406\":\"418efb7b\",\"7414\":\"43cda70c\",\"7425\":\"87873d25\",\"7440\":\"e73cee74\",\"7445\":\"c846dd94\",\"7538\":\"2ee05b66\",\"7551\":\"f172adbf\",\"7554\":\"bd24f107\",\"7564\":\"0b744c99\",\"7652\":\"52f10eb4\",\"7704\":\"d5999329\",\"7776\":\"cd0ecdf4\",\"7791\":\"f465133b\",\"7798\":\"03943c1a\",\"7818\":\"9c44893c\",\"7825\":\"d6a13bae\",\"7852\":\"e9ce7c54\",\"7911\":\"568afdcf\",\"7998\":\"bb536a91\",\"8102\":\"f0ad4ab3\",\"8162\":\"74033dce\",\"8206\":\"59ed35cc\",\"8227\":\"c51f2d9b\",\"8309\":\"74d52b74\",\"8495\":\"43b5713a\",\"8538\":\"89727371\",\"8552\":\"3b42e631\",\"8581\":\"378cf42f\",\"8630\":\"45f72285\",\"8632\":\"1d58e211\",\"8639\":\"61142c9b\",\"8682\":\"2a2a4899\",\"8685\":\"9463b50a\",\"8789\":\"158301aa\",\"8838\":\"cf4218d1\",\"8941\":\"e52968c0\",\"8990\":\"7d6fa5af\",\"9018\":\"937718c0\",\"9087\":\"a7422318\",\"9116\":\"a5d545e9\",\"9121\":\"4bbb005b\",\"9132\":\"9bfa710d\",\"9144\":\"5b897c26\",\"9226\":\"8004b924\",\"9276\":\"185ff6a2\",\"9481\":\"9b913387\",\"9558\":\"cbc80589\",\"9589\":\"12296570\",\"9605\":\"b74d8bba\",\"9636\":\"57edd047\",\"9662\":\"f0095c3d\",\"9673\":\"3fbe97ee\",\"9697\":\"2eafc6b3\",\"9735\":\"56bd95cf\",\"9739\":\"1e74f6a0\",\"9742\":\"6861969c\",\"9743\":\"82efb685\",\"9815\":\"6ddec2e8\",\"9869\":\"a22fa8f5\",\"9883\":\"ef396844\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl + \"../../\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t5981: 1\n};\n\n// importScripts chunk loading\nvar installChunk = function(data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = function(chunkId, promises) {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunk_jbrowse_web\"] = self[\"webpackChunk_jbrowse_web\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","__webpack_require__.nc = undefined;","var next = __webpack_require__.x;\n__webpack_require__.x = function() {\n\treturn Promise.all([4684,7852,6189].map(__webpack_require__.e, __webpack_require__)).then(next);\n};","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["WeakMap","isRemoteAbortSignal","thing","abortSignalId","surrogateAbortControllers","Map","deserializeAbortSignal","surrogateAbortController","get","AbortController","set","signal","remoteAbort","props","signalId","abort","remoteAbortRpcHandler","signalAbort","useStyles","makeStyles","importFormEntry","minWidth","AssemblySelector","observer","session","onChange","selected","InputProps","TextFieldProps","localStorageKey","helperText","classes","assemblyNames","assemblyManager","config","URLSearchParams","window","location","search","jest","useLocalStorage","host","pathname","join","useState","lastSelected","setLastSelected","selection","includes","useEffect","error","length","select","label","variant","value","inputProps","event","target","disabled","className","map","name","assembly","displayName","getConf","CascadingContext","React","parentPopupState","rootPopupState","CascadingMenuItem","onClick","useContext","Error","handleClick","useCallback","close","CascadingSubmenu","title","inset","popupId","popupState","usePopupState","bindHover","bindFocus","primary","CascadingSubmenuHover","anchorOrigin","vertical","horizontal","transformOrigin","onMenuItemClick","menuItems","context","useMemo","Provider","bindMenu","CascadingMenu","EndDecoration","item","type","checked","CascadingMenuList","hasIcon","some","menuItem","icon","idx","subMenu","component","callback","undefined","Boolean","secondary","subLabel","style","flexGrow","theme","closeButton","position","right","spacing","top","color","palette","grey","DialogError","width","margin","children","onClose","ErrorBoundary","FallbackComponent","input","inputBase","typography","left","whiteSpace","visibility","inputRoot","padding","inputFocused","borderStyle","borderWidth","EditableTypography","ref","setValue","other","editedValue","setEditedValue","sizerNode","setSizerNode","inputNode","setInputNode","blur","setBlur","useTheme","clientWidth","val","node","inputRef","root","focused","onKeyDown","key","onBlur","snapshotError","str","findStr","indexOf","trim","slice","match","match2","overflow","maxHeight","background","border","JSON","stringify","parse","open","onFactoryReset","handleDialogClose","action","ContentCopy","d","TrackSelector","Save","fill","getColors","midnight","forrest","grape","mandarin","gray","Logomark","viewBox","Icon","LogoFull","Text","colors","transform","paper","overflowY","overflowX","minHeight","maxWidth","outline","menuItemEndDecoration","height","MenuItemEndDecoration","MenuPage","subMenuAnchorEl","setSubMenuAnchorEl","openSubMenuIdx","setOpenSubMenuIdx","isSubMenuOpen","setIsSubMenuOpen","selectedMenuItemIdx","setSelectedMenuItemIdx","setPosition","paperRef","useRef","anchorEl","timer","shouldSubMenuBeOpen","setTimeout","clearTimeout","rect","getBoundingClientRect","menuItemStyle","ListContents","autoFocusItem","dense","sort","a","b","priority","endDecoration","onMouseMove","e","currentTarget","document","activeElement","focus","currentIdx","findLastIndex","findPreviousValidIdx","findIndex","findNextValidIdx","in","elevation","BackdropProps","invisible","horizontalHandle","cursor","verticalHandle","flexbox_verticalHandle","alignSelf","flexbox_horizontalHandle","onDrag","flexbox","originalClassName","mouseDragging","setMouseDragging","prevPos","cx","mouseMove","preventDefault","pos","clientX","clientY","distance","current","mouseUp","addEventListener","removeEventListener","onMouseDown","fontFamily","display","colorScheme","mode","fabLeft","zIndex","bottom","fabRight","menuBarAndComponents","gridColumn","gridTemplateRows","menuBar","gridRow","components","appBar","grid","minimized","visibleWidget","drawerWidth","activeWidgets","views","drawerPosition","drawerVisible","gridTemplateColumns","filter","f","DrawerWidget","DialogComponent","Suspense","fallback","DialogProps","AppBar","AppToolbar","view","ViewPanel","id","ViewLauncher","size","Tooltip","Fab","showWidgetDrawer","Launch","Snackbar","ToggleButtonWithTooltip","ToggleButton","shorten","len","substring","description","rootModel","setLocation","fileOrUrl","isUriLocation","internetAccountId","toggleButtonValue","setToggleButtonValue","accts","isAppRootModel","internetAccounts","shownAccts","setShownAccts","hiddenAccts","setHiddenAccts","setAnchorEl","selectedAcct","find","ia","setLocationWithAccount","locationInput","UrlChooser","selectorLabel","LocalFileChooser","SelectorComponent","Box","InputLabel","shrink","flexDirection","ToggleButtonGroup","exclusive","_event","newState","toggleContents","ArrowDropDown","Menu","acct","MenuItem","prev","FormHelperText","highResolutionScaling","imageData","blockKey","showSoftClip","done","setDone","featureCanvas","canvas","getContext","drawImageOntoCanvasContext","blockKeyStr","testId","hoverLabel","pointerEvents","offsetX","offsetY","configuration","feature","timeout","shown","setShown","handle","text","readConfObject","model","handleClose","Dialog","DialogContent","Typography","DialogActions","Button","clearView","autoFocus","added","full","RegExp","tag","SanitizedHTML","html","test","escapeHTML","dompurify","tagName","setAttribute","dangerouslySetInnerHTML","__html","forest","refTheme","createTheme","defaultThemes","default","main","tertiary","augmentColor","quaternary","stopCodon","startCodon","bases","A","green","C","blue","G","amber","T","red","lightStock","lightMinimal","darkMinimal","darkStock","createJBrowseBaseTheme","fontSize","MuiButton","defaultProps","styleOverrides","MuiAccordion","disableGutters","TransitionProps","MuiFilledInput","MuiFormControl","MuiFormHelperText","MuiIconButton","MuiInputBase","MuiAutocomplete","MuiInputLabel","MuiToolbar","MuiListItem","MuiOutlinedInput","MuiFab","backgroundColor","MuiTable","MuiPopover","transitionDuration","MuiMenu","MuiMenuList","MuiMenuItem","MuiTextField","MuiLink","MuiCheckbox","MuiRadio","MuiFormLabel","MuiAccordionSummary","content","contrastText","createDefaultProps","createJBrowseTheme","configTheme","themes","paletteName","getCurrentTheme","augmentTheme","deepmerge","themeName","baseTheme","isDefault","userChoiceTheme","obj","AbortError","code","checkAbortSignal","AbortSignal","TypeError","aborted","makeAbortError","ms","Promise","resolve","abortBreakPoint","DOMException","observeAbortSignal","fromEvent","Observable","isAbortException","exception","message","when","getter","reject","timeoutId","finished","whenPromise","mobxWhen","finishTimeout","cancel","then","catch","err","whenPresent","opts","inDevelopment","process","inProduction","useDebounce","delay","debouncedValue","setDebouncedValue","useDebouncedCallback","wait","argsRef","cleanup","args","findParentThat","predicate","hasParent","currentNode","getParent","isAlive","springAnimate","fromValue","toValue","animationFrameId","onFinish","precision","tension","friction","mass","update","animation","time","Date","now","lastPosition","lastTime","velocity","lastVelocity","numSteps","Math","floor","i","isVelocity","abs","isDisplacement","requestAnimationFrame","cancelAnimationFrame","findParentThatIs","getSession","isSessionModel","getContainingView","isViewModel","getContainingTrack","isTrackModel","getContainingDisplay","isDisplayModel","assembleLocString","region","assembleLocStringFast","toLocale","startString","endString","cb","n","assemblyName","refName","start","end","reversed","assemblyNameString","rev","parseLocStringOneBased","locString","isValidRefName","endsWith","replace","assemblyMatch","startsWith","lastColonIdx","lastIndexOf","prefix","suffix","rangeMatch","singleMatch","separator","parseLocString","parsed","compareLocs","locA","locB","assemblyComp","localeCompare","refComp","startComp","endComp","compareLocStrings","clamp","num","min","max","bpToPx","bp","bpPerPx","round","oneEightyOverPi","PI","piOverOneEighty","radToDeg","radians","degToRad","degrees","polarToCartesian","rho","theta","cos","sin","cartesianToPolar","x","y","sqrt","atan","featureSpanPx","bpSpanPx","leftBp","rightBp","iterMap","iter","func","sizeHint","results","Array","counter","array","l","makeAbortableReaction","self","dataFunction","asyncReactionFunction","reactionOptions","startedFunction","successFunction","errorFunction","inProgress","handleError","console","addDisposer","reaction","data","mobxReactionHandle","thisInProgress","result","minmax","short","coord","oob","isElectron","navigator","userAgent","revcom","seqString","reverse","complement","split","complementRegex","complementTable","S","w","r","N","K","Y","V","M","h","k","g","t","W","X","m","v","B","s","H","c","D","R","blobToDataURL","blob","FileReader","onload","readAsDataURL","rIC","requestIdleCallback","widths","measureText","String","total","charCodeAt","defaultStarts","defaultStops","defaultCodonTable","TCA","TCC","TCG","TCT","TTC","TTT","TTA","TTG","TAC","TAT","TAA","TAG","TGC","TGT","TGA","TGG","CTA","CTC","CTG","CTT","CCA","CCC","CCG","CCT","CAC","CAT","CAA","CAG","CGA","CGC","CGG","CGT","ATA","ATC","ATT","ATG","ACA","ACC","ACG","ACT","AAC","AAT","AAA","AAG","AGC","AGT","AGA","AGG","GTA","GTC","GTG","GTT","GCA","GCC","GCG","GCT","GAC","GAT","GAA","GAG","GGA","GGC","GGG","GGT","generateCodonTable","table","tempCodonTable","Object","keys","forEach","codon","aa","nucs","nuc","charAt","toUpperCase","toLowerCase","n0","j","n1","n2","updateStatus","msg","fn","res","hashCode","hash","objectHash","bytesForRegions","regions","index","all","blocksForRange","blockResults","flat","block","minv","blockPosition","maxv","reduce","supportedIndexingAdapters","getBpDisplayStr","totalBp","parseFloat","toPrecision","toLocaleString","getTickDisplayStr","toFixed","getViewParams","exportSVG","dynamicBlocks","staticBlocks","offsetPx","contentBlocks","staticblock","staticblock1","offsetPx1","getLayoutId","sessionId","layoutId","initialValue","localStorage","getItem","storedValue","setStoredValue","valueToStore","Function","setItem","getUriLink","href","uri","baseUri","URL","getStr","isObject","measureGridWidth","elements","stripHTML","element","getEnv","getEnvMST","localStorageGetItem","localStorageSetItem","arr","Infinity","sum","avg","createCanvas","createImageBitmap","ImageBitmapType","serializedCommands","CanvasSequence","execute","drawImage","weHave","OffscreenCanvas","isNode","ImageBitmap","nodeCreateCanvas","dataUri","toDataURL","img","nodeImage","onerror","src","ctx","toJSON","containsNoTransferables","renderToAbstractCanvas","scaling","rasterizeLayers","fakeCtx","canvasRecordedData","scale","ceil","convertToBlob","xlinkHref","reactElement","isViewContainer","isStateTreeNode","isSessionModelWithConfigEditing","isSessionWithAddTracks","disableAddTracks","isSessionModelWithWidgets","isSessionModelWithConnections","isSessionWithSessionPlugins","isSelectionContainer","trackId","displayId","isTrackViewModel","isRootModelWithInternetAccounts","isAbstractMenuManager","AuthNeededError","url","setPrototypeOf","prototype","RetryError","isAuthNeededException","isRetryException","PhasedScheduler","phaseCallbacks","phaseOrder","this","phase","push","phaseName","TypeRecord","typeName","baseClass","registeredTypes","has","values","PluginManager","initialPlugins","plugins","jexl","createJexlInstance","pluginMetadata","runtimePluginDefinitions","elementCreationSchedule","rendererTypes","RendererType","adapterTypes","AdapterType","textSearchAdapterTypes","TextSearchAdapterType","trackTypes","TrackType","displayTypes","DisplayType","connectionTypes","ConnectionType","viewTypes","ViewType","widgetTypes","WidgetType","rpcMethods","RpcMethodType","addTrackWidgets","AddTrackWorkflowType","internetAccountTypes","InternetAccountType","configured","extensionPoints","jbrequireCache","lib","ReExports","load","jbrequire","pack","addPlugin","plugin","CorePlugin","metadata","isCore","configurationSchemas","configurationSchema","definition","install","p","getPlugin","run","configure","groupName","creationCallback","typeRecord","getElementTypeRecord","add","newElement","evaluateExtensionPoint","getElementTypesInGroup","fieldName","types","pluggableTypes","isType","isModelType","warn","typeGroup","isBareConfigurationSchemaType","ConfigurationSchema","methodName","addElementType","track","trackType","addDisplayType","newView","viewType","extendedName","extensionPointName","callbacks","extendee","accumulator","isUMDPluginDefinition","def","umdUrl","umdLoc","isESMPluginDefinition","esmUrl","esmLoc","isCJSPluginDefinition","cjsUrl","getGlobalObject","global","isInWebWorker","globalObject","PluginLoader","defs","definitions","fetchESM","fetchCJS","scriptUrl","domLoadScript","importScripts","parsedUrl","protocol","moduleName","umdName","Plugin","loadScript","constructor","loadCJSPlugin","loadESMPlugin","loadUMDPlugin","JBrowseExports","fromEntries","entries","loadPlugin","SetDefaultSession","lazy","AssemblyManager","exports","pluginManager","UCSCTrackHubConnectionF","AddTrackWidgetF","HierarchicalTrackSelectorWidgetF","AddConnectionWidgetF","PluginStoreWidgetF","_pluginManager","SVG","LinearGenomeView","Alignments","Authentication","Bed","CircularView","Config","DataManagement","DotplotView","GtfPlugin","Gff3","LegacyJBrowse","LinearComparativeView","Lollipop","Arc","Menus","RDF","Sequence","Variants","Wiggle","GCContent","SpreadsheetViewPlugin","SvInspectorPlugin","BreakpointSplitView","HicPlugin","TrixPlugin","GridBookmarkPlugin","ComparativeAdapters","receiveConfiguration","configurationP","listener","postMessage","pluginLoader","import","installGlobalReExports","windowHref","runtimePlugins","corePlugins","P","createPluggableElements","enableStaticRendering","getPluginManager","rpcConfig","getRpcElements","entry","bind","channel","rpcDriverClassName","statusCallback","rpcServer","emit","RpcServer","ping","serializeError","fetch","cancelIdleCallback","createTextNode","querySelector","appendChild","documentElement","querySelectorAll","createElement","removeAttribute","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","loaded","__webpack_modules__","call","__webpack_exports__","O","deferred","chunkIds","notFulfilled","fulfilled","every","splice","__esModule","leafPrototypes","getProto","getPrototypeOf","__proto__","ns","create","getOwnPropertyNames","o","defineProperty","enumerable","chunkId","promises","u","miniCssF","globalThis","prop","hasOwnProperty","Symbol","toStringTag","nmd","paths","currentScript","scripts","getElementsByTagName","installedChunks","chunkLoadingGlobal","parentChunkLoadingFunction","moreModules","runtime","pop","nc","next"],"sourceRoot":""}