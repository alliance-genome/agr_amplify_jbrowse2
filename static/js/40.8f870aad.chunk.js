(this["webpackJsonp@jbrowse/web"]=this["webpackJsonp@jbrowse/web"]||[]).push([[40,71],{1768:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(84),o=a(1642),l=a(959),i=a(877),s=a(12),m=a(83),u=a(29),d=a(80),p=a.n(d),b=a(458),f=a.n(b),E=a(107),v=a(82),h=a(51),y=a(1680),g=a(1630),j=a(1683),w=a(1638),O=a(860),k=a(1652),C=a(1748),x=a(1635),S=a(108),N=Object(h.a)((function(e){return{importFormContainer:{padding:e.spacing(4)},formPaper:{margin:"0 auto",padding:12,marginBottom:10}}}));function A(e){return e?e.uri||e.localPath||e.name:void 0}var L=Object(c.observer)((function(e){var t=e.model,a=N(),c=Object(v.getSession)(t),o=c.assemblyNames,l=c.assemblyManager,i=Object(n.useState)([o[0],o[0]]),d=Object(u.a)(i,2),b=d[0],h=d[1],L=Object(n.useState)(),M=Object(u.a)(L,2),P=M[0],B=M[1],T=Object(n.useState)(),F=Object(u.a)(T,2),H=F[0],V=F[1],z=Object(n.useState)(),q=Object(u.a)(z,2),I=q[0],R=q[1],D=Object(n.useState)(2),W=Object(u.a)(D,1)[0],G=Object(n.useState)(),J=Object(u.a)(G,2),U=J[0],_=J[1],K=Object(n.useState)(""),Q=Object(u.a)(K,2),X=Q[0],Y=Q[1],Z=A(P),$=X||(Z?f.a.extname(function(e){return e.endsWith(".gz")?e.slice(0,e.length-3):e}(Z)):""),ee=o.length?b.map((function(e){var t;return null===(t=l.get(e))||void 0===t?void 0:t.error})).filter((function(e){return!!e})).join(", "):"No configured assemblies";function te(){if(".paf"===$)return{type:"PAFAdapter",pafLocation:P,assemblyNames:b};if(".out"===$)return{type:"MashMapAdapter",outLocation:P,assemblyNames:b};if(".delta"===$)return{type:"DeltaAdapter",deltaLocation:P,assemblyNames:b};if(".chain"===$)return{type:"ChainAdapter",chainLocation:P,assemblyNames:b};if(".anchors"===$)return{type:"MCScanAnchorsAdapter",mcscanAnchorsLocation:P,bed1Location:I,bed2Location:H,assemblyNames:b};if(".anchors.simple"===$)return{type:"MCScanSimpleAnchorsAdapter",mcscanSimpleAnchorsLocation:P,bed1Location:I,bed2Location:H,assemblyNames:b};throw new Error("Unknown type")}function ae(){return ae=Object(m.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Object(v.isSessionWithAddTracks)(c)){e.next=3;break}return e.abrupt("return");case 3:return e.t0=t,e.next=6,Promise.all(b.map(function(){var e=Object(m.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.waitForAssembly(t);case 2:if(a=e.sent){e.next=5;break}throw new Error("Assembly ".concat(t," failed to load"));case 5:return e.abrupt("return",{type:"LinearGenomeView",bpPerPx:1,offsetPx:0,hideHeader:!0,displayedRegions:a.regions});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:e.t1=e.sent,e.t0.setViews.call(e.t0,e.t1),t.views.forEach((function(e){return e.setWidth(t.width)})),Object(E.transaction)((function(){if(P){var e=f.a.basename(A(P))||"MyTrack",a="".concat(e,"-").concat(Date.now());c.addTrackConf({trackId:a,name:e,assemblyNames:b,type:"SyntenyTrack",adapter:te()}),t.toggleTrack(a)}})),e.next=16;break;case 12:e.prev=12,e.t2=e.catch(0),console.error(e.t2),_(e.t2);case 16:case"end":return e.stop()}}),e,null,[[0,12]])}))),ae.apply(this,arguments)}var ne=U||ee;return r.a.createElement(y.a,{className:a.importFormContainer},ne?r.a.createElement(S.ErrorMessage,{error:ne}):null,r.a.createElement(g.a,{className:a.formPaper},r.a.createElement(j.a,{container:!0,item:!0,justifyContent:"center",spacing:4,alignItems:"center"},r.a.createElement(j.a,{item:!0},r.a.createElement(w.a,null,"Select assemblies for synteny view"),Object(s.a)(new Array(W)).map((function(e,t){return r.a.createElement(S.AssemblySelector,{key:"row_".concat(t,"_").concat(b[t]),selected:b[t],onChange:function(e){var a=b.slice(0);a[t]=e,h(a)},session:c})}))))),r.a.createElement(g.a,{className:a.formPaper},r.a.createElement(w.a,{style:{textAlign:"center"}},r.a.createElement("b",null,"Optional"),": Add a .paf, .out (MashMap), .delta (Mummer), .chain, .anchors or .anchors.simple (MCScan) file to view in the synteny view. These file types can also be gzipped. The first assembly should be the query sequence (e.g. left column of the PAF) and the second assembly should be the target sequence (e.g. right column of the PAF)"),r.a.createElement(O.a,{value:$,onChange:function(e){return Y(e.target.value)}},r.a.createElement(j.a,{container:!0,justifyContent:"center"},r.a.createElement(j.a,{item:!0},r.a.createElement(k.a,{value:".paf",control:r.a.createElement(C.a,null),label:".paf"})),r.a.createElement(j.a,{item:!0},r.a.createElement(k.a,{value:".out",control:r.a.createElement(C.a,null),label:".out"})),r.a.createElement(j.a,{item:!0},r.a.createElement(k.a,{value:".delta",control:r.a.createElement(C.a,null),label:".delta"})),r.a.createElement(j.a,{item:!0},r.a.createElement(k.a,{value:".chain",control:r.a.createElement(C.a,null),label:".chain"})),r.a.createElement(j.a,{item:!0},r.a.createElement(k.a,{value:".anchors",control:r.a.createElement(C.a,null),label:".anchors"})),r.a.createElement(j.a,{item:!0},r.a.createElement(k.a,{value:".anchors.simple",control:r.a.createElement(C.a,null),label:".anchors.simple"})))),r.a.createElement(j.a,{container:!0,justifyContent:"center"},r.a.createElement(j.a,{item:!0},".anchors"===X||".anchors.simple"===X?r.a.createElement("div",null,r.a.createElement("div",{style:{margin:20}},"Open the ",X,", and .bed files for both genome assemblies from the MCScan (Python verson) pipeline"," ",r.a.createElement("a",{href:"https://github.com/tanghaibao/jcvi/wiki/MCscan-(Python-version)"},"(more info)")),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",null,r.a.createElement(S.FileSelector,{name:".anchors file",description:"",location:P,setLocation:function(e){return B(e)}})),r.a.createElement("div",null,r.a.createElement(S.FileSelector,{name:"genome 1 .bed (left column of anchors file)",description:"",location:I,setLocation:function(e){return R(e)}})),r.a.createElement("div",null,r.a.createElement(S.FileSelector,{name:"genome 2 .bed (right column of anchors file)",description:"",location:H,setLocation:function(e){return V(e)}})))):r.a.createElement(S.FileSelector,{name:X?X+" location":"",description:"",location:P,setLocation:function(e){return B(e)}})))),r.a.createElement(j.a,{container:!0,justifyContent:"center"},r.a.createElement(j.a,{item:!0},r.a.createElement(x.a,{disabled:!!ee,onClick:function(){return ae.apply(this,arguments)},variant:"contained",color:"primary"},"Open"))))})),M=L,P=Object(c.observer)((function(e){var t=e.model;return r.a.createElement(o.a,{onClick:function(){t.toggleCurves()},title:"Toggle drawing straight or curved synteny lines"},t.drawCurves?r.a.createElement(i.b,{color:"secondary"}):r.a.createElement(i.a,{color:"secondary"}))})),B=Object(c.observer)((function(e){var t=e.model;return t.initialized?r.a.createElement(l.default,{model:t,ExtraButtons:r.a.createElement(P,{model:t})}):r.a.createElement(M,{model:t})}));t.default=B},959:function(e,t,a){"use strict";a.r(t);var n=a(29),r=a(1),c=a.n(r),o=a(84),l=a(79),i=a(51),s=a(85),m=a(108),u=a(1642),d=a(1638),p=a(133),b=a(459),f=a.n(b),E=a(460),v=a.n(E),h=a(349),y=a.n(h),g=Object(i.a)((function(){return{headerBar:{gridArea:"1/1/auto/span 2",display:"flex"},spacer:{flexGrow:1},bp:{display:"flex",alignItems:"center",marginLeft:10},searchContainer:{marginLeft:5},searchBox:{display:"flex"}}})),j=Object(o.observer)((function(e){var t=e.model;return c.a.createElement(u.a,{onClick:t.toggleLinkViews,title:"Toggle linked scrolls and behavior across views"},t.linkViews?c.a.createElement(v.a,{color:"secondary"}):c.a.createElement(f.a,{color:"secondary"}))})),w=Object(o.observer)((function(e){var t=e.model;return c.a.createElement(u.a,{onClick:t.squareView,title:"Square view (make both the same zoom level)"},c.a.createElement(y.a,{color:"secondary"}))})),O=Object(o.observer)((function(e){var t=e.model,a=e.ExtraButtons,n=g(),r=t.views.some((function(e){return!e.hideHeader}));return c.a.createElement("div",{className:n.headerBar},c.a.createElement(j,{model:t}),c.a.createElement(w,{model:t}),a,r?null:t.views.map((function(e){return c.a.createElement("div",{key:e.id,className:n.searchBox},c.a.createElement("div",{className:n.searchContainer},c.a.createElement(p.c,{model:e,showHelp:!1})),c.a.createElement("div",{className:n.bp},c.a.createElement(d.a,{variant:"body2",color:"textSecondary",className:n.bp},Math.round(e.coarseTotalBp).toLocaleString("en-US")," bp")))})),c.a.createElement("div",{className:n.spacer}))})),k=Object(i.a)((function(){return{container:{display:"grid"},overlay:{zIndex:100,gridArea:"1/1"},content:{gridArea:"1/1",position:"relative"},grid:{display:"grid"},relative:{position:"relative"}}})),C=Object(o.observer)((function(e){var t=e.model,a=k();return c.a.createElement(c.a.Fragment,null,t.tracks.map((function(e){var r=Object(n.a)(e.displays,1)[0],o=r.RenderingComponent,i=Object(l.getConf)(e,"trackId");return o?c.a.createElement("div",{className:a.overlay,key:i,style:{height:t.middleComparativeHeight,overflow:"hidden"}},c.a.createElement(o,{model:r})):null})))})),x=Object(o.observer)((function(e){var t=e.model,a=e.ExtraButtons,n=k(),r=t.views,o=Object(s.getEnv)(t).pluginManager.getViewType(r[0].type).ReactComponent;return c.a.createElement("div",null,c.a.createElement(O,{ExtraButtons:a,model:t}),c.a.createElement("div",{className:n.container},c.a.createElement(o,{model:r[0]}),c.a.createElement("div",{className:n.grid},c.a.createElement(C,{model:t})),c.a.createElement(m.ResizeHandle,{onDrag:function(e){return t.setMiddleComparativeHeight(t.middleComparativeHeight+e)},style:{height:4,background:"#ccc"}}),c.a.createElement(o,{model:r[1]})))})),S=Object(o.observer)((function(e){var t=e.model,a=e.ExtraButtons,n=k(),r=t.views,o=Object(s.getEnv)(t).pluginManager;return c.a.createElement("div",null,c.a.createElement(O,{model:t,ExtraButtons:a}),c.a.createElement("div",{className:n.container},c.a.createElement("div",{className:n.content},c.a.createElement("div",{className:n.relative},r.map((function(e){var t=o.getViewType(e.type).ReactComponent;return c.a.createElement(t,{key:e.id,model:e})}))),c.a.createElement(C,{model:t}))))})),N=Object(o.observer)((function(e){return e.model.tracks.some((function(e){return e.displays.some((function(e){return Object(l.getConf)(e,"middle")}))}))?c.a.createElement(x,e):c.a.createElement(S,e)}));t.default=N}}]);
//# sourceMappingURL=40.8f870aad.chunk.js.map