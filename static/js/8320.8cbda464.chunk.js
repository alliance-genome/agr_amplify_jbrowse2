"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[8320],{58320:function(e,t,a){a.r(t),a.d(t,{convertTrackConfig:function(){return u},createRefSeqsAdapter:function(){return l}});var r=a(32723),i=a(34795),o=a(33028),n=a(32145),c=a(27664),p=a(16151);function u(e,t,a){var r={trackId:(0,c.objectHash)(e),name:e.key||e.label},i=e.metadata&&(e.metadata.description||e.metadata.Description);i&&(r.description=i);var n=e.category||e.metadata&&e.metadata.category;r.category=n?n.split(/\s*\/\s*/):[];var u=e.storeClass;if(!e.urlTemplate){if(!u||!u.endsWith("FromConfig")){var l=e.key||e.label;return console.warn('Could not import JBrowse1 track "'.concat(l,'" because it does not have a "urlTemplate" or is not a "FromConfig" track')),(0,p.generateUnsupportedTrackConf)(r.name,l,r.category)}return function(e,t){var a=e.features||[],r=a.map((function(e){var t=JSON.parse(JSON.stringify(e));return t.refName=e.seq_id,t.uniqueId="".concat(e.seq_id,":").concat(e.start,"-").concat(e.end,":").concat(e.name||""),t}));return t.adapter={type:"FromConfigAdapter",features:r},t.type="FeatureTrack",t}(e,r)}var d=function(e){return new URL(e,"".concat(t,"/")).href.replaceAll(/%7B/gi,"{").replaceAll(/%7D/gi,"}")},s=d(e.urlTemplate);if(u){if("JBrowse/Store/SeqFeature/BAM"===u){var y={type:"BamAdapter",bamLocation:{uri:s,locationType:"UriLocation"}};return e.baiUrlTemplate?y.index={location:{uri:d(e.baiUrlTemplate),locationType:"UriLocation"}}:e.csiUrlTemplate?y.index={location:{uri:d(e.csiUrlTemplate),locationType:"UriLocation"},indexType:"CSI"}:y.index={location:{uri:"".concat(s,".bai"),locationType:"UriLocation"}},(0,o.Z)((0,o.Z)({},r),{},{type:"AlignmentsTrack",adapter:y})}if("JBrowse/Store/SeqFeature/CRAM"===u){var T={type:"CramAdapter",cramLocation:{uri:s,locationType:"UriLocation"},sequenceAdapter:a};return T.craiLocation=e.craiUrlTemplate?{uri:d(e.craiUrlTemplate),locationType:"UriLocation"}:{uri:"".concat(s,".crai"),locationType:"UriLocation"},(0,o.Z)((0,o.Z)({},r),{},{type:"AlignmentsTrack",adapter:T})}if("JBrowse/Store/SeqFeature/NCList"===u)return(0,o.Z)((0,o.Z)({},r),{},{type:"FeatureTrack",adapter:{type:"NCListAdapter",rootUrlTemplate:{uri:s,locationType:"UriLocation"}}});if("JBrowse/Store/SeqFeature/BigWig"===u||"JBrowse/Store/BigWig"===u)return e.type&&e.type.endsWith("XYPlot")?r.defaultRendering="xyplot":e.type&&e.type.endsWith("Density")&&(r.defaultRendering="density"),(0,o.Z)((0,o.Z)({},r),{},{type:"QuantitativeTrack",adapter:{type:"BigWigAdapter",bigWigLocation:{uri:s,locationType:"UriLocation"}}});if("JBrowse/Store/SeqFeature/VCFTabix"===u){var f={type:"VcfTabixAdapter",vcfGzLocation:{uri:s,locationType:"UriLocation"}};return e.tbiUrlTemplate?f.index={location:{uri:d(e.tbiUrlTemplate),locationType:"UriLocation"}}:e.csiUrlTemplate?f.index={location:{uri:d(e.csiUrlTemplate),locationType:"UriLocation"},indexType:"CSI"}:f.index={location:{uri:"".concat(s,".tbi"),locationType:"UriLocation"}},(0,o.Z)((0,o.Z)({},r),{},{type:"VariantTrack",adapter:f})}if("JBrowse/Store/SeqFeature/VCFTribble"===u)return(0,p.generateUnsupportedTrackConf)(r.name,"VCFTribble (".concat(s,")"),r.category);if("JBrowse/Store/SeqFeature/GFF3"===u)return(0,o.Z)((0,o.Z)({},r),{},{type:"FeatureTrack",adapter:{type:"Gff3Adapter",gffLocation:{uri:s,locationType:"UriLocation"}}});if("JBrowse/Store/SeqFeature/BigBed"===u)return(0,o.Z)((0,o.Z)({},r),{},{type:"FeatureTrack",adapter:{type:"BigBedAdapter",bigBedLocation:{uri:s,locationType:"UriLocation"}}});if("JBrowse/Store/SeqFeature/GFF3Tabix"===u){var U={type:"Gff3TabixAdapter",gffGzLocation:{uri:s,locationType:"UriLocation"}};return e.tbiUrlTemplate?U.index={location:{uri:d(e.tbiUrlTemplate),locationType:"UriLocation"}}:e.csiUrlTemplate?U.index={location:{uri:d(e.csiUrlTemplate),locationType:"UriLocation"},indexType:"CSI"}:U.index={location:{uri:"".concat(s,".tbi"),locationType:"UriLocation"}},(0,o.Z)((0,o.Z)({},r),{},{type:"FeatureTrack",adapter:U})}if("JBrowse/Store/SeqFeature/BED"===u)return(0,p.generateUnsupportedTrackConf)(r.name,"BED (".concat(s,")"),r.category);if("JBrowse/Store/SeqFeature/BEDTabix"===u){var m={type:"BedTabixAdapter",bedGzLocation:{uri:s,locationType:"UriLocation"}};return e.tbiUrlTemplate?m.index={location:{uri:d(e.tbiUrlTemplate),locationType:"UriLocation"}}:e.csiUrlTemplate?m.index={location:{uri:d(e.csiUrlTemplate),locationType:"UriLocation"},indexType:"CSI"}:m.index={location:{uri:"".concat(s,".tbi"),locationType:"UriLocation"}},(0,o.Z)((0,o.Z)({},r),{},{type:"FeatureTrack",adapter:m})}if("JBrowse/Store/SeqFeature/GTF"===u)return(0,o.Z)((0,o.Z)({},r),{},{type:"FeatureTrack",adapter:{type:"GtfAdapter",gtfLocation:{uri:s,locationType:"UriLocation"}}});if("JBrowse/Store/SeqFeature/StaticChunked"===u||"JBrowse/Store/Sequence/StaticChunked"===u)return(0,p.generateUnsupportedTrackConf)(r.name,"StaticChunked (".concat(s,")"),r.category);if("JBrowse/Store/SeqFeature/UnindexedFasta"===u)return(0,p.generateUnsupportedTrackConf)(r.name,"UnindexedFasta (".concat(s,")"),r.category);if("JBrowse/Store/SeqFeature/IndexedFasta"===u){var L={type:"IndexedFastaAdapter",fastaLocation:{uri:s,locationType:"UriLocation"}};return L.faiLocation=e.faiUrlTemplate?{uri:d(e.faiUrlTemplate),locationType:"UriLocation"}:{uri:"".concat(s,".fai"),locationType:"UriLocation"},(0,o.Z)((0,o.Z)({},r),{},{type:"SequenceTrack",adapter:L})}if("JBrowse/Store/SeqFeature/BgzipIndexedFasta"===u){var S={type:"BgzipFastaAdapter",fastaLocation:{uri:s,locationType:"UriLocation"}};return S.faiLocation=e.faiUrlTemplate?{uri:d(e.faiUrlTemplate),locationType:"UriLocation"}:{uri:"".concat(s,".fai"),locationType:"UriLocation"},S.gziLocation=e.gziUrlTemplate?{uri:d(e.gziUrlTemplate),locationType:"UriLocation"}:{uri:"".concat(s,".gzi"),locationType:"UriLocation"},(0,o.Z)((0,o.Z)({},r),{},{type:"ReferenceSequenceTrack",adapter:S})}if("JBrowse/Store/SeqFeature/TwoBit"===u)return(0,o.Z)((0,o.Z)({},r),{},{type:"ReferenceSequenceTrack",adapter:{type:"TwoBitAdapter",twoBitLocation:{uri:s,locationType:"UriLocation"}}})}if(r.adapter=(0,p.guessAdapter)({uri:s,locationType:"UriLocation"},void 0,s),!r.adapter)throw new Error("Could not determine adapter");return r.adapter.type===p.UNSUPPORTED?(0,p.generateUnsupportedTrackConf)(r.name,s,r.category):r.adapter.type===p.UNKNOWN?(0,p.generateUnknownTrackConf)(r.name,s,r.category):(r.type=(0,p.guessTrackType)(r.adapter.type),"QuantitativeTrack"===r.type&&(e.type&&e.type.endsWith("XYPlot")?r.defaultRendering="xyplot":e.type&&e.type.endsWith("Density")&&(r.defaultRendering="density")),r)}function l(e){return d.apply(this,arguments)}function d(){return(d=(0,i.Z)((0,r.Z)().mark((function e(t){var a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("string"===typeof t&&(t={url:t}),!t.url){e.next=15;break}if(!t.url.match(/.fai$/)){e.next=4;break}return e.abrupt("return",{type:"IndexedFastaAdapter",fastaLocation:{uri:t.url.slice(0,-4),locationType:"UriLocation"},faiLocation:{uri:t.url,locationType:"UriLocation"}});case 4:if(!t.url.match(/.2bit$/)){e.next=6;break}return e.abrupt("return",{type:"TwoBitAdapter",twoBitLocation:{uri:t.url,locationType:"UriLocation"}});case 6:if(!t.url.match(/.fa$/)){e.next=8;break}throw new Error("Unindexed FASTA adapter not available");case 8:if(!t.url.match(/.sizes/)){e.next=10;break}throw new Error("chromosome SIZES adapter not available");case 10:return e.next=12,(0,n.openLocation)({uri:t.url,locationType:"UriLocation"}).readFile("utf8");case 12:return a=e.sent,i=JSON.parse(a),e.abrupt("return",s(i));case 15:if(!("data"in t)){e.next=17;break}return e.abrupt("return",s(t.data||[]));case 17:throw new Error("Could not determine adapter for JBrowse1 refSeqs: ".concat(t.url||JSON.stringify(t)));case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function s(e){return{type:"FromConfigAdapter",features:e.map((function(e){return{refName:e.name,uniqueId:e.name,start:e.start,end:e.end}}))}}}}]);
//# sourceMappingURL=8320.8cbda464.chunk.js.map