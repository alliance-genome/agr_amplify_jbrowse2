{"version":3,"file":"static/js/4284.d478f4ad.chunk.js","mappings":"mNAOO,SAASA,EAAOC,GACrB,OAAkB,KAAXA,EAAI,IAAwB,MAAXA,EAAI,IAAyB,IAAXA,EAAI,EAChD,CAEe,MAAMC,UAAwBC,EAAAA,YAC3C,aAAMC,GACJ,MAAMC,EAAKC,KAAKC,cACVC,EAAMF,KAAKG,QAAQ,oBACzB,GAAgB,KAAZD,EAAIE,KAA0B,6BAAZF,EAAIE,IACxB,MAAO,GAET,MAAMC,QAAeC,EAAAA,EAAAA,cAAaJ,EAAKH,GAAIQ,WACrCZ,EAAMD,EAAOW,SAAgBG,EAAAA,EAAAA,OAAMH,GAAUA,EAEnD,OADa,IAAII,YAAY,OAAQ,CAAEC,OAAO,IAAQC,OAAOhB,GAE1DiB,MAAM,cACNC,QAAOC,KAAOA,EAAEC,SAChBC,KAAI,CAACC,EAAMC,KACV,MAAOC,EAASC,EAAOC,EAAKC,EAAMC,GAAQN,EAAKL,MAAM,MACrD,OAAO,IAAIY,EAAAA,cAAc,CACvBC,SAAU,GAAGP,IACbC,UACAC,OAAQA,EACRC,KAAMA,EACNC,OACAC,QACA,GAER,CAEAG,aAAAA,GAAuC,E","sources":["../../../packages/core/data_adapters/CytobandAdapter/CytobandAdapter.ts"],"sourcesContent":["import { unzip } from '@gmod/bgzf-filehandle'\n\n// locals\nimport { SimpleFeature } from '../../util'\nimport { openLocation } from '../../util/io'\nimport { BaseAdapter } from '../BaseAdapter'\n\nexport function isGzip(buf: Buffer) {\n  return buf[0] === 31 && buf[1] === 139 && buf[2] === 8\n}\n\nexport default class CytobandAdapter extends BaseAdapter {\n  async getData() {\n    const pm = this.pluginManager\n    const loc = this.getConf('cytobandLocation')\n    if (loc.uri === '' || loc.uri === '/path/to/cytoband.txt.gz') {\n      return []\n    }\n    const buffer = await openLocation(loc, pm).readFile()\n    const buf = isGzip(buffer) ? await unzip(buffer) : buffer\n    const text = new TextDecoder('utf8', { fatal: true }).decode(buf)\n    return text\n      .split(/\\n|\\r\\n|\\r/)\n      .filter(f => !!f.trim())\n      .map((line, i) => {\n        const [refName, start, end, name, type] = line.split('\\t')\n        return new SimpleFeature({\n          uniqueId: `${i}`,\n          refName,\n          start: +start,\n          end: +end,\n          name,\n          type,\n        })\n      })\n  }\n\n  freeResources(/* { region } */): void {}\n}\n"],"names":["isGzip","buf","CytobandAdapter","BaseAdapter","getData","pm","this","pluginManager","loc","getConf","uri","buffer","openLocation","readFile","unzip","TextDecoder","fatal","decode","split","filter","f","trim","map","line","i","refName","start","end","name","type","SimpleFeature","uniqueId","freeResources"],"sourceRoot":""}