"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[3692],{63692:function(e,t,n){n.r(t),n.d(t,{default:function(){return ne}});var a=n(33028),r=n(96234),o=n(30969),s=n(90550),i=n(3562),c=n(89003),l=n(28712),d=n(64640),u=n(81073),p=n(32723),f=n(34795),m=n(70054),v=n(75041),h=n(165),x=n(68595),g=n(89053),Z=n(69852),y=n(90042),b=n(2374),j=n(40909),k=n(9077),w=n(70663),N=n(65629),C=n(49197),T=n(40506),S=n(65410),M=n(88503),D=n(78136),A=n(35436),I=n(60516),P=n(66581),R=n(77491),F=n(78742),O=n(21268),B=n(97891),E=n(10814),L=n(3715),G=n(37574),U=(0,b.ZL)()((function(e){return{spacing:{marginBottom:e.spacing(3)},paper:{display:"flex",flexDirection:"column",padding:e.spacing(1)},spacer:{height:e.spacing(8)},card:{marginTop:e.spacing(1)}}}));function W(e){var t,n=e.trackAdapter,a=e.trackType,r=U().classes;return"SNPCoverageAdapter"===n.type?(0,G.jsxs)(m.Z,{className:r.spacing,children:["Selected ",(0,G.jsx)("code",{children:a}),". Using adapter"," ",(0,G.jsx)("code",{children:n.type})," with subadapter"," ",(0,G.jsx)("code",{children:null===(t=n.subadapter)||void 0===t?void 0:t.type}),". Please enter a track name and, if necessary, update the track type."]}):(0,G.jsxs)(m.Z,{className:r.spacing,children:["Using adapter ",(0,G.jsx)("code",{children:n.type})," and guessing track type"," ",(0,G.jsx)("code",{children:a}),". Please enter a track name and, if necessary, update the track type."]})}function _(e){var t="",n=[];return e.forEach((function(e){var a;if(null!==(a=e.adapterMetadata)&&void 0!==a&&a.category){var r,o,s,i,c,d,u;if(t!==(null===(r=e.adapterMetadata)||void 0===r?void 0:r.category))t=null===(i=e.adapterMetadata)||void 0===i?void 0:i.category,n.push((0,G.jsx)(w.Z,{value:null===(d=e.adapterMetadata)||void 0===d?void 0:d.category,children:null===(u=e.adapterMetadata)||void 0===u?void 0:u.category},null===(c=e.adapterMetadata)||void 0===c?void 0:c.category));n.push((0,G.jsx)(l.Z,{value:e.name,children:null!==(o=e.adapterMetadata)&&void 0!==o&&o.displayName?null===(s=e.adapterMetadata)||void 0===s?void 0:s.displayName:e.name},e.name))}})),n}var q=(0,s.observer)((function(e){var t=e.model,n=U().classes,a=(0,o.useState)(""),s=(0,r.Z)(a,2),i=s[0],c=s[1],l=(0,o.useState)(""),d=(0,r.Z)(l,2),u=d[0],p=d[1],f=(0,o.useState)(["Name","ID"]),m=(0,r.Z)(f,2),v=m[0],h=m[1],x=(0,o.useState)(["CDS","exon"]),g=(0,r.Z)(x,2),Z=g[0],y=g[1],b=[{label:"Indexing attributes",values:v},{label:"Feature types to exclude",values:Z}];return(0,o.useEffect)((function(){t.setTextIndexingConf({attributes:v,exclude:Z})}),[t,v,Z]),(0,G.jsxs)(N.Z,{className:n.paper,children:[(0,G.jsx)(C.Z,{children:"Indexing configuration"}),b.map((function(e,t){return(0,G.jsx)(T.Z,{raised:!0,className:n.card,children:(0,G.jsxs)(S.Z,{children:[(0,G.jsx)(C.Z,{children:e.label}),(0,G.jsxs)(M.Z,{disablePadding:!0,children:[e.values.map((function(n,a){return(0,G.jsx)(D.ZP,{disableGutters:!0,children:(0,G.jsx)(A.Z,{value:n,InputProps:{endAdornment:(0,G.jsx)(I.Z,{position:"end",children:(0,G.jsx)(P.Z,{color:"secondary",onClick:function(){var n=e.values.filter((function(e,t){return t!==a}));0===t?h(n):y(n)},children:(0,G.jsx)(E.Z,{})})})}})},a)})),(0,G.jsx)(D.ZP,{disableGutters:!0,children:(0,G.jsx)(A.Z,{value:0===t?i:u,placeholder:"add new",onChange:function(e){0===t?c(e.target.value):p(e.target.value)},InputProps:{endAdornment:(0,G.jsx)(I.Z,{position:"end",children:(0,G.jsx)(P.Z,{onClick:function(){if(0===t){var e=v;e.push(i),h(e),c("")}else{var n=Z;n.push(u),y(n),p("")}},disabled:0===t?""===i:""===u,color:"secondary","data-testid":"stringArrayAdd-Feat",children:(0,G.jsx)(L.Z,{})})})}})})]})]})},e.label)}))]})})),J=(0,s.observer)((function(e){var t=e.model,n=U().classes,a=t.trackAdapter,r=function(e){return e.getElementTypesInGroup("adapter")}((0,u.getEnv)(t).pluginManager);return(0,G.jsxs)(A.Z,{className:n.spacing,value:"UNKNOWN"!==(null===a||void 0===a?void 0:a.type)?null===a||void 0===a?void 0:a.type:"",label:"adapterType",helperText:"Select an adapter type",select:!0,fullWidth:!0,onChange:function(e){return t.setAdapterHint(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"adapterTypeSelect"}},children:[r.filter((function(e){var t,n;return!(null!==(t=e.adapterMetadata)&&void 0!==t&&t.hiddenFromGUI)&&!(null!==(n=e.adapterMetadata)&&void 0!==n&&n.category)})).map((function(e){var t,n;return(0,G.jsx)(l.Z,{value:e.name,children:null!==(t=e.adapterMetadata)&&void 0!==t&&t.displayName?null===(n=e.adapterMetadata)||void 0===n?void 0:n.displayName:e.name},e.name)})),_(r.filter((function(e){var t;return!(null!==(t=e.adapterMetadata)&&void 0!==t&&t.hiddenFromGUI)})))]})}));function V(e){var t=e.model,n=U().classes;return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(m.Z,{className:n.spacing,children:["JBrowse was not able to guess the adapter type for this data, but it may be in the list below. If not, you can"," ",(0,G.jsx)(R.Z,{href:"https://github.com/GMOD/jbrowse-components/releases",target:"_blank",rel:"noopener noreferrer",children:"check for new releases"})," ","of JBrowse to see if they support this data type or"," ",(0,G.jsx)(R.Z,{href:"https://github.com/GMOD/jbrowse-components/issues/new",target:"_blank",rel:"noopener noreferrer",children:"file an issue"})," ","and add a feature request for this data type."]}),(0,G.jsx)(J,{model:t})]})}var H=(0,s.observer)((function(e){var t=e.model,n=U().classes,a=(0,u.getSession)(t),r=t.trackType,o=(0,u.getEnv)(a).pluginManager.getElementTypesInGroup("track");return(0,G.jsx)(A.Z,{className:n.spacing,value:r,label:"trackType",helperText:"Select a track type",select:!0,fullWidth:!0,onChange:function(e){t.setTrackType(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"trackTypeSelect"}},children:o.map((function(e){var t=e.name;return(0,G.jsx)(l.Z,{value:t,children:t},t)}))})})),z=(0,s.observer)((function(e){var t=e.model,n=(0,u.getSession)(t),a=t.assembly;return(0,G.jsx)(A.Z,{value:a,label:"assemblyName",helperText:"Assembly to which the track will be added",select:!0,fullWidth:!0,onChange:function(e){return t.setAssembly(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"assemblyNameSelect"}},children:n.assemblies.map((function(e){return(0,k.readConfObject)(e,"name")})).map((function(e){return(0,G.jsx)(l.Z,{value:e,children:e},e)}))})}));var K=(0,s.observer)((function(e){var t=e.model,n=U().classes,a=(0,o.useState)(!0),s=(0,r.Z)(a,2),c=s[0],l=s[1],d=t.trackName,p=t.trackAdapter,f=t.trackType,v=t.warningMessage,h=t.adapterHint;if(t.unsupported)return(0,G.jsxs)(m.Z,{className:n.spacing,children:["This version of JBrowse cannot display data of this type. It is possible, however, that there is a newer version that can display them. You can"," ",(0,G.jsx)(R.Z,{href:"https://github.com/GMOD/jbrowse-components/releases",target:"_blank",rel:"noopener noreferrer",children:"check for new releases"})," ","of JBrowse or"," ",(0,G.jsx)(R.Z,{href:"https://github.com/GMOD/jbrowse-components/issues/new",target:"_blank",rel:"noopener noreferrer",children:"file an issue"})," ","and add a feature request for this data type."]});if((null===p||void 0===p?void 0:p.type)===B.UNKNOWN)return(0,G.jsx)(V,{model:t});if(""===h&&p&&t.setAdapterHint(p.type),null===p||void 0===p||!p.type)return(0,G.jsx)(m.Z,{children:"Could not recognize this data type."});var x=(0,u.supportedIndexingAdapters)(null===p||void 0===p?void 0:p.type);return(0,G.jsxs)("div",{children:[p?(0,G.jsx)(W,{trackAdapter:p,trackType:f}):null,v?(0,G.jsx)(m.Z,{style:{color:"orange"},children:v}):null,(0,G.jsx)(A.Z,{className:n.spacing,label:"trackName",helperText:"A name for this track",fullWidth:!0,value:d,onChange:function(e){return t.setTrackName(e.target.value)},inputProps:{"data-testid":"trackNameInput"}}),(0,G.jsx)(J,{model:t}),(0,G.jsx)(H,{model:t}),(0,G.jsx)(z,{model:t}),u.isElectron&&x&&(0,G.jsx)(i.Z,{children:(0,G.jsx)(F.Z,{label:"Index track for text searching?",control:(0,G.jsx)(O.Z,{checked:c,onChange:function(e){l(e.target.checked),t.setTextIndexTrack(e.target.checked)}})})}),u.isElectron&&c&&x?(0,G.jsx)(q,{model:t}):null]})})),Y=n(53557),Q=(0,b.ZL)()((function(e){return{paper:{display:"flex",flexDirection:"column",padding:e.spacing(1)},spacer:{height:e.spacing(8)}}}));var X=(0,s.observer)((function(e){var t=e.model,n=Q().classes,a=(0,j.getRoot)(t);return(0,G.jsxs)(N.Z,{className:n.paper,children:[(0,G.jsx)(Y.FileSelector,{name:"Main file",description:"",location:t.trackData,setLocation:t.setTrackData,setName:t.setTrackName,rootModel:a}),(0,G.jsx)("div",{className:n.spacer}),(0,G.jsx)(Y.FileSelector,{name:"Index file",description:"(Optional) The URL of the index file is automatically inferred from the URL of the main file if it is not supplied.",location:t.indexTrackData,setLocation:t.setIndexTrackData,setName:t.setTrackName,rootModel:a})]})})),$=(0,b.ZL)()((function(e){return{root:{marginTop:e.spacing(1)},stepper:{backgroundColor:e.palette.background.default},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},stepContent:{margin:e.spacing(1)},alertContainer:{padding:"".concat(e.spacing(2),"px 0px ").concat(e.spacing(2),"px 0px")}}})),ee=["Enter track data","Confirm track type"];var te=(0,s.observer)((function(e){var t=e.model,n=(0,o.useState)(0),s=(0,r.Z)(n,2),i=s[0],c=s[1],l=$().classes,d=(0,j.getRoot)(t).jobsManager,b=(0,u.getSession)(t),w=t.assembly,N=t.trackAdapter,C=t.trackData,T=t.trackName,S=t.trackType,M=t.textIndexTrack,D=t.textIndexingConf,A=(0,o.useState)(),I=(0,r.Z)(A,2),P=I[0],R=I[1];function F(e){switch(e){case 0:return(0,G.jsx)(X,{model:t});case 1:return(0,G.jsx)(K,{model:t});default:return(0,G.jsx)(m.Z,{children:"Unknown step"})}}function O(){return B.apply(this,arguments)}function B(){return(B=(0,f.Z)((0,p.Z)().mark((function e(){var n,r,o,s,l;return(0,p.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i===ee.length-1){e.next=3;break}return c(i+1),e.abrupt("return");case 3:n=["".concat(T.toLowerCase().replace(/ /g,"_"),"-").concat(Date.now()),"".concat(b.adminMode?"":"-sessionTrack")].join(""),r=b.assemblyManager.get(w),N&&"UNKNOWN"!==N.type?(b.addTrackConf({trackId:n,type:S,name:T,assemblyNames:[w],adapter:(0,a.Z)((0,a.Z)({},N),{},{sequenceAdapter:(0,k.getConf)(r,["sequence","adapter"])})}),t.view?(t.view.showTrack(n),u.isElectron&&M&&(0,u.supportedIndexingAdapters)(N.type)&&(o=D||{attributes:["Name","ID"],exclude:["CDS","exon"]},s=T+"-index",l={indexingParams:(0,a.Z)((0,a.Z)({},o),{},{assemblies:[w],tracks:[n],indexType:"perTrack",name:s,timestamp:(new Date).toISOString()}),name:s,cancelCallback:function(){return d.abortJob()}},d.queueJob(l))):b.notify("Open a new view, or use the track selector in an existing view, to view this track","info"),t.clearData(),b.hideWidget(t)):R("Failed to add track.\nThe configuration of this file is not currently supported.");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){R(void 0),c(i-1)}function L(){switch(i){case 0:return!C;case 1:return!(T&&S&&null!==N&&void 0!==N&&N.type&&w);default:return!0}}return(0,G.jsx)("div",{className:l.root,children:(0,G.jsx)(v.Z,{className:l.stepper,activeStep:i,orientation:"vertical",children:ee.map((function(e,t){return(0,G.jsxs)(h.Z,{children:[(0,G.jsx)(x.Z,{children:e}),(0,G.jsxs)(g.Z,{children:[F(t),(0,G.jsxs)("div",{className:l.actionsContainer,children:[(0,G.jsx)(Z.Z,{disabled:0===i,onClick:E,className:l.button,children:"Back"}),(0,G.jsx)(Z.Z,{disabled:L(),variant:"contained",color:"primary",onClick:O,className:l.button,"data-testid":"addTrackNextButton",children:i===ee.length-1?"Add":"Next"})]}),P?(0,G.jsx)("div",{className:l.alertContainer,children:(0,G.jsx)(y.Z,{severity:"error",children:P})}):null]})]},e)}))})})}));var ne=(0,s.observer)((function(e){var t=e.model,n=(0,u.useLocalStorage)("trackSelector-choice","Default"),o=(0,r.Z)(n,2),s=o[0],p=o[1],f=(0,u.getEnv)(t).pluginManager.getElementTypesInGroup("add track workflow"),m=(0,a.Z)({Default:te},Object.fromEntries(f.map((function(e){return[e.name,e.ReactComponent]})))),v=m[s]?s:"Default",h=m[v];return(0,G.jsxs)(G.Fragment,{children:[(0,G.jsxs)(i.Z,{children:[(0,G.jsx)(c.Z,{value:v,onChange:function(e){return p(e.target.value)},children:Object.keys(m).map((function(e){return(0,G.jsx)(l.Z,{value:e,children:e},e)}))}),(0,G.jsx)(d.Z,{children:"Type of add track workflow"})]}),(0,G.jsx)("br",{}),(0,G.jsx)(h,{model:t})]})}))},40506:function(e,t,n){var a=n(7896),r=n(31461),o=n(30969),s=n(81856),i=n(26540),c=n(62221),l=n(2441),d=n(65629),u=n(65394),p=n(37574),f=["className","raised"],m=(0,c.ZP)(d.Z,{name:"MuiCard",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{overflow:"hidden"}})),v=o.forwardRef((function(e,t){var n=(0,l.Z)({props:e,name:"MuiCard"}),o=n.className,c=n.raised,d=void 0!==c&&c,v=(0,r.Z)(n,f),h=(0,a.Z)({},n,{raised:d}),x=function(e){var t=e.classes;return(0,i.Z)({root:["root"]},u.y,t)}(h);return(0,p.jsx)(m,(0,a.Z)({className:(0,s.default)(x.root,o),elevation:d?8:void 0,ref:t,ownerState:h},v))}));t.Z=v},65394:function(e,t,n){n.d(t,{y:function(){return r}});var a=n(2975);function r(e){return(0,a.Z)("MuiCard",e)}var o=(0,n(62746).Z)("MuiCard",["root"]);t.Z=o},65410:function(e,t,n){var a=n(7896),r=n(31461),o=n(30969),s=n(81856),i=n(26540),c=n(62221),l=n(2441),d=n(76512),u=n(37574),p=["className","component"],f=(0,c.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(e,t){return t.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),m=o.forwardRef((function(e,t){var n=(0,l.Z)({props:e,name:"MuiCardContent"}),o=n.className,c=n.component,m=void 0===c?"div":c,v=(0,r.Z)(n,p),h=(0,a.Z)({},n,{component:m}),x=function(e){var t=e.classes;return(0,i.Z)({root:["root"]},d.N,t)}(h);return(0,u.jsx)(f,(0,a.Z)({as:m,className:(0,s.default)(x.root,o),ownerState:h,ref:t},v))}));t.Z=m},76512:function(e,t,n){n.d(t,{N:function(){return r}});var a=n(2975);function r(e){return(0,a.Z)("MuiCardContent",e)}var o=(0,n(62746).Z)("MuiCardContent",["root"]);t.Z=o},77491:function(e,t,n){n.d(t,{Z:function(){return N}});var a=n(68079),r=n(96234),o=n(56666),s=n(31461),i=n(7896),c=n(30969),l=n(81856),d=n(26540),u=n(99853),p=n(62221),f=n(2441),m=n(46827),v=n(63970),h=n(70054),x=n(44121),g=n(43565),Z=n(74262),y={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},b=function(e){var t=e.theme,n=e.ownerState,a=function(e){return y[e]||e}(n.color),r=(0,g.D)(t,"palette.".concat(a),!1)||n.color,o=(0,g.D)(t,"palette.".concat(a,"Channel"));return"vars"in t&&o?"rgba(".concat(o," / 0.4)"):(0,Z.Fq)(r,.4)},j=n(37574),k=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],w=(0,p.ZP)(h.Z,{name:"MuiLink",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["underline".concat((0,u.Z)(n.underline))],"button"===n.component&&t.button]}})((function(e){var t=e.theme,n=e.ownerState;return(0,i.Z)({},"none"===n.underline&&{textDecoration:"none"},"hover"===n.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===n.underline&&(0,i.Z)({textDecoration:"underline"},"inherit"!==n.color&&{textDecorationColor:b({theme:t,ownerState:n})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===n.component&&(0,o.Z)({position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"}},"&.".concat(x.Z.focusVisible),{outline:"auto"}))})),N=c.forwardRef((function(e,t){var n=(0,f.Z)({props:e,name:"MuiLink"}),o=n.className,p=n.color,h=void 0===p?"primary":p,g=n.component,Z=void 0===g?"a":g,b=n.onBlur,N=n.onFocus,C=n.TypographyClasses,T=n.underline,S=void 0===T?"always":T,M=n.variant,D=void 0===M?"inherit":M,A=n.sx,I=(0,s.Z)(n,k),P=(0,m.Z)(),R=P.isFocusVisibleRef,F=P.onBlur,O=P.onFocus,B=P.ref,E=c.useState(!1),L=(0,r.Z)(E,2),G=L[0],U=L[1],W=(0,v.Z)(t,B),_=(0,i.Z)({},n,{color:h,component:Z,focusVisible:G,underline:S,variant:D}),q=function(e){var t=e.classes,n=e.component,a=e.focusVisible,r=e.underline,o={root:["root","underline".concat((0,u.Z)(r)),"button"===n&&"button",a&&"focusVisible"]};return(0,d.Z)(o,x.w,t)}(_);return(0,j.jsx)(w,(0,i.Z)({color:h,className:(0,l.default)(q.root,o),classes:C,component:Z,onBlur:function(e){F(e),!1===R.current&&U(!1),b&&b(e)},onFocus:function(e){O(e),!0===R.current&&U(!0),N&&N(e)},ref:W,ownerState:_,variant:D,sx:[].concat((0,a.Z)(Object.keys(y).includes(h)?[]:[{color:h}]),(0,a.Z)(Array.isArray(A)?A:[A]))},I))}))},44121:function(e,t,n){n.d(t,{w:function(){return r}});var a=n(2975);function r(e){return(0,a.Z)("MuiLink",e)}var o=(0,n(62746).Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);t.Z=o}}]);
//# sourceMappingURL=3692.8ebe8952.chunk.js.map