"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[1846],{9369:(e,t,n)=>{n.d(t,{Z:()=>u});var r=n(66204),a=n(38684),l=n(62613),i=n.n(l),s=n(66159),c=n(43902);const o=(0,a.ZL)()((e=>({fieldValue:{wordBreak:"break-word",maxHeight:300,fontSize:12,padding:e.spacing(.5),overflow:"auto"}})));function u({value:e}){const{classes:t}=o(),n=`${e}`.match(/^https?:\/\//);return r.createElement("div",{className:t.fieldValue},r.isValidElement(e)?e:n?r.createElement(s.Z,{href:`${e}`},`${e}`):r.createElement(c.SanitizedHTML,{html:i()(e)?JSON.stringify(e):String(e)}))}},62335:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(66204),a=n(23540);const l=(0,n(38684).ZL)()((e=>({fieldDescription:{"&:hover":{background:"dark"===e.palette.mode?"#e65100":"yellow"}},fieldName:{wordBreak:"break-all",minWidth:90,borderBottom:"1px solid #0003",fontSize:12,background:e.palette.action.disabledBackground,marginRight:e.spacing(1),padding:e.spacing(.5)}})));function i({description:e,name:t,width:n,prefix:i=[]}){const{classes:s,cx:c}=l(),o=[...i,t].join(".");return e?r.createElement(a.Z,{title:e,placement:"left"},r.createElement("div",{className:c(s.fieldDescription,s.fieldName)},o)):r.createElement("div",{className:s.fieldName,style:{width:n}},o)}},5665:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(66204),a=n(38684),l=n(62335),i=n(9369);const s=(0,a.ZL)()({field:{display:"flex",flexWrap:"wrap"}});function c({name:e,value:t,description:n,prefix:a,width:c}){const{classes:o}=s();return null!=t?r.createElement("div",{className:o.field},r.createElement(l.Z,{prefix:a,description:n,name:e,width:c}),r.createElement(i.Z,{value:t})):null}},41846:(e,t,n)=>{n.r(t),n.d(t,{Attributes:()=>W,BaseAttributes:()=>Y,BaseCard:()=>G,BaseCoreDetails:()=>X,FeatureDetails:()=>ee,default:()=>te});var r=n(66204),a=n(76591),l=n(31617),i=n(90228),s=n(80013),c=n(2749),o=n(25063),u=n(38684),m=n(80846),d=n(2266),f=n(31211),p=n(43902),E=n(7146),g=n(94926),h=n(49140),v=n(98621);const b=(0,r.lazy)((()=>n.e(8703).then(n.bind(n,48703)))),x=(0,r.lazy)((()=>n.e(6387).then(n.bind(n,96387)))),y=(0,u.ZL)()((e=>({formControl:{margin:0},container:{marginTop:e.spacing(4),marginBottom:e.spacing(4)}})));function w({model:e,feature:t}){const{classes:n}=y(),[a,l]=(0,r.useState)(!1),[i,s]=(0,r.useState)(!1);return e?r.createElement("div",{className:n.container},r.createElement(E.Z,{variant:"contained",onClick:()=>l(!a)},a?"Hide feature sequence":"Show feature sequence"),r.createElement(g.Z,{className:n.formControl},r.createElement(h.Z,{onClick:()=>s(!0)},r.createElement(v.Z,null))),a?r.createElement(r.Suspense,{fallback:r.createElement(p.LoadingEllipses,null)},r.createElement(x,{key:t.uniqueId,model:e,feature:t})):null,i?r.createElement(r.Suspense,{fallback:r.createElement("div",null)},r.createElement(b,{handleClose:()=>s(!1)})):null):null}var k=n(5665),Z=n(62613),S=n.n(Z),N=n(27282);function L(e,t,n){return[(0,N.Cn)(`${e}`||`${t}`),`${n}`].filter((e=>!!e)).join(" - ")}var O=n(23155),j=n(84081),C=n(39780),_=n(70539),D=n(63754),T=n(62335),$=n(77540);const B=(0,u.ZL)()((e=>({margin:{margin:e.spacing(1),width:"100%"},cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})));function F({value:e,prefix:t,name:n}){const{classes:a}=B(),{ref:l,scrollLeft:i}=(0,$.x)(),[c,o]=(0,r.useState)(!1),u=Object.keys(e[0]).sort(),m=new Set(u),d=Object.entries(e).map((([e,t])=>{const{id:n,...r}=t;return{id:e,identifier:n,...r}}));for(const t of e)for(const e of Object.keys(t))m.add(e);let E;m.has("id")?(m.delete("id"),E=["identifier",...m]):E=[...m];const[g,h]=(0,r.useState)(E.map((e=>(0,f.measureGridWidth)(d.map((t=>t[e]))))));return m.size<u.length+5?r.createElement(r.Fragment,null,r.createElement(T.Z,{prefix:t,name:n}),r.createElement(C.Z,{control:r.createElement(_.Z,{checked:c,onChange:e=>o(e.target.checked)}),label:r.createElement(s.Z,{variant:"body2"},"Show options")}),r.createElement("div",{className:a.margin,ref:l},r.createElement(D.Z,{widths:g,setWidths:h,scrollLeft:i}),r.createElement(O._$,{disableRowSelectionOnClick:!0,rows:d,rowCount:25,rowHeight:25,columnHeaderHeight:35,hideFooter:d.length<25,slots:{toolbar:c?j.n:null},slotProps:{toolbar:{printOptions:{disableToolbarButton:!0}}},columns:E.map(((e,t)=>({field:e,renderCell:e=>{const t=e.value;return r.createElement("div",{className:a.cell},r.createElement(p.SanitizedHTML,{html:(0,f.getStr)(t)}))},width:g[t]})))}))):null}var I=n(9369);const M=(0,u.ZL)()((e=>({field:{display:"flex",flexWrap:"wrap"},fieldSubvalue:{wordBreak:"break-word",maxHeight:300,padding:e.spacing(.5),border:`1px solid ${e.palette.action.selected}`,boxSizing:"border-box",overflow:"auto"}})));function z({name:e,value:t,description:n,prefix:a=[]}){const{classes:l}=M();return 1===t.length?S()(t[0])?r.createElement(W,{attributes:t[0],prefix:[...a,e]}):r.createElement("div",{className:l.field},r.createElement(T.Z,{prefix:a,description:n,name:e}),r.createElement(I.Z,{value:t[0]})):t.every((e=>S()(e)))?r.createElement(r.Fragment,null,t.map(((t,n)=>r.createElement(W,{key:JSON.stringify(t)+"-"+n,attributes:t,prefix:[...a,e+"-"+n]})))):r.createElement("div",{className:l.field},r.createElement(T.Z,{prefix:a,description:n,name:e}),t.map(((e,t)=>r.createElement("div",{key:JSON.stringify(e)+"-"+t,className:l.fieldSubvalue},r.createElement(I.Z,{value:e})))))}const P=(0,u.ZL)()({field:{display:"flex",flexWrap:"wrap"}});function U({value:e,prefix:t,name:n}){const{classes:a}=P(),{uri:l,baseUri:i=""}=e;let s;try{s=new URL(l,i).href}catch(e){s=l}return r.createElement("div",{className:a.field},r.createElement(T.Z,{prefix:t,name:n}),r.createElement(I.Z,{value:s}))}function q(){return q=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q.apply(this,arguments)}const H=170,R=["__jbrowsefmt","length","position","subfeatures","uniqueId","exonFrames","parentId","thickStart","thickEnd"];function W(e){const{attributes:t,omit:n=[],omitSingleLevel:a=[],descriptions:l,formatter:i=(e=>e),hideUris:s,prefix:c=[]}=e,o=new Set([...n,...R,...a]),{__jbrowsefmt:u,...m}=t,d={...m,...u},p=function(e,t){return Math.ceil((0,f.max)(e.map((e=>(0,f.measureText)([...t,e[0]].join("."),12)))))+10}(Object.entries(d).filter((([e,t])=>void 0!==t&&!o.has(e))),c);return r.createElement(r.Fragment,null,Object.entries(d).filter((([e,t])=>void 0!==t&&!o.has(e))).map((([t,n])=>{const a=function(e,t={}){let n=t;return e.forEach((e=>{S()(n)&&(n=n[e])})),"string"==typeof n?n:S()(n)&&"string"==typeof n?.Description?n.Description:void 0}([...c,t],l);if(Array.isArray(n))return n.length>1&&n.every((e=>S()(e)))?r.createElement(F,{key:t,name:t,prefix:c,value:n}):r.createElement(z,{key:t,name:t,value:n,description:a,prefix:c});if(S()(n)){const{omitSingleLevel:a,...i}=e;return(0,f.isUriLocation)(n)?s?null:r.createElement(U,{key:t,name:t,prefix:c,value:n}):r.createElement(W,q({},i,{key:t,attributes:n,descriptions:l,prefix:[...c,t]}))}return r.createElement(k.Z,{key:t,name:t,value:i(n,t),description:a,prefix:c,width:Math.min(p,H)})})))}function A(){return A=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A.apply(this,arguments)}const J=["name","start","end","strand","refName","description","type"],V=(0,u.ZL)()((e=>({expansionPanelDetails:{display:"block",padding:e.spacing(1)},expandIcon:{color:e.palette.tertiary?.contrastText||"#fff"}})));function G({children:e,title:t,defaultExpanded:n=!0}){const{classes:a}=V(),[o,u]=(0,r.useState)(n);return r.createElement(l.Z,{expanded:o,onChange:()=>u((e=>!e)),TransitionProps:{unmountOnExit:!0,timeout:150}},r.createElement(i.Z,{expandIcon:r.createElement(d.Z,{className:a.expandIcon})},r.createElement(s.Z,{variant:"button"}," ",t)),r.createElement(c.Z,{className:a.expansionPanelDetails},e))}function K(e){const{feature:t}=e,n=t.strand,a={"-1":"-",0:"",1:"+"},l=a[n]?`(${a[n]})`:"",i=(0,f.assembleLocString)(t);return r.createElement(r.Fragment,null,`${i} ${l}`)}function Q(e){const{feature:t}=e,n=t,a={...n,...n.__jbrowsefmt},{start:l,end:i}=a,s={...a,length:(c=i-l,c.toLocaleString("en-US"))};var c;return r.createElement(r.Fragment,null,r.createElement(k.Z,{name:"Position",value:r.createElement(K,A({},e,{feature:a}))}),Object.entries({description:"Description",name:"Name",length:"Length",type:"Type"}).map((([e,t])=>[t,s[e]])).filter((([,e])=>null!=e)).map((([e,t])=>r.createElement(k.Z,{key:e,name:e,value:t}))))}const X=e=>{const{title:t="Primary data"}=e;return r.createElement(G,A({},e,{title:t}),r.createElement(Q,e))},Y=e=>{const{feature:t}=e;return r.createElement(G,A({},e,{title:"Attributes"}),r.createElement(W,A({},e,{attributes:t})))};function ee(e){const{omit:t=[],model:n,feature:l,depth:i=0}=e,{maxDepth:c}=n,{mate:u,name:m="",id:d="",type:E="",subfeatures:g,uniqueId:h}=l,v=(0,f.getEnv)(n).pluginManager,b=(0,f.getSession)(n),x=v.evaluateExtensionPoint("Core-extraFeaturePanel",null,{session:b,feature:l,model:n});return r.createElement(G,{title:L(m,d,E)},r.createElement(s.Z,null,"Core details"),r.createElement(Q,e),u?r.createElement(r.Fragment,null,r.createElement(o.Z,null),r.createElement(s.Z,null,"Mate details"),r.createElement(Q,A({},e,{feature:{...u,uniqueId:h+"-mate"}}))):null,r.createElement(o.Z,null),r.createElement(s.Z,null,"Attributes"),r.createElement(W,A({attributes:l},e,{omit:t,omitSingleLevel:J})),r.createElement(a.SV,{FallbackComponent:e=>r.createElement(p.ErrorMessage,{error:e.error})},r.createElement(w,e)),x?r.createElement(r.Fragment,null,r.createElement(o.Z,null),r.createElement(G,{title:x.name},r.createElement(x.Component,e))):null,i<c&&g?.length?r.createElement(G,{title:"Subfeatures",defaultExpanded:i<1},g.map(((e,t)=>r.createElement(ee,{key:JSON.stringify(e),feature:{...e,uniqueId:`${h}_${t}`},model:n,depth:i+1})))):null)}const te=(0,m.observer)((function({model:e}){const{error:t,featureData:n}=e;if(t)return r.createElement(p.ErrorMessage,{error:t});if(!n)return null;const a=JSON.parse(JSON.stringify(n,((e,t)=>void 0===t?null:t)));return l=a,0===Object.keys(l).length?null:r.createElement(ee,{model:e,feature:a});var l}))},27282:(e,t,n)=>{function r(e,t){return e.map((e=>t.slice(e.start,e.end))).join("")}function a(e){return`${e.start}-${e.end}`}function l(e){return e.filter(((e,t,n)=>!t||a(e)!==a(n[t-1])))}function i(e,t){return e.map((e=>({...e,start:t-e.end,end:t-e.start}))).sort(((e,t)=>e.start-t.start))}function s(e,t){if(!e.length)return[];const n=e.at(0),r=e.at(-1),a=t.findIndex((e=>e.end>=n.start&&e.start<=n.start)),l=t.findIndex((e=>e.end>=r.end&&e.start<=r.end)),i=t[l],s=t[a];return[...[...t.slice(0,a),{start:s.start,end:n.start}].map((e=>({...e,type:"five_prime_UTR"}))),...[{start:r.end,end:i.end},...t.slice(l+1)].map((e=>({...e,type:"three_prime_UTR"})))]}function c(e,t){if(!e.length)return[];const n=e.at(0),r=e.at(-1);return[...[{start:t.start,end:n.start}].map((e=>({...e,type:"five_prime_UTR"}))),...[{start:r.end,end:t.end}].map((e=>({...e,type:"three_prime_UTR"})))]}function o(e){return e.length>20?`${e.slice(0,20)}...`:e}n.d(t,{Cn:()=>o,D8:()=>l,Wx:()=>i,ZK:()=>s,mw:()=>c,zo:()=>r})},63754:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(66204),a=n(38684),l=n(72291);const i=(0,a.ZL)()((e=>({resizeBar:{background:e.palette.action.disabledBackground,height:12,position:"relative",overflow:"hidden"},tick:{position:"absolute",height:"100%",pointerEvents:"none",background:e.palette.action.disabled,width:1},hiddenTick:{position:"absolute",height:"100%",width:5}})));function s({left:e,scrollLeft:t,idx:n,onDrag:a,onMouseDown:s}){const{classes:c}=i(),o=(0,r.useCallback)(((e,t)=>a(e,t,n)),[n,a]);return r.createElement(r.Fragment,null,r.createElement(l.Z,{onDrag:o,onMouseDown:s,vertical:!0,className:c.hiddenTick,style:{left:e-t-2.5}}),r.createElement("div",{style:{left:e-t},className:c.tick}))}function c({widths:e,setWidths:t,checkbox:n,scrollLeft:a=0}){const{classes:l}=i(),c=[],[o,u]=(0,r.useState)();let m=n?52:0;for(let t=0;t<e.length;t++){const n=e[t];c[t]=n+m,m+=n}return r.createElement("div",{className:l.resizeBar},c.map(((n,l)=>r.createElement(s,{key:l,onMouseDown:()=>{u([...e])},left:l===c.length-1?n-3:n,onDrag:(n,r,a)=>{const l=[...e];l[a]=Math.max(o[a]-r,50),t(l)},idx:l,scrollLeft:a}))))}},77540:(e,t,n)=>{n.d(t,{x:()=>a});var r=n(66204);function a(){const e=(0,r.useRef)(null),[t,n]=(0,r.useState)(0);return(0,r.useEffect)((()=>{const t=setInterval((()=>{const t=e.current?.querySelector(".MuiDataGrid-virtualScroller");t&&n(t.scrollLeft)}),100);return()=>{clearInterval(t)}}),[]),{ref:e,scrollLeft:t}}}}]);
//# sourceMappingURL=1846.88eda743.chunk.js.map