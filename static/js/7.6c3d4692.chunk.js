(this["webpackJsonp@jbrowse/web"]=this["webpackJsonp@jbrowse/web"]||[]).push([[7],{1586:function(e,t,r){"use strict";(function(e){r.d(t,"d",(function(){return m})),r.d(t,"e",(function(){return b})),r.d(t,"c",(function(){return _})),r.d(t,"b",(function(){return y})),r.d(t,"a",(function(){return k}));var n=r(81),i=r(11),a=r(27),s=r(88),o=r(89),c=r(86),u=r(647),f=r(468),l=r(1587),h=r(652);function d(t){e&&e.nextTick?e.nextTick(t):t()}function v(e){var t=Object(c.a)({encoding:"utf8",parseFeatures:!0,parseDirectives:!1,parseSequences:!0,parseComments:!1,bufferSize:1e3},e);return e.parseAll&&(t.parseFeatures=!0,t.parseDirectives=!0,t.parseComments=!0,t.parseSequences=!0),t}var p=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(n.a)(this,r),(e=t.call(this,{objectMode:!0})).textBuffer="";var s=v(i);e.encoding=i.encoding||"utf8",e.decoder=new f.StringDecoder;var o=e.push.bind(Object(a.a)(e));return e.parser=new l.a({featureCallback:s.parseFeatures?o:void 0,directiveCallback:s.parseDirectives?o:void 0,commentCallback:s.parseComments?o:void 0,sequenceCallback:s.parseSequences?o:void 0,errorCallback:function(t){return e.emit("error",t)},bufferSize:s.bufferSize}),e}return Object(i.a)(r,[{key:"_addLine",value:function(e){e&&this.parser.addLine(e)}},{key:"_nextText",value:function(e){var t=this,r=(this.textBuffer+e).split(/\r?\n/);this.textBuffer=r.pop()||"",r.forEach((function(e){return t._addLine(e)}))}},{key:"_transform",value:function(e,t,r){this._nextText(this.decoder.write(e)),d(r)}},{key:"_flush",value:function(e){this.decoder.end&&this._nextText(this.decoder.end()),null!=this.textBuffer&&this._addLine(this.textBuffer),this.parser.finish(),d(e)}}]),r}(u.Transform);function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new p(e)}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return[];var r=v(t),n=[],i=n.push.bind(n),a=new l.a({featureCallback:r.parseFeatures?i:void 0,directiveCallback:r.parseDirectives?i:void 0,commentCallback:r.parseComments?i:void 0,sequenceCallback:r.parseSequences?i:void 0,bufferSize:1/0,errorCallback:function(e){throw e}});return e.split(/\r?\n/).forEach(a.addLine.bind(a)),a.finish(),n}function _(e){var t=[],r=[];e.forEach((function(e){"sequence"in e?r.push(e):t.push(e)}));var n=t.map(h.formatItem).join("");return r.length&&(n+="##FASTA\n",n+=r.map(h.formatSequence).join("")),n}var C=function(e){Object(s.a)(r,e);var t=Object(o.a)(r);function r(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n.a)(this,r),(e=t.call(this,Object.assign(i,{objectMode:!0}))).linesSinceLastSyncMark=0,e.haveWeEmittedData=!1,e.fastaMode=!1,e.minLinesBetweenSyncMarks=i.minSyncLines||100,e.insertVersionDirective=i.insertVersionDirective||!1,e}return Object(i.a)(r,[{key:"_transform",value:function(e,t,r){var n;if(!this.haveWeEmittedData&&this.insertVersionDirective){var i=Array.isArray(e)?e[0]:e;"directive"in i&&"gff-version"!==i.directive&&this.push("##gff-version 3\n")}if("sequence"in e&&!this.fastaMode&&(this.push("##FASTA\n"),this.fastaMode=!0),n=Array.isArray(e)?e.map(h.formatItem).join(""):Object(h.formatItem)(e),this.push(n),this.linesSinceLastSyncMark>=this.minLinesBetweenSyncMarks)this.push("###\n"),this.linesSinceLastSyncMark=0;else{for(var a=0,s=0;s<n.length;s+=1)"\n"===n[s]&&(a+=1);this.linesSinceLastSyncMark+=a}this.haveWeEmittedData=!0,d(r)}}]),r}(u.Transform);function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new C(e)}function k(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Object(c.a)({insertVersionDirective:!0},r);return new Promise((function(r,i){e.pipe(new C(n)).on("end",(function(){return r(null)})).on("error",i).pipe(t)}))}}).call(this,r(148))},1587:function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var n=r(12),i=r(86),a=r(29),s=r(81),o=r(11),c=r(652),u="child_features",f="derived_features",l=function(){function e(t){Object(s.a)(this,e),this.seqCallback=t,this.currentSequence=void 0}return Object(o.a)(e,[{key:"addLine",value:function(e){var t=/^>\s*(\S+)\s*(.*)/.exec(e);t?(this._flush(),this.currentSequence={id:t[1],sequence:""},t[2]&&(this.currentSequence.description=t[2].trim())):this.currentSequence&&/\S/.test(e)&&(this.currentSequence.sequence+=e.replace(/\s/g,""))}},{key:"_flush",value:function(){this.currentSequence&&this.seqCallback(this.currentSequence)}},{key:"finish",value:function(){this._flush()}}]),e}(),h=function(){function e(t){Object(s.a)(this,e),this.fastaParser=void 0,this.eof=!1,this.lineNumber=0,this._underConstructionTopLevel=[],this._underConstructionById={},this._completedReferences={},this._underConstructionOrphans={};var r=function(){};this.featureCallback=t.featureCallback||r,this.endCallback=t.endCallback||r,this.commentCallback=t.commentCallback||r,this.errorCallback=t.errorCallback||r,this.directiveCallback=t.directiveCallback||r,this.sequenceCallback=t.sequenceCallback||r,this.bufferSize=void 0===t.bufferSize?1e3:t.bufferSize}return Object(o.a)(e,[{key:"addLine",value:function(e){if(this.fastaParser)this.fastaParser.addLine(e);else if(!this.eof)if(this.lineNumber+=1,/^\s*[^#\s>]/.test(e))this._bufferLine(e);else{var t=/^\s*(#+)(.*)/.exec(e);if(t){var r=Object(a.a)(t,2)[1],n=Object(a.a)(t,3)[2];if(3===r.length)this._emitAllUnderConstructionFeatures();else if(2===r.length){var i=c.parseDirective(e);i&&("FASTA"===i.directive?(this._emitAllUnderConstructionFeatures(),this.eof=!0,this.fastaParser=new l(this.sequenceCallback)):this._emitItem(i))}else n=n.replace(/\s*/,""),this._emitItem({comment:n})}else if(/^\s*$/.test(e));else{if(!/^\s*>/.test(e)){var s=e.replace(/\r?\n?$/g,"");throw new Error("GFF3 parse error.  Cannot parse '".concat(s,"'."))}this._emitAllUnderConstructionFeatures(),this.eof=!0,this.fastaParser=new l(this.sequenceCallback),this.fastaParser.addLine(e)}}}},{key:"finish",value:function(){this._emitAllUnderConstructionFeatures(),this.fastaParser&&this.fastaParser.finish(),this.endCallback()}},{key:"_emitItem",value:function(e){Array.isArray(e)?this.featureCallback(e):"directive"in e?this.directiveCallback(e):"comment"in e&&this.commentCallback(e)}},{key:"_enforceBufferSizeLimit",value:function(){for(var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,r=function t(r){r&&Array.isArray(r)&&r[0].attributes&&r[0].attributes.ID&&r[0].attributes.ID[0]&&(r[0].attributes.ID.forEach((function(t){delete e._underConstructionById[t],delete e._completedReferences[t]})),r.forEach((function(e){e.child_features&&e.child_features.forEach((function(e){return t(e)})),e.derived_features&&e.derived_features.forEach((function(e){return t(e)}))})))};this._underConstructionTopLevel.length+t>this.bufferSize;){var n=this._underConstructionTopLevel.shift();n&&(this._emitItem(n),r(n))}}},{key:"_emitAllUnderConstructionFeatures",value:function(){if(this._underConstructionTopLevel.forEach(this._emitItem.bind(this)),this._underConstructionTopLevel=[],this._underConstructionById={},this._completedReferences={},Array.from(Object.values(this._underConstructionOrphans)).length)throw new Error("some features reference other features that do not exist in the file (or in the same '###' scope). ".concat(JSON.stringify(this._underConstructionOrphans)))}},{key:"_bufferLine",value:function(e){var t,r,n,a=this,s=c.parseFeature(e),o=Object(i.a)(Object(i.a)({},s),{},{child_features:[],derived_features:[]}),u=(null===(t=o.attributes)||void 0===t?void 0:t.ID)||[],f=(null===(r=o.attributes)||void 0===r?void 0:r.Parent)||[],l=(null===(n=o.attributes)||void 0===n?void 0:n.Derives_from)||[];if(u.length||f.length||l.length){var h=void 0;u.forEach((function(e){var t=a._underConstructionById[e];t?(t[t.length-1].type!==o.type&&a._parseError('multi-line feature "'.concat(e,'" has inconsistent types: "').concat(o.type,'", "').concat(t[t.length-1].type,'"')),t.push(o),h=t):(h=[o],a._enforceBufferSizeLimit(1),f.length||l.length||a._underConstructionTopLevel.push(h),a._underConstructionById[e]=h,a._resolveReferencesTo(h,e))})),this._resolveReferencesFrom(h||[o],{Parent:f,Derives_from:l},u)}else this._emitItem([o])}},{key:"_resolveReferencesTo",value:function(e,t){var r=this._underConstructionOrphans[t];r&&(e.forEach((function(e){var t;(t=e.child_features).push.apply(t,Object(n.a)(r.Parent))})),e.forEach((function(e){var t;(t=e.derived_features).push.apply(t,Object(n.a)(r.Derives_from))})),delete this._underConstructionOrphans[t])}},{key:"_parseError",value:function(e){this.eof=!0,this.errorCallback("".concat(this.lineNumber,": ").concat(e))}},{key:"_resolveReferencesFrom",value:function(e,t,r){var n=this;function i(e,t,r){var n=e[t];n||(n={},e[t]=n);var i=n[r]||!1;return n[r]=!0,i}t.Parent.forEach((function(t){var a=n._underConstructionById[t];if(a){var s=u;r.filter((function(e){return i(n._completedReferences,e,"Parent,".concat(t))})).length||a.forEach((function(t){t[s].push(e)}))}else{var o=n._underConstructionOrphans[t];o||(o={Parent:[],Derives_from:[]},n._underConstructionOrphans[t]=o),o.Parent.push(e)}})),t.Derives_from.forEach((function(t){var a=n._underConstructionById[t];if(a){var s=f;r.filter((function(e){return i(n._completedReferences,e,"Derives_from,".concat(t))})).length||a.forEach((function(t){t[s].push(e)}))}else{var o=n._underConstructionOrphans[t];o||(o={Parent:[],Derives_from:[]},n._underConstructionOrphans[t]=o),o.Derives_from.push(e)}}))}}]),e}()},647:function(e,t,r){e.exports=i;var n=r(466).EventEmitter;function i(){n.call(this)}r(210)(i,n),i.Readable=r(239),i.Writable=r(648),i.Duplex=r(649),i.Transform=r(650),i.PassThrough=r(651),i.Stream=i,i.prototype.pipe=function(e,t){var r=this;function i(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function a(){r.readable&&r.resume&&r.resume()}r.on("data",i),e.on("drain",a),e._isStdio||t&&!1===t.end||(r.on("end",o),r.on("close",c));var s=!1;function o(){s||(s=!0,e.end())}function c(){s||(s=!0,"function"===typeof e.destroy&&e.destroy())}function u(e){if(f(),0===n.listenerCount(this,"error"))throw e}function f(){r.removeListener("data",i),e.removeListener("drain",a),r.removeListener("end",o),r.removeListener("close",c),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",f),r.removeListener("close",f),e.removeListener("close",f)}return r.on("error",u),e.on("error",u),r.on("end",f),r.on("close",f),e.on("close",f),e.emit("pipe",r),e}},648:function(e,t,r){e.exports=r(467)},649:function(e,t,r){e.exports=r(240)},650:function(e,t,r){e.exports=r(239).Transform},651:function(e,t,r){e.exports=r(239).PassThrough},652:function(e,t,r){"use strict";r.r(t),r.d(t,"unescape",(function(){return s})),r.d(t,"escape",(function(){return c})),r.d(t,"escapeColumn",(function(){return u})),r.d(t,"parseAttributes",(function(){return f})),r.d(t,"parseFeature",(function(){return l})),r.d(t,"parseDirective",(function(){return h})),r.d(t,"formatAttributes",(function(){return d})),r.d(t,"formatFeature",(function(){return m})),r.d(t,"formatDirective",(function(){return b})),r.d(t,"formatComment",(function(){return _})),r.d(t,"formatSequence",(function(){return C})),r.d(t,"formatItem",(function(){return y}));var n=r(86),i=r(29),a=r(12);function s(e){return e.replace(/%([0-9A-Fa-f]{2})/g,(function(e,t){return String.fromCharCode(parseInt(t,16))}))}function o(e,t){return String(t).replace(e,(function(e){var t=e.charCodeAt(0).toString(16).toUpperCase().padStart(2,"0");return"%".concat(t)}))}function c(e){return o(/[\n;\r\t=%&,\x00-\x1f\x7f-\xff]/g,e)}function u(e){return o(/[\n\r\t%\x00-\x1f\x7f-\xff]/g,e)}function f(e){if(!e||!e.length||"."===e)return{};var t={};return e.replace(/\r?\n$/,"").split(";").forEach((function(e){var r,n=e.split("=",2);if(n[1]&&n[1].length){n[0]=n[0].trim();var i=t[n[0].trim()];i||(i=[],t[n[0]]=i),(r=i).push.apply(r,Object(a.a)(n[1].split(",").map((function(e){return e.trim()})).map(s)))}})),t}function l(e){var t=e.split("\t").map((function(e){return"."===e||""===e?null:e}));return{seq_id:t[0]&&s(t[0]),source:t[1]&&s(t[1]),type:t[2]&&s(t[2]),start:null===t[3]?null:parseInt(t[3],10),end:null===t[4]?null:parseInt(t[4],10),score:null===t[5]?null:parseFloat(t[5]),strand:t[6],phase:t[7],attributes:null===t[8]?null:f(t[8])}}function h(e){var t=/^\s*##\s*(\S+)\s*(.*)/.exec(e);if(!t)return null;var r=Object(i.a)(t,2)[1],a=Object(i.a)(t,3)[2],s={directive:r};if(a.length&&(a=a.replace(/\r?\n$/,""),s.value=a),"sequence-region"===r){var o=a.split(/\s+/,3);return Object(n.a)(Object(n.a)({},s),{},{seq_id:o[0],start:o[1]&&o[1].replace(/\D/g,""),end:o[2]&&o[2].replace(/\D/g,"")})}if("genome-build"===r){var c=a.split(/\s+/,2),u=Object(i.a)(c,2),f=u[0],l=u[1];return Object(n.a)(Object(n.a)({},s),{},{source:f,buildName:l})}return s}function d(e){var t=[];return Object.entries(e).forEach((function(e){var r,n=Object(i.a)(e,2),a=n[0],s=n[1];s&&(r=s.hasOwnProperty("toString")?c(s.toString()):Array.isArray(s)?s.map(c).join(","):c(s),t.push("".concat(c(a),"=").concat(r)))})),t.length?t.join(";"):"."}function v(e,t){var r=null===e.attributes||void 0===e.attributes?".":d(e.attributes),n=[null===e.seq_id?".":u(e.seq_id),null===e.source?".":u(e.source),null===e.type?".":u(e.type),null===e.start?".":u(e.start),null===e.end?".":u(e.end),null===e.score?".":u(e.score),null===e.strand?".":u(e.strand),null===e.phase?".":u(e.phase),r],i="".concat(n.join("\t"),"\n");return t[i]?"":(t[i]=!0,i)}function p(e,t){if(Array.isArray(e))return e.map((function(e){return p(e,t)})).join("");var r,n=[v(e,t)];return void 0!==(r=e).child_features&&void 0!==r.derived_features&&n.push.apply(n,Object(a.a)(e.child_features.map((function(e){return p(e,t)}))).concat(Object(a.a)(e.derived_features.map((function(e){return p(e,t)}))))),n.join("")}function m(e){return p(e,{})}function b(e){var t="##".concat(e.directive);return e.value&&(t+=" ".concat(e.value)),t+="\n"}function _(e){return"# ".concat(e.comment,"\n")}function C(e){return">".concat(e.id).concat(e.description?" ".concat(e.description):"","\n").concat(e.sequence,"\n")}function y(e){function t(e){return"attributes"in e?m(e):"directive"in e?b(e):"sequence"in e?C(e):"comment"in e?_(e):"# (invalid item found during format)\n"}return Array.isArray(e)?e.map(t):t(e)}},945:function(e,t,r){"use strict";var n=r(1586),i=r(652);t.a={parseStream:n.d,parseStringSync:n.e,formatSync:n.c,formatStream:n.b,formatFile:n.a,util:i}}}]);
//# sourceMappingURL=7.6c3d4692.chunk.js.map