"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[3242],{83242:function(e,t,n){n.r(t),n.d(t,{default:function(){return q}});var r=n(59740),i=n(56666),a=n(33028),s=n(68079),o=n(96234),l=n(30969),c=n(80975),u=n(93717),d=n(24684),f=n(7690),h=n(24940),p=n(51526),v=n(89001),j=n(14956),Z=n(22099),w=n(90550),x=n(81073),g=n(40909),m=n(47762),k=n(22714),y=n(83483),b=n(64501),S=n(32343),C=n(93138),O=n(53033),N=n(28599),T=n(14008),F=n(37574),B=(0,k.Z)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},block:{display:"block"}}}));var L=(0,w.observer)((function(e){var t=e.model,n=e.handleClose,r=e.feature,i=e.viewType,a=B(),s=(0,l.useState)(!0),c=(0,o.Z)(s,2),f=c[0],h=c[1],p=(0,l.useState)(!0),j=(0,o.Z)(p,2),Z=j[0],w=j[1];return(0,F.jsxs)(y.Z,{open:!0,onClose:n,children:[(0,F.jsxs)(b.Z,{children:["Breakpoint split view options",n?(0,F.jsx)(S.Z,{className:a.closeButton,onClick:function(){return n()},children:(0,F.jsx)(T.Z,{})}):null]}),(0,F.jsx)(v.Z,{}),(0,F.jsxs)(C.Z,{children:[(0,F.jsx)(u.Z,{className:a.block,control:(0,F.jsx)(d.Z,{checked:f,onChange:function(){return h((function(e){return!e}))}}),label:"Copy tracks into the new view"}),(0,F.jsx)(u.Z,{className:a.block,control:(0,F.jsx)(d.Z,{checked:Z,onChange:function(){return w((function(e){return!e}))}}),label:"Mirror tracks vertically in vertically stacked view"})]}),(0,F.jsxs)(O.Z,{children:[(0,F.jsx)(N.Z,{onClick:function(){var e=t.view,a=(0,x.getSession)(t);try{var s=i.snapshotFromBreakendFeature(r,e);s.views[0].offsetPx-=e.width/2+100,s.views[1].offsetPx-=e.width/2+100,s.featureData=r;var o=(0,g.getSnapshot)(e.tracks);s.views[0].tracks=o,s.views[1].tracks=Z?o.slice().reverse():o,a.addView("BreakpointSplitView",s)}catch(l){console.error(l),a.notify("".concat(l))}n()},variant:"contained",color:"primary",autoFocus:!0,children:"OK"}),(0,F.jsx)(N.Z,{onClick:function(){return n()},color:"secondary",variant:"contained",children:"Cancel"})]})]})})),D=n(6556),E=["samples"];function A(e){var t=(0,l.useState)({}),n=(0,o.Z)(t,2),r=n[0],h=n[1],p=(0,l.useState)(!1),v=(0,o.Z)(p,2),j=v[0],w=v[1],x=e.feature.samples,g=void 0===x?{}:x,k=Object.entries(g);if(!k.length)return null;var y,b=["sample"].concat((0,s.Z)(Object.keys(k[0][1]))).map((function(e){return{field:e}})),S=[],C=Object.keys(r);try{S=k.map((function(e){return(0,a.Z)((0,a.Z)({},Object.fromEntries(Object.entries(e[1]).map((function(e){return[e[0],String(e[1])]})))),{},{sample:e[0],id:e[0]})})).filter((function(e){return!C.length||C.every((function(t){var n=e[t],i=r[t];return!i||n.match(new RegExp(i,"i"))}))}))}catch(O){y=O}return(0,F.jsxs)(m.BaseCard,(0,a.Z)((0,a.Z)({},e),{},{title:"Samples",children:[y?(0,F.jsx)(c.Z,{color:"error",children:"".concat(y)}):null,(0,F.jsx)(u.Z,{control:(0,F.jsx)(d.Z,{checked:j,onChange:function(){return w((function(e){return!e}))}}),label:"Show sample filters"}),j?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(c.Z,{children:"These filters can use a plain text search or regex style query, e.g. in the genotype field, entering 1 will query for all genotypes that include the first alternate allele e.g. 0|1 or 1|1, entering [1-9]\\d* will find any non-zero allele e.g. 0|2 or 2/33"}),b.map((function(e){var t=e.field;return(0,F.jsx)(f.Z,{placeholder:"Filter ".concat(t),value:r[t]||"",onChange:function(e){return h((0,a.Z)((0,a.Z)({},r),{},(0,i.Z)({},t,e.target.value)))}},"filter-".concat(t))}))]}):null,(0,F.jsx)("div",{style:{height:600,width:"100%",overflow:"auto"},children:(0,F.jsx)(Z.DataGrid,{rows:S,columns:b,rowHeight:20,headerHeight:25,disableSelectionOnClick:!0,disableColumnMenu:!0})})]}))}function P(e){var t,n=e.model,r=e.locStrings,i=e.feature,s=(0,x.getSession)(n),u=(0,g.getEnv)(s).pluginManager,d=(0,l.useState)(!1),f=(0,o.Z)(d,2),p=f[0],v=f[1];try{t=u.getViewType("BreakpointSplitView")}catch(w){}var Z=new j.Z(i);return(0,F.jsxs)(m.BaseCard,(0,a.Z)((0,a.Z)({},e),{},{title:"Breakends",children:[(0,F.jsx)(c.Z,{children:"Link to linear view of breakend endpoints"}),(0,F.jsx)("ul",{children:r.map((function(e){return(0,F.jsx)("li",{children:(0,F.jsx)(h.Z,{href:"#",onClick:function(t){t.preventDefault();var r=n.view;try{if(!r)throw new Error("No view associated with this feature detail panel anymore");var i;null===(i=r.navToLocString)||void 0===i||i.call(r,e)}catch(w){console.error(w),s.notify("".concat(w))}},children:"LGV - ".concat(e)})},"".concat(JSON.stringify(e)))}))}),t?(0,F.jsxs)("div",{children:[(0,F.jsx)(c.Z,{children:"Launch split views with breakend source and target"}),(0,F.jsx)("ul",{children:r.map((function(e){return(0,F.jsx)("li",{children:(0,F.jsx)(h.Z,{href:"#",onClick:function(e){e.preventDefault(),v(!0)},children:"".concat(i.refName,":").concat(i.start," // ").concat(e," (split view)")})},"".concat(JSON.stringify(e)))}))}),p?(0,F.jsx)(L,{model:n,feature:Z,viewType:t,handleClose:function(){v(!1)}}):null]}):null]}))}var q=(0,w.observer)((function(e){var t=e.model,n=t.featureData,i=t.descriptions,s=JSON.parse(JSON.stringify(n)),o=(s.samples,(0,r.Z)(s,E));return(0,F.jsxs)(p.Z,{"data-testid":"variant-side-drawer",children:[(0,F.jsx)(m.FeatureDetails,(0,a.Z)({feature:o,descriptions:(0,a.Z)((0,a.Z)({},{CHROM:"chromosome: An identifier from the reference genome",POS:"position: The reference position, with the 1st base having position 1",ID:"identifier: Semi-colon separated list of unique identifiers where available",REF:"reference base(s): Each base must be one of A,C,G,T,N (case insensitive).",ALT:"alternate base(s): Comma-separated list of alternate non-reference alleles",QUAL:"quality: Phred-scaled quality score for the assertion made in ALT",FILTER:"filter status: PASS if this position has passed all filters, otherwise a semicolon-separated list of codes for filters that fail"}),i)},e)),(0,F.jsx)(v.Z,{}),"breakend"===s.type?(0,F.jsx)(P,{feature:s,locStrings:s.ALT.map((function(e){var t;return(null===(t=(0,D.I)(e))||void 0===t?void 0:t.MatePosition)||""})),model:t}):null,"translocation"===s.type?(0,F.jsx)(P,{feature:s,model:t,locStrings:["".concat(s.INFO.CHR2[0],":").concat(s.INFO.END)]}):null,(0,F.jsx)(A,(0,a.Z)({feature:s},e))]})}))}}]);
//# sourceMappingURL=3242.768a3b72.chunk.js.map