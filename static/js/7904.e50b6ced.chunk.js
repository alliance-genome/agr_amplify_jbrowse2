"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[7904],{28313:function(e,t,a){var r=a(53100).default,n=a(98870).default,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var s=a(28909),o=i(a(32984)),c=i(a(77088)),l=function(){function e(t){var a=t.fill,n=t.cache;if(r(this,e),"function"!==typeof a)throw new TypeError("must pass a fill function");if("object"!==typeof n)throw new TypeError("must pass a cache object");if("function"!==typeof n.get||"function"!==typeof n.set||"function"!==typeof n.delete)throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=n,this.fillCallback=a}return n(e,[{key:"evict",value:function(e,t){this.cache.get(e)===t&&this.cache.delete(e)}},{key:"fill",value:function(e,t,a,r){var n=this,i=new o.default,s=new c.default;s.addCallback(r);var l={aborter:i,promise:this.fillCallback(t,i.signal,(function(e){s.callback(e)})),settled:!1,statusReporter:s,get aborted(){return this.aborter.signal.aborted}};l.aborter.addSignal(a),l.aborter.signal.addEventListener("abort",(function(){l.settled||n.evict(e,l)})),l.promise.then((function(){l.settled=!0}),(function(){l.settled=!0,n.evict(e,l)})).catch((function(e){throw console.error(e),e})),this.cache.set(e,l)}},{key:"has",value:function(e){return this.cache.has(e)}},{key:"get",value:function(t,a,r,n){if(!r&&a instanceof s.AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");var i=this.cache.get(t);return i?i.aborted&&!i.settled?(this.evict(t,i),this.get(t,a,r,n)):i.settled?i.promise:(i.aborter.addSignal(r),i.statusReporter.addCallback(n),e.checkSinglePromise(i.promise,r)):(this.fill(t,a,r,n),e.checkSinglePromise(this.cache.get(t).promise,r))}},{key:"delete",value:function(e){var t=this.cache.get(e);t&&(t.settled||t.aborter.abort(),this.cache.delete(e))}},{key:"clear",value:function(){for(var e=this.cache.keys(),t=0,a=e.next();!a.done;a=e.next())this.delete(a.value),t+=1;return t}}],[{key:"isAbortException",value:function(e){return"AbortError"===e.name||"ERR_ABORTED"===e.code||"AbortError: aborted"===e.message||"Error: aborted"===e.message}},{key:"checkSinglePromise",value:function(e,t){function a(){if(t&&t.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return e.then((function(e){return a(),e}),(function(e){throw a(),e}))}}]),e}();t.default=l},32984:function(e,t,a){var r=a(98870).default,n=a(53100).default;Object.defineProperty(t,"__esModule",{value:!0});var i=a(28909),s=r((function e(){n(this,e)})),o=function(){function e(){n(this,e),this.signals=new Set,this.abortController=new i.AbortController}return r(e,[{key:"addSignal",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new s;if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(t),t.aborted?this.handleAborted(t):"function"===typeof t.addEventListener&&t.addEventListener("abort",(function(){e.handleAborted(t)}))}},{key:"handleAborted",value:function(e){this.signals.delete(e),0===this.signals.size&&this.abortController.abort()}},{key:"signal",get:function(){return this.abortController.signal}},{key:"abort",value:function(){this.abortController.abort()}}]),e}();t.default=o},77088:function(e,t,a){var r=a(53100).default,n=a(98870).default;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){r(this,e),this.callbacks=new Set}return n(e,[{key:"addCallback",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};this.callbacks.add(e),e(this.currentMessage)}},{key:"callback",value:function(e){this.currentMessage=e,this.callbacks.forEach((function(t){t(e)}))}}]),e}();t.default=i},28909:function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.AbortSignal=t.AbortController=void 0;var r=a(82741),n=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof a.g)return a.g;throw new Error("unable to locate global object")},i="undefined"===typeof n().AbortController?r.AbortController:n().AbortController;t.AbortController=i;var s="undefined"===typeof n().AbortController?r.AbortSignal:n().AbortSignal;t.AbortSignal=s},89410:function(e,t,a){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var n=r(a(28313));t.default=n.default},43245:function(e,t,a){var r=a(27609).default,n=a(43681).default,i=a(38636).default,s=a(53100).default,o=a(98870).default,c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s(this,t),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}return o(t,[{key:"_set",value:function(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}},{key:"get",value:function(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){var t=this.oldCache.get(e);return this.oldCache.delete(e),this._set(e,t),t}}},{key:"set",value:function(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}},{key:"has",value:function(e){return this.cache.has(e)||this.oldCache.has(e)}},{key:"peek",value:function(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}},{key:"delete",value:function(e){var t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0}},{key:"keys",value:r().mark((function e(){var t,a,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i(this),e.prev=1,t.s();case 3:if((a=t.n()).done){e.next=9;break}return s=n(a.value,1),o=s[0],e.next=7,o;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"values",value:r().mark((function e(){var t,a,s,o;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i(this),e.prev=1,t.s();case 3:if((a=t.n()).done){e.next=9;break}return s=n(a.value,2),o=s[1],e.next=7,o;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:e,value:r().mark((function e(){var t,a,s,o,c,l,u,h;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=i(this.cache),e.prev=1,t.s();case 3:if((a=t.n()).done){e.next=9;break}return s=a.value,e.next=7,s;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:o=i(this.oldCache),e.prev=18,o.s();case 20:if((c=o.n()).done){e.next=28;break}if(l=c.value,u=n(l,1),h=u[0],this.cache.has(h)){e.next=26;break}return e.next=26,l;case 26:e.next=20;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(18),o.e(e.t1);case 33:return e.prev=33,o.f(),e.finish(33);case 36:case"end":return e.stop()}}),e,this,[[1,11,14,17],[18,30,33,36]])}))},{key:"size",get:function(){var e,t=0,a=i(this.oldCache.keys());try{for(a.s();!(e=a.n()).done;){var r=e.value;this.cache.has(r)||t++}}catch(n){a.e(n)}finally{a.f()}return this._size+t}}]),t}(Symbol.iterator);e.exports=c}}]);
//# sourceMappingURL=7904.e50b6ced.chunk.js.map