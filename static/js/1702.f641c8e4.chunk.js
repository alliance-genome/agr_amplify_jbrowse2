"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[1702],{81702:(e,t,l)=>{l.r(t),l.d(t,{default:()=>A});var n=l(66204),o=l(29520),a=l(7146),r=l(62301),c=l(38684),i=l(31211),s=l(91370),u=l.n(s),d=l(86636),m=l(52940),h=l(11482),g=l(76972),p=l(49140),b=l(25063),E=l(80846),f=l(88496),C=l.n(f),w=l(3206);function v(){return v=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e},v.apply(this,arguments)}const k=(0,c.ZL)()((e=>({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})));function Z(e){return n.createElement(C(),{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]'},n.createElement(d.Z,e))}const S=(0,E.observer)((function(e){const{classes:t}=k(),{title:l,children:o,onClose:a}=e;return n.createElement(m.Z,v({},e,{PaperComponent:Z,"aria-labelledby":"draggable-dialog-title"}),n.createElement(h.Z,null,n.createElement(g.Z,{style:{cursor:"move"},id:"draggable-dialog-title"},l,a?n.createElement(p.Z,{className:t.closeButton,onClick:()=>{a()}},n.createElement(w.Z,null)):null),n.createElement(b.Z,null),o))}));var y=l(23155),M=l(47500),x=l(43022),O=l(92112),T=l(68223),L=l(86987),j=l(22277),H=l(43902);const N=(0,c.ZL)()({cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}}),_=function({rows:e,onChange:t,showTips:l}){const{classes:o}=N(),[r,c]=(0,n.useState)(null),[s,u]=(0,n.useState)([]),{name:d,color:m,baseUri:h,...g}=e[0],[p,b]=(0,n.useState)("blue"),[E,f]=(0,n.useState)({idx:0,field:null});return n.createElement("div",null,n.createElement(a.Z,{disabled:!s.length,onClick:e=>c(e.currentTarget)},"Change color of selected items"),n.createElement(a.Z,{onClick:()=>t((0,x.A1)([...e],s)),disabled:!s.length},n.createElement(j.Z,null),l?"Move selected items up":null),n.createElement(a.Z,{onClick:()=>t((0,x.vi)([...e],s)),disabled:!s.length},n.createElement(L.Z,null),l?"Move selected items down":null),n.createElement(a.Z,{onClick:()=>t((0,x.A1)([...e],s,e.length)),disabled:!s.length},n.createElement(O.Z,null),l?"Move selected items to top":null),n.createElement(a.Z,{onClick:()=>t((0,x.vi)([...e],s,e.length)),disabled:!s.length},n.createElement(T.Z,null),l?"Move selected items to bottom":null),n.createElement(M.ColorPopover,{anchorEl:r,color:p,onChange:l=>{b(l),s.forEach((t=>{const n=e.find((e=>e.name===t));n&&(n.color=l)})),t([...e])},onClose:()=>c(null)}),n.createElement("div",{style:{height:400,width:"100%"}},n.createElement(y._$,{getRowId:e=>e.name,checkboxSelection:!0,disableRowSelectionOnClick:!0,onRowSelectionModelChange:e=>u(e),rows:e,rowHeight:25,columnHeaderHeight:33,columns:[{field:"color",headerName:"Color",renderCell:l=>{const{value:o,id:a}=l;return n.createElement(M.default,{color:o||"blue",onChange:l=>{const n=e.find((e=>e.name===a));n&&(n.color=l),t([...e])}})}},{field:"name",sortingOrder:[null],headerName:"Name",width:(0,i.measureGridWidth)(e.map((e=>e.name)))},...Object.keys(g).map((t=>({field:t,sortingOrder:[null],renderCell:e=>{const{value:t}=e;return n.createElement("div",{className:o.cell},n.createElement(H.SanitizedHTML,{html:(0,i.getStr)(t)}))},width:(0,i.measureGridWidth)(e.map((e=>e[t])))})))],sortModel:[],onSortModelChange:l=>{const n=l[0],o=(E.idx+1)%2,a=n?.field||E.field;f({idx:o,field:a}),t(a?[...e].sort(((e,t)=>{const l=(0,i.getStr)(e[a]),n=(0,i.getStr)(t[a]);return 1===o?l.localeCompare(n):n.localeCompare(l)})):e)}})))},W=(0,c.ZL)()({content:{minWidth:800}});function A({model:e,handleClose:t}){const{classes:l}=W(),{sources:c}=e,[s,d]=(0,n.useState)(u()(c||[])),[m,h]=(0,i.useLocalStorage)("multiwiggle-showTips",!0);return n.createElement(S,{open:!0,onClose:t,maxWidth:"xl",title:"Multi-wiggle color/arrangement editor"},n.createElement(o.Z,{className:l.content},n.createElement(a.Z,{variant:"contained",style:{float:"right"},onClick:()=>h(!m)},m?"Hide tips":"Show tips"),n.createElement("br",null),m?n.createElement(n.Fragment,null,"Helpful tips",n.createElement("ul",null,n.createElement("li",null,"You can select rows in the table with the checkboxes"),n.createElement("li",null,"Multi-select is enabled with shift-click and control-click"),n.createElement("li",null,'The "Move selected items up/down" can re-arrange subtracks'),n.createElement("li",null,"Sorting the data grid itself can also re-arrange subtracks"),n.createElement("li",null,"Changes are applied when you hit Submit"),n.createElement("li",null,"You can click and drag the dialog box to move it on the screen"),n.createElement("li",null,"Columns in the table can be hidden using a vertical '...' menu on the right side of each column"))):null,n.createElement(_,{rows:s,onChange:d,showTips:m})),n.createElement(r.Z,null,n.createElement(a.Z,{variant:"contained",type:"submit",color:"inherit",onClick:()=>{e.clearLayout(),d(e.sources||[])}},"Clear custom settings"),n.createElement(a.Z,{variant:"contained",color:"secondary",onClick:()=>{t(),d([...e.sources||[]])}},"Cancel"),n.createElement(a.Z,{variant:"contained",color:"primary",type:"submit",onClick:()=>{e.setLayout(s),t()}},"Submit")))}},43022:(e,t,l)=>{l.d(t,{A1:()=>a,os:()=>i,vi:()=>r});var n=l(31211),o=l(36349);function a(e,t,l=1){const n=t.map((t=>e.findIndex((e=>e.name===t)))).sort(((e,t)=>e-t));let o=0;for(const t of n){const n=Math.max(o,t-l);n>=o&&e.splice(n,0,e.splice(t,1)[0]),o+=1}return e}function r(e,t,l=1){const n=t.map((t=>e.findIndex((e=>e.name===t)))).sort(((e,t)=>t-e));let o=e.length-1;for(const t of n){const n=Math.min(o,t+l);n<=o&&e.splice(n,0,e.splice(t,1)[0]),o-=1}return e}const c=12.8;function i(e){const{prefersOffset:t}=e,{trackLabels:l}=(0,n.getContainingView)(e),a=(0,n.getContainingTrack)(e),r=(0,o.getConf)(a,"name");return"overlapping"!==l||t?10:(0,n.measureText)(r,c)+100}}}]);
//# sourceMappingURL=1702.f641c8e4.chunk.js.map