"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[1990],{28055:(e,t,n)=>{n.d(t,{A:()=>u});var r=n(7552),a=n(75785),l=n(503),i=n.n(l),s=n(87731),c=n(48735);const o=(0,a.n9)()((e=>({fieldValue:{wordBreak:"break-word",maxHeight:300,fontSize:12,padding:e.spacing(.5),overflow:"auto"}})));function u({value:e}){const{classes:t}=o(),n=`${e}`.match(/^https?:\/\//);return r.createElement("div",{className:t.fieldValue},r.isValidElement(e)?e:n?r.createElement(s.A,{href:`${e}`},`${e}`):r.createElement(c.SanitizedHTML,{html:i()(e)?JSON.stringify(e):String(e)}))}},36441:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(7552),a=n(89003);const l=(0,n(75785).n9)()((e=>({fieldDescription:{"&:hover":{background:"dark"===e.palette.mode?"#e65100":"yellow"}},fieldName:{wordBreak:"break-all",minWidth:90,borderBottom:"1px solid #0003",fontSize:12,background:e.palette.action.disabledBackground,marginRight:e.spacing(1),padding:e.spacing(.5)}})));function i({description:e,name:t,width:n,prefix:i=[]}){const{classes:s,cx:c}=l(),o=[...i,t].join(".");return e?r.createElement(a.A,{title:e,placement:"left"},r.createElement("div",{className:c(s.fieldDescription,s.fieldName)},o)):r.createElement("div",{className:s.fieldName,style:{width:n}},o)}},32106:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(7552),a=n(75785),l=n(36441),i=n(28055);const s=(0,a.n9)()({field:{display:"flex",flexWrap:"wrap"}});function c({name:e,value:t,description:n,prefix:a,width:c}){const{classes:o}=s();return null!=t?r.createElement("div",{className:o.field},r.createElement(l.A,{prefix:a,description:n,name:e,width:c}),r.createElement(i.A,{value:t})):null}},41990:(e,t,n)=>{n.r(t),n.d(t,{Attributes:()=>J,BaseAttributes:()=>ee,BaseCard:()=>Q,BaseCoreDetails:()=>Z,FeatureDetails:()=>te,default:()=>ne});var r=n(7552),a=n(82725),l=n(63011),i=n(41578),s=n(36715),c=n(63165),o=n(24387),u=n(75785),m=n(68446),d=n(6212),f=n(99546),p=n(48735),E=n(48171),h=n(61723),g=n(5401),b=n(7334);const v=(0,r.lazy)((()=>n.e(1).then(n.bind(n,90001)))),x=(0,r.lazy)((()=>n.e(5781).then(n.bind(n,55781)))),y=(0,u.n9)()((e=>({formControl:{margin:0},container:{marginTop:e.spacing(4),marginBottom:e.spacing(4)}}))),w=(0,m.observer)((function({model:e}){const{classes:t}=y(),n=(0,f.getSession)(e);return r.createElement(E.A,{className:t.formControl},r.createElement(h.A,{onClick:()=>n.queueDialog((e=>[v,{handleClose:e}]))},r.createElement(b.A,null)))}));function k({model:e,feature:t}){const{classes:n}=y(),[a,l]=(0,r.useState)(!1);return e?r.createElement("div",{className:n.container},r.createElement(g.A,{variant:"contained",onClick:()=>l(!a)},a?"Hide feature sequence":"Show feature sequence"),r.createElement(w,{model:e}),a?r.createElement(r.Suspense,{fallback:r.createElement(p.LoadingEllipses,null)},r.createElement(x,{key:t.uniqueId,model:e,feature:t})):null):null}var A=n(32106),S=n(503),N=n.n(S),O=n(373);function j(e,t,n){return[(0,O.SX)(`${e}`||`${t}`),`${n}`].filter((e=>!!e)).join(" - ")}var C=n(61131),D=n(76157),_=n(33371),L=n(32808),T=n(98335),$=n(36441),B=n(20194);const F=(0,u.n9)()((e=>({margin:{margin:e.spacing(1),width:"100%"},cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}})));function I({value:e,prefix:t,name:n}){const{classes:a}=F(),{ref:l,scrollLeft:i}=(0,B.X)(),[c,o]=(0,r.useState)(!1),u=Object.keys(e[0]).sort(),m=new Set(u),d=Object.entries(e).map((([e,t])=>{const{id:n,...r}=t;return{id:e,identifier:n,...r}}));for(const t of e)for(const e of Object.keys(t))m.add(e);let E;m.has("id")?(m.delete("id"),E=["identifier",...m]):E=[...m];const[h,g]=(0,r.useState)(E.map((e=>(0,f.measureGridWidth)(d.map((t=>t[e]))))));return m.size<u.length+5?r.createElement(r.Fragment,null,r.createElement($.A,{prefix:t,name:n}),r.createElement(_.A,{control:r.createElement(L.A,{checked:c,onChange:e=>o(e.target.checked)}),label:r.createElement(s.A,{variant:"body2"},"Show options")}),r.createElement("div",{className:a.margin,ref:l},r.createElement(T.A,{widths:h,setWidths:g,scrollLeft:i}),r.createElement(C.zh,{disableRowSelectionOnClick:!0,rows:d,rowCount:25,rowHeight:25,columnHeaderHeight:35,hideFooter:d.length<25,slots:{toolbar:c?D.O:null},slotProps:{toolbar:{printOptions:{disableToolbarButton:!0}}},columns:E.map(((e,t)=>({field:e,renderCell:e=>{const t=e.value;return r.createElement("div",{className:a.cell},r.createElement(p.SanitizedHTML,{html:(0,f.getStr)(t)}))},width:h[t]})))}))):null}var M=n(28055);const z=(0,u.n9)()((e=>({field:{display:"flex",flexWrap:"wrap"},fieldSubvalue:{wordBreak:"break-word",maxHeight:300,padding:e.spacing(.5),border:`1px solid ${e.palette.action.selected}`,boxSizing:"border-box",overflow:"auto"}})));function q({name:e,value:t,description:n,prefix:a=[]}){const{classes:l}=z();return 1===t.length?N()(t[0])?r.createElement(J,{attributes:t[0],prefix:[...a,e]}):r.createElement("div",{className:l.field},r.createElement($.A,{prefix:a,description:n,name:e}),r.createElement(M.A,{value:t[0]})):t.every((e=>N()(e)))?r.createElement(r.Fragment,null,t.map(((t,n)=>r.createElement(J,{key:JSON.stringify(t)+"-"+n,attributes:t,prefix:[...a,e+"-"+n]})))):r.createElement("div",{className:l.field},r.createElement($.A,{prefix:a,description:n,name:e}),t.map(((e,t)=>r.createElement("div",{key:JSON.stringify(e)+"-"+t,className:l.fieldSubvalue},r.createElement(M.A,{value:e})))))}const P=(0,u.n9)()({field:{display:"flex",flexWrap:"wrap"}});function H({value:e,prefix:t,name:n}){const{classes:a}=P(),{uri:l,baseUri:i=""}=e;let s;try{s=new URL(l,i).href}catch(e){s=l}return r.createElement("div",{className:a.field},r.createElement($.A,{prefix:t,name:n}),r.createElement(M.A,{value:s}))}function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R.apply(this,arguments)}const U=170,W=["__jbrowsefmt","length","position","subfeatures","uniqueId","exonFrames","parentId","thickStart","thickEnd"];function J(e){const{attributes:t,omit:n=[],omitSingleLevel:a=[],descriptions:l,formatter:i=(e=>e),hideUris:s,prefix:c=[]}=e,o=new Set([...n,...W,...a]),{__jbrowsefmt:u,...m}=t,d={...m,...u},p=function(e,t){return Math.ceil((0,f.max)(e.map((e=>(0,f.measureText)([...t,e[0]].join("."),12)))))+10}(Object.entries(d).filter((([e,t])=>void 0!==t&&!o.has(e))),c);return r.createElement(r.Fragment,null,Object.entries(d).filter((([e,t])=>void 0!==t&&!o.has(e))).map((([t,n])=>{const a=function(e,t={}){let n=t;return e.forEach((e=>{N()(n)&&(n=n[e])})),"string"==typeof n?n:N()(n)&&"string"==typeof n?.Description?n.Description:void 0}([...c,t],l);if(Array.isArray(n))return n.length>1&&n.every((e=>N()(e)))?r.createElement(I,{key:t,name:t,prefix:c,value:n}):r.createElement(q,{key:t,name:t,value:n,description:a,prefix:c});if(N()(n)){const{omitSingleLevel:a,...i}=e;return(0,f.isUriLocation)(n)?s?null:r.createElement(H,{key:t,name:t,prefix:c,value:n}):r.createElement(J,R({},i,{key:t,attributes:n,descriptions:l,prefix:[...c,t]}))}return r.createElement(A.A,{key:t,name:t,value:i(n,t),description:a,prefix:c,width:Math.min(p,U)})})))}function V(){return V=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V.apply(this,arguments)}const X=["name","start","end","strand","refName","description","type"],G=(0,u.n9)()((e=>({expansionPanelDetails:{display:"block",padding:e.spacing(1)},expandIcon:{color:e.palette.tertiary?.contrastText||"#fff"}})));function Q({children:e,title:t,defaultExpanded:n=!0}){const{classes:a}=G(),[o,u]=(0,r.useState)(n);return r.createElement(l.A,{expanded:o,onChange:()=>u((e=>!e)),TransitionProps:{unmountOnExit:!0,timeout:150}},r.createElement(i.A,{expandIcon:r.createElement(d.A,{className:a.expandIcon})},r.createElement(s.A,{variant:"button"}," ",t)),r.createElement(c.A,{className:a.expansionPanelDetails},e))}function Y(e){const{feature:t}=e,n=t.strand,a={"-1":"-",0:"",1:"+"},l=a[n]?`(${a[n]})`:"",i=(0,f.assembleLocString)(t);return r.createElement(r.Fragment,null,`${i} ${l}`)}function K(e){const{feature:t}=e,n=t,a={...n,...n.__jbrowsefmt},{start:l,end:i}=a,s={...a,length:(0,f.toLocale)(i-l)};return r.createElement(r.Fragment,null,r.createElement(A.A,{name:"Position",value:r.createElement(Y,V({},e,{feature:a}))}),Object.entries({description:"Description",name:"Name",length:"Length",type:"Type"}).map((([e,t])=>[t,s[e]])).filter((([,e])=>null!=e)).map((([e,t])=>r.createElement(A.A,{key:e,name:e,value:t}))))}const Z=e=>{const{title:t="Primary data"}=e;return r.createElement(Q,V({},e,{title:t}),r.createElement(K,e))},ee=e=>{const{feature:t}=e;return r.createElement(Q,V({},e,{title:"Attributes"}),r.createElement(J,V({},e,{attributes:t})))};function te(e){const{omit:t=[],model:n,feature:l,depth:i=0}=e,{maxDepth:c}=n,{mate:u,name:m="",id:d="",type:E="",subfeatures:h,uniqueId:g}=l,b=(0,f.getEnv)(n).pluginManager,v=(0,f.getSession)(n),x=b.evaluateExtensionPoint("Core-extraFeaturePanel",null,{session:v,feature:l,model:n});return r.createElement(Q,{title:j(m,d,E)},r.createElement(s.A,null,"Core details"),r.createElement(K,e),u?r.createElement(r.Fragment,null,r.createElement(o.A,null),r.createElement(s.A,null,"Mate details"),r.createElement(K,V({},e,{feature:{...u,uniqueId:g+"-mate"}}))):null,r.createElement(o.A,null),r.createElement(s.A,null,"Attributes"),r.createElement(J,V({attributes:l},e,{omit:t,omitSingleLevel:X})),r.createElement(a.tH,{FallbackComponent:e=>r.createElement(p.ErrorMessage,{error:e.error})},r.createElement(k,e)),x?r.createElement(r.Fragment,null,r.createElement(o.A,null),r.createElement(Q,{title:x.name},r.createElement(x.Component,e))):null,i<c&&h?.length?r.createElement(Q,{title:"Subfeatures",defaultExpanded:i<1},h.map(((e,t)=>r.createElement(te,{key:JSON.stringify(e),feature:{...e,uniqueId:`${g}_${t}`},model:n,depth:i+1})))):null)}const ne=(0,m.observer)((function({model:e}){const{error:t,featureData:n}=e;if(t)return r.createElement(p.ErrorMessage,{error:t});if(!n)return null;const a=JSON.parse(JSON.stringify(n,((e,t)=>void 0===t?null:t)));return l=a,0===Object.keys(l).length?null:r.createElement(te,{model:e,feature:a});var l}))},373:(e,t,n)=>{function r(e,t){return e.map((e=>t.slice(e.start,e.end))).join("")}function a(e){return`${e.start}-${e.end}`}function l(e){return e.filter(((e,t,n)=>!t||a(e)!==a(n[t-1])))}function i(e,t){return e.map((e=>({...e,start:t-e.end,end:t-e.start}))).sort(((e,t)=>e.start-t.start))}function s(e,t){if(!e.length)return[];const n=e.at(0),r=e.at(-1),a=t.findIndex((e=>e.end>=n.start&&e.start<=n.start)),l=t.findIndex((e=>e.end>=r.end&&e.start<=r.end)),i=t[l],s=t[a];return[...[...t.slice(0,a),{start:s.start,end:n.start}].map((e=>({...e,type:"five_prime_UTR"}))),...[{start:r.end,end:i.end},...t.slice(l+1)].map((e=>({...e,type:"three_prime_UTR"})))]}function c(e,t){if(!e.length)return[];const n=e.at(0),r=e.at(-1);return[...[{start:t.start,end:n.start}].map((e=>({...e,type:"five_prime_UTR"}))),...[{start:r.end,end:t.end}].map((e=>({...e,type:"three_prime_UTR"})))]}function o(e){return e.length>20?`${e.slice(0,20)}...`:e}n.d(t,{Qq:()=>l,SX:()=>o,V4:()=>c,YC:()=>i,h8:()=>s,o9:()=>r})},98335:(e,t,n)=>{n.d(t,{A:()=>c});var r=n(7552),a=n(75785),l=n(66684);const i=(0,a.n9)()((e=>({resizeBar:{background:e.palette.action.disabledBackground,height:12,position:"relative",overflow:"hidden"},tick:{position:"absolute",height:"100%",pointerEvents:"none",background:e.palette.action.disabled,width:1},hiddenTick:{position:"absolute",height:"100%",width:5}})));function s({left:e,scrollLeft:t,idx:n,onDrag:a,onMouseDown:s}){const{classes:c}=i(),o=(0,r.useCallback)(((e,t)=>a(e,t,n)),[n,a]);return r.createElement(r.Fragment,null,r.createElement(l.A,{onDrag:o,onMouseDown:s,vertical:!0,className:c.hiddenTick,style:{left:e-t-2.5}}),r.createElement("div",{style:{left:e-t},className:c.tick}))}function c({widths:e,setWidths:t,checkbox:n,scrollLeft:a=0}){const{classes:l}=i(),c=[],[o,u]=(0,r.useState)();let m=n?52:0;for(let t=0;t<e.length;t++){const n=e[t];c[t]=n+m,m+=n}return r.createElement("div",{className:l.resizeBar},c.map(((n,l)=>r.createElement(s,{key:l,onMouseDown:()=>{u([...e])},left:l===c.length-1?n-3:n,onDrag:(n,r,a)=>{const l=[...e];l[a]=Math.max(o[a]-r,50),t(l)},idx:l,scrollLeft:a}))))}},20194:(e,t,n)=>{n.d(t,{X:()=>a});var r=n(7552);function a(){const e=(0,r.useRef)(null),[t,n]=(0,r.useState)(0);return(0,r.useEffect)((()=>{const t=setInterval((()=>{const t=e.current?.querySelector(".MuiDataGrid-virtualScroller");t&&n(t.scrollLeft)}),100);return()=>{clearInterval(t)}}),[]),{ref:e,scrollLeft:t}}}}]);
//# sourceMappingURL=1990.ae488a84.chunk.js.map