"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[8130],{28130:function(n,e,r){r.r(e),r.d(e,{default:function(){return O}});var t=r(96234),o=r(41867),i=r(51590),a=r(23801),s=r(49133),l=r(78693),c=r(68367),u=r(81108),d=r(89170),m=r(47192),p=r(3762),x=r(31625),f=r(35421),g=r(90872),h=r(95460),v=r(64688),Z=r(1259),j=r(33065),b=r(77573),y=r(77897),w=r(22177),k=r(90947),C=r(55022),S=r(80838),M=(0,o.lazy)((function(){return r.e(4711).then(r.bind(r,14711))})),F=(0,m.ZL)()((function(){return{lockedPluginTooltip:{marginRight:"0.5rem"}}}));function P(){var n=F().classes;return(0,S.jsx)(b.Z,{className:n.lockedPluginTooltip,title:"This plugin was installed by an administrator, you cannot remove it.",children:(0,S.jsx)(k.Z,{})})}var L=(0,p.observer)((function(n){var e,r=n.plugin,a=n.model,s=(0,o.useState)(),l=(0,t.Z)(s,2),u=l[0],d=l[1],m=(0,g.getEnv)(a).pluginManager,p=(0,g.getSession)(a),x=p.jbrowse,f=p.adminMode,h=!!(0,C.uF)(p)&&(null===(e=p.sessionPlugins)||void 0===e?void 0:e.some((function(n){return m.pluginMetadata[r.name].url===n.url})));return(0,S.jsxs)(S.Fragment,{children:[u?(0,S.jsx)(o.Suspense,{fallback:(0,S.jsx)(o.Fragment,{}),children:(0,S.jsx)(M,{plugin:u,onClose:function(n){if(n){var e=m.pluginMetadata[r.name];f?x.removePlugin(e):(0,C.uF)(p)&&p.removeSessionPlugin(e)}d(void 0)}})}):null,(0,S.jsxs)(y.ZP,{children:[f||h?(0,S.jsx)(c.Z,{"data-testid":"removePlugin-".concat(r.name),onClick:function(){return d(r.name)},children:(0,S.jsx)(w.Z,{})}):(0,S.jsx)(P,{}),(0,S.jsx)(i.Z,{children:r.name})]},r.name)]})})),z=(0,p.observer)((function(n){var e=n.pluginManager,r=n.model,t=e.plugins,o=r.filterText,a=t.filter((function(n){var r;return!(null!==(r=e.pluginMetadata[n.name])&&void 0!==r&&r.isCore)}));return(0,S.jsx)(j.Z,{children:a.length>0?a.filter((function(n){return n.name.toLowerCase().includes(o.toLowerCase())})).map((function(n){return(0,S.jsx)(L,{plugin:n,model:r},n.name)})):(0,S.jsx)(i.Z,{children:"No plugins currently installed"})})})),T=r(6743),N=r(45673),I=r(93989),A=r(61633),D=r(61446),E=r(36686),R=r(49553),V=(0,m.ZL)()({card:{margin:"0.5em"},icon:{marginLeft:"0.5em",marginRight:"0.5em"},bold:{fontWeight:600},dataField:{display:"flex",alignItems:"center"}}),B=(0,p.observer)((function(n){var e=n.plugin,r=n.model,s=n.adminMode,l=V().classes,c=(0,g.getSession)(r),u=(0,g.getEnv)(r).pluginManager.runtimePluginDefinitions.some((function(n){return n.url===e.url})),d=(0,o.useState)(!1),m=(0,t.Z)(d,2),p=m[0],f=m[1],h=u||p,v=(0,x.getParent)(r,3).jbrowse;return(0,S.jsxs)(T.Z,{variant:"outlined",className:l.card,children:[(0,S.jsxs)(N.Z,{children:[(0,S.jsx)(i.Z,{variant:"h5",children:(0,S.jsx)(I.Z,{href:"".concat(e.location,"#readme"),target:"_blank",rel:"noopener",children:e.name})}),(0,S.jsxs)("div",{className:l.dataField,children:[(0,S.jsx)(D.Z,{style:{marginRight:"0.5em"}}),(0,S.jsx)(i.Z,{children:e.authors.join(", ")})]}),(0,S.jsx)(i.Z,{className:l.bold,children:"Description:"}),(0,S.jsx)(i.Z,{children:e.description})]}),(0,S.jsx)(A.Z,{children:(0,S.jsx)(a.Z,{variant:"contained",disabled:h,startIcon:u?(0,S.jsx)(R.Z,{}):(0,S.jsx)(E.Z,{}),onClick:function(){s?v.addPlugin({name:e.name,url:e.url}):(0,C.uF)(c)&&c.addSessionPlugin(e),f(!0)},children:u?"Installed":"Install"})})]},e.name)})),W=r(32723),H=r(34795);var _=(0,o.lazy)((function(){return r.e(9322).then(r.bind(r,89322))})),q=(0,m.ZL)()((function(n){return{expandIcon:{color:n.palette.tertiary.contrastText},adminBadge:{borderRadius:3,backgroundColor:n.palette.quaternary.main,padding:"1em",display:"flex",alignContent:"center"},customPluginButton:{margin:"1em auto",display:"flex"}}})),O=(0,p.observer)((function(n){var e=n.model,r=q().classes,m=function(){var n=(0,o.useState)(),e=(0,t.Z)(n,2),r=e[0],i=e[1],a=(0,o.useState)(),s=(0,t.Z)(a,2),l=s[0],c=s[1];return(0,o.useEffect)((function(){(0,H.Z)((0,W.Z)().mark((function n(){var e,r,t;return(0,W.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("https://jbrowse.org/plugin-store/plugins.json");case 3:if((e=n.sent).ok){n.next=9;break}return n.next=7,e.text();case 7:throw r=n.sent,new Error("HTTP ".concat(e.status," fetching plugins: ").concat(r));case 9:return n.next=11,e.json();case 11:t=n.sent,i(t.plugins),n.next=19;break;case 15:n.prev=15,n.t0=n.catch(0),console.error(n.t0),c(n.t0);case 19:case"end":return n.stop()}}),n,null,[[0,15]])})))()}),[]),{plugins:r,error:l}}(),p=m.plugins,j=m.error,b=(0,o.useState)(!1),y=(0,t.Z)(b,2),w=y[0],k=y[1],C=(0,g.getSession)(e).adminMode,M=(0,x.getEnv)(e).pluginManager;return(0,S.jsxs)("div",{children:[C&&(0,S.jsxs)(S.Fragment,{children:[!g.isElectron&&(0,S.jsxs)("div",{className:r.adminBadge,children:[(0,S.jsx)(Z.Z,{style:{marginRight:"0.3em"}}),(0,S.jsxs)(i.Z,{children:["You are using the ",(0,S.jsx)("code",{children:"admin-server"}),". Any changes you make will be saved to your configuration file. You also have the ability to add custom plugins that are not in the store."]})]}),(0,S.jsx)(a.Z,{className:r.customPluginButton,variant:"contained",onClick:function(){return k(!0)},children:"Add custom plugin"}),w?(0,S.jsx)(o.Suspense,{fallback:(0,S.jsx)(o.Fragment,{}),children:(0,S.jsx)(_,{onClose:function(){return k(!1)},model:e})}):null]}),(0,S.jsx)(s.Z,{label:"Filter plugins",value:e.filterText,onChange:function(n){return e.setFilterText(n.target.value)},fullWidth:!0,InputProps:{endAdornment:(0,S.jsx)(l.Z,{position:"end",children:(0,S.jsx)(c.Z,{onClick:function(){return e.clearFilterText()},children:(0,S.jsx)(v.Z,{})})})}}),(0,S.jsxs)(u.Z,{defaultExpanded:!0,children:[(0,S.jsx)(d.Z,{expandIcon:(0,S.jsx)(h.Z,{className:r.expandIcon}),children:(0,S.jsx)(i.Z,{variant:"h5",children:"Installed plugins"})}),(0,S.jsx)("div",{style:{margin:"1em"},children:(0,S.jsx)(z,{pluginManager:M,model:e})})]}),(0,S.jsxs)(u.Z,{defaultExpanded:!0,children:[(0,S.jsx)(d.Z,{expandIcon:(0,S.jsx)(h.Z,{className:r.expandIcon}),children:(0,S.jsx)(i.Z,{variant:"h5",children:"Available plugins"})}),j?(0,S.jsx)(i.Z,{color:"error",children:"".concat(j)}):p?p.filter((function(n){return!(g.isElectron&&n.cjsUrl)&&n.name.toLowerCase().includes(e.filterText.toLowerCase())})).map((function(n){return(0,S.jsx)(B,{plugin:n,model:e,adminMode:!!C},n.name)})):(0,S.jsx)(f.LoadingEllipses,{})]})]})}))},49553:function(n,e,r){var t=r(71600);e.Z=void 0;var o=t(r(80337)),i=r(80838),a=(0,o.default)((0,i.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");e.Z=a},1259:function(n,e,r){var t=r(71600);e.Z=void 0;var o=t(r(80337)),i=r(80838),a=(0,o.default)((0,i.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"InfoOutlined");e.Z=a},90947:function(n,e,r){var t=r(71600);e.Z=void 0;var o=t(r(80337)),i=r(80838),a=(0,o.default)((0,i.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"}),"Lock");e.Z=a},61446:function(n,e,r){var t=r(71600);e.Z=void 0;var o=t(r(80337)),i=r(80838),a=(0,o.default)((0,i.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");e.Z=a},93989:function(n,e,r){r.d(e,{Z:function(){return C}});var t=r(68079),o=r(96234),i=r(56666),a=r(31461),s=r(7896),l=r(41867),c=r(66184),u=r(92705),d=r(9931),m=r(75693),p=r(90293),x=r(62643),f=r(40234),g=r(51590),h=r(31633),v=r(60183),Z=r(71939),j={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},b=function(n){var e=n.theme,r=n.ownerState,t=function(n){return j[n]||n}(r.color),o=(0,v.DW)(e,"palette.".concat(t),!1)||r.color,i=(0,v.DW)(e,"palette.".concat(t,"Channel"));return"vars"in e&&i?"rgba(".concat(i," / 0.4)"):(0,Z.Fq)(o,.4)},y=r(80838),w=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],k=(0,m.ZP)(g.Z,{name:"MuiLink",slot:"Root",overridesResolver:function(n,e){var r=n.ownerState;return[e.root,e["underline".concat((0,d.Z)(r.underline))],"button"===r.component&&e.button]}})((function(n){var e=n.theme,r=n.ownerState;return(0,s.Z)({},"none"===r.underline&&{textDecoration:"none"},"hover"===r.underline&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},"always"===r.underline&&(0,s.Z)({textDecoration:"underline"},"inherit"!==r.color&&{textDecorationColor:b({theme:e,ownerState:r})},{"&:hover":{textDecorationColor:"inherit"}}),"button"===r.component&&(0,i.Z)({position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"}},"&.".concat(h.Z.focusVisible),{outline:"auto"}))})),C=l.forwardRef((function(n,e){var r=(0,p.Z)({props:n,name:"MuiLink"}),i=r.className,m=r.color,g=void 0===m?"primary":m,v=r.component,Z=void 0===v?"a":v,b=r.onBlur,C=r.onFocus,S=r.TypographyClasses,M=r.underline,F=void 0===M?"always":M,P=r.variant,L=void 0===P?"inherit":P,z=r.sx,T=(0,a.Z)(r,w),N=(0,x.Z)(),I=N.isFocusVisibleRef,A=N.onBlur,D=N.onFocus,E=N.ref,R=l.useState(!1),V=(0,o.Z)(R,2),B=V[0],W=V[1],H=(0,f.Z)(e,E),_=(0,s.Z)({},r,{color:g,component:Z,focusVisible:B,underline:F,variant:L}),q=function(n){var e=n.classes,r=n.component,t=n.focusVisible,o=n.underline,i={root:["root","underline".concat((0,d.Z)(o)),"button"===r&&"button",t&&"focusVisible"]};return(0,u.Z)(i,h.w,e)}(_);return(0,y.jsx)(k,(0,s.Z)({color:g,className:(0,c.Z)(q.root,i),classes:S,component:Z,onBlur:function(n){A(n),!1===I.current&&W(!1),b&&b(n)},onFocus:function(n){D(n),!0===I.current&&W(!0),C&&C(n)},ref:H,ownerState:_,variant:L,sx:[].concat((0,t.Z)(Object.keys(j).includes(g)?[]:[{color:g}]),(0,t.Z)(Array.isArray(z)?z:[z]))},T))}))},31633:function(n,e,r){r.d(e,{w:function(){return i}});var t=r(70101),o=r(88498);function i(n){return(0,o.Z)("MuiLink",n)}var a=(0,t.Z)("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);e.Z=a}}]);
//# sourceMappingURL=8130.07fa2a79.chunk.js.map