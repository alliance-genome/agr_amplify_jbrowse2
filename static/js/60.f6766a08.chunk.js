(this["webpackJsonp@jbrowse/web"]=this["webpackJsonp@jbrowse/web"]||[]).push([[60],{1754:function(e,a,t){"use strict";t.r(a);var r=t(86),n=t(83),c=t(29),l=t(80),o=t.n(l),s=t(1),i=t.n(s),d=t(51),p=t(1638),u=t(1692),m=t(1688),f=t(1689),v=t(1691),g=t(1635),b=t(82),y=t(79),h=t(84),k=t(1746),E=t(1661),N=t(1633),w=t(1645),O=t(1687),j=t(85),T=t(105),M=Object(d.a)((function(e){return{spacing:{marginBottom:e.spacing(3)}}}));function S(e){var a,t=e.trackAdapter,r=e.trackType,n=M();return"SNPCoverageAdapter"===t.type?i.a.createElement(p.a,{className:n.spacing},"Selected ",i.a.createElement("code",null,r),". Using adapter"," ",i.a.createElement("code",null,t.type)," with subadapter"," ",i.a.createElement("code",null,null===(a=t.subadapter)||void 0===a?void 0:a.type),". Please enter a track name and, if necessary, update the track type."):i.a.createElement(p.a,{className:n.spacing},"Using adapter ",i.a.createElement("code",null,t.type)," and guessing track type"," ",i.a.createElement("code",null,r),". Please enter a track name and, if necessary, update the track type.")}var x=Object(h.observer)((function(e){var a=e.model,t=M(),r=Object(b.getSession)(a),n=a.trackAdapter,c=Object(j.getEnv)(r).pluginManager.getElementTypesInGroup("adapter");return i.a.createElement(w.a,{className:t.spacing,value:"UNKNOWN"!==(null===n||void 0===n?void 0:n.type)?null===n||void 0===n?void 0:n.type:"",label:"adapterType",helperText:"Select an adapter type",select:!0,fullWidth:!0,onChange:function(e){a.setAdapterHint(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"adapterTypeSelect"}}},c.filter((function(e){var a,t;return!(null!==(a=e.adapterMetadata)&&void 0!==a&&a.hiddenFromGUI)&&!(null!==(t=e.adapterMetadata)&&void 0!==t&&t.category)})).map((function(e){var a,t;return i.a.createElement(N.a,{key:e.name,value:e.name},null!==(a=e.adapterMetadata)&&void 0!==a&&a.displayName?null===(t=e.adapterMetadata)||void 0===t?void 0:t.displayName:e.name)})),function(e){var a="",t=[];return e.forEach((function(e){var r,n,c,l,o,s,d,p;null!==(r=e.adapterMetadata)&&void 0!==r&&r.category&&(a!==(null===(n=e.adapterMetadata)||void 0===n?void 0:n.category)&&(a=null===(o=e.adapterMetadata)||void 0===o?void 0:o.category,t.push(i.a.createElement(E.a,{key:null===(s=e.adapterMetadata)||void 0===s?void 0:s.category,value:null===(d=e.adapterMetadata)||void 0===d?void 0:d.category},null===(p=e.adapterMetadata)||void 0===p?void 0:p.category))),t.push(i.a.createElement(N.a,{key:e.name,value:e.name},null!==(c=e.adapterMetadata)&&void 0!==c&&c.displayName?null===(l=e.adapterMetadata)||void 0===l?void 0:l.displayName:e.name)))})),t}(c.filter((function(e){var a;return!(null!==(a=e.adapterMetadata)&&void 0!==a&&a.hiddenFromGUI)}))))}));function C(e){var a=e.model,t=M();return i.a.createElement(i.a.Fragment,null,i.a.createElement(p.a,{className:t.spacing},"JBrowse was not able to guess the adapter type for this data, but it may be in the list below. If not, you can"," ",i.a.createElement(O.a,{href:"https://github.com/GMOD/jbrowse-components/releases",target:"_blank",rel:"noopener noreferrer"},"check for new releases")," ","of JBrowse to see if they support this data type or"," ",i.a.createElement(O.a,{href:"https://github.com/GMOD/jbrowse-components/issues/new",target:"_blank",rel:"noopener noreferrer"},"file an issue")," ","and add a feature request for this data type."),i.a.createElement(x,{model:a}))}var D=Object(h.observer)((function(e){var a=e.model,t=M(),r=Object(b.getSession)(a),n=a.trackType,c=Object(j.getEnv)(r).pluginManager.getElementTypesInGroup("track");return i.a.createElement(w.a,{className:t.spacing,value:n,label:"trackType",helperText:"Select a track type",select:!0,fullWidth:!0,onChange:function(e){a.setTrackType(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"trackTypeSelect"}}},c.map((function(e){var a=e.name;return i.a.createElement(N.a,{key:a,value:a},a)})))})),A=Object(h.observer)((function(e){var a=e.model,t=Object(b.getSession)(a),r=a.assembly;return i.a.createElement(w.a,{value:r,label:"assemblyName",helperText:"Assembly to which the track will be added",select:!0,fullWidth:!0,onChange:function(e){return a.setAssembly(e.target.value)},SelectProps:{SelectDisplayProps:{"data-testid":"assemblyNameSelect"}}},t.assemblies.map((function(e){return Object(y.readConfObject)(e,"name")})).map((function(e){return i.a.createElement(N.a,{key:e,value:e},e)})))}));var I=Object(h.observer)((function(e){var a=e.model,t=M(),r=a.trackName,n=a.trackAdapter,c=a.trackType,l=a.warningMessage,o=a.adapterHint;return a.unsupported?i.a.createElement(p.a,{className:t.spacing},"This version of JBrowse cannot display data of this type. It is possible, however, that there is a newer version that can display them. You can"," ",i.a.createElement(O.a,{href:"https://github.com/GMOD/jbrowse-components/releases",target:"_blank",rel:"noopener noreferrer"},"check for new releases")," ","of JBrowse or"," ",i.a.createElement(O.a,{href:"https://github.com/GMOD/jbrowse-components/issues/new",target:"_blank",rel:"noopener noreferrer"},"file an issue")," ","and add a feature request for this data type."):(null===n||void 0===n?void 0:n.type)===T.UNKNOWN?i.a.createElement(C,{model:a}):(""===o&&n&&a.setAdapterHint(n.type),null!==n&&void 0!==n&&n.type?i.a.createElement("div",null,n?i.a.createElement(S,{trackAdapter:n,trackType:c}):null,l?i.a.createElement(p.a,{style:{color:"orange"}},l):null,i.a.createElement(w.a,{className:t.spacing,label:"trackName",helperText:"A name for this track",fullWidth:!0,value:r,onChange:function(e){return a.setTrackName(e.target.value)},inputProps:{"data-testid":"trackNameInput"}}),i.a.createElement(x,{model:a}),i.a.createElement(D,{model:a}),i.a.createElement(A,{model:a})):i.a.createElement(p.a,null,"Could not recognize this data type."))})),P=t(108),U=t(1630),B=Object(d.a)((function(e){return{paper:{display:"flex",flexDirection:"column",padding:e.spacing(1)},spacer:{height:e.spacing(8)}}}));var G=Object(h.observer)((function(e){var a=e.model,t=B(),r=Object(j.getRoot)(a);return i.a.createElement(U.a,{className:t.paper},i.a.createElement(P.FileSelector,{name:"Main file",description:"",location:a.trackData,setLocation:a.setTrackData,setName:a.setTrackName,rootModel:r}),i.a.createElement("div",{className:t.spacer}),i.a.createElement(P.FileSelector,{name:"Index file",description:"(Optional) The URL of the index file is automatically inferred from the URL of the main file if it is not supplied.",location:a.indexTrackData,setLocation:a.setIndexTrackData,setName:a.setTrackName,rootModel:r}))})),W=Object(d.a)((function(e){return{root:{marginTop:e.spacing(1)},stepper:{backgroundColor:e.palette.background.default},button:{marginTop:e.spacing(1),marginRight:e.spacing(1)},actionsContainer:{marginBottom:e.spacing(2)},stepContent:{margin:e.spacing(1)},alertContainer:{padding:"".concat(e.spacing(2),"px 0px ").concat(e.spacing(2),"px 0px")}}})),F=["Enter track data","Confirm track type"];a.default=Object(h.observer)((function(e){var a=e.model,t=Object(s.useState)(0),l=Object(c.a)(t,2),d=l[0],h=l[1],E=W(),N=Object(b.getSession)(a),w=a.assembly,O=a.trackAdapter,j=a.trackData,T=a.trackName,M=a.trackType,S=Object(s.useState)(),x=Object(c.a)(S,2),C=x[0],D=x[1];function A(){return P.apply(this,arguments)}function P(){return(P=Object(n.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d===F.length-1){e.next=3;break}return h(d+1),e.abrupt("return");case 3:t="".concat(T.toLowerCase().replace(/ /g,"_"),"-").concat(Date.now()).concat(N.adminMode?"":"-sessionTrack"),n=N.assemblyManager.get(w),O&&"UNKNOWN"!==O.type?(N.addTrackConf({trackId:t,type:M,name:T,assemblyNames:[w],adapter:Object(r.a)(Object(r.a)({},O),{},{sequenceAdapter:Object(y.getConf)(n,["sequence","adapter"])})}),a.view?a.view.showTrack(t):N.notify("Open a new view, or use the track selector in an existing view, to view this track","info"),a.clearData(),N.hideWidget(a)):D("Failed to add track.\nThe configuration of this file is not currently supported.");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){D(void 0),h(d-1)}function B(){switch(d){case 0:return!j;case 1:return!(T&&M&&null!==O&&void 0!==O&&O.type&&w);default:return!0}}return i.a.createElement("div",{className:E.root},i.a.createElement(u.a,{className:E.stepper,activeStep:d,orientation:"vertical"},F.map((function(e,t){return i.a.createElement(m.a,{key:e},i.a.createElement(f.a,null,e),i.a.createElement(v.a,null,function(e){switch(e){case 0:return i.a.createElement(G,{model:a});case 1:return i.a.createElement(I,{model:a});default:return i.a.createElement(p.a,null,"Unknown step")}}(t),i.a.createElement("div",{className:E.actionsContainer},i.a.createElement(g.a,{disabled:0===d,onClick:U,className:E.button},"Back"),i.a.createElement(g.a,{disabled:B(),variant:"contained",color:"primary",onClick:A,className:E.button,"data-testid":"addTrackNextButton"},d===F.length-1?"Add":"Next")),C?i.a.createElement("div",{className:E.alertContainer},i.a.createElement(k.a,{severity:"error"},C)):null))}))))}))}}]);
//# sourceMappingURL=60.f6766a08.chunk.js.map