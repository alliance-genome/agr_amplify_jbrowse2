"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[830],{80830:function(e,n,r){r.r(n),r.d(n,{default:function(){return fe}});var t=r(96234),a=r(68079),o=r(33028),s=r(96902),l=r(99836),i=r(50952),c=r(75695),d=r(35388),u=r(53244),x=r(52),p=r(91188),h=r(4782),v=r(63680),m=r(58666),j=r(59959),f=r(42054),Z=r(2769),g=r(29151),b=r(66519),y=r(66026),C=r(36276),k=r(61809),N=r(55192),T=r(25322),S=r(31091),w=r(5738),L=r(82793),A=r(13655),M=r(80367),I=r(32114),F=r(15996),P=r(6880),E=r(31946),W=r(51467),H=r(77668),O=r(38613),V=r(78581),D=r(44536),_=r(29938),z=(0,h.observer)((function(e){var n=e.slot,r=(0,s.useState)(""),a=(0,t.Z)(r,2),o=a[0],l=a[1],i=(0,s.useState)(!1),c=(0,t.Z)(i,2),d=c[0],u=c[1];return(0,_.jsxs)(_.Fragment,{children:[n.name?(0,_.jsx)(C.Z,{children:n.name}):null,(0,_.jsxs)(O.Z,{disablePadding:!0,children:[n.value.map((function(e,r){return(0,_.jsx)(V.ZP,{disableGutters:!0,children:(0,_.jsx)(b.Z,{value:e,onChange:function(e){return n.setAtIndex(r,e.target.value)},InputProps:{endAdornment:(0,_.jsx)(w.Z,{position:"end",children:(0,_.jsx)(T.Z,{color:"secondary",onClick:function(){return n.removeAtIndex(r)},children:(0,_.jsx)(E.Z,{})})})}})},r)})),d?(0,_.jsx)(V.ZP,{disableGutters:!0,children:(0,_.jsx)(b.Z,{value:o,placeholder:"add new",onChange:function(e){return l(e.target.value)},InputProps:{endAdornment:(0,_.jsx)(w.Z,{position:"end",children:(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(D.Z,{color:"primary",variant:"contained",style:{margin:2},"data-testid":"stringArrayAdd-".concat(n.name),onClick:function(){u(!1),n.add(o),l("")},children:"OK"}),(0,_.jsx)(D.Z,{color:"primary",variant:"contained",style:{margin:2},onClick:function(){u(!1),l("")},children:"Cancel"})]})})}})}):null,(0,_.jsx)(D.Z,{color:"primary",variant:"contained",style:{margin:4},disabled:d,onClick:function(){return u(!0)},children:"Add item"})]}),(0,_.jsx)(L.Z,{children:n.description})]})})),K=r(50543),B=r(56921),U=r(57900),G='Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace',J=(0,p.ZL)()((function(e){return{callbackEditor:{marginTop:"16px",borderBottom:"1px solid ".concat(e.palette.divider),width:"100%",fontFamily:G},textAreaFont:{fontFamily:G},callbackContainer:{width:"100%",overflowX:"auto"},error:{color:"red",fontSize:"0.8em"}}}));var X=(0,h.observer)((function(e){var n=e.slot,r=J().classes,a=(0,s.useState)(n.value),o=(0,t.Z)(a,2),l=o[0],i=o[1],c=(0,s.useState)(),d=(0,t.Z)(c,2),u=d[0],x=d[1],p=(0,f.useDebounce)(l,400);return(0,s.useEffect)((function(){try{var e,r=p.startsWith("jexl:")?p:"jexl:".concat(p);if("jexl:"===r)throw new Error("Empty jexl expression is not valid");(0,B.P)(r,null===(e=(0,v.getEnv)(n).pluginManager)||void 0===e?void 0:e.jexl),n.set(r),x(void 0)}catch(t){console.error({e:t}),x(t)}}),[p,n]),(0,_.jsxs)(_.Fragment,{children:[u?(0,_.jsx)("p",{className:r.error,children:"".concat(u)}):null,(0,_.jsxs)("div",{className:r.callbackContainer,children:[(0,_.jsx)(b.Z,{multiline:!0,className:r.callbackEditor,value:l.startsWith("jexl:")?l.split("jexl:")[1]:l,onChange:function(e){return i(e.target.value)},style:{background:u?"#fdd":void 0},InputProps:{classes:{input:r.textAreaFont}}}),(0,_.jsx)("p",{children:n.description}),(0,_.jsx)(K.Z,{title:(0,_.jsxs)("div",{children:["Callbacks are written in Jexl format. Click to learn more.",(0,_.jsx)("br",{})," Names of available context items: ",n.contextVariable]}),arrow:!0,children:(0,_.jsx)(T.Z,{color:"primary",onClick:function(){var e=window.open("https://github.com/TomFrost/Jexl","_blank","noopener,noreferrer");e&&(e.opener=null)},children:(0,_.jsx)(U.Z,{})})})]})]})})),R=(0,s.lazy)((function(){return Promise.all([r.e(5707),r.e(5335)]).then(r.bind(r,85335))})),q=function(e){var n=e.value,r=void 0===n?"#000":n,a=e.label,l=void 0===a?"":a,i=e.TextFieldProps,c=void 0===i?{}:i,d=e.onChange,u=(0,s.useState)(!1),x=(0,t.Z)(u,2),p=x[0],h=x[1];return(0,_.jsxs)("div",{style:{display:"flex"},children:[(0,_.jsx)(b.Z,(0,o.Z)({value:r,label:l,onClick:function(){return h(!p)},onChange:function(e){return d(e.target.value)}},c)),(0,_.jsx)("div",{style:{marginTop:10},children:(0,_.jsx)(s.Suspense,{fallback:(0,_.jsx)("div",{}),children:(0,_.jsx)(R,{color:r,onChange:function(e){return d(e)}})})})]})};var Q=(0,h.observer)((function(e){var n=e.slot;return(0,_.jsx)(q,{label:n.name,value:n.value,onChange:function(e){return n.set(e)},TextFieldProps:{helperText:n.description,fullWidth:!0}})})),Y=r(49968);function $(e){var n=e.helperText;return(0,_.jsx)(b.Z,(0,o.Z)((0,o.Z)({},e),{},{helperText:(0,_.jsx)(Z.SanitizedHTML,{html:n||""}),FormHelperTextProps:{component:"div"},fullWidth:!0}))}var ee=(0,h.observer)((function(e){var n=e.slot;return(0,_.jsx)($,{label:n.name,helperText:n.description,value:n.value,onChange:function(e){return n.set(e.target.value)}})})),ne=(0,h.observer)((function(e){var n=e.slot;return(0,_.jsx)(b.Z,{label:n.name,helperText:n.description,multiline:!0,value:n.value,onChange:function(e){return n.set(e.target.value)}})})),re=function(){return(0,_.jsx)(y.Z,{children:(0,_.jsx)("path",{d:"M20.41,3C21.8,5.71 22.35,8.84 22,12C21.8,15.16 20.7,18.29 18.83,21L17.3,20C18.91,17.57 19.85,14.8 20,12C20.34,9.2 19.89,6.43 18.7,4L20.41,3M5.17,3L6.7,4C5.09,6.43 4.15,9.2 4,12C3.66,14.8 4.12,17.57 5.3,20L3.61,21C2.21,18.29 1.65,15.17 2,12C2.2,8.84 3.3,5.71 5.17,3M12.08,10.68L14.4,7.45H16.93L13.15,12.45L15.35,17.37H13.09L11.71,14L9.28,17.33H6.76L10.66,12.21L8.53,7.45H10.8L12.08,10.68Z"})})},te=(0,p.ZL)()((function(e){return{card:{marginTop:e.spacing(1)}}})),ae=(0,h.observer)((function(e){var n=e.slot,r=te().classes,a=(0,s.useState)(""),o=(0,t.Z)(a,2),l=o[0],i=o[1];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(C.Z,{children:n.name}),Array.from(n.value,(function(e){var a=(0,t.Z)(e,2),o=a[0],s=a[1];return(0,_.jsxs)(k.Z,{raised:!0,className:r.card,children:[(0,_.jsx)(N.Z,{title:o,action:(0,_.jsx)(T.Z,{color:"secondary",onClick:function(){return n.remove(o)},children:(0,_.jsx)(E.Z,{})})}),(0,_.jsx)(S.Z,{children:(0,_.jsx)(z,{slot:{name:n.name,value:s,description:"Values associated with entry ".concat(o),setAtIndex:function(e,r){return n.setAtKeyIndex(o,e,r)},removeAtIndex:function(e){return n.removeAtKeyIndex(o,e)},add:function(e){return n.addToKey(o,e)}}})})]},o)})),(0,_.jsx)(k.Z,{raised:!0,className:r.card,children:(0,_.jsx)(N.Z,{disableTypography:!0,title:(0,_.jsx)(b.Z,{fullWidth:!0,value:l,placeholder:"add new",onChange:function(e){return i(e.target.value)},InputProps:{endAdornment:(0,_.jsx)(w.Z,{position:"end",children:(0,_.jsx)(T.Z,{disabled:""===l,onClick:function(){n.add(l,[]),i("")},color:"secondary",children:(0,_.jsx)(W.Z,{})})})}})})}),(0,_.jsx)(L.Z,{children:n.description})]})})),oe=(0,h.observer)((function(e){var n=e.slot,r=te().classes,a=(0,s.useState)(""),o=(0,t.Z)(a,2),l=o[0],i=o[1];return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(C.Z,{children:n.name}),Array.from(n.value,(function(e){var a=(0,t.Z)(e,2),o=a[0],s=a[1];return(0,_.jsxs)(k.Z,{raised:!0,className:r.card,children:[(0,_.jsx)(N.Z,{title:o,action:(0,_.jsx)(T.Z,{color:"secondary",onClick:function(){return n.remove(o)},children:(0,_.jsx)(E.Z,{})})}),(0,_.jsx)(S.Z,{children:(0,_.jsx)(se,{slot:{value:s,set:function(e){return n.add(o,e)}}})})]},o)})),(0,_.jsx)(k.Z,{raised:!0,className:r.card,children:(0,_.jsx)(N.Z,{disableTypography:!0,title:(0,_.jsx)(b.Z,{fullWidth:!0,value:l,placeholder:"add new",onChange:function(e){return i(e.target.value)},InputProps:{endAdornment:(0,_.jsx)(w.Z,{position:"end",children:(0,_.jsx)(T.Z,{disabled:""===l,onClick:function(){n.add(l,0),i("")},color:"secondary",children:(0,_.jsx)(W.Z,{})})})}})})}),(0,_.jsx)(L.Z,{children:n.description})]})})),se=(0,h.observer)((function(e){var n=e.slot,r=(0,s.useState)(n.value),a=(0,t.Z)(r,2),o=a[0],l=a[1];return(0,s.useEffect)((function(){var e,r=parseFloat(o);Number.isNaN(r)?null===(e=n.reset)||void 0===e||e.call(n):n.set(r)}),[n,o]),(0,_.jsx)($,{label:n.name,helperText:n.description,value:o,type:"number",onChange:function(e){return l(e.target.value)}})})),le=(0,h.observer)((function(e){var n=e.slot,r=(0,s.useState)(n.value),a=(0,t.Z)(r,2),o=a[0],l=a[1];return(0,s.useEffect)((function(){var e=parseInt(o,10);Number.isNaN(e)||n.set(e)}),[n,o]),(0,_.jsx)($,{label:n.name,helperText:n.description,value:o,type:"number",onChange:function(e){return l(e.target.value)}})})),ie=(0,h.observer)((function(e){var n=e.slot;return(0,_.jsxs)(A.Z,{children:[(0,_.jsx)(M.Z,{label:n.name,control:(0,_.jsx)(I.Z,{checked:n.value,onChange:function(e){return n.set(e.target.checked)}})}),(0,_.jsx)(L.Z,{children:n.description})]})})),ce=(0,h.observer)((function(e){var n=e.slot,r=e.slotSchema,t=(0,v.getPropertyMembers)((0,g.getSubType)(r)),a=(0,g.getUnionSubTypes)((0,g.getUnionSubTypes)((0,g.getSubType)((0,g.getPropertyType)(t,"value")))[1]).map((function(e){return e.value}));return(0,_.jsx)($,{value:n.value,label:n.name,select:!0,helperText:n.description,onChange:function(e){return n.set(e.target.value)},children:a.map((function(e){return(0,_.jsx)(F.Z,{value:e,children:e},e)}))})})),de=(0,h.observer)((function(e){var n,r=e.slot;return(0,_.jsx)(Z.FileSelector,{location:r.value,setLocation:function(e){return r.set(e)},name:r.name,description:r.description,rootModel:null===(n=(0,f.getEnv)(r).pluginManager)||void 0===n?void 0:n.rootModel})})),ue={string:ee,text:ne,fileLocation:de,stringArray:z,stringArrayMap:ae,numberMap:oe,number:se,integer:le,color:Q,stringEnum:ce,boolean:ie,frozen:Y.Z,configRelationships:Y.Z},xe=(0,p.ZL)()((function(e){return{paper:{display:"flex",marginBottom:e.spacing(2),position:"relative"},paperContent:{width:"100%"},slotModeSwitch:{width:24,background:e.palette.secondary.light,display:"flex",justifyContent:"center",alignItems:"center"}}})),pe=(0,h.observer)((function(e){var n=e.slot,r=e.slotSchema,t=xe().classes,a=n.type,o=n.isCallback?X:ue[a];return o||(console.warn("no slot editor defined for ".concat(a,", editing as string")),o=ee),a in ue||console.warn("SlotEditor needs to implement ".concat(a)),(0,_.jsxs)(P.Z,{className:t.paper,children:[(0,_.jsx)("div",{className:t.paperContent,children:(0,_.jsx)(o,{slot:n,slotSchema:r})}),(0,_.jsx)("div",{className:t.slotModeSwitch,children:n.contextVariable.length?(0,_.jsx)(T.Z,{onClick:function(){return n.isCallback?n.convertToValue():n.convertToCallback()},title:"convert to ".concat(n.isCallback?"regular value":"callback"),color:"secondary",children:n.isCallback?(0,_.jsx)(re,{}):(0,_.jsx)(H.Z,{})}):null})]})})),he=(0,h.observer)((function(e){var n=e.typeNameChoices,r=e.slot,t=e.slotName,a=e.onChange,o=xe().classes;return(0,_.jsx)(P.Z,{className:o.paper,children:(0,_.jsx)("div",{className:o.paperContent,children:(0,_.jsx)(b.Z,{value:r.type,label:"Type",select:!0,helperText:"Type of ".concat(t," to use"),fullWidth:!0,onChange:a,children:n.map((function(e){return(0,_.jsx)(F.Z,{value:e,children:e},e)}))})})})})),ve=(0,p.ZL)()((function(e){return{expandIcon:{color:"#fff"},root:{padding:e.spacing(1,3,1,1)},expansionPanelDetails:{display:"block",padding:e.spacing(1)},accordion:{border:"1px solid ".concat(e.palette.text.primary)},noOverflow:{width:"100%",overflowX:"auto"}}})),me=(0,h.observer)((function(e){var n,r=ve().classes,t=e.slotName,p=e.slotSchema,h=e.schema,v=e.slot,f=void 0===v?h[t]:v,Z=e.path,g=void 0===Z?[]:Z;if((0,l.isConfigurationSchemaType)(p)){if(f.length)return f.map((function(n,r){var a="".concat((0,m.singular)(t)," ").concat(r+1);return(0,s.createElement)(me,(0,o.Z)((0,o.Z)({},e),{},{key:a,slot:n,slotName:a}))}));var b=(0,l.getTypeNamesFromExplicitlyTypedUnion)(p);return b.length&&(n=(0,_.jsx)(he,{typeNameChoices:b,slotName:t,slot:f,onChange:function(e){e.target.value!==f.type&&h.setSubschema(t,{type:e.target.value})}})),(0,_.jsxs)(i.Z,{defaultExpanded:!0,className:r.accordion,children:[(0,_.jsx)(c.Z,{expandIcon:(0,_.jsx)(j.Z,{className:r.expandIcon}),children:(0,_.jsx)(d.Z,{children:[].concat((0,a.Z)(g),[t]).join("\u2794")})}),(0,_.jsxs)(u.Z,{className:r.expansionPanelDetails,children:[n,(0,_.jsx)(x.Z,{className:r.noOverflow,children:(0,_.jsx)(je,{schema:f,path:[].concat((0,a.Z)(g),[t])})})]})]})}return(0,l.isConfigurationSlotType)(p)?(0,_.jsx)(pe,{slot:f,slotSchema:p},t):null})),je=(0,h.observer)((function(e){var n=e.schema,r=e.path,a=void 0===r?[]:r,o=(0,v.getMembers)(n).properties;return(0,_.jsx)(_.Fragment,{children:Object.entries(o).map((function(e){var r=(0,t.Z)(e,2),o=r[0],s=r[1];return(0,_.jsx)(me,{slotName:o,slotSchema:s,path:a,schema:n},o)}))})})),fe=(0,h.observer)((function(e){var n=e.model,r=ve().classes,t=n.target,a=t&&(0,l.readConfObject)(t,"trackId"),o=t&&(0,l.readConfObject)(t,"name");return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsxs)(i.Z,{defaultExpanded:!0,className:r.accordion,children:[(0,_.jsx)(c.Z,{expandIcon:(0,_.jsx)(j.Z,{className:r.expandIcon}),children:(0,_.jsx)(d.Z,{children:null!==o&&void 0!==o?o:"Configuration"})}),(0,_.jsx)(u.Z,{className:r.expansionPanelDetails,"data-testid":"configEditor",children:t?(0,_.jsx)(je,{schema:t}):"no target set"})]},a),(0,_.jsx)("div",{style:{height:300}})]})}))}}]);
//# sourceMappingURL=830.9f25aea1.chunk.js.map