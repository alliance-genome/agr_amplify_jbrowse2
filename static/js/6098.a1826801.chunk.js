"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[6098,3565],{86098:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var r=n(96902),o=n(4782),i=n(17867),a=n(27664),s=n(91188),l=n(21308),c=n(96234),d=n(25322),u=n(41590),m=n(30156),h=n(96050),x=n(84533),f=n(56638),g=n(22514),v=n(61210),p=n(46255),b=n(38238),Z=n(23642),j=n(13565),k=n(29938),C=(0,s.ZL)()((function(e){return{controls:{position:"absolute",borderRight:"1px solid ".concat(e.palette.divider),borderBottom:"1px solid ".concat(e.palette.divider),left:0,top:0}}})),y=(0,o.observer)((function(e){var t=e.model,n=C().classes,o=(0,r.useState)(null),i=(0,c.Z)(o,2),s=i[0],l=i[1];return(0,k.jsxs)("div",{className:n.controls,children:[(0,k.jsx)(d.Z,{onClick:t.zoomOutButton,title:t.lockedFitToWindow?"unlock to zoom out":"zoom out",disabled:t.atMaxBpPerPx||t.lockedFitToWindow,children:(0,k.jsx)(m.Z,{})}),(0,k.jsx)(d.Z,{onClick:t.zoomInButton,disabled:t.atMinBpPerPx,title:"zoom in",children:(0,k.jsx)(h.Z,{})}),(0,k.jsx)(d.Z,{onClick:t.rotateCounterClockwiseButton,title:"rotate counter-clockwise",children:(0,k.jsx)(x.Z,{})}),(0,k.jsx)(d.Z,{onClick:t.rotateClockwiseButton,title:"rotate clockwise",children:(0,k.jsx)(f.Z,{})}),(0,k.jsx)(d.Z,{onClick:t.toggleFitToWindowLock,title:t.lockedFitToWindow?"locked model to window size":"unlocked model to zoom further",disabled:t.tooSmallToLock,children:t.lockedFitToWindow?(0,k.jsx)(v.Z,{}):(0,k.jsx)(g.Z,{})}),(0,k.jsx)(d.Z,{onClick:function(e){return l(e.currentTarget)},children:(0,k.jsx)(b.Z,{})}),t.hideTrackSelectorButton?null:(0,k.jsx)(d.Z,{onClick:t.activateTrackSelector,title:"Open track selector","data-testid":"circular_track_select",children:(0,k.jsx)(Z.GD,{})}),s?(0,k.jsx)(u.Z,{anchorEl:s,menuItems:[{label:"Export SVG",icon:p.Z,onClick:function(){(0,a.getSession)(t).queueDialog((function(e){return[j.default,{model:t,handleClose:e}]}))}}],onMenuItemClick:function(e,t){t(),l(null)},open:Boolean(s),onClose:function(){return l(null)}}):null]})})),S=n(80691),w=n(54417),z=n(44536),W=(0,s.ZL)()((function(e){return{importFormContainer:{padding:e.spacing(6)}}})),M=(0,o.observer)((function(e){var t=e.model,n=W().classes,o=(0,a.getSession)(t),s=t.error,l=o.assemblyNames,d=o.assemblyManager,u=(0,r.useState)(l[0]),m=(0,c.Z)(u,2),h=m[0],x=m[1],f=d.get(h),g=l.length?null===f||void 0===f?void 0:f.error:"No configured assemblies",v=(null===f||void 0===f?void 0:f.regions)||[],p=g||s;return(0,k.jsxs)(S.Z,{className:n.importFormContainer,children:[p?(0,k.jsx)(w.ZP,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:(0,k.jsx)(w.ZP,{item:!0,children:(0,k.jsx)(i.ErrorMessage,{error:p})})}):null,(0,k.jsxs)(w.ZP,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:[(0,k.jsx)(w.ZP,{item:!0,children:(0,k.jsx)(i.AssemblySelector,{onChange:function(e){t.setError(void 0),x(e)},session:o,selected:h})}),(0,k.jsx)(w.ZP,{item:!0,children:(0,k.jsx)(z.Z,{disabled:!(null!==v&&void 0!==v&&v.length),onClick:function(){t.setError(void 0),t.setDisplayedRegions(v)},variant:"contained",color:"primary",children:v.length||p?"Open":"Loading..."})})]})]})})),R=(0,s.ZL)()((function(e){return{root:{position:"relative",marginBottom:e.spacing(1),overflow:"hidden"},scroller:{overflow:"auto"}}})),T=(0,o.observer)((function(e){var t=e.model;return(0,k.jsxs)(k.Fragment,{children:[t.staticSlices.map((function(e){return(0,k.jsx)(l.Z,{model:t,slice:e},(0,a.assembleLocString)(e.region.elided?e.region.regions[0]:e.region))})),t.tracks.map((function(e){var n=e.displays[0];return(0,k.jsx)(n.RenderingComponent,{display:n,view:t},n.id)}))]})})),L=(0,o.observer)((function(e){var t=e.model,n=!!t.displayedRegions.length&&!!t.figureWidth&&!!t.figureHeight&&t.initialized,r=!n&&!t.disableImportForm,o=n&&!r;return(0,k.jsx)(k.Fragment,{children:r||t.error?(0,k.jsx)(M,{model:t}):o?(0,k.jsx)(P,{model:t}):null})})),P=(0,o.observer)((function(e){var t=e.model,n=t.width,r=t.height,o=t.id,a=t.offsetRadians,s=t.centerXY,l=t.figureWidth,c=t.figureHeight,d=t.hideVerticalResizeHandle,u=R().classes;return(0,k.jsxs)("div",{className:u.root,style:{width:n,height:r},"data-testid":o,children:[(0,k.jsx)("div",{className:u.scroller,style:{width:n,height:r},children:(0,k.jsx)("svg",{style:{transform:"rotate(".concat(a,"rad)"),transition:"transform 0.5s",transformOrigin:s.map((function(e){return"".concat(e,"px")})).join(" "),position:"absolute",left:0,top:0},width:l,height:c,children:(0,k.jsx)("g",{transform:"translate(".concat(s,")"),children:(0,k.jsx)(T,{model:t})})})}),(0,k.jsx)(y,{model:t}),d?null:(0,k.jsx)(i.ResizeHandle,{onDrag:t.resizeHeight,style:{height:3,position:"absolute",bottom:0,left:0,background:"#ccc",boxSizing:"border-box",borderTop:"1px solid #fafafa"}})]})})),N=L},13565:function(e,t,n){n.r(t),n.d(t,{default:function(){return j}});var r=n(32723),o=n(34795),i=n(96234),a=n(96902),s=n(78888),l=n(35388),c=n(52809),d=n(66519),u=n(15996),m=n(80367),h=n(32114),x=n(99688),f=n(44536),g=n(17867),v=n(27664),p=n(29938);function b(){return(0,p.jsxs)("div",{children:[(0,p.jsx)(s.Z,{size:20,style:{marginRight:20}}),(0,p.jsx)(l.Z,{display:"inline",children:"Creating SVG"})]})}function Z(e,t){return(0,v.useLocalStorage)("svg-"+e,t)}function j(e){var t=e.model,n=e.handleClose,s=(0,v.getSession)(t),j="undefined"!==typeof OffscreenCanvas,k=(0,a.useState)(j),C=(0,i.Z)(k,2),y=C[0],S=C[1],w=(0,a.useState)(!1),z=(0,i.Z)(w,2),W=z[0],M=z[1],R=(0,a.useState)(),T=(0,i.Z)(R,2),L=T[0],P=T[1],N=Z("file","jbrowse.svg"),G=(0,i.Z)(N,2),V=G[0],B=G[1],F=Z("theme",s.themeName||"default"),H=(0,i.Z)(F,2),D=H[0],I=H[1];return(0,p.jsxs)(g.Dialog,{open:!0,onClose:n,title:"Export SVG",children:[(0,p.jsxs)(c.Z,{children:[L?(0,p.jsx)(g.ErrorMessage,{error:L}):W?(0,p.jsx)(b,{}):null,(0,p.jsx)(d.Z,{helperText:"filename",value:V,onChange:function(e){return B(e.target.value)}}),(0,p.jsx)("br",{}),s.allThemes?(0,p.jsx)(d.Z,{select:!0,label:"Theme",value:D,onChange:function(e){return I(e.target.value)},children:Object.entries(s.allThemes()).map((function(e){var t=(0,i.Z)(e,2),n=t[0],r=t[1];return(0,p.jsx)(u.Z,{value:n,children:r.name||"(Unknown name)"},n)}))}):null,j?(0,p.jsx)(m.Z,{control:(0,p.jsx)(h.Z,{checked:y,onChange:function(){return S((function(e){return!e}))}}),label:"Rasterize canvas based tracks? File may be much larger if this is turned off"}):(0,p.jsx)(l.Z,{children:"Note: rasterizing layers not yet supported in this browser, so SVG size may be large"})]}),(0,p.jsxs)(x.Z,{children:[(0,p.jsx)(f.Z,{variant:"contained",color:"secondary",onClick:function(){return n()},children:"Cancel"}),(0,p.jsx)(f.Z,{variant:"contained",color:"primary",type:"submit",onClick:(0,o.Z)((0,r.Z)().mark((function e(){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),P(void 0),e.prev=2,e.next=5,t.exportSvg({rasterizeLayers:y,filename:V,themeName:D});case 5:n(),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(2),console.error(e.t0),P(e.t0),M(!1);case 13:case"end":return e.stop()}}),e,null,[[2,8]])}))),children:"Submit"})]})]})}},21308:function(e,t,n){var r=n(68079),o=(n(96902),n(4782)),i=n(27664),a=n(51632),s=n(88636),l=n(91188),c=n(29938),d=(0,l.ZL)()({rulerLabel:{fontSize:"0.8rem",fontWeight:500,lineHeight:1.6,letterSpacing:"0.0075em"}});function u(e,t,n,o){if(e.flipped){var i=[o,n];n=i[0],o=i[1]}var a=e.bpToXY(n,t),s=e.bpToXY(o,t),l=Math.abs(o-n)/e.bpPerRadian>Math.PI?"1":"0";return["M"].concat((0,r.Z)(a),["A",t,t,"0",l,"1"],(0,r.Z)(s)).join(" ")}var m=(0,o.observer)((function(e){var t=e.model,n=e.slice,o=e.region,a=(0,s.Z)(),l=t.radiusPx+1,d=n.endRadians,u=n.startRadians,m=(0,i.polarToCartesian)(l,u),x=(0,i.polarToCartesian)(l,d),f=(d-u)*l,g=d-u>Math.PI?"1":"0",v=(d+u)/2,p="[".concat(Number(o.regions.length).toLocaleString(),"]");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(h,{text:p,view:t,maxWidthPx:f,radians:v,radiusPx:l,title:"".concat(p," more regions"),color:a.palette.text.primary}),(0,c.jsx)("path",{d:["M"].concat((0,r.Z)(m),["A",l,l,"0",g,"1"],(0,r.Z)(x)).join(" "),stroke:a.palette.text.secondary,strokeWidth:2,strokeDasharray:"2,2",fill:"none"})]})})),h=(0,o.observer)((function(e){var t=e.view,n=e.text,r=e.maxWidthPx,o=e.radians,a=e.radiusPx,s=e.title,l=e.color,u=d().classes,m=(0,i.polarToCartesian)(a+5,o);return n?6.5*n.length<r?(0,c.jsxs)("text",{x:0,y:0,className:u.rulerLabel,textAnchor:"middle",dominantBaseline:"baseline",transform:"translate(".concat(m,") rotate(").concat((0,i.radToDeg)(o)+90,")"),style:{fill:l},children:[n,(0,c.jsx)("title",{children:s||n})]}):r>4?(0,i.radToDeg)(o+t.offsetRadians-Math.PI/2)>=180?(0,c.jsxs)("text",{x:0,y:0,className:u.rulerLabel,textAnchor:"start",dominantBaseline:"middle",transform:"translate(".concat(m,") rotate(").concat((0,i.radToDeg)(o),")"),style:{fill:l},children:[n,(0,c.jsx)("title",{children:s||n})]}):(0,c.jsxs)("text",{x:0,y:0,className:u.rulerLabel,textAnchor:"end",dominantBaseline:"middle",transform:"translate(".concat(m,") rotate(").concat((0,i.radToDeg)(o)+180,")"),style:{fill:l},children:[n,(0,c.jsx)("title",{children:s||n})]}):null:null})),x=(0,o.observer)((function(e){var t,n=e.model,r=e.slice,o=e.region,l=(0,s.Z)(),d=n.radiusPx,m=r.endRadians,x=r.startRadians,f=(m+x)/2,g=(m-x)*d,v=(0,i.getSession)(n).assemblyManager.get(o.assemblyName);if(v&&(t=v.getRefNameColor(o.refName)),t)try{t=(0,a.makeContrasting)(t,l.palette.background.paper)}catch(p){t=l.palette.text.primary}else t=l.palette.text.primary;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(h,{text:o.refName,view:n,maxWidthPx:g,radians:f,radiusPx:d,color:t}),(0,c.jsx)("path",{d:u(r,d+1,o.start,o.end),stroke:t,strokeWidth:2,fill:"none"})]})}));t.Z=(0,o.observer)((function(e){var t=e.model,n=e.slice;return n.region.elided?(0,c.jsx)(m,{model:t,region:n.region,slice:n},(0,i.assembleLocString)(n.region.regions[0])):(0,c.jsx)(x,{region:n.region,model:t,slice:n},(0,i.assembleLocString)(n.region))}))},61210:function(e,t,n){var r=n(71600);t.Z=void 0;var o=r(n(7152)),i=n(29938),a=(0,o.default)((0,i.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"}),"Lock");t.Z=a},22514:function(e,t,n){var r=n(71600);t.Z=void 0;var o=r(n(7152)),i=n(29938),a=(0,o.default)((0,i.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"}),"LockOpen");t.Z=a},84533:function(e,t,n){var r=n(71600);t.Z=void 0;var o=r(n(7152)),i=n(29938),a=(0,o.default)((0,i.jsx)("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z"}),"RotateLeft");t.Z=a},56638:function(e,t,n){var r=n(71600);t.Z=void 0;var o=r(n(7152)),i=n(29938),a=(0,o.default)((0,i.jsx)("path",{d:"M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"}),"RotateRight");t.Z=a},80691:function(e,t,n){n.d(t,{Z:function(){return C}});var r=n(56666),o=n(31461),i=n(7896),a=n(96902),s=n(10017),l=n(16986),c=n(61235),d=n(73674),u=n(86655),m=n(8044),h=n(91221),x=n(29938),f=["className","component","disableGutters","fixed","maxWidth","classes"],g=(0,h.Z)(),v=(0,m.Z)("div",{name:"MuiContainer",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["maxWidth".concat((0,l.Z)(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),p=function(e){return(0,u.Z)({props:e,name:"MuiContainer",defaultTheme:g})};var b=n(70378),Z=n(2252),j=n(53068),k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.createStyledComponent,n=void 0===t?v:t,u=e.useThemeProps,m=void 0===u?p:u,h=e.componentName,g=void 0===h?"MuiContainer":h,b=n((function(e){var t=e.theme,n=e.ownerState;return(0,i.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!n.disableGutters&&(0,r.Z)({paddingLeft:t.spacing(2),paddingRight:t.spacing(2)},t.breakpoints.up("sm"),{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}))}),(function(e){var t=e.theme;return e.ownerState.fixed&&Object.keys(t.breakpoints.values).reduce((function(e,n){var r=n,o=t.breakpoints.values[r];return 0!==o&&(e[t.breakpoints.up(r)]={maxWidth:"".concat(o).concat(t.breakpoints.unit)}),e}),{})}),(function(e){var t=e.theme,n=e.ownerState;return(0,i.Z)({},"xs"===n.maxWidth&&(0,r.Z)({},t.breakpoints.up("xs"),{maxWidth:Math.max(t.breakpoints.values.xs,444)}),n.maxWidth&&"xs"!==n.maxWidth&&(0,r.Z)({},t.breakpoints.up(n.maxWidth),{maxWidth:"".concat(t.breakpoints.values[n.maxWidth]).concat(t.breakpoints.unit)}))})),Z=a.forwardRef((function(e,t){var n=m(e),r=n.className,a=n.component,u=void 0===a?"div":a,h=n.disableGutters,v=void 0!==h&&h,p=n.fixed,Z=void 0!==p&&p,j=n.maxWidth,k=void 0===j?"lg":j,C=(0,o.Z)(n,f),y=(0,i.Z)({},n,{component:u,disableGutters:v,fixed:Z,maxWidth:k}),S=function(e,t){var n=e.classes,r=e.fixed,o=e.disableGutters,i=e.maxWidth,a={root:["root",i&&"maxWidth".concat((0,l.Z)(String(i))),r&&"fixed",o&&"disableGutters"]};return(0,d.Z)(a,(function(e){return(0,c.Z)(t,e)}),n)}(y,g);return(0,x.jsx)(b,(0,i.Z)({as:u,ownerState:y,className:(0,s.Z)(S.root,r),ref:t},C))}));return Z}({createStyledComponent:(0,Z.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:function(e,t){var n=e.ownerState;return[t.root,t["maxWidth".concat((0,b.Z)(String(n.maxWidth)))],n.fixed&&t.fixed,n.disableGutters&&t.disableGutters]}}),useThemeProps:function(e){return(0,j.Z)({props:e,name:"MuiContainer"})}}),C=k}}]);
//# sourceMappingURL=6098.a1826801.chunk.js.map