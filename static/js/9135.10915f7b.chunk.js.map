{"version":3,"file":"static/js/9135.10915f7b.chunk.js","mappings":"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","sources":["../../../plugins/circular-view/src/CircularView/components/Ruler.js","../../../plugins/circular-view/src/CircularView/components/ImportForm.tsx","../../../plugins/circular-view/src/CircularView/components/CircularView.js","../../../node_modules/@material-ui/icons/LockOpen.js","../../../node_modules/@material-ui/icons/LockOutlined.js","../../../node_modules/@material-ui/icons/RotateLeft.js","../../../node_modules/@material-ui/icons/RotateRight.js"],"sourcesContent":["import React from 'react'\nimport { observer } from 'mobx-react'\nimport {\n  getSession,\n  polarToCartesian,\n  radToDeg,\n  assembleLocString,\n} from '@jbrowse/core/util'\nimport { makeContrasting } from '@jbrowse/core/util/color'\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles({\n  rulerLabel: {\n    fontSize: '0.8rem',\n    fontWeight: 500,\n    lineHeight: 1.6,\n    letterSpacing: '0.0075em',\n  },\n})\n\nfunction sliceArcPath(slice, radiusPx, startBase, endBase) {\n  // A rx ry x-axis-rotation large-arc-flag sweep-flag x y\n  if (slice.flipped) {\n    ;[startBase, endBase] = [endBase, startBase]\n  }\n  const startXY = slice.bpToXY(startBase, radiusPx)\n  const endXY = slice.bpToXY(endBase, radiusPx)\n  const largeArc =\n    Math.abs(endBase - startBase) / slice.bpPerRadian > Math.PI ? '1' : '0'\n  const sweepFlag = '1'\n  return [\n    'M',\n    ...startXY,\n    'A',\n    radiusPx,\n    radiusPx,\n    '0',\n    largeArc,\n    sweepFlag,\n    ...endXY,\n  ].join(' ')\n}\n\nconst ElisionRulerArc = observer(({ model, slice }) => {\n  const theme = useTheme()\n  const { radiusPx: modelRadiusPx } = model\n  const radiusPx = modelRadiusPx + 1\n  const { endRadians, startRadians, region } = slice\n  const startXY = polarToCartesian(radiusPx, startRadians)\n  const endXY = polarToCartesian(radiusPx, endRadians)\n  const widthPx = (endRadians - startRadians) * radiusPx\n  const largeArc = endRadians - startRadians > Math.PI ? '1' : '0'\n  // TODO: draw the elision\n  const centerRadians = (endRadians + startRadians) / 2\n  const regionCountString = `[${Number(\n    region.regions.length,\n  ).toLocaleString()}]`\n  return (\n    <>\n      <RulerLabel\n        text={regionCountString}\n        view={model}\n        maxWidthPx={widthPx}\n        radians={centerRadians}\n        radiusPx={radiusPx}\n        title={`${Number(region.regions.length).toLocaleString()} more regions`}\n        color={theme.palette.text.primary}\n      />\n      <path\n        d={[\n          'M',\n          ...startXY,\n          'A',\n          radiusPx,\n          radiusPx,\n          '0',\n          largeArc,\n          '1',\n          ...endXY,\n        ].join(' ')}\n        stroke={theme.palette.text.secondary}\n        strokeWidth={2}\n        strokeDasharray=\"2,2\"\n        fill=\"none\"\n      />\n    </>\n  )\n})\n\nconst RulerLabel = observer(\n  ({ view, text, maxWidthPx, radians, radiusPx, title, color }) => {\n    const classes = useStyles()\n    const textXY = polarToCartesian(radiusPx + 5, radians)\n    if (!text) {\n      return null\n    }\n\n    if (text.length * 6.5 < maxWidthPx) {\n      // text is rotated parallel to the ruler arc\n      return (\n        <text\n          x={0}\n          y={0}\n          className={classes.rulerLabel}\n          textAnchor=\"middle\"\n          dominantBaseline=\"baseline\"\n          transform={`translate(${textXY}) rotate(${radToDeg(radians) + 90})`}\n          style={{ fill: color }}\n        >\n          {text}\n          <title>{title || text}</title>\n        </text>\n      )\n    }\n    if (maxWidthPx > 4) {\n      // text is rotated perpendicular to the ruler arc\n      const overallRotation = radToDeg(\n        radians + view.offsetRadians - Math.PI / 2,\n      )\n      if (overallRotation >= 180) {\n        return (\n          <text\n            x={0}\n            y={0}\n            className={classes.rulerLabel}\n            textAnchor=\"start\"\n            dominantBaseline=\"middle\"\n            transform={`translate(${textXY}) rotate(${radToDeg(radians)})`}\n            style={{ fill: color }}\n          >\n            {text}\n            <title>{title || text}</title>\n          </text>\n        )\n      }\n      return (\n        <text\n          x={0}\n          y={0}\n          className={classes.rulerLabel}\n          textAnchor=\"end\"\n          dominantBaseline=\"middle\"\n          transform={`translate(${textXY}) rotate(${radToDeg(radians) + 180})`}\n          style={{ fill: color }}\n        >\n          {text}\n          <title>{title || text}</title>\n        </text>\n      )\n    }\n\n    // if you get here there is no room for the text at all\n    return null\n  },\n)\n\nconst RegionRulerArc = observer(({ model, slice }) => {\n  const theme = useTheme()\n  const { radiusPx } = model\n  const { region, endRadians, startRadians } = slice\n  const centerRadians = (endRadians + startRadians) / 2\n  const widthPx = (endRadians - startRadians) * radiusPx\n  const session = getSession(model)\n  let color\n  const assembly = session.assemblyManager.get(slice.region.assemblyName)\n  if (assembly) {\n    color = assembly.getRefNameColor(region.refName)\n  }\n  if (color) {\n    try {\n      color = makeContrasting(color, theme.palette.background.paper)\n    } catch (error) {\n      color = theme.palette.text.primary\n    }\n  } else {\n    color = theme.palette.text.primary\n  }\n\n  // TODO: slice flipping\n  return (\n    <>\n      <RulerLabel\n        text={region.refName}\n        view={model}\n        maxWidthPx={widthPx}\n        radians={centerRadians}\n        radiusPx={radiusPx}\n        color={color}\n      />\n      <path\n        d={sliceArcPath(slice, radiusPx + 1, region.start, region.end)}\n        stroke={color}\n        strokeWidth={2}\n        fill=\"none\"\n      >\n        <title>{region.refName}</title>\n      </path>\n    </>\n  )\n})\n\nconst CircularRuler = observer(function Ruler({ model, slice }) {\n  if (slice.region.elided) {\n    return (\n      <ElisionRulerArc\n        key={assembleLocString(slice.region.regions[0])}\n        model={model}\n        slice={slice}\n      />\n    )\n  }\n  return (\n    <RegionRulerArc\n      key={assembleLocString(slice.region)}\n      model={model}\n      slice={slice}\n    />\n  )\n})\n\nexport default CircularRuler\n","import React, { useState } from 'react'\nimport { Button, Container, Grid, makeStyles } from '@material-ui/core'\nimport { observer } from 'mobx-react'\nimport { getSession } from '@jbrowse/core/util'\nimport ErrorMessage from '@jbrowse/core/ui/ErrorMessage'\nimport AssemblySelector from '@jbrowse/core/ui/AssemblySelector'\n\nconst useStyles = makeStyles(theme => ({\n  importFormContainer: {\n    marginBottom: theme.spacing(4),\n  },\n}))\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst ImportForm = observer(({ model }: { model: any }) => {\n  const classes = useStyles()\n  const session = getSession(model)\n  const { error: modelError } = model\n  const { assemblyNames, assemblyManager } = session\n  const [selectedAsm, setSelectedAsm] = useState(assemblyNames[0])\n  const [error, setError] = useState<Error | undefined>(modelError)\n  const assembly = assemblyManager.get(selectedAsm)\n  const assemblyError = assemblyNames.length\n    ? assembly?.error\n    : 'No configured assemblies'\n  const regions = assembly?.regions || []\n  const err = assemblyError || error\n\n  return (\n    <Container className={classes.importFormContainer}>\n      {err ? (\n        <Grid container spacing={1} justifyContent=\"center\" alignItems=\"center\">\n          <Grid item>\n            <ErrorMessage error={err} />\n          </Grid>\n        </Grid>\n      ) : null}\n      <Grid container spacing={1} justifyContent=\"center\" alignItems=\"center\">\n        <Grid item>\n          <AssemblySelector\n            onChange={val => {\n              setError(undefined)\n              setSelectedAsm(val)\n            }}\n            session={session}\n            selected={selectedAsm}\n          />\n        </Grid>\n\n        <Grid item>\n          <Button\n            disabled={!regions?.length}\n            onClick={() => model.setDisplayedRegions(regions)}\n            variant=\"contained\"\n            color=\"primary\"\n          >\n            {regions.length ? 'Open' : 'Loadingâ€¦'}\n          </Button>\n        </Grid>\n      </Grid>\n    </Container>\n  )\n})\n\nexport default ImportForm\n","import React from 'react'\nimport { observer } from 'mobx-react'\nimport { ResizeHandle, ErrorMessage } from '@jbrowse/core/ui'\nimport { assembleLocString } from '@jbrowse/core/util'\nimport { IconButton, makeStyles } from '@material-ui/core'\nimport { grey } from '@material-ui/core/colors'\n\n// icons\nimport ZoomOut from '@material-ui/icons/ZoomOut'\nimport ZoomIn from '@material-ui/icons/ZoomIn'\nimport RotateLeft from '@material-ui/icons/RotateLeft'\nimport RotateRight from '@material-ui/icons/RotateRight'\nimport LockOutline from '@material-ui/icons/LockOutlined'\nimport LockOpen from '@material-ui/icons/LockOpen'\nimport { TrackSelector as TrackSelectorIcon } from '@jbrowse/core/ui/Icons'\n\n// locals\nimport Ruler from './Ruler'\nimport ImportForm from './ImportForm'\n\nconst dragHandleHeight = 3\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    position: 'relative',\n    marginBottom: theme.spacing(1),\n    overflow: 'hidden',\n    background: 'white',\n  },\n  scroller: {\n    overflow: 'auto',\n  },\n  sliceRoot: {\n    background: 'none',\n    // background: theme.palette.background.paper,\n    boxSizing: 'content-box',\n    display: 'block',\n  },\n  iconButton: {\n    padding: '4px',\n    margin: '0 2px 0 2px',\n  },\n  controls: {\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n    position: 'absolute',\n    background: grey[200],\n    boxSizing: 'border-box',\n    borderRight: '1px solid #a2a2a2',\n    borderBottom: '1px solid #a2a2a2',\n    left: 0,\n    top: 0,\n  },\n  importFormContainer: {\n    marginBottom: theme.spacing(4),\n  },\n}))\n\nconst Slices = observer(({ model }) => {\n  return (\n    <>\n      {model.staticSlices.map(slice => (\n        <Ruler\n          key={assembleLocString(\n            slice.region.elided ? slice.region.regions[0] : slice.region,\n          )}\n          model={model}\n          slice={slice}\n        />\n      ))}\n      {model.tracks.map(track => {\n        const display = track.displays[0]\n        return (\n          <display.RenderingComponent\n            key={display.id}\n            display={display}\n            view={model}\n          />\n        )\n      })}\n    </>\n  )\n})\n\nconst Controls = observer(({ model, showingFigure }) => {\n  const classes = useStyles()\n  return (\n    <div className={classes.controls}>\n      <IconButton\n        onClick={model.zoomOutButton}\n        className={classes.iconButton}\n        title={model.lockedFitToWindow ? 'unlock to zoom out' : 'zoom out'}\n        disabled={\n          !showingFigure || model.atMaxBpPerPx || model.lockedFitToWindow\n        }\n        color=\"secondary\"\n      >\n        <ZoomOut />\n      </IconButton>\n\n      <IconButton\n        onClick={model.zoomInButton}\n        className={classes.iconButton}\n        title=\"zoom in\"\n        disabled={!showingFigure || model.atMinBpPerPx}\n        color=\"secondary\"\n      >\n        <ZoomIn />\n      </IconButton>\n\n      <IconButton\n        onClick={model.rotateCounterClockwiseButton}\n        className={classes.iconButton}\n        title=\"rotate counter-clockwise\"\n        disabled={!showingFigure}\n        color=\"secondary\"\n      >\n        <RotateLeft />\n      </IconButton>\n\n      <IconButton\n        onClick={model.rotateClockwiseButton}\n        className={classes.iconButton}\n        title=\"rotate clockwise\"\n        disabled={!showingFigure}\n        color=\"secondary\"\n      >\n        <RotateRight />\n      </IconButton>\n\n      <IconButton\n        onClick={model.toggleFitToWindowLock}\n        className={classes.iconButton}\n        title={\n          model.lockedFitToWindow\n            ? 'locked model to window size'\n            : 'unlocked model to zoom further'\n        }\n        disabled={model.tooSmallToLock}\n        color=\"secondary\"\n      >\n        {model.lockedFitToWindow ? <LockOutline /> : <LockOpen />}\n      </IconButton>\n\n      {model.hideTrackSelectorButton ? null : (\n        <IconButton\n          onClick={model.activateTrackSelector}\n          title=\"Open track selector\"\n          data-testid=\"circular_track_select\"\n          color=\"secondary\"\n        >\n          <TrackSelectorIcon />\n        </IconButton>\n      )}\n    </div>\n  )\n})\n\nconst CircularView = observer(({ model }) => {\n  const classes = useStyles()\n  const initialized =\n    !!model.displayedRegions.length && model.figureWidth && model.figureHeight\n\n  const showImportForm = !initialized && !model.disableImportForm\n  const showFigure = initialized && !showImportForm\n\n  return (\n    <div\n      className={classes.root}\n      style={{\n        width: model.width,\n        height: model.height,\n      }}\n      data-testid={model.id}\n    >\n      {model.error ? (\n        <ErrorMessage error={model.error} />\n      ) : (\n        <>\n          {showImportForm ? <ImportForm model={model} /> : null}\n          <>\n            {!showFigure ? null : (\n              <div\n                className={classes.scroller}\n                style={{\n                  width: model.width,\n                  height: model.height,\n                }}\n              >\n                <div\n                  className={classes.rotator}\n                  style={{\n                    transform: [`rotate(${model.offsetRadians}rad)`].join(' '),\n                    transition: 'transform 0.5s',\n                    transformOrigin: model.centerXY\n                      .map(x => `${x}px`)\n                      .join(' '),\n                  }}\n                >\n                  <svg\n                    style={{\n                      position: 'absolute',\n                      left: 0,\n                      top: 0,\n                    }}\n                    className={classes.sliceRoot}\n                    width={`${model.figureWidth}px`}\n                    height={`${model.figureHeight}px`}\n                    version=\"1.1\"\n                  >\n                    <g transform={`translate(${model.centerXY})`}>\n                      <Slices model={model} />\n                    </g>\n                  </svg>\n                </div>\n              </div>\n            )}\n            <Controls model={model} showingFigure={showFigure} />\n            {model.hideVerticalResizeHandle ? null : (\n              <ResizeHandle\n                onDrag={model.resizeHeight}\n                style={{\n                  height: dragHandleHeight,\n                  position: 'absolute',\n                  bottom: 0,\n                  left: 0,\n                  background: '#ccc',\n                  boxSizing: 'border-box',\n                  borderTop: '1px solid #fafafa',\n                }}\n              />\n            )}\n          </>\n        </>\n      )}\n    </div>\n  )\n})\n\nexport default CircularView\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z\"\n}), 'LockOpen');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zM9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9V6zm9 14H6V10h12v10zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z\"\n}), 'LockOutlined');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M7.11 8.53L5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z\"\n}), 'RotateLeft');\n\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar React = _interopRequireWildcard(require(\"react\"));\n\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\n\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.55 5.55L11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42l1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z\"\n}), 'RotateRight');\n\nexports.default = _default;"],"names":["useStyles","makeStyles","rulerLabel","fontSize","fontWeight","lineHeight","letterSpacing","sliceArcPath","slice","radiusPx","startBase","endBase","flipped","startXY","bpToXY","endXY","largeArc","Math","abs","bpPerRadian","PI","join","ElisionRulerArc","observer","model","theme","useTheme","endRadians","startRadians","region","polarToCartesian","widthPx","centerRadians","regionCountString","Number","regions","length","toLocaleString","RulerLabel","text","view","maxWidthPx","radians","title","color","palette","primary","d","stroke","secondary","strokeWidth","strokeDasharray","fill","classes","textXY","x","y","className","textAnchor","dominantBaseline","transform","radToDeg","style","offsetRadians","RegionRulerArc","assembly","getSession","assemblyManager","get","assemblyName","getRefNameColor","refName","makeContrasting","background","paper","error","start","end","elided","assembleLocString","importFormContainer","marginBottom","spacing","session","modelError","assemblyNames","useState","selectedAsm","setSelectedAsm","setError","assemblyError","err","Container","Grid","container","justifyContent","alignItems","item","ErrorMessage","AssemblySelector","onChange","val","undefined","selected","Button","disabled","onClick","setDisplayedRegions","variant","root","position","overflow","scroller","sliceRoot","boxSizing","display","iconButton","padding","margin","controls","whiteSpace","grey","borderRight","borderBottom","left","top","Slices","staticSlices","map","Ruler","tracks","track","displays","RenderingComponent","id","Controls","showingFigure","IconButton","zoomOutButton","lockedFitToWindow","atMaxBpPerPx","ZoomOut","Z","zoomInButton","atMinBpPerPx","ZoomIn","rotateCounterClockwiseButton","RotateLeft","rotateClockwiseButton","RotateRight","toggleFitToWindowLock","tooSmallToLock","LockOpen","hideTrackSelectorButton","activateTrackSelector","initialized","displayedRegions","figureWidth","figureHeight","showImportForm","disableImportForm","showFigure","width","height","rotator","transition","transformOrigin","centerXY","version","hideVerticalResizeHandle","ResizeHandle","onDrag","resizeHeight","bottom","borderTop","_interopRequireDefault","require","_interopRequireWildcard","exports","React","_default","default","createElement"],"sourceRoot":""}