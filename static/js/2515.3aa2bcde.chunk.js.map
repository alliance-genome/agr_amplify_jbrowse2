{"version":3,"file":"static/js/2515.3aa2bcde.chunk.js","mappings":"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","sources":["../../../plugins/circular-view/src/CircularView/components/Ruler.tsx","../../../plugins/circular-view/src/CircularView/components/Controls.tsx","../../../plugins/circular-view/src/CircularView/components/ImportForm.tsx","../../../plugins/circular-view/src/CircularView/components/CircularView.tsx","../../../node_modules/@mui/icons-material/Lock.js","../../../node_modules/@mui/icons-material/LockOpen.js","../../../node_modules/@mui/icons-material/RotateLeft.js","../../../node_modules/@mui/icons-material/RotateRight.js"],"sourcesContent":["import React from 'react'\nimport { observer } from 'mobx-react'\nimport {\n  getSession,\n  polarToCartesian,\n  radToDeg,\n  assembleLocString,\n} from '@jbrowse/core/util'\nimport { makeContrasting } from '@jbrowse/core/util/color'\nimport { useTheme } from '@mui/material/styles'\nimport { makeStyles } from 'tss-react/mui'\n\n// locals\nimport { Slice } from '../models/slices'\nimport { CircularViewModel } from '../models/CircularView'\n\nconst useStyles = makeStyles()({\n  rulerLabel: {\n    fontSize: '0.8rem',\n    fontWeight: 500,\n    lineHeight: 1.6,\n    letterSpacing: '0.0075em',\n  },\n})\n\nfunction sliceArcPath(\n  slice: Slice,\n  radiusPx: number,\n  startBase: number,\n  endBase: number,\n) {\n  // A rx ry x-axis-rotation large-arc-flag sweep-flag x y\n  if (slice.flipped) {\n    ;[startBase, endBase] = [endBase, startBase]\n  }\n  const startXY = slice.bpToXY(startBase, radiusPx)\n  const endXY = slice.bpToXY(endBase, radiusPx)\n  const largeArc =\n    Math.abs(endBase - startBase) / slice.bpPerRadian > Math.PI ? '1' : '0'\n  const sweepFlag = '1'\n  return [\n    'M',\n    ...startXY,\n    'A',\n    radiusPx,\n    radiusPx,\n    '0',\n    largeArc,\n    sweepFlag,\n    ...endXY,\n  ].join(' ')\n}\n\nconst ElisionRulerArc = observer(\n  ({ model, slice }: { model: CircularViewModel; slice: Slice }) => {\n    const theme = useTheme()\n    const { radiusPx: modelRadiusPx } = model\n    const radiusPx = modelRadiusPx + 1\n    const { endRadians, startRadians, region } = slice\n    const startXY = polarToCartesian(radiusPx, startRadians)\n    const endXY = polarToCartesian(radiusPx, endRadians)\n    const widthPx = (endRadians - startRadians) * radiusPx\n    const largeArc = endRadians - startRadians > Math.PI ? '1' : '0'\n    // TODO: draw the elision\n    const centerRadians = (endRadians + startRadians) / 2\n    const regionCountString = `[${Number(\n      // @ts-ignore\n      region.regions.length,\n    ).toLocaleString()}]`\n    return (\n      <>\n        <RulerLabel\n          text={regionCountString}\n          view={model}\n          maxWidthPx={widthPx}\n          radians={centerRadians}\n          radiusPx={radiusPx}\n          title={`${Number(\n            // @ts-ignore\n            region.regions.length,\n          ).toLocaleString()} more regions`}\n          color={theme.palette.text.primary}\n        />\n        <path\n          d={[\n            'M',\n            ...startXY,\n            'A',\n            radiusPx,\n            radiusPx,\n            '0',\n            largeArc,\n            '1',\n            ...endXY,\n          ].join(' ')}\n          stroke={theme.palette.text.secondary}\n          strokeWidth={2}\n          strokeDasharray=\"2,2\"\n          fill=\"none\"\n        />\n      </>\n    )\n  },\n)\n\nconst RulerLabel = observer(\n  ({\n    view,\n    text,\n    maxWidthPx,\n    radians,\n    radiusPx,\n    title,\n    color,\n  }: {\n    view: CircularViewModel\n    text: string\n    maxWidthPx: number\n    radiusPx: number\n    radians: number\n    title?: string\n    color: string\n  }) => {\n    const { classes } = useStyles()\n    const textXY = polarToCartesian(radiusPx + 5, radians)\n    if (!text) {\n      return null\n    }\n\n    if (text.length * 6.5 < maxWidthPx) {\n      // text is rotated parallel to the ruler arc\n      return (\n        <text\n          x={0}\n          y={0}\n          className={classes.rulerLabel}\n          textAnchor=\"middle\"\n          dominantBaseline=\"baseline\"\n          transform={`translate(${textXY}) rotate(${radToDeg(radians) + 90})`}\n          style={{ fill: color }}\n        >\n          {text}\n          <title>{title || text}</title>\n        </text>\n      )\n    }\n    if (maxWidthPx > 4) {\n      // text is rotated perpendicular to the ruler arc\n      const overallRotation = radToDeg(\n        radians + view.offsetRadians - Math.PI / 2,\n      )\n      if (overallRotation >= 180) {\n        return (\n          <text\n            x={0}\n            y={0}\n            className={classes.rulerLabel}\n            textAnchor=\"start\"\n            dominantBaseline=\"middle\"\n            transform={`translate(${textXY}) rotate(${radToDeg(radians)})`}\n            style={{ fill: color }}\n          >\n            {text}\n            <title>{title || text}</title>\n          </text>\n        )\n      }\n      return (\n        <text\n          x={0}\n          y={0}\n          className={classes.rulerLabel}\n          textAnchor=\"end\"\n          dominantBaseline=\"middle\"\n          transform={`translate(${textXY}) rotate(${radToDeg(radians) + 180})`}\n          style={{ fill: color }}\n        >\n          {text}\n          <title>{title || text}</title>\n        </text>\n      )\n    }\n\n    // if you get here there is no room for the text at all\n    return null\n  },\n)\n\nconst RegionRulerArc = observer(\n  ({ model, slice }: { model: CircularViewModel; slice: Slice }) => {\n    const theme = useTheme()\n    const { radiusPx } = model\n    const { region, endRadians, startRadians } = slice\n    const centerRadians = (endRadians + startRadians) / 2\n    const widthPx = (endRadians - startRadians) * radiusPx\n    const session = getSession(model)\n    let color\n    const assembly = session.assemblyManager.get(slice.region.assemblyName)\n    if (assembly) {\n      color = assembly.getRefNameColor(region.refName)\n    }\n    if (color) {\n      try {\n        color = makeContrasting(color, theme.palette.background.paper)\n      } catch (error) {\n        color = theme.palette.text.primary\n      }\n    } else {\n      color = theme.palette.text.primary\n    }\n\n    // TODO: slice flipping\n    return (\n      <>\n        <RulerLabel\n          text={region.refName}\n          view={model}\n          maxWidthPx={widthPx}\n          radians={centerRadians}\n          radiusPx={radiusPx}\n          color={color}\n        />\n        <path\n          d={sliceArcPath(slice, radiusPx + 1, region.start, region.end)}\n          stroke={color}\n          strokeWidth={2}\n          fill=\"none\"\n        >\n          <title>{region.refName}</title>\n        </path>\n      </>\n    )\n  },\n)\n\nconst CircularRuler = observer(\n  ({ model, slice }: { model: CircularViewModel; slice: Slice }) => {\n    if (slice.region.elided) {\n      return (\n        <ElisionRulerArc\n          key={\n            /* @ts-ignore */\n            assembleLocString(slice.region.regions[0])\n          }\n          model={model}\n          slice={slice}\n        />\n      )\n    }\n    return (\n      <RegionRulerArc\n        key={assembleLocString(slice.region)}\n        model={model}\n        slice={slice}\n      />\n    )\n  },\n)\n\nexport default CircularRuler\n","import React from 'react'\nimport { observer } from 'mobx-react'\nimport { IconButton } from '@mui/material'\nimport { makeStyles } from 'tss-react/mui'\nimport { grey } from '@mui/material/colors'\n\n// icons\nimport ZoomOutIcon from '@mui/icons-material/ZoomOut'\nimport ZoomInIcon from '@mui/icons-material/ZoomIn'\nimport RotateLeftIcon from '@mui/icons-material/RotateLeft'\nimport RotateRightIcon from '@mui/icons-material/RotateRight'\nimport LockOpenIcon from '@mui/icons-material/LockOpen'\nimport LockIcon from '@mui/icons-material/Lock'\nimport { TrackSelector as TrackSelectorIcon } from '@jbrowse/core/ui/Icons'\n\n// locals\nimport { CircularViewModel } from '../models/CircularView'\n\nconst useStyles = makeStyles()({\n  iconButton: {\n    padding: '4px',\n    margin: '0 2px 0 2px',\n  },\n  controls: {\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n    position: 'absolute',\n    background: grey[200],\n    boxSizing: 'border-box',\n    borderRight: '1px solid #a2a2a2',\n    borderBottom: '1px solid #a2a2a2',\n    left: 0,\n    top: 0,\n  },\n})\n\nconst Controls = observer(function ({ model }: { model: CircularViewModel }) {\n  const { classes } = useStyles()\n  return (\n    <div className={classes.controls}>\n      <IconButton\n        onClick={model.zoomOutButton}\n        className={classes.iconButton}\n        title={model.lockedFitToWindow ? 'unlock to zoom out' : 'zoom out'}\n        disabled={model.atMaxBpPerPx || model.lockedFitToWindow}\n        color=\"secondary\"\n      >\n        <ZoomOutIcon />\n      </IconButton>\n\n      <IconButton\n        onClick={model.zoomInButton}\n        className={classes.iconButton}\n        title=\"zoom in\"\n        disabled={model.atMinBpPerPx}\n        color=\"secondary\"\n      >\n        <ZoomInIcon />\n      </IconButton>\n\n      <IconButton\n        onClick={model.rotateCounterClockwiseButton}\n        className={classes.iconButton}\n        title=\"rotate counter-clockwise\"\n        color=\"secondary\"\n      >\n        <RotateLeftIcon />\n      </IconButton>\n\n      <IconButton\n        onClick={model.rotateClockwiseButton}\n        className={classes.iconButton}\n        title=\"rotate clockwise\"\n        color=\"secondary\"\n      >\n        <RotateRightIcon />\n      </IconButton>\n\n      <IconButton\n        onClick={model.toggleFitToWindowLock}\n        className={classes.iconButton}\n        title={\n          model.lockedFitToWindow\n            ? 'locked model to window size'\n            : 'unlocked model to zoom further'\n        }\n        disabled={model.tooSmallToLock}\n        color=\"secondary\"\n      >\n        {model.lockedFitToWindow ? <LockIcon /> : <LockOpenIcon />}\n      </IconButton>\n\n      {model.hideTrackSelectorButton ? null : (\n        <IconButton\n          onClick={model.activateTrackSelector}\n          title=\"Open track selector\"\n          data-testid=\"circular_track_select\"\n          color=\"secondary\"\n        >\n          <TrackSelectorIcon />\n        </IconButton>\n      )}\n    </div>\n  )\n})\nexport default Controls\n","import React, { useState } from 'react'\nimport { Button, Container, Grid } from '@mui/material'\nimport { makeStyles } from 'tss-react/mui'\nimport { observer } from 'mobx-react'\nimport { getSession } from '@jbrowse/core/util'\nimport { ErrorMessage, AssemblySelector } from '@jbrowse/core/ui'\n\nconst useStyles = makeStyles()(theme => ({\n  importFormContainer: {\n    padding: theme.spacing(6),\n  },\n}))\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst ImportForm = observer(({ model }: { model: any }) => {\n  const { classes } = useStyles()\n  const session = getSession(model)\n  const { error } = model\n  const { assemblyNames, assemblyManager } = session\n  const [selectedAsm, setSelectedAsm] = useState(assemblyNames[0])\n  const assembly = assemblyManager.get(selectedAsm)\n  const assemblyError = assemblyNames.length\n    ? assembly?.error\n    : 'No configured assemblies'\n  const regions = assembly?.regions || []\n  const err = assemblyError || error\n\n  return (\n    <Container className={classes.importFormContainer}>\n      {err ? (\n        <Grid container spacing={1} justifyContent=\"center\" alignItems=\"center\">\n          <Grid item>\n            <ErrorMessage error={err} />\n          </Grid>\n        </Grid>\n      ) : null}\n      <Grid container spacing={1} justifyContent=\"center\" alignItems=\"center\">\n        <Grid item>\n          <AssemblySelector\n            onChange={val => {\n              model.setError(undefined)\n              setSelectedAsm(val)\n            }}\n            session={session}\n            selected={selectedAsm}\n          />\n        </Grid>\n\n        <Grid item>\n          <Button\n            disabled={!regions?.length}\n            onClick={() => {\n              model.setError(undefined)\n              model.setDisplayedRegions(regions)\n            }}\n            variant=\"contained\"\n            color=\"primary\"\n          >\n            {/* if there's an error, it's not actively loading  so just display open */}\n            {regions.length || err ? 'Open' : 'Loading...'}\n          </Button>\n        </Grid>\n      </Grid>\n    </Container>\n  )\n})\n\nexport default ImportForm\n","import React from 'react'\nimport { observer } from 'mobx-react'\nimport { ResizeHandle } from '@jbrowse/core/ui'\nimport { assembleLocString } from '@jbrowse/core/util'\nimport { makeStyles } from 'tss-react/mui'\n\n// locals\nimport Ruler from './Ruler'\nimport Controls from './Controls'\nimport ImportForm from './ImportForm'\nimport { CircularViewModel } from '../models/CircularView'\n\nconst dragHandleHeight = 3\n\nconst useStyles = makeStyles()(theme => ({\n  root: {\n    position: 'relative',\n    marginBottom: theme.spacing(1),\n    overflow: 'hidden',\n    background: 'white',\n  },\n  scroller: {\n    overflow: 'auto',\n  },\n  sliceRoot: {\n    background: 'none',\n    // background: theme.palette.background.paper,\n    boxSizing: 'content-box',\n    display: 'block',\n  },\n}))\n\nconst Slices = observer(({ model }: { model: CircularViewModel }) => {\n  return (\n    <>\n      {model.staticSlices.map(slice => (\n        <Ruler\n          key={assembleLocString(\n            // @ts-ignore\n            slice.region.elided ? slice.region.regions[0] : slice.region,\n          )}\n          model={model}\n          slice={slice}\n        />\n      ))}\n      {model.tracks.map(track => {\n        const display = track.displays[0]\n        return (\n          <display.RenderingComponent\n            key={display.id}\n            display={display}\n            view={model}\n          />\n        )\n      })}\n    </>\n  )\n})\n\nconst CircularView = observer(({ model }: { model: CircularViewModel }) => {\n  const initialized =\n    !!model.displayedRegions.length &&\n    !!model.figureWidth &&\n    !!model.figureHeight &&\n    model.initialized\n\n  const showImportForm = !initialized && !model.disableImportForm\n  const showFigure = initialized && !showImportForm\n\n  return (\n    <>\n      {showImportForm || model.error ? (\n        <ImportForm model={model} />\n      ) : showFigure ? (\n        <CircularViewLoaded model={model} />\n      ) : null}\n    </>\n  )\n})\n\nconst CircularViewLoaded = observer(function ({\n  model,\n}: {\n  model: CircularViewModel\n}) {\n  const {\n    width,\n    height,\n    id,\n    offsetRadians,\n    centerXY,\n    figureWidth,\n    figureHeight,\n    hideVerticalResizeHandle,\n  } = model\n  const { classes } = useStyles()\n  return (\n    <div className={classes.root} style={{ width, height }} data-testid={id}>\n      <div className={classes.scroller} style={{ width, height }}>\n        <div\n          style={{\n            transform: [`rotate(${offsetRadians}rad)`].join(' '),\n            transition: 'transform 0.5s',\n            transformOrigin: centerXY.map(x => `${x}px`).join(' '),\n          }}\n        >\n          <svg\n            style={{\n              position: 'absolute',\n              left: 0,\n              top: 0,\n            }}\n            className={classes.sliceRoot}\n            width={figureWidth + 'px'}\n            height={figureHeight + 'px'}\n            version=\"1.1\"\n          >\n            <g transform={`translate(${centerXY})`}>\n              <Slices model={model} />\n            </g>\n          </svg>\n        </div>\n      </div>\n      <Controls model={model} />\n      {hideVerticalResizeHandle ? null : (\n        <ResizeHandle\n          onDrag={model.resizeHeight}\n          style={{\n            height: dragHandleHeight,\n            position: 'absolute',\n            bottom: 0,\n            left: 0,\n            background: '#ccc',\n            boxSizing: 'border-box',\n            borderTop: '1px solid #fafafa',\n          }}\n        />\n      )}\n    </div>\n  )\n})\n\nexport default CircularView\n","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z\"\n}), 'Lock');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z\"\n}), 'LockOpen');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z\"\n}), 'RotateLeft');\nexports.default = _default;","\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _createSvgIcon = _interopRequireDefault(require(\"./utils/createSvgIcon\"));\nvar _jsxRuntime = require(\"react/jsx-runtime\");\nvar _default = (0, _createSvgIcon.default)( /*#__PURE__*/(0, _jsxRuntime.jsx)(\"path\", {\n  d: \"M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z\"\n}), 'RotateRight');\nexports.default = _default;"],"names":["useStyles","makeStyles","rulerLabel","fontSize","fontWeight","lineHeight","letterSpacing","sliceArcPath","slice","radiusPx","startBase","endBase","flipped","startXY","bpToXY","endXY","largeArc","Math","abs","bpPerRadian","PI","join","ElisionRulerArc","observer","model","theme","useTheme","endRadians","startRadians","region","polarToCartesian","widthPx","centerRadians","regionCountString","Number","regions","length","toLocaleString","RulerLabel","text","view","maxWidthPx","radians","title","color","palette","primary","d","stroke","secondary","strokeWidth","strokeDasharray","fill","classes","textXY","x","y","className","textAnchor","dominantBaseline","transform","radToDeg","style","offsetRadians","RegionRulerArc","assembly","getSession","assemblyManager","get","assemblyName","getRefNameColor","refName","makeContrasting","background","paper","error","start","end","elided","assembleLocString","iconButton","padding","margin","controls","overflow","whiteSpace","position","grey","boxSizing","borderRight","borderBottom","left","top","IconButton","onClick","zoomOutButton","lockedFitToWindow","disabled","atMaxBpPerPx","ZoomOut","Z","zoomInButton","atMinBpPerPx","ZoomIn","rotateCounterClockwiseButton","RotateLeft","rotateClockwiseButton","RotateRight","toggleFitToWindowLock","tooSmallToLock","Lock","LockOpen","hideTrackSelectorButton","activateTrackSelector","importFormContainer","spacing","session","assemblyNames","useState","selectedAsm","setSelectedAsm","assemblyError","err","Container","Grid","container","justifyContent","alignItems","item","ErrorMessage","AssemblySelector","onChange","val","setError","undefined","selected","Button","setDisplayedRegions","variant","root","marginBottom","scroller","sliceRoot","display","Slices","staticSlices","map","Ruler","tracks","track","displays","RenderingComponent","id","CircularView","initialized","displayedRegions","figureWidth","figureHeight","showImportForm","disableImportForm","showFigure","CircularViewLoaded","width","height","centerXY","hideVerticalResizeHandle","transition","transformOrigin","version","ResizeHandle","onDrag","resizeHeight","bottom","borderTop","_interopRequireDefault","require","exports","_createSvgIcon","_jsxRuntime","_default","default","jsx"],"sourceRoot":""}