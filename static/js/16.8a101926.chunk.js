/*! For license information please see 16.8a101926.chunk.js.LICENSE.txt */
(this["webpackJsonp@jbrowse/web"]=this["webpackJsonp@jbrowse/web"]||[]).push([[16],{138:function(e,t,r){"use strict";r.d(t,"e",(function(){return f})),r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return h})),r.d(t,"d",(function(){return l})),r.d(t,"a",(function(){return d}));var n=r(11),a=r(81),o=r(88),i=r(89),s=r(659),c=function(e){Object(o.a)(r,e);var t=Object(i.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r)}(Object(s.a)(Error)),f=function(e){Object(o.a)(r,e);var t=Object(i.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r)}(Object(s.a)(Error)),u=function(e){Object(o.a)(r,e);var t=Object(i.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r)}(c),h=function(e){Object(o.a)(r,e);var t=Object(i.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r)}(u),l=function(e){Object(o.a)(r,e);var t=Object(i.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r)}(c),d=function(e){Object(o.a)(r,e);var t=Object(i.a)(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(n.a)(r)}(c)},1415:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return S}));var n=r(82),a=r(81),o=r(11),i=r(80),s=r.n(i),c=r(891),f=r(596),u=r.n(f),h=r(600),l=r.n(h),d=r(138),p=r(1416),v=r(1420),y=r(1421),g=r.n(y),b=r(1426),m=r(897),w=r(361),k=r(1435),S=function(){function t(e){Object(a.a)(this,t),this.file=Object(m.a)(e.url,e.path,e.filehandle),this.validateChecksums=!0,this.fetchReferenceSequenceCallback=e.seqFetch,this.options={checkSequenceMD5:!1!==e.checkSequenceMD5,cacheSize:void 0!==e.cacheSize?e.cacheSize:2e4},this.featureCache=new l.a({maxSize:this.options.cacheSize})}return Object(o.a)(t,[{key:"toString",value:function(){return this.file.filename?this.file.filename:this.file.url?this.file.url:"(cram file)"}},{key:"read",value:function(e,t,r,n){return this.file.read(e,t,r,n)}},{key:"stat",value:function(){return this.file.stat()}},{key:"getDefinition",value:function(){var t=Object(n.a)(s.a.mark((function t(){var r,n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.allocUnsafe(v.a.maxLength),t.next=3,this.file.read(r,0,v.a.maxLength,0);case 3:if(2===(n=v.a.parser.parse(r).result).majorVersion||3===n.majorVersion){t.next=6;break}throw new d.e("CRAM version ".concat(n.majorVersion," not supported"));case 6:return t.abrupt("return",n);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"getSamHeader",value:function(){var e=Object(n.a)(s.a.mark((function e(){var t,r,n,a,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getContainerById(0);case 2:if(t=e.sent){e.next=5;break}throw new d.c("file contains no containers");case 5:return e.next=7,t.getFirstBlock();case 7:return r=e.sent,n=r.content,a=n.readInt32LE(0),4,o=n.toString("utf8",4,4+a),this.header=o,e.abrupt("return",Object(k.a)(o));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeaderText",value:function(){var e=Object(n.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSamHeader();case 2:return e.abrupt("return",this.header);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSectionParsers",value:function(){var e=Object(n.a)(s.a.mark((function e(){var t,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getDefinition();case 2:return t=e.sent,r=t.majorVersion,e.abrupt("return",Object(v.b)(r));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getContainerById",value:function(){var e=Object(n.a)(s.a.mark((function e(t){var r,n,a,o,i,c,f,u,h,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSectionParsers();case 2:return r=e.sent,n=r.cramFileDefinition.maxLength,e.next=6,this.file.stat();case 6:a=e.sent,o=a.size,i=r.cramContainerHeader1,f=0;case 10:if(!(f<=t)){e.next=36;break}if(!(n+i.maxLength+8>=o)){e.next=13;break}return e.abrupt("return",void 0);case 13:return c=this.getContainerAtPosition(n),e.next=16,c.getHeader();case 16:if(u=e.sent){e.next=19;break}throw new d.c("container ".concat(t," not found in file"));case 19:if(0!==f){e.next=32;break}n=u._endPosition,h=0;case 22:if(!(h<u.numBlocks)){e.next=30;break}return e.next=25,this.readBlock(n);case 25:l=e.sent,n=l._endPosition;case 27:h+=1,e.next=22;break;case 30:e.next=33;break;case 32:n+=u._size+u.length;case 33:f+=1,e.next=10;break;case 36:return e.abrupt("return",c);case 37:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkCrc32",value:function(){var t=Object(n.a)(s.a.mark((function t(r,n,a,o){var i,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.allocUnsafe(n),t.next=3,this.file.read(i,0,n,r);case 3:if((c=u.a.unsigned(i))===a){t.next=6;break}throw new d.c("crc mismatch in ".concat(o,": recorded CRC32 = ").concat(a,", but calculated CRC32 = ").concat(c));case 6:case"end":return t.stop()}}),t,this)})));return function(e,r,n,a){return t.apply(this,arguments)}}()},{key:"containerCount",value:function(){var e=Object(n.a)(s.a.mark((function e(){var t,r,n,a,o,i,c,f,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getSectionParsers();case 2:return t=e.sent,e.next=5,this.file.stat();case 5:r=e.sent,n=r.size,a=t.cramContainerHeader1,o=0,i=t.cramFileDefinition.maxLength;case 10:if(!(i+a.maxLength+8<n)){e.next=33;break}return e.next=13,this.getContainerAtPosition(i).getHeader();case 13:if(c=e.sent){e.next=16;break}return e.abrupt("break",33);case 16:if(0!==o){e.next=29;break}i=c._endPosition,f=0;case 19:if(!(f<c.numBlocks)){e.next=27;break}return e.next=22,this.readBlock(i);case 22:u=e.sent,i=u._endPosition;case 24:f+=1,e.next=19;break;case 27:e.next=30;break;case 29:i+=c._size+c.length;case 30:o+=1,e.next=10;break;case 33:return e.abrupt("return",o);case 34:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getContainerAtPosition",value:function(e){return new b.a(this,e)}},{key:"readBlockHeader",value:function(){var t=Object(n.a)(s.a.mark((function t(r){var n,a,o,i,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSectionParsers();case 2:return n=t.sent,a=n.cramBlockHeader,t.next=6,this.file.stat();case 6:if(o=t.sent,i=o.size,!(r+a.maxLength>=i)){t.next=10;break}return t.abrupt("return",void 0);case 10:return c=e.allocUnsafe(a.maxLength),t.next=13,this.file.read(c,0,a.maxLength,r);case 13:return t.abrupt("return",Object(w.b)(c,a.parser,0,r));case 14:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"_parseSection",value:function(){var t=Object(n.a)(s.a.mark((function t(r,n){var a,o,i,c,f,u,h=arguments;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=h.length>2&&void 0!==h[2]?h[2]:r.maxLength,!(o=h.length>3?h[3]:void 0)){t.next=6;break}i=o,t.next=15;break;case 6:return t.next=8,this.file.stat();case 8:if(c=t.sent,f=c.size,!(n+a>=f)){t.next=12;break}return t.abrupt("return",void 0);case 12:return i=e.allocUnsafe(a),t.next=15,this.file.read(i,0,a,n);case 15:if((u=Object(w.b)(i,r.parser,0,n))._size===a){t.next=18;break}throw new d.c("section read error: requested size ".concat(a," does not equal parsed size ").concat(u._size));case 18:return t.abrupt("return",u);case 19:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"_uncompress",value:function(t,r,n){if("gzip"===t)Object(c.a)(r).copy(n);else if("bzip2"===t){var a=bzip2.array(r),o=bzip2.header(a),i=0;do{var s=bzip2.decompress(a,o);-1!=s&&(e.from(s).copy(n,i),i+=s.length,o-=s.length)}while(-1!=s)}else if("rans"===t)Object(p.a)(r,n);else if("rans4x16"===t)g.a.r4x16_uncompress(r,n);else if("arith"===t)g.a.arith_uncompress(r,n);else if("fqzcomp"===t)g.a.fqzcomp_uncompress(r,n);else{if("tok3"!==t)throw new d.e("".concat(t," decompression not yet implemented"));g.a.tok3_uncompress(r,n)}}},{key:"readBlock",value:function(){var t=Object(n.a)(s.a.mark((function t(r){var n,a,o,i,c,f,u,h;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getDefinition();case 2:return n=t.sent,a=n.majorVersion,t.next=6,this.getSectionParsers();case 6:return o=t.sent,t.next=9,this.readBlockHeader(r);case 9:if(i=t.sent,c=i._endPosition,i.contentPosition=i._endPosition,f=e.allocUnsafe(i.uncompressedSize),"raw"===i.compressionMethod){t.next=20;break}return u=e.allocUnsafe(i.compressedSize),t.next=17,this.read(u,0,i.compressedSize,c);case 17:this._uncompress(i.compressionMethod,u,f),t.next=22;break;case 20:return t.next=22,this.read(f,0,i.uncompressedSize,c);case 22:if(i.content=f,!(a>=3)){t.next=35;break}return t.next=26,this._parseSection(o.cramBlockCrc32,c+i.compressedSize);case 26:if(h=t.sent,i.crc32=h.crc32,!this.validateChecksums){t.next=31;break}return t.next=31,this.checkCrc32(r,i._size+i.compressedSize,i.crc32,"block data");case 31:i._endPosition=h._endPosition,i._size=i.compressedSize+o.cramBlockCrc32.maxLength,t.next=37;break;case 35:i._endPosition=c+i.compressedSize,i._size=i.compressedSize;case 37:return t.abrupt("return",i);case 38:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}();"getDefinition getSectionParsers getSamHeader".split(" ").forEach((function(e){return Object(w.e)(S,e)}))}).call(this,r(99).Buffer)},1416:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return d}));var n=r(81),a=r(11),o=r(138),i=r(468),s=r(1417),c=r(1418),f=r(1419);function u(e,t){for(var r=new i.a.AriDecoder,n=new Array(256),a=0;a<n.length;a+=1)n[a]=new i.a.Symbol;return Object(s.a)(e,r,n),Object(c.a)(e,r,n,t),t}function h(e,t){for(var r=new Array(256),n=0;n<r.length;n+=1)r[n]=new i.a.AriDecoder;for(var a=new Array(256),o=0;o<a.length;o+=1){a[o]=new Array(256);for(var c=0;c<a[o].length;c+=1)a[o][c]=new i.a.Symbol}return Object(s.b)(e,r,a),Object(f.a)(e,t,r,a),t}var l=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Object(n.a)(this,e),this._buffer=t,this._position=r,this.length=t.length}return Object(a.a)(e,[{key:"get",value:function(){var e=this._buffer[this._position];return this._position+=1,e}},{key:"getByte",value:function(){return this.get()}},{key:"getByteAt",value:function(e){return this._buffer[e]}},{key:"position",value:function(){return this._position}},{key:"put",value:function(e){return this._buffer[this._position]=e,this._position+=1,e}},{key:"putAt",value:function(e,t){return this._buffer[e]=t,t}},{key:"setPosition",value:function(e){return this._position=e,e}},{key:"getInt",value:function(){var e=this._buffer.readInt32LE(this._position);return this._position+=4,e}},{key:"remaining",value:function(){return this._buffer.length-this._position}}]),e}();function d(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(0===t.length)return r.fill(0),r;var a=new l(t,n),i=a.get();if(0!==i&&1!==i)throw new o.c("Invalid rANS order ".concat(i));var s=a.getInt();if(s!==a.remaining()-4)throw new o.c("Incorrect input length.");var c=a.getInt(),f=new l(r||e.allocUnsafe(c));if(f.length<c)throw new o.c("Output buffer too small to fit ".concat(c," bytes."));switch(i){case 0:return u(a,f);case 1:return h(a,f);default:throw new o.c("Invalid rANS order: ".concat(i))}}}).call(this,r(99).Buffer)},1417:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return c}));var n=r(138),a=r(469),o=r(468);function i(e){if(!e)throw new n.c("assertion failed")}function s(e,t,r){var n=0,s=0,c=255&e.get();do{null==t.fc[c]&&(t.fc[c]=new o.a.FC),t.fc[c].F=255&e.get(),t.fc[c].F>=128&&(t.fc[c].F&=-129,t.fc[c].F=(127&t.fc[c].F)<<8|255&e.get()),t.fc[c].C=s,o.a.symbolInit(r[c],t.fc[c].C,t.fc[c].F),t.R||(t.R=new Array(a.c)),t.R.fill(c,s,s+t.fc[c].F),s+=t.fc[c].F,0===n&&c+1===(255&e.getByteAt(e.position()))?(c=255&e.get(),n=255&e.get()):0!==n?(n-=1,c+=1):c=255&e.get()}while(0!==c);i(s<a.c)}function c(e,t,r){var n=0,s=255&e.get();do{var c=0,f=0,u=255&e.get();null==t[s]&&(t[s]=new o.a.AriDecoder);do{null==t[s].fc[u]&&(t[s].fc[u]=new o.a.FC),t[s].fc[u].F=255&e.get(),t[s].fc[u].F>=128&&(t[s].fc[u].F&=-129,t[s].fc[u].F=(127&t[s].fc[u].F)<<8|255&e.get()),t[s].fc[u].C=f,0===t[s].fc[u].F&&(t[s].fc[u].F=a.c),null==r[s][u]&&(r[s][u]=new o.a.RansDecSymbol),o.a.symbolInit(r[s][u],t[s].fc[u].C,t[s].fc[u].F),null==t[s].R&&(t[s].R=new Array(a.c)),t[s].R.fill(u,f,f+t[s].fc[u].F),i((f+=t[s].fc[u].F)<=a.c),0===c&&u+1===(255&e.getByteAt(e.position()))?(u=255&e.get(),c=255&e.get()):0!==c?(c-=1,u+=1):u=255&e.get()}while(0!==u);0===n&&s+1===(255&e.getByteAt(e.position()))?(s=255&e.get(),n=255&e.get()):0!==n?(n-=1,s+=1):s=255&e.get()}while(0!==s)}},1418:function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));var n=r(138),a=r(469),o=r(468);function i(e,t,r,i){for(var s,c=e.getInt(),f=e.getInt(),u=e.getInt(),h=e.getInt(),l=i.remaining(),d=-4&l,p=0;p<d;p+=4){var v=t.R[o.a.get(c,a.b)],y=t.R[o.a.get(f,a.b)],g=t.R[o.a.get(u,a.b)],b=t.R[o.a.get(h,a.b)];i.putAt(p,v),i.putAt(p+1,y),i.putAt(p+2,g),i.putAt(p+3,b),c=o.a.advanceSymbolStep(c,r[255&v],a.b),f=o.a.advanceSymbolStep(f,r[255&y],a.b),u=o.a.advanceSymbolStep(u,r[255&g],a.b),h=o.a.advanceSymbolStep(h,r[255&b],a.b),c=o.a.renormalize(c,e),f=o.a.renormalize(f,e),u=o.a.renormalize(u,e),h=o.a.renormalize(h,e)}switch(i.setPosition(d),3&l){case 0:break;case 1:s=t.R[o.a.get(c,a.b)],o.a.advanceSymbol(c,e,r[255&s],a.b),i.put(s);break;case 2:s=t.R[o.a.get(c,a.b)],o.a.advanceSymbol(c,e,r[255&s],a.b),i.put(s),s=t.R[o.a.get(f,a.b)],o.a.advanceSymbol(f,e,r[255&s],a.b),i.put(s);break;case 3:s=t.R[o.a.get(c,a.b)],o.a.advanceSymbol(c,e,r[255&s],a.b),i.put(s),s=t.R[o.a.get(f,a.b)],o.a.advanceSymbol(f,e,r[255&s],a.b),i.put(s),s=t.R[o.a.get(u,a.b)],o.a.advanceSymbol(u,e,r[255&s],a.b),i.put(s);break;default:throw new n.c("invalid output size encountered during rANS decoding")}i.setPosition(0)}},1419:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(469),a=r(468);function o(e,t,r,o){for(var i=t.remaining(),s=e.getInt(),c=e.getInt(),f=e.getInt(),u=e.getInt(),h=i>>2,l=0,d=h,p=2*h,v=3*h,y=0,g=0,b=0,m=0;l<h;l+=1,d+=1,p+=1,v+=1){var w=255&r[y].R[a.a.get(s,n.b)],k=255&r[g].R[a.a.get(c,n.b)],S=255&r[b].R[a.a.get(f,n.b)],x=255&r[m].R[a.a.get(u,n.b)];t.putAt(l,w),t.putAt(d,k),t.putAt(p,S),t.putAt(v,x),s=a.a.advanceSymbolStep(s,o[y][w],n.b),c=a.a.advanceSymbolStep(c,o[g][k],n.b),f=a.a.advanceSymbolStep(f,o[b][S],n.b),u=a.a.advanceSymbolStep(u,o[m][x],n.b),s=a.a.renormalize(s,e),c=a.a.renormalize(c,e),f=a.a.renormalize(f,e),u=a.a.renormalize(u,e),y=w,g=k,b=S,m=x}for(;v<i;v+=1){var A=255&r[m].R[a.a.get(u,n.b)];t.putAt(v,A),u=a.a.advanceSymbol(u,e,o[m][A],n.b),m=A}}},1420:function(e,t,r){"use strict";r.d(t,"a",(function(){return o})),r.d(t,"b",(function(){return p}));var n=r(260),a=(new n.Parser).itf8(),o={parser:(new n.Parser).string("magic",{length:4}).uint8("majorVersion").uint8("minorVersion").string("fileId",{length:20,stripNull:!0}),maxLength:26},i={parser:(new n.Parser).uint8("compressionMethod",{formatter:function(e){var t=["raw","gzip","bzip2","lzma","rans","rans4x16","arith","fqzcomp","tok3"][e];if(!t)throw new Error("compression method number ".concat(e," not implemented"));return t}}).uint8("contentType",{formatter:function(e){var t=["FILE_HEADER","COMPRESSION_HEADER","MAPPED_SLICE_HEADER","UNMAPPED_SLICE_HEADER","EXTERNAL_DATA","CORE_DATA"][e];if(!t)throw new Error("invalid block content type id ".concat(e));return t}}).itf8("contentId").itf8("compressedSize").itf8("uncompressedSize"),maxLength:17},s={parser:(new n.Parser).uint32("crc32"),maxLength:4},c=(new n.Parser).itf8("size").buffer("ents",{length:"size",formatter:function(e){function t(t,r){for(var n=e.toString("utf8",t,r),a=[],o=0;o<n.length;o+=3)a.push(n.substr(o,3));return a}var r,n=[],a=0;for(r=0;r<e.length;r+=1)e[r]||(n.push(t(a,r)),a=r+1);return r>a&&n.push(t(a,r)),n}}),f=(new n.Parser).uint8(null,{formatter:function(e){return!!e}}),u=(new n.Parser).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new n.Parser).string("key",{length:2,stripNull:!1}).choice("value",{tag:"key",choices:{MI:f,UI:f,PI:f,RN:f,AP:f,RR:f,SM:(new n.Parser).array(null,{type:"uint8",length:5}),TD:(new n.Parser).nest(null,{type:c,formatter:function(e){return e.ents}})}})});function h(e){for(var t={},r=0;r<e.ents.length;r+=1){var n=e.ents[r],a=n.key,o=n.value;t[a]&&console.warn("duplicate key ".concat(a," in map")),t[a]=o}return t}var l={cramFileDefinition:o,cramBlockHeader:i,cramBlockCrc32:s},d={cramUnmappedSliceHeader:function(e){var t=0,r=(new n.Parser).itf8("numRecords");t+=5,e>=3?(r=r.ltf8("recordCounter"),t+=9):2===e&&(r=r.itf8("recordCounter"),t+=5),r=r.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:a,length:"numContentIds"}),t+=10,e>=2&&(r=r.array("md5",{type:"uint8",length:16}),t+=16);return{parser:r,maxLength:function(e){return t+5*e}}},cramMappedSliceHeader:function(e){var t=(new n.Parser).itf8("refSeqId").itf8("refSeqStart").itf8("refSeqSpan").itf8("numRecords"),r=20;e>=3?(t=t.ltf8("recordCounter"),r+=9):2===e&&(t=t.itf8("recordCounter"),r+=5),t=t.itf8("numBlocks").itf8("numContentIds").array("contentIds",{type:a,length:"numContentIds"}).itf8("refBaseBlockId"),r+=15,e>=2&&(t=t.array("md5",{type:"uint8",length:16}),r+=16);return{parser:t,maxLength:function(e){return r+5*e}}},cramEncoding:function(e){return{parser:(new n.Parser).namely("cramEncoding").itf8("codecId").itf8("parametersBytes").choice("parameters",{tag:"codecId",choices:{0:new n.Parser,1:(new n.Parser).itf8("blockContentId"),2:(new n.Parser).itf8("offset").itf8("M"),3:n.Parser.start().itf8("numCodes").array("symbols",{length:"numCodes",type:a}).itf8("numLengths").array("bitLengths",{length:"numLengths",type:a}),4:n.Parser.start().nest("lengthsEncoding",{type:"cramEncoding"}).nest("valuesEncoding",{type:"cramEncoding"}),5:(new n.Parser).uint8("stopByte")[e>1?"itf8":"int"]("blockContentId"),6:(new n.Parser).itf8("offset").itf8("length"),7:(new n.Parser).itf8("offset").itf8("K"),8:(new n.Parser).itf8("offset").itf8("log2m"),9:(new n.Parser).itf8("offset")}})}},cramDataSeriesEncodingMap:function(e){return(new n.Parser).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new n.Parser).string("key",{length:2,stripNull:!1}).nest("value",{type:this.cramEncoding(e).parser})})},cramTagEncodingMap:function(e){return(new n.Parser).itf8("mapSize").itf8("mapCount").array("ents",{length:"mapCount",type:(new n.Parser).itf8("key",{formatter:function(e){return String.fromCharCode(e>>16&255)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e)}}).nest("value",{type:this.cramEncoding(e).parser})})},cramCompressionHeader:function(e){var t=new n.Parser;return{parser:t=t.nest("preservation",{type:u,formatter:h}).nest("dataSeriesEncoding",{type:this.cramDataSeriesEncodingMap(e),formatter:h}).nest("tagEncoding",{type:this.cramTagEncodingMap(e),formatter:h})}},cramContainerHeader1:function(e){var t=(new n.Parser).int32("length").itf8("refSeqId").itf8("refSeqStart").itf8("alignmentSpan").itf8("numRecords"),r=24;return e>=3?(t=t.ltf8("recordCounter"),r+=9):2===e&&(t=t.itf8("recordCounter"),r+=5),e>1&&(t=t.ltf8("numBases"),r+=9),{parser:t=t.itf8("numBlocks").itf8("numLandmarks"),maxLength:r+=10}},cramContainerHeader2:function(e){var t=(new n.Parser).itf8("numLandmarks").array("landmarks",{type:(new n.Parser).itf8(),length:"numLandmarks"}),r=0;return e>=3&&(t=t.uint32("crc32"),r=4),{parser:t,maxLength:function(e){return 5+5*e+r}}}};function p(e){var t=Object.assign({},l);return Object.keys(d).forEach((function(r){t[r]=d[r](e)})),t}},1421:function(e,t,r){"use strict";(function(t){var n=r(1422),a=r(892),o=r(893),i=r(1424),s=r(1425);e.exports={r4x8_uncompress:function(e,t){n.decode(e).copy(t,0,0)},r4x16_uncompress:function(e,t){a.decode(e).copy(t,0,0)},arith_uncompress:function(e,t){o.decode(e).copy(t,0,0)},fqzcomp_uncompress:function(e,t){var r=new Array;i.decode(e,r).copy(t,0,0)},tok3_uncompress:function(e,r){var n=s.decode(e,0,"\0");t.from(n,"binary").copy(r,0,0)}}}).call(this,r(99).Buffer)},1422:function(e,t,r){(function(t){var n=r(360);function a(e){return 4095&e}function o(e,t){for(var r=0;t>=e[r+1];)r++;return r}function i(e){for(var t=new Array(4096),r=0,n=0;n<4096;n++){for(;n>=e[r+1];)r++;t[n]=r}return t}function s(e,t,r){return r*(e>>12)+(4095&e)-t}function c(e,t){for(;t<1<<23;)t=(t<<8)+e.ReadByte();return t}function f(e,t){t.WriteByteNeg(e>>24&255),t.WriteByteNeg(e>>16&255),t.WriteByteNeg(e>>8&255),t.WriteByteNeg(e>>0&255)}function u(e,t,r,n,a){return e=function(e,t,r,n){for(var a=(1<<23>>n<<8)*r;e>=a;)t.WriteByteNeg(255&e),e>>=8;return e}(e,t,n,a),e=(Math.floor(e/n)<<a)+e%n+r}function h(e,t,r){for(var n=0;n<256;n++)t[n]=0;var a=e.ReadByte(),o=a,i=0;do{var s=e.ReadITF8();t[a]=s,i>0?(i--,a++):(a=e.ReadByte())==o+1&&(i=e.ReadByte()),o=a}while(0!=a);r[0]=0;for(n=0;n<=255;n++)r[n+1]=r[n]+t[n]}function l(e){for(var t=0,r=0;r<256;r++)t+=e[r];var n=4096,a=n/t;do{var o=0,i=0,s=0;t=0;for(r=0;r<256;r++)0!=e[r]&&(o<e[r]&&(o=e[r],i=r),e[r]=Math.floor(e[r]*a),0==e[r]&&(e[r]=1),t+=e[r]);t<n?e[i]+=n-t:t-n<e[i]/2&&e[i]>2?e[i]-=t-n:t!=n&&(a*=.99,s=1)}while(s)}function d(e,t){for(var r=0,n=0;n<256;n++)if(t[n]){if(r>0)r--;else if(e.WriteByte(n),n>0&&t[n-1]>0){for(r=n+1;r<256&&t[r];r++);r-=n+1,e.WriteByte(r)}e.WriteITF8(t[n])}e.WriteByte(0)}e.exports={decode:function(e){var r=new n(e),f=r.ReadByte(),u=(r.ReadUint32(),r.ReadUint32());return 0==f?function(e,r){var n=new Array(256),o=new Array(256);h(e,n,o);for(var f=i(o),u=new Array(4),l=0;l<4;l++)u[l]=e.ReadUint32();var d=new t.allocUnsafe(r);for(l=0;l<r;l++){var p=l%4,v=f[a(u[p])];d[l]=v,u[p]=s(u[p],o[v],n[v]),u[p]=c(e,u[p])}return d}(r,u):function(e,r){var n=new Array(256),f=new Array(256);!function(e,t,r){for(var n=0;n<256;n++){t[n]=new Array(256),r[n]=new Array(256);for(var a=0;a<256;a++)t[n][a]=0}var o=e.ReadByte(),i=o,s=0;do{h(e,t[o],r[o]),s>0?(s--,o++):(o=e.ReadByte())==i+1&&(s=e.ReadByte()),i=o}while(0!=o)}(e,n,f);for(var u=new Array(256),l=0;l<256;l++)u[l]=i(f[l]);for(var d=new Array(4),p=new Array(4),v=0;v<4;v++)d[v]=e.ReadUint32(),p[v]=0;var y=new t.allocUnsafe(r),g=Math.floor(r/4);for(l=0;l<g;l++)for(v=0;v<4;v++){var b=a(d[v]),m=u[p[v]][b];y[l+v*g]=m,d[v]=s(d[v],f[p[v]][m],n[p[v]][m]),d[v]=c(e,d[v]),p[v]=m}l*=4;for(;l<r;){b=a(d[3]),m=o(f[p[3]],b);y[l++]=m,d[3]=s(d[3],f[p[3]][m],n[p[3]][m]),d[3]=c(e,d[3]),p[3]=m}return y}(r,u)},encode:function(e,r){return 0==r?function(e){var r=e.length,a=new n("",0,780);a.WriteByte(0),a.WriteUint32(0),a.WriteUint32(0);var o=new Array(256);(function(e,t){for(var r=0;r<256;r++)t[r]=0;for(r=0;r<e.length;r++)t[e[r]]++})(e,o),l(o),d(a,o);var i=new Array(256);i[0]=0;for(var s=1;s<256;s++)i[s]=i[s-1]+o[s-1];var c=new Array(4);for(s=0;s<4;s++)c[s]=1<<23;var h=Math.floor(1.05*r+100),p=new n("",h,h);for(s=r-1;s>=0;s--)c[s%4]=u(c[s%4],p,i[e[s]],o[e[s]],12);for(s=3;s>=0;s--)f(c[s],p);var v=a.pos;return a.buf.writeInt32LE(v-9+(p.length-p.pos),1),a.buf.writeInt32LE(r,5),t.concat([a.buf.slice(0,a.pos),p.buf.slice(p.pos,p.length)],a.pos+p.length-p.pos)}(e):function(e){var r=e.length,a=new n("",0,198156);a.WriteByte(1),a.WriteUint32(0),a.WriteUint32(0);for(var o=new Array(256),i=new Array(256),s=new Array(256),c=0;c<256;c++)i[c]=new Array(256),s[c]=new Array(256);(function(e,t,r){for(var n=0;n<256;n++){r[n]=0;for(var a=0;a<256;a++)t[n][a]=0}var o=0;for(n=0;n<e.length;n++)r[e[n]]++,t[o][e[n]]++,o=e[n];t[0][e[1*(e.length>>2)]]++,t[0][e[2*(e.length>>2)]]++,t[0][e[3*(e.length>>2)]]++,r[0]+=3})(e,i,o),function(e,t){for(var r=0;r<256;r++)t[r]&&l(e[r])}(i,o),function(e,t,r){for(var n=0,a=0;a<256;a++)if(r[a]){if(n>0)n--;else if(e.WriteByte(a),a>0&&r[a-1]>0){for(n=a+1;n<256&&r[n];n++);n-=a+1,e.WriteByte(n)}d(e,t[a])}e.WriteByte(0)}(a,i,o);for(c=0;c<256;c++)if(o[c]){s[c][0]=0;for(var h=1;h<256;h++)s[c][h]=s[c][h-1]+i[c][h-1]}var p=new Array(4),v=new Array(4);for(h=0;h<4;h++)p[h]=1<<23,v[h]=0;var y=new n("",r,r),g=Math.floor(r/4),b=new Array(4),m=new Array(4);for(h=0;h<4;h++)b[h]=(h+1)*g-2,m[h]=e[b[h]+1];m[3]=e[r-1];for(c=r-2;c>4*g-2;c--)p[3]=u(p[3],y,s[e[c]][m[3]],i[e[c]][m[3]],12),m[3]=e[c];for(;b[0]>=0;)for(h=3;h>=0;h--){var w=e[b[h]];p[h]=u(p[h],y,s[w][m[h]],i[w][m[h]],12),m[h]=w,b[h]--}for(h=3;h>=0;h--)p[h]=u(p[h],y,s[0][m[h]],i[0][m[h]],12);for(c=3;c>=0;c--)f(p[c],y);var k=a.pos;return a.buf.writeInt32LE(k-9+(y.length-y.pos),1),a.buf.writeInt32LE(r,5),t.concat([a.buf.slice(0,a.pos),y.buf.slice(y.pos,y.length)],a.pos+y.length-y.pos)}(e)}}}).call(this,r(99).Buffer)},1423:function(e,t){var r={array:function(e){var t=0,r=0,n=[0,1,3,7,15,31,63,127,255];return function(a){for(var o=0;a>0;){var i=8-t;a>=i?(o<<=i,o|=n[i]&e[r++],t=0,a-=i):(o<<=a,o|=(e[r]&n[a]<<8-a-t)>>8-a-t,t+=a,a=0)}return o}},simple:function(e){var t,n,a=r.header(e),o=[],i=0;do{-1!=(n=r.decompress(e,a))&&(o.push(n),i+=n.byteLength)}while(-1!=n);t=new Uint8Array(i),i=0;for(var s=0;s<o.length;++s)n=o[s],t.set(n,i),i+=n.byteLength;return t},header:function(e){if(4348520!=e(24))throw"No magic number found";var t=e(8)-48;if(t<1||t>9)throw"Not a BZIP archive";return t},decompress:function(e,t,r){for(var n=9e5,a="",o=0;o<6;o++)a+=e(8).toString(16);if("177245385090"==a)return-1;if("314159265359"!=a)throw"eek not valid bzip data";if(e(32),e(1))throw"unsupported obsolete version";var i=e(24);if(i>n)throw"Initial position larger than buffer size";var s=e(16),c=new Uint8Array(256),f=0;for(o=0;o<16;o++)if(s&1<<15-o){var u=e(16);for(v=0;v<16;v++)u&1<<15-v&&(c[f++]=16*o+v)}var h=e(3);if(h<2||h>6)throw"another error";var l=e(15);if(0==l)throw"meh";var d=[];for(o=0;o<h;o++)d[o]=o;var p=new Uint8Array(32768);for(o=0;o<l;o++){for(var v=0;e(1);v++)if(v>=h)throw"whoops another error";var y=d[v];d.splice(v,1),d.splice(0,0,y),p[o]=y}var g=f+2,b=[];for(v=0;v<h;v++){var m,w,k,S=new Uint8Array(258),x=new Uint8Array(21);s=e(5);for(o=0;o<g;o++){for(;;){if(s<1||s>20)throw"I gave up a while ago on writing error messages";if(!e(1))break;e(1)?s--:s++}S[o]=s}m=w=S[0];for(o=1;o<g;o++)S[o]>w?w=S[o]:S[o]<m&&(m=S[o]);(k=b[v]={}).permute=new Uint32Array(258),k.limit=new Uint32Array(21),k.base=new Uint32Array(21),k.minLen=m,k.maxLen=w;var A=k.base.subarray(1),C=k.limit.subarray(1),B=0;for(o=m;o<=w;o++)for(s=0;s<g;s++)S[s]==o&&(k.permute[B++]=s);for(o=m;o<=w;o++)x[o]=C[o]=0;for(o=0;o<g;o++)x[S[o]]++;for(B=s=0,o=m;o<w;o++)B+=x[o],C[o]=B-1,B<<=1,A[o+1]=B-(s+=x[o]);C[w]=B+x[w]-1,A[m]=0}var _,R,E,M=new Uint32Array(256);for(o=0;o<256;o++)d[o]=o;_=R=g=E=0;for(var O=new Uint32Array(n);;){if(!g--){if(g=49,E>=l)throw"meow i'm a kitty, that's an error";A=(k=b[p[E++]]).base.subarray(1),C=k.limit.subarray(1)}for(v=e(o=k.minLen);;){if(o>k.maxLen)throw"rawr i'm a dinosaur";if(v<=C[o])break;o++,v=v<<1|e(1)}if((v-=A[o])<0||v>=258)throw"moo i'm a cow";var I=k.permute[v];if(0!=I&&1!=I){if(_){if(_=0,R+s>=n)throw"Boom.";for(M[y=c[d[0]]]+=s;s--;)O[R++]=y}if(I>f)break;if(R>=n)throw"I can't think of anything. Error";y=d[o=I-1],d.splice(o,1),d.splice(0,0,y),M[y=c[y]]++,O[R++]=y}else _||(_=1,s=0),s+=0==I?_:2*_,_<<=1}if(i<0||i>=R)throw"I'm a monkey and I'm throwing something at someone, namely you";for(v=0,o=0;o<256;o++)u=v+M[o],M[o]=v,v=u;for(o=0;o<R;o++)O[M[y=255&O[o]]]|=o<<8,M[y]++;var F=0,P=0,j=0;R&&(P=255&(F=O[i]),F>>=8,j=-1),R=R;var U,N,L,q=new Uint8Array(n),T=0;for(r||(r=1/0);R;){for(R--,N=P,P=255&(F=O[F]),F>>=8,3==j++?(U=P,L=N,P=-1):(U=1,L=P);U--;)if(q[T++]=L,!--r)return q;P!=N&&(j=0)}return q.subarray(0,T)}};e.exports=r},1424:function(e,t,r){(function(t,n){var a=r(331).default,o=r(360),i=r(895),s=r(894);function c(e,t,r){for(var n=0,a=0,o=-1,i=new Array(1024);a<r;){var s=e.ReadByte();if(i[n++]=s,a+=s,s==o){var c=e.ReadByte();for(a+=s*c;c--;)i[n++]=s}o=s}var f=0;for(n=0,a=0;a<r;){var u=0;do{var h=i[n++];u+=h}while(255==h);for(;u--;)t[a++]=f;f++}}function f(e,t,r){var n=e.context;return t.qctx=(t.qctx<<e.qshift)+e.qtab[r],n+=(t.qctx&(1<<e.qbits)-1)<<e.qloc,e.do_pos&&(n+=e.ptab[Math.min(t.p,1023)]<<e.ploc),e.do_delta&&(n+=e.dtab[Math.min(t.delta,255)]<<e.dloc,t.delta+=t.prevq!=r?1:0,t.prevq=r),e.do_sel&&(n+=t.s<<e.sloc),t.p--,65535&n}function u(e){var t={};t.context=e.ReadUint16(),t.pflags=e.ReadByte(),t.do_dedup=2&t.pflags,t.fixed_len=4&t.pflags,t.do_sel=8&t.pflags,t.do_qmap=16&t.pflags,t.do_pos=32&t.pflags,t.do_delta=64&t.pflags,t.do_qtab=128&t.pflags,t.max_sym=e.ReadByte();var r=e.ReadByte();if(t.qbits=r>>4,t.qshift=15&r,r=e.ReadByte(),t.qloc=r>>4,t.sloc=15&r,r=e.ReadByte(),t.ploc=r>>4,t.dloc=15&r,t.qmap=new Array(256),16&t.pflags)for(var n=0;n<t.max_sym;n++)t.qmap[n]=e.ReadByte();else for(n=0;n<256;n++)t.qmap[n]=n;if(t.qtab=new Array(1024),t.qbits>0&&128&t.pflags)c(e,t.qtab,256);else for(n=0;n<256;n++)t.qtab[n]=n;return t.ptab=new Array(1024),32&t.pflags&&c(e,t.ptab,1024),t.dtab=new Array(256),64&t.pflags&&c(e,t.dtab,256),t}function h(e,t,r,n,a,o){r.max_sel>0?a.s=n.sel.ModelDecode(e,t):a.s=0,a.x=r.stab[a.s];var i=r.params[a.x];if(i.fixed_len>=0){var s=n.len[0].ModelDecode(e,t);s|=n.len[1].ModelDecode(e,t)<<8,s|=n.len[2].ModelDecode(e,t)<<16,s|=n.len[3].ModelDecode(e,t)<<24,i.fixed_len>0&&(i.fixed_len=-s)}else s=-i.fixed_len;a.len=s,r.do_rev&&(o[a.rec]=n.rev.ModelDecode(e,t)),a.is_dup=0,2&i.pflags&&n.dup.ModelDecode(e,t)&&(a.is_dup=1),a.p=s,a.delta=0,a.qctx=0,a.prevq=0,a.rec++}function l(e,r){var n=e.ReadUint7(),a=function(e){var t={max_sym:0};if(5==e.ReadByte()){var r=e.ReadByte(),n=1&r?e.ReadByte():1,a=r.nparam>1?r.nparam-1:0,o=new Array(256);if(2&r)a=e.ReadByte(),c(e,o,256);else{for(var i=0;i<n;i++)o[i]=i;for(;i<256;i++)o[i]=n-1}t.do_rev=4&r,t.stab=o,t.max_sel=a,t.params=new Array(t.nparam);for(var s=0;s<n;s++)t.params[s]=u(e),t.max_sym<t.params[s].max_sym&&(t.max_sym=t.params[s].max_sym);return t}console.error("Invalid FQZComp version number")}(e);if(a){var o=a.params,l=new Array(r.length),d=function(e){var t={};t.qual=new Array(65536);for(var r=0;r<65536;r++)t.qual[r]=new i(e.max_sym+1);for(t.len=new Array(4),r=0;r<4;r++)t.len[r]=new i(256);return t.rev=new i(2),t.dup=new i(2),e.max_sel>0&&(t.sel=new i(e.max_sel+1)),t}(a),p=new s(e);p.RangeStartDecode(e);for(var v=new t.allocUnsafe(n),y={qctx:0,prevq:0,delta:0,p:0,s:0,x:0,len:0,is_dup:0,rec:0},g=0;g<n;){if(0==y.p){if(h(e,p,a,d,y,l),y.is_dup>0&&d.dup.ModelDecode(e,p)){for(var b=0;b<len;b++)v[g+b]=v[g+b-y.len];g+=y.len,y.p=0;continue}r.push(y.len);var m=(o=a.params[y.x]).context}var w=d.qual[m].ModelDecode(e,p);v[g++]=o.qmap[w],m=f(o,y,w)}return a.do_rev&&function(e,t,r,n){var a=0,o=0;for(;o<t;){if(r[a])for(var i=0,s=n[a]-1;i<s;){var c=e[o+i];e[o+i]=e[o+s],e[o+s]=c,i++,s--}o+=n[a++]}}(v,n,l,r),v}}function d(e,t,r){for(var n=0,a=0,o=new Array(2*r),i=0;n<r;){for(var s=n;n<r&&t[n]==a;)n++;var c=n-s;do{var f=Math.min(255,c);o[i++]=f,c-=f}while(255==f);a++}var u=-1,h=new Array(2*r),l=0;for(n=0;n<i;){var d=o[n++];if(h[l++]=d,d==u){for(s=n;n<i&&o[n]==u&&n-s<255;)n++;h[l++]=n-s}else u=d}e.WriteData(h,l)}e.exports={decode:function(e,t){return l(new o(e),t)},encode:function(e,t,r){for(var c=new Array(2),f=new Array(2),u=new Array(2),h=new Array(2),l=new Array(256),p=0;p<2;p++)c[p]=new Array(256),f[p]=new Array(256),u[p]=new Array(1024),h[p]=new Array(256);(y=new o("",0,1.1*e.length+100)).WriteUint7(e.length);var v=function(e,t,r,n){for(var o,i=r[0],s=0;s<r.length&&r[s]==i;s++);var c=s==r.length?1:0,f=0,u=0;for(s=0;s<256;s++)n[0][s]=0;var h=0,l=0;for(s=0;s<e.length;s++)0==l&&(l=t[h<t.length-1?h++:h]),n[0][e[s]]++,l--;for(s=0;s<256;s++)n[0][s]&&(u<s&&(u=s),f++);var d=5,p=0;return f<=16&&(p=1,d=f<=2?1:f<=4?2:f<=8?3:4),[(o={qbits:8+(d>4),qshift:d,qloc:7,pbits:7,pshift:t[0]>128?1:0,ploc:0,dbits:d>4?0:1,dshift:3,dloc:15,sbits:0,sloc:15,do_stab:0,context:0,max_sym:u,nsym:f,do_qmap:p,do_dedup:0,fixed_len:1==t.length?1:0,do_sel:0,do_rev:0,do_pos:1,do_delta:d<=4?1:0,do_qtab:0},a(o,"qbits",8+(d>4)-(0==c)),a(o,"sbits",1),a(o,"sloc",15-(d<=4)),a(o,"do_stab",1),a(o,"do_sel",1),o)]}(e,t,r,c),y=function(e,t,r,n,a,o,i){for(var s=[0,1,1,1,2,2,2,2,2,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],c=0;c<t.length;c++)i[c]=c;for(;c<256;c++)i[c]=t.length-1;e.WriteByte(5);var f=(t.length>1?1:0)|(t[0].do_stab?2:0);if(e.WriteByte(f),1&f&&e.WriteByte(t.length),2&f){var u=1<<t[0].sbits;u>0&&u--,e.WriteByte(u),d(e,i,256)}for(var h=0;h<t.length;h++){if(e.WriteUint16(t[h].context),e.WriteByte((t[h].do_qtab?128:0)|(t[h].do_delta?64:0)|(t[h].do_pos?32:0)|(t[h].do_qmap?16:0)|(t[h].do_sel?8:0)|(t[h].fixed_len?4:0)|(t[h].do_dedup?2:0)),t[h].do_qmap?e.WriteByte(t[h].nsym):e.WriteByte(t[h].max_sym),e.WriteByte(t[h].qbits<<4|t[h].qshift),e.WriteByte(t[h].qloc<<4|t[h].sloc),e.WriteByte(t[h].ploc<<4|t[h].dloc),t[h].do_qmap){t[h].max_sym=t[h].nsym;var l=0;for(c=0;c<256;c++)r[h][c]&&(e.WriteByte(c),r[h][c]=l++);for(;l<t[h].nsym;l++)e.WriteByte(0)}else for(c=0;c<256;c++)r[h][c]=c;if(t[h].qbits>0){for(c=0;c<256;c++)n[h][c]=c;t[h].do_qtab&&d(e,n[h],256)}if(t[h].pbits>0){for(c=0;c<1024;c++)a[h][c]=Math.min((1<<t[h].pbits)-1,c>>t[h].pshift);d(e,a[h],1024)}if(t[h].dbits>0){for(c=0;c<256;c++)s[c]>(1<<t[h].dbits)-1&&(s[c]=(1<<t[h].dbits)-1);for(c=0;c<256;c++)o[h][c]=s[Math.min(s.length-1,c>>t[h].dshift)];d(e,o[h],256)}}return e}(y,v,c,f,u,h,l);return function(e,t,r,a,o,c,f,u,h,l){var d=1<<o[0].sbits;d>0&&d--;for(var p=t.length,v=0,y=0;y<o.length;y++)v<o[y].max_sym&&(v=o[y].max_sym);for(var g=new Array(65536),b=0;b<65536;b++)g[b]=new i(v+1);var m=new Array(4);for(b=0;b<4;b++)m[b]=new i(256);new i(2),new i(2);for(var w=new i(d+1),k=new s(t),S=(y=0,b=0,0);b<p;){if(0==y){var x=a[S];o[0].sbits>0&&w.ModelEncode(e,k,x);var A=l[x],C=r[Math.min(r.length-1,S++)];o[A].fixed_len?o[A].fixed_len>0&&(m[0].ModelEncode(e,k,255&C),m[1].ModelEncode(e,k,C>>8&255),m[2].ModelEncode(e,k,C>>16&255),m[3].ModelEncode(e,k,C>>24&255),o[A].fixed_len=-1):(m[0].ModelEncode(e,k,255&C),m[1].ModelEncode(e,k,C>>8&255),m[2].ModelEncode(e,k,C>>16&255),m[3].ModelEncode(e,k,C>>24&255)),o[A].do_dedup&&n.exit(1),y=C;var B=0,_=o[A].context,R=0,E=0}var M=t[b++],O=c[A][M];g[_].ModelEncode(e,k,O),R=(R<<o[A].qshift)+f[A][O],_=o[A].context,_+=(R&(1<<o[A].qbits)-1)<<o[A].qloc,o[A].pbits>0&&(_+=u[A][Math.min(y,1023)]<<o[A].ploc),o[A].dbits>0&&(_+=h[A][Math.min(B,255)]<<o[A].dloc,B+=E!=O?1:0,E=O),o[A].do_sel&&(_+=x<<o[A].sloc),_&=65535,y--}return k.RangeFinishEncode(e),e.buf.slice(0,e.pos)}(y,e,t,r,v,c,f,u,h,l)}}}).call(this,r(99).Buffer,r(148))},1425:function(e,t,r){(function(t){var n=r(146).default,a=r(360),o=r(892),i=new(r(893));function s(e,t){for(var r=e+"";r.length<t;)r="0"+r;return r}function c(e,t,r,n){var a=e[0][0].ReadByte(),o=n-e[0][a].ReadUint32();if(5==a)return t[n]=t[o],r[n]=r[o],t[n];var i=1;t[n]="",r[n]=new Array(256);do{switch(a=e[i][0].ReadByte()){case 2:r[n][i]=e[i][2].ReadChar();break;case 1:r[n][i]=e[i][1].ReadString();break;case 7:r[n][i]=e[i][7].ReadUint32();break;case 3:var c=e[i][3].ReadUint32(),f=e[i][4].ReadByte();r[n][i]=s(c,f);break;case 8:r[n][i]=(r[o][i]>>0)+e[i][8].ReadByte();break;case 9:c=(r[o][i]>>0)+e[i][9].ReadByte(),f=r[o][i].length;r[n][i]=s(c,f);break;case 10:r[n][i]=r[o][i];break;default:r[n][i]=""}t[n]+=r[n][i++]}while(12!=a);return t[n]}function f(e,t,r,n,a,o){for(var i=0;i<n.length;i++)if(!(r>0&&5==t[i][0].type)&&t[i][r])switch(e[0].WriteByte(t[i][r].type),t[i][r].type){case 6:e[6].WriteUint32(t[i][r].val);break;case 5:e[5].WriteUint32(t[i][r].val);break;case 1:e[1].WriteString(t[i][r].val);break;case 2:e[2].WriteChar(t[i][r].val);break;case 7:e[7].WriteUint32(t[i][r].val);break;case 3:e[3].WriteUint32(t[i][r].val),e[4].WriteByte(t[i][r].val.length);break;case 8:case 9:e[t[i][r].type].WriteByte(t[i][r].val)}}function u(e,t,r,n){for(var a=0;a<=12;a++)if(!(e[a].pos<=0)){n.WriteByte(a+(0==a?128:0)),e[a]=e[a].buf.slice(0,e[a].pos);var o=h(e[a],r);n.WriteUint7(o.length),n.WriteData(o,o.length)}}function h(e,t){var r,n=1<<30,a=[0,1,64,65,128,129,201];for(var s in a){var c=a[s];if(!(1&c&&e.length<100)&&!(8&c&&e.length%4!=0)){try{var f=t?i.encode(e,c):o.encode(e,c)}catch(u){f=0}f&&n>f.length&&(n=f.length,r=f)}}return r}function l(e,t,r,n,a){var o=0,i=a-1;e[a]=new Array(256),t[n]?e[a][0]={type:5,val:a-t[n]}:e[a][0]={type:6,val:0==a?0:1},t[n]=a;for(var s=n.match(/([a-zA-Z0-9]{1,9})|([^a-zA-Z0-9]+)/g),c=0;c<s.length;c++){var f=c+1,u=1,h=s[c];if(s[c].match(/^0+[0-9]*$/g)?u=3:s[c].match(/^[0-9]+$/g)?u=7:1==s[c].length&&(u=2),i>=0&&e[i][f])if(e[i][f].str==s[c])u=10,h="";else if(7==e[i][f].type||8==e[i][f].type){var l=h-e[i][f].str;r[f]++,l>=0&&l<256&&r[f]>a/2&&(u=8,h=l)}else if((3==e[i][f].type||9==e[i][f].type)&&e[i][f].str.length==h.length){l=h-e[i][f].str;r[f]++,l>=0&&l<256&&r[f]>a/2&&(u=9,h=l)}e[a][f]={str:s[c],val:h,type:u},o<e[a][f].val.length+3&&(o=e[a][f].val.length+3)}return e[a][++f]={type:12},[f+1,o]}e.exports={encode:function(e,t){var r=e.toString();"\n"==r[r.length-1]&&(r=r.substring(0,r.length-1));var o=r.split("\n"),i=new a("",0,2*r.length+1e4);i.WriteUint32(r.length),i.WriteUint32(o.length),i.WriteByte(t);for(var s=new Array(o.length),c={},h=new Array(256).fill(0),d=0,p=0,v=0;v<o.length;v++){var y=l(s,c,h,o[v],v),g=n(y,2),b=g[0],m=g[1];d<b&&(d=b),p<m&&(p=m)}for(var w=0;w<d;w++){for(var k=new Array(13),S=0;S<=12;S++)k[S]=new a("",0,o.length*p);f(k,s,w,o,d,p),u(k,w,t,i)}return i.buf.slice(0,i.pos)},decode:function(e,r,n){(e=new a(e)).ReadUint32();var s=e.ReadUint32(),f=e.ReadByte(),u=function(e,r,n,s){for(var c=-1,f=new Array(256);!e.EOF();){var u=e.ReadByte(),h=128&u,l=64&u,d=63&u;if(h&&(f[++c]=new Array(13)),0!=d&&h){var p=new Array(s-1).fill(10);f[c][0]=new a(t.from([d].concat(p)))}if(l){var v=e.ReadByte(),y=e.ReadByte();f[c][d]=new a(f[v][y].buf)}else{var g=e.ReadUint7(),b=e.ReadData(g);f[c][d]=n?i.decode(b):o.decode(b),f[c][d]=new a(f[c][d])}}return f}(e,0,f,s),h=new Array(s),l=new Array(s),d="";"undefined"===typeof n&&(n="\n");for(var p=0;p<s;p++)d+=c(u,h,l,p)+n;return d}}}).call(this,r(99).Buffer)},1426:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return l}));var n=r(82),a=r(81),o=r(11),i=r(80),s=r.n(i),c=r(138),f=r(361),u=r(1430),h=r(1608),l=function(){function t(e,r){Object(a.a)(this,t),this.file=e,this.filePosition=r}return Object(o.a)(t,[{key:"getHeader",value:function(){return this._readContainerHeader(this.filePosition)}},{key:"getCompressionHeaderBlock",value:function(){var e=Object(n.a)(s.a.mark((function e(){var t,r,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:if(e.sent.numRecords){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.file.getSectionParsers();case 7:return t=e.sent,e.next=10,this.getFirstBlock();case 10:if("COMPRESSION_HEADER"===(r=e.sent).contentType){e.next=13;break}throw new c.c("invalid content type ".concat(r.contentType," in what is supposed to be the compression header block"));case 13:return n=Object(f.b)(r.content,t.cramCompressionHeader.parser,0,r.contentPosition),r.content=n,e.abrupt("return",r);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFirstBlock",value:function(){var e=Object(n.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:return t=e.sent,e.abrupt("return",this.file.readBlock(t._endPosition));case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCompressionScheme",value:function(){var e=Object(n.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getCompressionHeaderBlock();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.abrupt("return",new h.a(t.content));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getSlice",value:function(e,t){return new u.a(this,e,t)}},{key:"_readContainerHeader",value:function(){var t=Object(n.a)(s.a.mark((function t(r){var n,a,o,i,c,u,h,l,d,p,v;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.file.getSectionParsers();case 2:return n=t.sent,a=n.cramContainerHeader1,o=n.cramContainerHeader2,t.next=6,this.file.stat();case 6:if(i=t.sent,c=i.size,!(r>=c)){t.next=10;break}return t.abrupt("return",void 0);case 10:return u=e.allocUnsafe(a.maxLength),t.next=13,this.file.read(u,0,a.maxLength,r);case 13:if(h=Object(f.b)(u,a.parser),l=Object(f.a)(h.numLandmarks),!(r+h.length>=c)){t.next=18;break}return console.warn("".concat(this.file,": container header at ").concat(r," indicates that the container has length ").concat(h.length,", which extends beyond the length of the file. Skipping this container.")),t.abrupt("return",void 0);case 18:return d=e.allocUnsafe(o.maxLength(h.numLandmarks)),t.next=21,this.file.read(d,0,o.maxLength(h.numLandmarks),r+h._size-l);case 21:if(p=Object(f.b)(d,o.parser),!this.file.validateChecksums||void 0===p.crc32){t.next=25;break}return t.next=25,this.file.checkCrc32(r,h._size+p._size-l-4,p.crc32,"container header beginning at position ".concat(r));case 25:return v=Object.assign(h,p,{_size:h._size+p._size-l,_endPosition:h._size+p._size-l+r}),t.abrupt("return",v);case 27:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}();"getHeader getCompressionHeaderBlock getCompressionScheme".split(" ").forEach((function(e){return Object(f.e)(l,e)}))}).call(this,r(99).Buffer)},1427:function(e,t,r){!function(){var t=r(1428),n=r(896).utf8,a=r(1429),o=r(896).bin,i=function e(r,i){r.constructor==String?r=i&&"binary"===i.encoding?o.stringToBytes(r):n.stringToBytes(r):a(r)?r=Array.prototype.slice.call(r,0):Array.isArray(r)||r.constructor===Uint8Array||(r=r.toString());for(var s=t.bytesToWords(r),c=8*r.length,f=1732584193,u=-271733879,h=-1732584194,l=271733878,d=0;d<s.length;d++)s[d]=16711935&(s[d]<<8|s[d]>>>24)|4278255360&(s[d]<<24|s[d]>>>8);s[c>>>5]|=128<<c%32,s[14+(c+64>>>9<<4)]=c;var p=e._ff,v=e._gg,y=e._hh,g=e._ii;for(d=0;d<s.length;d+=16){var b=f,m=u,w=h,k=l;f=p(f,u,h,l,s[d+0],7,-680876936),l=p(l,f,u,h,s[d+1],12,-389564586),h=p(h,l,f,u,s[d+2],17,606105819),u=p(u,h,l,f,s[d+3],22,-1044525330),f=p(f,u,h,l,s[d+4],7,-176418897),l=p(l,f,u,h,s[d+5],12,1200080426),h=p(h,l,f,u,s[d+6],17,-1473231341),u=p(u,h,l,f,s[d+7],22,-45705983),f=p(f,u,h,l,s[d+8],7,1770035416),l=p(l,f,u,h,s[d+9],12,-1958414417),h=p(h,l,f,u,s[d+10],17,-42063),u=p(u,h,l,f,s[d+11],22,-1990404162),f=p(f,u,h,l,s[d+12],7,1804603682),l=p(l,f,u,h,s[d+13],12,-40341101),h=p(h,l,f,u,s[d+14],17,-1502002290),f=v(f,u=p(u,h,l,f,s[d+15],22,1236535329),h,l,s[d+1],5,-165796510),l=v(l,f,u,h,s[d+6],9,-1069501632),h=v(h,l,f,u,s[d+11],14,643717713),u=v(u,h,l,f,s[d+0],20,-373897302),f=v(f,u,h,l,s[d+5],5,-701558691),l=v(l,f,u,h,s[d+10],9,38016083),h=v(h,l,f,u,s[d+15],14,-660478335),u=v(u,h,l,f,s[d+4],20,-405537848),f=v(f,u,h,l,s[d+9],5,568446438),l=v(l,f,u,h,s[d+14],9,-1019803690),h=v(h,l,f,u,s[d+3],14,-187363961),u=v(u,h,l,f,s[d+8],20,1163531501),f=v(f,u,h,l,s[d+13],5,-1444681467),l=v(l,f,u,h,s[d+2],9,-51403784),h=v(h,l,f,u,s[d+7],14,1735328473),f=y(f,u=v(u,h,l,f,s[d+12],20,-1926607734),h,l,s[d+5],4,-378558),l=y(l,f,u,h,s[d+8],11,-2022574463),h=y(h,l,f,u,s[d+11],16,1839030562),u=y(u,h,l,f,s[d+14],23,-35309556),f=y(f,u,h,l,s[d+1],4,-1530992060),l=y(l,f,u,h,s[d+4],11,1272893353),h=y(h,l,f,u,s[d+7],16,-155497632),u=y(u,h,l,f,s[d+10],23,-1094730640),f=y(f,u,h,l,s[d+13],4,681279174),l=y(l,f,u,h,s[d+0],11,-358537222),h=y(h,l,f,u,s[d+3],16,-722521979),u=y(u,h,l,f,s[d+6],23,76029189),f=y(f,u,h,l,s[d+9],4,-640364487),l=y(l,f,u,h,s[d+12],11,-421815835),h=y(h,l,f,u,s[d+15],16,530742520),f=g(f,u=y(u,h,l,f,s[d+2],23,-995338651),h,l,s[d+0],6,-198630844),l=g(l,f,u,h,s[d+7],10,1126891415),h=g(h,l,f,u,s[d+14],15,-1416354905),u=g(u,h,l,f,s[d+5],21,-57434055),f=g(f,u,h,l,s[d+12],6,1700485571),l=g(l,f,u,h,s[d+3],10,-1894986606),h=g(h,l,f,u,s[d+10],15,-1051523),u=g(u,h,l,f,s[d+1],21,-2054922799),f=g(f,u,h,l,s[d+8],6,1873313359),l=g(l,f,u,h,s[d+15],10,-30611744),h=g(h,l,f,u,s[d+6],15,-1560198380),u=g(u,h,l,f,s[d+13],21,1309151649),f=g(f,u,h,l,s[d+4],6,-145523070),l=g(l,f,u,h,s[d+11],10,-1120210379),h=g(h,l,f,u,s[d+2],15,718787259),u=g(u,h,l,f,s[d+9],21,-343485551),f=f+b>>>0,u=u+m>>>0,h=h+w>>>0,l=l+k>>>0}return t.endian([f,u,h,l])};i._ff=function(e,t,r,n,a,o,i){var s=e+(t&r|~t&n)+(a>>>0)+i;return(s<<o|s>>>32-o)+t},i._gg=function(e,t,r,n,a,o,i){var s=e+(t&n|r&~n)+(a>>>0)+i;return(s<<o|s>>>32-o)+t},i._hh=function(e,t,r,n,a,o,i){var s=e+(t^r^n)+(a>>>0)+i;return(s<<o|s>>>32-o)+t},i._ii=function(e,t,r,n,a,o,i){var s=e+(r^(t|~n))+(a>>>0)+i;return(s<<o|s>>>32-o)+t},i._blocksize=16,i._digestsize=16,e.exports=function(e,r){if(void 0===e||null===e)throw new Error("Illegal argument "+e);var n=t.wordsToBytes(i(e,r));return r&&r.asBytes?n:r&&r.asString?o.bytesToString(n):t.bytesToHex(n)}}()},1428:function(e,t){!function(){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&r.rotl(e,8)|4278255360&r.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=r.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var r=[],n=0;n<e.length;n+=3)for(var a=e[n]<<16|e[n+1]<<8|e[n+2],o=0;o<4;o++)8*n+6*o<=8*e.length?r.push(t.charAt(a>>>6*(3-o)&63)):r.push("=");return r.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var r=[],n=0,a=0;n<e.length;a=++n%4)0!=a&&r.push((t.indexOf(e.charAt(n-1))&Math.pow(2,-2*a+8)-1)<<2*a|t.indexOf(e.charAt(n))>>>6-2*a);return r}};e.exports=r}()},1429:function(e,t){function r(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},1430:function(e,t,r){"use strict";r.d(t,"a",(function(){return p}));var n=r(82),a=r(81),o=r(11),i=r(12),s=r(80),c=r.n(s),f=r(138),u=r(361),h=r(601),l=r(1431);function d(e,t,r,n){if(!n)throw new f.c("could not resolve intra-slice mate pairs, file seems truncated or malformed");var a=!!(n.mate||void 0!==n.mateRecordNumber&&n.mateRecordNumber!==t);r.readName||(r.readName=String(r.uniqueId),n.readName=r.readName),r.mate={sequenceId:n.sequenceId,alignmentStart:n.alignmentStart,uniqueId:n.uniqueId},n.readName&&(r.mate.readName=n.readName),n.mate||void 0!==n.mateRecordNumber||(n.mate={sequenceId:r.sequenceId,alignmentStart:r.alignmentStart,uniqueId:r.uniqueId},r.readName&&(n.mate.readName=r.readName)),r.flags|=h.a.BAM_FPAIRED,n.flags&h.a.BAM_FUNMAP&&(r.flags|=h.a.BAM_FMUNMAP),r.flags&h.a.BAM_FUNMAP&&(n.flags|=h.a.BAM_FMUNMAP),n.flags&h.a.BAM_FREVERSE&&(r.flags|=h.a.BAM_FMREVERSE),r.flags&h.a.BAM_FREVERSE&&(n.flags|=h.a.BAM_FMREVERSE),void 0===r.templateLength&&(a?function(e,t,r){var n=function t(r){var n=[r];if(r.mateRecordNumber>=0){var a=e[r.mateRecordNumber];if(!a)throw new f.c("intra-slice mate record not found, this file seems malformed");n.push.apply(n,Object(i.a)(t(a)))}return n}(r),a=n.map((function(e){return e.alignmentStart})),o=n.map((function(e){return e.alignmentStart+e.readLength-1})),s=Math.max.apply(Math,Object(i.a)(o))-Math.min.apply(Math,Object(i.a)(a))+1;s>=0&&n.forEach((function(e){if(void 0!==e.templateLength)throw new f.c("mate pair group has some members that have template lengths already, this file seems malformed");e.templateLength=s}))}(e,0,r):function(e,t){var r=Math.min(e.alignmentStart,t.alignmentStart),n=Math.max(e.alignmentStart+e.readLength-1,t.alignmentStart+t.readLength-1)-r+1;e.templateLength=n,t.templateLength=n}(r,n)),delete r.mateRecordNumber}var p=function(){function e(t,r){Object(a.a)(this,e),this.container=t,this.file=t.file,this.containerPosition=r}return Object(o.a)(e,[{key:"getHeader",value:function(){var e=Object(n.a)(c.a.mark((function e(){var t,r,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.file.getSectionParsers();case 2:return t=e.sent,e.next=5,this.container.getHeader();case 5:return r=e.sent,e.next=8,this.file.readBlock(r._endPosition+this.containerPosition);case 8:if("MAPPED_SLICE_HEADER"!==(n=e.sent).contentType){e.next=13;break}n.content=Object(u.b)(n.content,t.cramMappedSliceHeader.parser,0,r._endPosition),e.next=18;break;case 13:if("UNMAPPED_SLICE_HEADER"!==n.contentType){e.next=17;break}n.content=Object(u.b)(n.content,t.cramUnmappedSliceHeader.parser,0,r._endPosition),e.next=18;break;case 17:throw new f.c("error reading slice header block, invalid content type ".concat(n._contentType));case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBlocks",value:function(){var e=Object(n.a)(c.a.mark((function e(){var t,r,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:t=e.sent,r=t._endPosition,n=new Array(t.content.numBlocks),a=0;case 6:if(!(a<n.length)){e.next=14;break}return e.next=9,this.file.readBlock(r);case 9:n[a]=e.sent,r=n[a]._endPosition;case 11:a+=1,e.next=6;break;case 14:return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCoreDataBlock",value:function(){var e=Object(n.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBlocks();case 2:return t=e.sent,e.abrupt("return",t[0]);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getBlocksContentIdIndex",value:function(){var e=Object(n.a)(c.a.mark((function e(){var t,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getBlocks();case 2:return t=e.sent,r={},t.forEach((function(e){"EXTERNAL_DATA"===e.contentType&&(r[e.contentId]=e)})),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getBlockByContentId",value:function(){var e=Object(n.a)(c.a.mark((function e(t){var r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._getBlocksContentIdIndex();case 2:return r=e.sent,e.abrupt("return",r[t]);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getReferenceRegion",value:function(){var e=Object(n.a)(c.a.mark((function e(){var t,r,n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getHeader();case 2:if(!((t=e.sent.content).refSeqId<0)){e.next=5;break}return e.abrupt("return",void 0);case 5:return e.next=7,this.container.getCompressionScheme();case 7:if(r=e.sent,!(t.refBaseBlockId>=0)){e.next=15;break}if(n=this.getBlockByContentId(t.refBaseBlockId)){e.next=12;break}throw new f.c("embedded reference specified, but reference block does not exist");case 12:if(!(t.span>n.uncompressedSize)){e.next=14;break}throw new f.c("Embedded reference is too small");case 14:return e.abrupt("return",{seq:n.data.toString("utf8"),start:t.refSeqStart,end:t.refSeqStart+t.refSeqSpan-1,span:t.refSeqSpan});case 15:if(!r.referenceRequired&&!this.file.fetchReferenceSequenceCallback){e.next=24;break}if(this.file.fetchReferenceSequenceCallback){e.next=18;break}throw new Error("reference sequence not embedded, and seqFetch callback not provided, cannot fetch reference sequence");case 18:return e.next=20,this.file.fetchReferenceSequenceCallback(t.refSeqId,t.refSeqStart,t.refSeqStart+t.refSeqSpan-1);case 20:if((a=e.sent).length===t.refSeqSpan){e.next=23;break}throw new f.a("seqFetch callback returned a reference sequence of the wrong length");case 23:return e.abrupt("return",{seq:a,start:t.refSeqStart,end:t.refSeqStart+t.refSeqSpan-1,span:t.refSeqSpan});case 24:return e.abrupt("return",void 0);case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAllRecords",value:function(){return this.getRecords((function(){return!0}))}},{key:"_fetchRecords",value:function(){var e=Object(n.a)(c.a.mark((function e(){var t,r,n,a,o,i,s,h,p,v,y,g,b,m,w,k,S,x,A=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.file.getDefinition();case 2:return t=e.sent,r=t.majorVersion,e.next=6,this.container.getCompressionScheme();case 6:return n=e.sent,e.next=9,this.getHeader();case 9:return a=e.sent,e.next=12,this._getBlocksContentIdIndex();case 12:if(o=e.sent,!(r>1&&this.file.options.checkSequenceMD5&&a.content.refSeqId>=0&&"0000000000000000"!==a.content.md5.join(""))){e.next=23;break}return e.next=16,this.getReferenceRegion();case 16:if(!(i=e.sent)){e.next=23;break}if(s=i.seq,h=i.start,p=i.end,v=Object(u.d)(s),y=a.content.md5.map((function(e){return(e<16?"0":"")+e.toString(16)})).join(""),v===y){e.next=23;break}throw new f.c("MD5 checksum reference mismatch for ref ".concat(a.content.refSeqId," pos ").concat(h,"..").concat(p,". recorded MD5: ").concat(y,", calculated MD5: ").concat(v));case 23:return e.next=25,this.getCoreDataBlock();case 25:g=e.sent,b={lastAlignmentStart:a.content.refSeqStart||0,coreBlock:{bitPosition:7,bytePosition:0},externalBlocks:{getCursor:function(e){return this[e]||(this[e]={bitPosition:7,bytePosition:0}),this[e]}}},m=function(e){var t=n.getCodecForDataSeries(e);if(!t)throw new f.c("no codec defined for ".concat(e," data series"));return t.decode(A,g,o,b)},w=new Array(a.content.numRecords),k=0;case 30:if(!(k<w.length)){e.next=48;break}e.prev=31,w[k]=Object(l.a)(this,m,n,a,g,o,b,r,k),w[k].uniqueId=a.contentPosition+a.content.recordCounter+k+1,e.next=45;break;case 36:if(e.prev=36,e.t0=e.catch(31),!(e.t0 instanceof f.b)){e.next=44;break}return console.warn("read attempted beyond end of buffer, file seems truncated."),w=w.filter((function(e){return!!e})),e.abrupt("break",48);case 44:throw e.t0;case 45:k+=1,e.next=30;break;case 48:for(S=0;S<w.length;S+=1)(x=w[S].mateRecordNumber)>=0&&d(w,S,w[S],w[x]);return e.abrupt("return",w);case 50:case"end":return e.stop()}}),e,this,[[31,36]])})));return function(){return e.apply(this,arguments)}}()},{key:"getRecords",value:function(){var e=Object(n.a)(c.a.mark((function e(t){var r,a,o,i,s,f,u,h,l,d,p,v,y,g,b=this;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=this.container.filePosition+this.containerPosition,(a=this.file.featureCache.get(r))||(a=this._fetchRecords(),this.file.featureCache.set(r,a)),e.next=5,a;case 5:if(!(o=e.sent.filter(t)).length||!this.file.fetchReferenceSequenceCallback){e.next=20;break}return e.next=9,this.getHeader();case 9:if(!((i=e.sent).content.refSeqId>=0||-2===i.content.refSeqId)){e.next=20;break}return s=i.content.refSeqId>=0?i.content.refSeqId:void 0,e.next=14,this.container.getCompressionScheme();case 14:for(f=e.sent,u={},h=0;h<o.length;h+=1)l=void 0!==s?s:o[h].sequenceId,(d=u[l])||(d={id:l,start:o[h].alignmentStart,end:-1/0},u[l]=d),(p=o[h].alignmentStart+(o[h].lengthOnRef||o[h].readLength)-1)>d.end&&(d.end=p),o[h].alignmentStart<d.start&&(d.start=o[h].alignmentStart);return e.next=19,Promise.all(Object.values(u).map(function(){var e=Object(n.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(-1!==t.id&&t.start<=t.end)){e.next=4;break}return e.next=3,b.file.fetchReferenceSequenceCallback(t.id,t.start,t.end);case 3:t.seq=e.sent;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 19:for(v=0;v<o.length;v+=1)y=void 0!==s?s:o[v].sequenceId,(g=u[y])&&g.seq&&o[v].addReferenceSequence(g,f);case 20:return e.abrupt("return",o);case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();"getHeader getBlocks _getBlocksContentIdIndex".split(" ").forEach((function(e){return Object(u.e)(p,e)}))},1431:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return d}));var n=r(12),a=r(29),o=r(211),i=r.n(o),s=r(138),c=r(1432),f=r(601);function u(e){var t=e.indexOf(0);return-1===t?e.toString("utf8"):e.toString("utf8",0,t)}function h(t,r){if(r.readInt32LE||(r=e.from(r)),"Z"===t)return u(r);if("A"===t)return String.fromCharCode(r[0]);if("I"===t){var n=i.a.fromBytesLE(r);if(n.greaterThan(Number.MAX_SAFE_INTEGER)||n.lessThan(Number.MIN_SAFE_INTEGER))throw new s.e("integer overflow");return n.toNumber()}if("i"===t)return r.readInt32LE(0);if("s"===t)return r.readInt16LE(0);if("S"===t)return r.readUInt16LE(0);if("c"===t)return r.readInt8(0);if("C"===t)return r.readUInt8(0);if("f"===t)return r.readFloatLE(0);if("H"===t){var o=u(r);return Number.parseInt(o.replace(/^0x/,""),16)}if("B"===t)return function(e){var t=String.fromCharCode(e[0]),r=e.readInt32LE(1),n={c:["readInt8",1],C:["readUInt8",1],s:["readInt16LE",2],S:["readUInt16LE",2],i:["readInt32LE",4],I:["readUInt32LE",4],f:["readFloatLE",4]}[t];if(!n)throw new s.c("invalid tag value array type '".concat(t,"'"));for(var o=Object(a.a)(n,2),i=o[0],c=o[1],f=new Array(r),u=5,h=0;h<r;h+=1)f[h]=e[i](u),u+=c;return f}(r);throw new s.c("Unrecognized tag type ".concat(t))}function l(t){if(t instanceof e)return u(t);if(t.length&&t.indexOf){if(!t[t.length-1]){var r=t.indexOf(0);return String.fromCharCode.apply(String,Object(n.a)(t.slice(0,r)))}return String.fromCharCode.apply(String,Object(n.a)(t))}return String(t)}function d(e,t,r,n,o,i,u,d,p){var v=new c.a;if(v.flags=t("BF"),v.cramFlags=t("CF"),d>1&&-2===n.content.refSeqId?v.sequenceId=t("RI"):v.sequenceId=n.content.refSeqId,v.readLength=t("RL"),v.alignmentStart=t("AP"),r.APdelta&&(v.alignmentStart+=u.lastAlignmentStart),u.lastAlignmentStart=v.alignmentStart,v.readGroupId=t("RG"),r.readNamesIncluded&&(v.readName=l(t("RN"))),v.isDetached()){var y={};y.flags=t("MF"),r.readNamesIncluded||(y.readName=l(t("RN")),v.readName=y.readName),y.sequenceId=t("NS"),y.alignmentStart=t("NP"),(y.flags||y.sequenceId>-1)&&(v.mate=y),v.templateSize=t("TS"),y.flags&f.a.CRAM_M_UNMAP&&(v.flags|=f.a.BAM_FMUNMAP),y.flags&f.a.CRAM_M_REVERSE&&(v.flags|=f.a.BAM_FMREVERSE)}else v.hasMateDownStream()&&(v.mateRecordNumber=t("NF")+p+1);var g=t("TL");if(g<0)throw new s.c("invalid TL index");for(var b=r.getTagNames(g),m=b.length,w=0;w<m;w+=1){var k=b[w],S=k.substr(0,2),x=k.substr(2,1),A=r.getCodecForTag(k);if(!A)throw new s.c("no codec defined for auxiliary tag ".concat(k));var C=A.decode(e,o,i,u);v.tags[S]=h(x,C)}if(v.isSegmentUnmapped())if(v.isUnknownBases())v.readBases=null,v.qualityScores=null;else{for(var B=new Array(v.readLength),_=0;_<B.length;_+=1)B[_]=t("BA");if(v.readBases=String.fromCharCode.apply(String,B),v.isPreservingQualityScores()){for(var R=0;R<B.length;R+=1)B[R]=t("QS");v.qualityScores=B}}else{var E=t("FN");E&&(v.readFeatures=function(e,t,r,n,o){var i=0,c=e.alignmentStart-1,f=new Array(t);function u(e){var t=Object(a.a)(e,2),n=t[0],o=t[1],i=r(o);return"character"===n?String.fromCharCode(i):"string"===n?i.toString("utf8"):"numArray"===n?i.toArray():i}for(var h=0;h<t;h+=1){var l=String.fromCharCode(r("FC")),d=r("FP"),p={code:l},v={B:["character","BA"],S:["string",o>1?"SC":"IN"],X:["number","BS"],D:["number","DL"],I:["string","IN"],i:["character","BA"],b:["string","BB"],q:["numArray","QQ"],Q:["number","QS"],H:["number","HC"],P:["number","PD"],N:["number","RS"]}[l];if(!v)throw new s.c('invalid read feature code "'.concat(l,'"'));p.data=u(v);var y={B:["number","QS"]}[l];y&&(p.data=[p.data,u(y)]),i+=d,p.pos=i,c+=d,p.refPos=c,"D"===l||"N"===l?c+=p.data:"I"===l||"S"===l?c-=p.data.length:"i"===l&&(c-=1),f[h]=p}return f}(v,E,t,0,d));var M=v.readLength;if(v.readFeatures&&v.readFeatures.forEach((function(e){var t=e.code,r=e.data;"D"===t||"N"===t?M+=r:"I"===t||"S"===t?M-=r.length:"i"===t&&(M-=1)})),Number.isNaN(M)&&(console.warn("".concat(v.readName||"".concat(v.sequenceId,":").concat(v.alignmentStart)," record has invalid read features")),M=v.readLength),v.lengthOnRef=M,v.mappingQuality=t("MQ"),v.isPreservingQualityScores()){for(var O=new Array(v.readLength),I=0;I<O.length;I+=1)O[I]=t("QS");v.qualityScores=O}}return v}}).call(this,r(99).Buffer)},1432:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(81),a=r(11),o=r(12),i=r(601);var s={a:0,A:0,c:1,C:1,g:2,G:2,t:3,T:3,n:4,N:4};var c=function(){function e(){Object(n.a)(this,e),this.tags={}}return Object(a.a)(e,[{key:"isPaired",value:function(){return!!(this.flags&i.a.BAM_FPAIRED)}},{key:"isProperlyPaired",value:function(){return!!(this.flags&i.a.BAM_FPROPER_PAIR)}},{key:"isSegmentUnmapped",value:function(){return!!(this.flags&i.a.BAM_FUNMAP)}},{key:"isMateUnmapped",value:function(){return!!(this.flags&i.a.BAM_FMUNMAP)}},{key:"isReverseComplemented",value:function(){return!!(this.flags&i.a.BAM_FREVERSE)}},{key:"isMateReverseComplemented",value:function(){return!!(this.flags&i.a.BAM_FMREVERSE)}},{key:"isRead1",value:function(){return!!(this.flags&i.a.BAM_FREAD1)}},{key:"isRead2",value:function(){return!!(this.flags&i.a.BAM_FREAD2)}},{key:"isSecondary",value:function(){return!!(this.flags&i.a.BAM_FSECONDARY)}},{key:"isFailedQc",value:function(){return!!(this.flags&i.a.BAM_FQCFAIL)}},{key:"isDuplicate",value:function(){return!!(this.flags&i.a.BAM_FDUP)}},{key:"isSupplementary",value:function(){return!!(this.flags&i.a.BAM_FSUPPLEMENTARY)}},{key:"isDetached",value:function(){return!!(this.cramFlags&i.a.CRAM_FLAG_DETACHED)}},{key:"hasMateDownStream",value:function(){return!!(this.cramFlags&i.a.CRAM_FLAG_MATE_DOWNSTREAM)}},{key:"isPreservingQualityScores",value:function(){return!!(this.cramFlags&i.a.CRAM_FLAG_PRESERVE_QUAL_SCORES)}},{key:"isUnknownBases",value:function(){return!!(this.cramFlags&i.a.CRAM_FLAG_NO_SEQ)}},{key:"getReadBases",value:function(){return!this.readBases&&this._refRegion&&(this.readBases=function(e,t){if((e.lengthOnRef||e.readLength)&&!e.isUnknownBases()){var r=e.alignmentStart-t.start;if(!e.readFeatures)return t.seq.substr(r,e.lengthOnRef).toUpperCase();for(var n="",a=r,i=0;n.length<e.readLength;)if(i<e.readFeatures.length){var s=e.readFeatures[i];if("Q"===s.code||"q"===s.code)i+=1;else if(s.pos===n.length+1)if(i+=1,"b"===s.code){var c=s.data.split(","),f=String.fromCharCode.apply(String,Object(o.a)(c));n+=f,a+=f.length}else"B"===s.code?(n+=s.data[0],a+=1):"X"===s.code?(n+=s.sub,a+=1):"I"===s.code?n+=s.data:"D"===s.code?a+=s.data:"i"===s.code?n+=s.data:"N"===s.code?a+=s.data:"S"===s.code?n+=s.data:"P"===s.code||s.code;else if(i<e.readFeatures.length){var u=t.seq.substr(a,e.readFeatures[i].pos-n.length-1);n+=u,a+=u.length}}else{var h=t.seq.substr(a,e.readLength-n.length);n+=h,a+=h.length}return n.toUpperCase()}}(this,this._refRegion)),this.readBases}},{key:"getPairOrientation",value:function(){if(!this.isSegmentUnmapped()&&this.isPaired()&&!this.isMateUnmapped()&&this.mate&&this.sequenceId===this.mate.sequenceId){var e=this.isReverseComplemented()?"R":"F",t=this.isMateReverseComplemented()?"R":"F",r=" ",n=" ";this.isRead1()?(r="1",n="2"):this.isRead2()&&(r="2",n="1");var a=[],o=this.templateLength||this.templateSize;return this.alignmentStart>this.mate.alignmentStart&&o>0&&(o=-o),o>0?(a[0]=e,a[1]=r,a[2]=t,a[3]=n):(a[2]=e,a[3]=r,a[0]=t,a[1]=n),a.join("")}return null}},{key:"addReferenceSequence",value:function(e,t){this.readFeatures&&this.readFeatures.forEach((function(r){"X"===r.code&&function(e,t,r,n){if(t){var a=n.refPos-t.start,o=t.seq.charAt(a);o&&(n.ref=o);var i=s[o];void 0===i&&(i=4);var c=r.substitutionMatrix[i][n.data];c&&(n.sub=c)}}(0,e,t,r)})),!this.readBases&&e.start<=this.alignmentStart&&e.end>=this.alignmentStart+(this.lengthOnRef||this.readLength)-1&&(this._refRegion=e)}},{key:"toJSON",value:function(){var e=this,t={};return Object.keys(this).forEach((function(r){"_"!==r.charAt(0)&&(t[r]=e[r])})),t.readBases=this.getReadBases(),t}}]),e}()},1433:function(e,t){var r="undefined"!==typeof self?self:this,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r="URLSearchParams"in e,n="Symbol"in e&&"iterator"in Symbol,a="FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),o="FormData"in e,i="ArrayBuffer"in e;if(i)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(e){return e&&s.indexOf(Object.prototype.toString.call(e))>-1};function f(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function u(e){return"string"!==typeof e&&(e=String(e)),e}function h(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return n&&(t[Symbol.iterator]=function(){return t}),t}function l(e){this.map={},e instanceof l?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function d(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function p(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function v(e){var t=new FileReader,r=p(t);return t.readAsArrayBuffer(e),r}function y(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:a&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:o&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():i&&a&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=y(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i&&(ArrayBuffer.prototype.isPrototypeOf(e)||c(e))?this._bodyArrayBuffer=y(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a&&(this.blob=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?d(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(v)}),this.text=function(){var e=d(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=p(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},o&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}l.prototype.append=function(e,t){e=f(e),t=u(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},l.prototype.delete=function(e){delete this.map[f(e)]},l.prototype.get=function(e){return e=f(e),this.has(e)?this.map[e]:null},l.prototype.has=function(e){return this.map.hasOwnProperty(f(e))},l.prototype.set=function(e,t){this.map[f(e)]=u(t)},l.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},l.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),h(e)},l.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),h(e)},l.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),h(e)},n&&(l.prototype[Symbol.iterator]=l.prototype.entries);var b=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function m(e,t){var r=(t=t||{}).body;if(e instanceof m){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new l(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new l(t.headers)),this.method=function(e){var t=e.toUpperCase();return b.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function w(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),a=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(a))}})),t}function k(e){var t=new l;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var a=r.join(":").trim();t.append(n,a)}})),t}function S(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new l(t.headers),this.url=t.url||"",this._initBody(e)}m.prototype.clone=function(){return new m(this,{body:this._bodyInit})},g.call(m.prototype),g.call(S.prototype),S.prototype.clone=function(){return new S(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new l(this.headers),url:this.url})},S.error=function(){var e=new S(null,{status:0,statusText:""});return e.type="error",e};var x=[301,302,303,307,308];S.redirect=function(e,t){if(-1===x.indexOf(t))throw new RangeError("Invalid status code");return new S(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(C){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function A(e,r){return new Promise((function(n,o){var i=new m(e,r);if(i.signal&&i.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function c(){s.abort()}s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:k(s.getAllResponseHeaders()||"")};e.url="responseURL"in s?s.responseURL:e.headers.get("X-Request-URL");var t="response"in s?s.response:s.responseText;n(new S(t,e))},s.onerror=function(){o(new TypeError("Network request failed"))},s.ontimeout=function(){o(new TypeError("Network request failed"))},s.onabort=function(){o(new t.DOMException("Aborted","AbortError"))},s.open(i.method,i.url,!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&a&&(s.responseType="blob"),i.headers.forEach((function(e,t){s.setRequestHeader(t,e)})),i.signal&&(i.signal.addEventListener("abort",c),s.onreadystatechange=function(){4===s.readyState&&i.signal.removeEventListener("abort",c)}),s.send("undefined"===typeof i._bodyInit?null:i._bodyInit)}))}A.polyfill=!0,e.fetch||(e.fetch=A,e.Headers=l,e.Request=m,e.Response=S),t.Headers=l,t.Request=m,t.Response=S,t.fetch=A,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var a=n;(t=a.fetch).default=a.fetch,t.fetch=a.fetch,t.Headers=a.Headers,t.Request=a.Request,t.Response=a.Response,e.exports=t},1434:function(e,t,r){"use strict";r.d(t,"a",(function(){return u}));var n=r(82),a=r(81),o=r(11),i=r(80),s=r.n(i),c=r(600),f=r.n(c),u=function(){function e(t){var r=t.fetch,n=t.size,o=void 0===n?1e7:n,i=t.chunkSize,s=void 0===i?32768:i;if(Object(a.a)(this,e),!r)throw new Error("fetch function required");this.fetch=r,this.chunkSize=s,this.lruCache=new f.a({maxSize:Math.floor(o/s)})}return Object(o.a)(e,[{key:"get",value:function(){var e=Object(n.a)(s.a.mark((function e(t,r,n,a){var o,i,c,f,u,h,l,d=this;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.length<r+n)){e.next=2;break}throw new Error("output buffer not big enough for request");case 2:for(o=Math.floor(a/this.chunkSize),i=Math.floor((a+n)/this.chunkSize),c=new Array(i-o+1),f=function(e){c[e-o]=d._getChunk(e).then((function(t){return{data:t,chunkNumber:e}}))},u=o;u<=i;u+=1)f(u);return e.next=9,Promise.all(c);case 9:h=e.sent,l=a-h[0].chunkNumber*this.chunkSize,h.forEach((function(e){var s=e.data,c=e.chunkNumber,f=c*d.chunkSize,u=0,h=d.chunkSize,p=r+(c-o)*d.chunkSize-l;c===o&&(p=r,u=l),c===i&&(h=a+n-f),s.copy(t,p,u,h)}));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"_getChunk",value:function(e){var t=this.lruCache.get(e);if(t)return t;var r=this.fetch(e*this.chunkSize,this.chunkSize);return this.lruCache.set(e,r),r}}]),e}()},1435:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var n=r(29),a=r(232);function o(e){var t=e.split(/\r?\n/),r=[];return t.forEach((function(e){var t=e.split(/\t/),o=Object(a.a)(t),i=o[0],s=o.slice(1).map((function(e){var t=e.split(":",2),r=Object(n.a)(t,2);return{tag:r[0],value:r[1]}}));i&&r.push({tag:i.substr(1),data:s})})),r}},1608:function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));var n=r(81),a=r(11),o=r(138),i=r(12),s=r(29),c=r(88),f=r(89),u={int:!0,byte:!0,long:!0,byteArray:!0,byteArrayBlock:!0},h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;if(Object(n.a)(this,e),this.parameters=t,this.dataType=r,!r)throw new TypeError("must provide a data type to codec constructor");if(!u[r])throw new TypeError("invalid data type ".concat(r))}return Object(a.a)(e,[{key:"_getBits",value:function(e,t,r){var n=0;if(t.bytePosition+(7-t.bitPosition+r)/8>e.length)throw new o.b("read error during decoding. the file seems to be truncated.");for(var a=r;a;a-=1)n<<=1,n|=e[t.bytePosition]>>t.bitPosition&1,t.bitPosition-=1,t.bitPosition<0&&(t.bytePosition+=1),t.bitPosition&=7;return n}}]),e}();var l=function(e){Object(c.a)(r,e);var t=Object(f.a)(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if(Object(n.a)(this,r),e=t.call(this,a,o),!["byte","int"].includes(e.dataType))throw new TypeError("".concat(e.dataType," decoding not yet implemented by HUFFMAN_INT codec"));return e.buildCodeBook(),e.buildCodes(),e.buildCaches(),0===e.sortedCodes[0].bitLength&&(e._decode=e._decodeZeroLengthCode),e}return Object(a.a)(r,[{key:"buildCodeBook",value:function(){for(var e=this,t=new Array(this.parameters.numCodes),r=0;r<this.parameters.numCodes;r+=1)t[r]={symbol:this.parameters.symbols[r],bitLength:this.parameters.bitLengths[r]};t=t.sort((function(e,t){return e.bitLength-t.bitLength||e.symbol-t.symbol})),this.codeBook={},t.forEach((function(t){e.codeBook[t.bitLength]||(e.codeBook[t.bitLength]=[]),e.codeBook[t.bitLength].push(t.symbol)}))}},{key:"buildCodes",value:function(){var e=this;this.codes={};var t=0,r=-1;Object.entries(this.codeBook).forEach((function(n){var a=Object(s.a)(n,2),i=a[0],c=a[1];i=parseInt(i,10),c.forEach((function(n){var a={bitLength:i,value:n};r+=1;var s=i-t;if(r<<=s,a.bitCode=r,t+=s,function(e){var t=e-(e>>1)&1431655765;return 16843009*((t=(858993459&t)+(t>>2&858993459))+(t>>4)&252645135)>>24}(r)>i)throw new o.c("Symbol out of range");e.codes[n]=a}))}))}},{key:"buildCaches",value:function(){this.sortedCodes=Object.values(this.codes).sort((function(e,t){return e.bitLength-t.bitLength||e.bitCode-t.bitCode})),this.sortedByValue=Object.values(this.codes).sort((function(e,t){return e.value-t.value})),this.sortedValuesByBitCode=this.sortedCodes.map((function(e){return e.value})),this.sortedBitCodes=this.sortedCodes.map((function(e){return e.bitCode})),this.sortedBitLengthsByBitCode=this.sortedCodes.map((function(e){return e.bitLength}));var e=Math.max.apply(Math,Object(i.a)(this.sortedBitCodes));this.bitCodeToValue=new Array(e+1).fill(-1);for(var t=0;t<this.sortedBitCodes.length;t+=1)this.bitCodeToValue[this.sortedCodes[t].bitCode]=t}},{key:"decode",value:function(e,t,r,n){return this._decode(e,t,n.coreBlock)}},{key:"_decodeZeroLengthCode",value:function(){return this.sortedCodes[0].value}},{key:"_decode",value:function(e,t,r){for(var n=t.content,a=0,i=0,s=0;s<this.sortedCodes.length;s+=1){var c=this.sortedCodes[s].bitLength;i<<=c-a,i|=this._getBits(n,r,c-a),a=c;var f=this.bitCodeToValue[i];if(f>-1&&this.sortedBitLengthsByBitCode[f]===c)return this.sortedValuesByBitCode[f];for(var u=s;this.sortedCodes[u+1].bitLength===c&&u<this.sortedCodes.length;u+=1)s+=1}throw new o.c("Huffman symbol not found.")}}]),r}(h),d=r(361),p=function(e){Object(c.a)(r,e);var t=Object(f.a)(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(Object(n.a)(this,r),"int"===(e=t.call(this,a,i)).dataType)e._decodeData=e._decodeInt;else{if("byte"!==e.dataType)throw new o.e("".concat(e.dataType," decoding not yet implemented by EXTERNAL codec"));e._decodeData=e._decodeByte}return e}return Object(a.a)(r,[{key:"decode",value:function(e,t,r,n){var a=this.parameters.blockContentId,i=r[a];if(!i)throw new o.c("no block found with content ID ".concat(a));var s=n.externalBlocks.getCursor(a);return this._decodeData(i,s)}},{key:"_decodeInt",value:function(e,t){var r=Object(d.c)(e.content,t.bytePosition),n=Object(s.a)(r,2),a=n[0],o=n[1];return t.bytePosition+=o,a}},{key:"_decodeByte",value:function(e,t){if(t.bytePosition>=e.content.length)throw new o.b("attempted to read beyond end of block. this file seems truncated.");var r=e.content[t.bytePosition];return t.bytePosition+=1,r}}]),r}(h),v=function(e){Object(c.a)(r,e);var t=Object(f.a)(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0;if(Object(n.a)(this,r),e=t.call(this,a,o),"byteArray"!==o)throw new TypeError("byteArrayStop codec does not support data type ".concat(o));return e._decode=e._decodeByteArray,e}return Object(a.a)(r,[{key:"decode",value:function(e,t,r,n){var a=this.parameters.blockContentId,i=r[a];if(!i)throw new o.c("no block found with content ID ".concat(a));var s=n.externalBlocks.getCursor(a);return this._decode(i,s)}},{key:"_decodeByteArray",value:function(e,t){for(var r=e.content,n=this.parameters.stopByte,a=t.bytePosition,i=t.bytePosition;r[i]!==n&&i<r.length;){if(i===r.length)throw new o.b("byteArrayStop reading beyond length of data buffer?");i+=1}return t.bytePosition=i+1,r.slice(a,i)}}]),r}(h),y=function(e){Object(c.a)(r,e);var t=Object(f.a)(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;if(Object(n.a)(this,r),(e=t.call(this,a,o)).instantiateCodec=i,"byteArray"!==o)throw new TypeError("byteArrayLength does not support data type ".concat(o));return e}return Object(a.a)(r,[{key:"decode",value:function(e,t,r,n){for(var a=this._getLengthCodec().decode(e,t,r,n),o=this._getDataCodec(),i=new Array(a),s=0;s<a;s+=1)i[s]=o.decode(e,t,r,n);return i}},{key:"_getLengthCodec",value:function(){var e=this.parameters.lengthsEncoding;return this.instantiateCodec(e,"int")}},{key:"_getDataCodec",value:function(){var e=this.parameters.valuesEncoding;return this.instantiateCodec(e,"byte")}}]),r}(h);"_getLengthCodec _getDataCodec".split(" ").forEach((function(e){return Object(d.e)(y,e)}));var g=function(e){Object(c.a)(r,e);var t=Object(f.a)(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(Object(n.a)(this,r),"int"!==(e=t.call(this,a,i)).dataType)throw new o.e("".concat(e.dataType," decoding not yet implemented by BETA codec"));return e}return Object(a.a)(r,[{key:"decode",value:function(e,t,r,n){return this._getBits(t.content,n.coreBlock,this.parameters.length)-this.parameters.offset}}]),r}(h),b=function(e){Object(c.a)(r,e);var t=Object(f.a)(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(Object(n.a)(this,r),"int"!==(e=t.call(this,a,i)).dataType)throw new o.e("".concat(e.dataType," decoding not yet implemented by GAMMA codec"));return e}return Object(a.a)(r,[{key:"decode",value:function(e,t,r,n){for(var a=1;0===this._getBits(t.content,n.coreBlock,1);)a+=1;return(this._getBits(t.content,n.coreBlock,a-1)|1<<a-1)-this.parameters.offset}}]),r}(h),m=function(e){Object(c.a)(r,e);var t=Object(f.a)(r);function r(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;if(Object(n.a)(this,r),"int"!==(e=t.call(this,a,i)).dataType)throw new o.e("".concat(e.dataType," decoding not yet implemented by SUBEXP codec"));return e}return Object(a.a)(r,[{key:"decode",value:function(e,t,r,n){for(var a,o,i=0;this._getBits(t.content,n.coreBlock,1);)i+=1;return 0===i?(a=this.parameters.K,o=this._getBits(t.content,n.coreBlock,a)):o=1<<(a=i+this.parameters.K-1)|this._getBits(t.content,n.coreBlock,a),o-this.parameters.offset}}]),r}(h),w={1:p,3:l,4:y,5:v,6:g,7:m,9:b};function k(e,t){var r,n=(r="ignore"===t?0:e.codecId,w[r]);if(!n)throw new o.e("no codec implemented for codec ID ".concat(e.codecId));return new n(e.parameters,t,k)}var S={BF:"int",CF:"int",RI:"int",RL:"int",AP:"int",RG:"int",MF:"int",NS:"int",NP:"int",TS:"int",NF:"int",TC:"byte",TN:"int",FN:"int",FC:"byte",FP:"int",BS:"byte",IN:"byteArray",SC:"byteArray",DL:"int",BA:"byte",BB:"byteArray",RS:"int",PD:"int",HC:"int",MQ:"int",RN:"byteArray",QS:"byte",QQ:"byteArray",TL:"int",TM:"ignore",TV:"ignore"};var x=function(){function e(t){Object(n.a)(this,e),Object.assign(this,t),this.readNamesIncluded=t.preservation.RN,this.APdelta=t.preservation.AP,this.referenceRequired=!!t.preservation.RR,this.tagIdsDictionary=t.preservation.TD,this.substitutionMatrix=function(e){for(var t=new Array(5),r=0;r<5;r+=1)t[r]=new Array(4);return t[0][e[0]>>6&3]="C",t[0][e[0]>>4&3]="G",t[0][e[0]>>2&3]="T",t[0][e[0]>>0&3]="N",t[1][e[1]>>6&3]="A",t[1][e[1]>>4&3]="G",t[1][e[1]>>2&3]="T",t[1][e[1]>>0&3]="N",t[2][e[2]>>6&3]="A",t[2][e[2]>>4&3]="C",t[2][e[2]>>2&3]="T",t[2][e[2]>>0&3]="N",t[3][e[3]>>6&3]="A",t[3][e[3]>>4&3]="C",t[3][e[3]>>2&3]="G",t[3][e[3]>>0&3]="N",t[4][e[4]>>6&3]="A",t[4][e[4]>>4&3]="C",t[4][e[4]>>2&3]="G",t[4][e[4]>>0&3]="T",t}(t.preservation.SM),this.dataSeriesCodecCache={},this.tagCodecCache={}}return Object(a.a)(e,[{key:"getCodecForTag",value:function(e){if(!this.tagCodecCache[e]){var t=this.tagEncoding[e];t&&(this.tagCodecCache[e]=k(t,"byteArray"))}return this.tagCodecCache[e]}},{key:"getTagNames",value:function(e){return this.tagIdsDictionary[e]}},{key:"getCodecForDataSeries",value:function(e){if(!this.dataSeriesCodecCache[e]){var t=this.dataSeriesEncoding[e];if(t){var r=S[e];if(!r)throw new o.c("data series name ".concat(e," not defined in file compression header"));this.dataSeriesCodecCache[e]=k(t,r)}}return this.dataSeriesCodecCache[e]}},{key:"toJSON",value:function(){var e=this,t={};return Object.keys(this).forEach((function(r){/Cache$/.test(r)||(t[r]=e[r])})),t}}]),e}()},1613:function(e,t,r){"use strict";r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return k}));var n=r(1415).a,a=r(29),o=r(12),i=r(82),s=r(81),c=r(11),f=r(80),u=r.n(f),h=r(138),l=function(){function e(t){if(Object(s.a)(this,e),t.cram?this.cram=t.cram:this.cram=new n({url:t.cramUrl,path:t.cramPath,filehandle:t.cramFilehandle,seqFetch:t.seqFetch,checkSequenceMD5:t.checkSequenceMD5,cacheSize:t.cacheSize}),!(this.cram instanceof n))throw new Error("invalid arguments: no cramfile");if(this.index=t.index,!this.index.getEntriesForRange)throw new Error("invalid arguments: not an index");this.fetchSizeLimit=t.fetchSizeLimit||3e6}return Object(c.a)(e,[{key:"getRecordsForRange",value:function(){var e=Object(i.a)(u.a.mark((function e(t,r,n){var i,s,c,f,l,d,p,v,y,g,b,m,w,k,S,x,A,C,B,_,R,E,M,O,I,F,P,j=this,U=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((s=U.length>3&&void 0!==U[3]?U[3]:{}).viewAsPairs=s.viewAsPairs||!1,s.pairAcrossChr=s.pairAcrossChr||!1,s.maxInsertSize=s.maxInsertSize||2e5,"string"!==typeof t){e.next=6;break}throw new h.e("string sequence names not yet supported");case 6:return c=t,e.next=9,this.index.getEntriesForRange(c,r,n);case 9:if(f=e.sent,!((l=f.map((function(e){return e.sliceBytes})).reduce((function(e,t){return e+t}),0))>this.fetchSizeLimit)){e.next=13;break}throw new h.d("data size of ".concat(l.toLocaleString()," bytes exceeded fetch size limit of ").concat(this.fetchSizeLimit.toLocaleString()," bytes"));case 13:return d=function(e){return e.sequenceId===t&&e.alignmentStart<=n&&e.alignmentStart+e.lengthOnRef-1>=r},e.next=16,Promise.all(f.map((function(e){return j.getRecordsInSlice(e,d)})));case 16:if(p=e.sent,v=(i=Array.prototype).concat.apply(i,Object(o.a)(p)),!s.viewAsPairs){e.next=42;break}for(y={},g={},b=0;b<v.length;b+=1)m=v[b].readName,w=v[b].uniqueId,y[m]||(y[m]=0),y[m]+=1,g[w]=1;for(k={},Object.entries(y).forEach((function(e){var t=Object(a.a)(e,2),r=t[0];1===t[1]&&(k[r]=!0)})),S=[],x=0;x<v.length;x+=1)A=v[x].readName,k[A]&&v[x].mate&&(v[x].mate.sequenceId===c||s.pairAcrossChr)&&Math.abs(v[x].alignmentStart-v[x].mate.alignmentStart)<s.maxInsertSize&&(C=this.index.getEntriesForRange(v[x].mate.sequenceId,v[x].mate.alignmentStart,v[x].mate.alignmentStart+1),S.push(C));return e.next=28,Promise.all(S);case 28:for(B=e.sent,_=[],R=0;R<B.length;R+=1)(E=_).push.apply(E,Object(o.a)(B[R]));if(_=_.sort((function(e,t){return e.toString().localeCompare(t.toString())})).filter((function(e,t,r){return!t||e.toString()!==r[t-1].toString()})),M=[],O=[],!((I=_.map((function(e){return e.sliceBytes})).reduce((function(e,t){return e+t}),0))>this.fetchSizeLimit)){e.next=37;break}throw new Error("mate data size of ".concat(I.toLocaleString()," bytes exceeded fetch size limit of ").concat(this.fetchSizeLimit.toLocaleString()," bytes"));case 37:return _.forEach((function(e){var t=j.cram.featureCache.get(e.toString());t||(t=j.getRecordsInSlice(e,(function(){return!0})),j.cram.featureCache.set(e.toString(),t)),M.push(t);var r=t.then((function(e){for(var t=[],r=0;r<e.length;r+=1){var n=e[r];k[n.readName]&&!g[n.uniqueId]&&t.push(n)}return t}));O.push(r)})),e.next=40,Promise.all(O);case 40:(F=e.sent).length&&(P=F.reduce((function(e,t){return e.concat(t)})),v=v.concat(P));case 42:return e.abrupt("return",v);case 43:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"getRecordsInSlice",value:function(e,t){var r=e.containerStart,n=e.sliceStart,a=e.sliceBytes;return this.cram.getContainerAtPosition(r).getSlice(n,a).getRecords(t)}},{key:"hasDataForReferenceSequence",value:function(e){return this.index.hasDataForReferenceSequence(e)}}]),e}(),d=r(169),p=r.n(d),v=r(600),y=r.n(v),g=r(891),b=r(897),m=function(){function e(t){Object(s.a)(this,e),Object.assign(this,t)}return Object(c.a)(e,[{key:"toString",value:function(){return"".concat(this.start,":").concat(this.span,":").concat(this.containerStart,":").concat(this.sliceStart,":").concat(this.sliceBytes)}}]),e}();function w(e,t){if(t.some((function(e){return void 0===e})))throw new h.c("invalid .crai index file");var r=Object(a.a)(t,6),n=r[0],o=r[1],i=r[2],s=r[3],c=r[4],f=r[5];e[n]||(e[n]=[]),e[n].push(new m({start:o,span:i,containerStart:s,sliceStart:c,sliceBytes:f}))}var k=function(){function e(t){var r=this;Object(s.a)(this,e);var n=Object(b.a)(t.url,t.path,t.filehandle);this._parseCache=new p.a({cache:new y.a({maxSize:1}),fill:function(e,t){return r.parseIndex({signal:t})}}),this.readFile=n.readFile.bind(n)}return Object(c.a)(e,[{key:"parseIndex",value:function(){var e={};return this.readFile().then((function(e){return 31===e[0]&&139===e[1]?Object(g.a)(e):e})).then((function(t){if(t.length>4&&21578050===t.readUInt32LE(0))throw new h.c("invalid .crai index file. note: file appears to be a .bai index. this is technically legal but please open a github issue if you need support");for(var r=[],n="",o=0;o<t.length;o+=1){var i=t[o];if(i>=48&&i<=57||!n&&45===i)n+=String.fromCharCode(i);else if(9===i)r.push(Number.parseInt(n,10)),n="";else if(10===i)r.push(Number.parseInt(n,10)),n="",w(e,r),r=[];else if(13!==i&&32!==i)throw new h.c("invalid .crai index file")}return n&&r.push(Number.parseInt(n,10)),6===r.length&&w(e,r),Object.entries(e).forEach((function(t){var r=Object(a.a)(t,2),n=r[0],o=r[1];e[n]=o.sort((function(e,t){return e.start-t.start||e.span-t.span}))})),e}))}},{key:"getIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._parseCache.get("index",null,e.signal)}},{key:"hasDataForReferenceSequence",value:function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIndex();case 2:return e.t0=t,e.abrupt("return",!!e.sent[e.t0]);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getEntriesForRange",value:function(){var e=Object(i.a)(u.a.mark((function e(t,r,n){var a,o,i,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIndex();case 2:if(e.t0=t,a=e.sent[e.t0]){e.next=6;break}return e.abrupt("return",[]);case 6:for(o=function(e){var t=e.start,a=e.start+e.span;return t>=n?-1:a<=r?1:0},i=[],s=0;s<a.length;s+=1)0===o(a[s])&&i.push(a[s]);return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),e}()},260:function(e,t,r){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var a=r(99).Buffer,o=r(358),i=r(359).Context,s=r(211);"undefined"!==typeof window&&(window.Buffer=a),"undefined"!==typeof self&&(self.Buffer=a);var c={UInt8:1,UInt16LE:2,UInt16BE:2,UInt32LE:4,UInt32BE:4,Int8:1,Int16LE:2,Int16BE:2,Int32LE:4,Int32BE:4,FloatLE:4,FloatBE:4,DoubleLE:8,DoubleBE:8,UInt64:8,Int64:8},f={},u="___parser_",h=[];!function(){var e;for(e=1;e<=32;e++)h.push(e)}();var l={};Object.keys(c).concat(Object.keys({String:null,Buffer:null,Array:null,Skip:null,Choice:null,Nest:null,Bit:null,Itf8:null,Ltf8:null})).forEach((function(e){l[e.toLowerCase()]=e}));var d=function(){this.varName="",this.type="",this.options={},this.next=null,this.head=null,this.compiled=null,this.endian="le",this.constructorFn=null,this.alias=null};d.start=function(){return new d},Object.keys(c).forEach((function(e){d.prototype[e.toLowerCase()]=function(t,r){return this.setNextParser(e.toLowerCase(),t,r)};var t=e.replace(/BE|LE/,"").toLowerCase();t in d.prototype||(d.prototype[t]=function(e,r){return this[t+this.endian](e,r)})})),h.forEach((function(e){d.prototype["bit".concat(e.toString())]=function(t,r){return r||(r={}),r.length=e,this.setNextParser("bit",t,r)}})),d.prototype.namely=function(e){return f[e]=this,this.alias=e,this},d.prototype.skip=function(e,t){if(t&&t.assert)throw new Error("assert option on skip is not allowed.");return this.setNextParser("skip","",{length:e})},d.prototype.string=function(e,t){if(!t.zeroTerminated&&!t.length&&!t.greedy)throw new Error("Neither length, zeroTerminated, nor greedy is defined for string.");if((t.zeroTerminated||t.length)&&t.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(t.stripNull&&!t.length&&!t.greedy)throw new Error("Length or greedy must be defined if stripNull is defined.");return t.encoding=t.encoding||"utf8",this.setNextParser("string",e,t)},d.prototype.buffer=function(e,t){if(!t.length&&!t.readUntil)throw new Error("Length nor readUntil is defined in buffer parser");return this.setNextParser("buffer",e,t)},d.prototype.array=function(e,t){if(!t.readUntil&&!t.length&&!t.lengthInBytes)throw new Error("Length option of array is not defined.");if(!t.type)throw new Error("Type option of array is not defined.");if("string"===typeof t.type&&!f[t.type]&&Object.keys(c).indexOf(l[t.type])<0)throw new Error('Specified primitive type "'.concat(t.type,'" is not supported.'));return this.setNextParser("array",e,t)},d.prototype.choice=function(e,t){if(1===arguments.length&&"object"===n(e)&&(t=e,e=null),!t.tag)throw new Error("Tag option of array is not defined.");if(!t.choices)throw new Error("Choices option of array is not defined.");return Object.keys(t.choices).forEach((function(r){if(!t.choices[r])throw new Error("Choice Case ".concat(r," of ").concat(e," is not valid."));if("string"===typeof t.choices[r]&&!f[t.choices[r]]&&Object.keys(c).indexOf(l[t.choices[r]])<0)throw new Error('Specified primitive type "'.concat(t.choices[r],'" is not supported.'))}),this),this.setNextParser("choice",e,t)},d.prototype.nest=function(e,t){if(1===arguments.length&&"object"===n(e)&&(t=e,e=null),!t.type)throw new Error("Type option of nest is not defined.");if(!(t.type instanceof d)&&!f[t.type])throw new Error("Type option of nest must be a Parser object.");if(!(t.type instanceof d)&&!e)throw new Error("options.type must be a object if variable name is omitted.");return this.setNextParser("nest",e,t)},d.prototype.endianess=function(e){switch(e.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error("Invalid endianess: ".concat(e))}return this},d.prototype.create=function(e){if(!(e instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=e,this},d.prototype.getCode=function(){var e=new i;return e.pushCode("if (!Buffer.isBuffer(buffer)) {"),e.generateError('"argument buffer is not a Buffer object"'),e.pushCode("}"),this.alias?this.addAliasedCode(e):this.addRawCode(e),this.alias?e.pushCode("return {0}(0)",u+this.alias):e.pushCode("return { offset: offset, result: vars };"),e.code},d.prototype.addRawCode=function(e){e.pushCode("var offset = 0;"),this.constructorFn?e.pushCode("var vars = new constructorFn();"):e.pushCode("var vars = {};"),this.generate(e),this.resolveReferences(e),e.pushCode("return { offset: offset, result: vars };")},d.prototype.addAliasedCode=function(e){return e.pushCode("function {0}(offset) {",u+this.alias),this.constructorFn?e.pushCode("var vars = new constructorFn();"):e.pushCode("var vars = {};"),this.generate(e),e.markResolved(this.alias),this.resolveReferences(e),e.pushCode("return { offset: offset, result: vars };"),e.pushCode("}"),e},d.prototype.resolveReferences=function(e){var t=e.getUnresolvedReferences();e.markRequested(t),t.forEach((function(t){f[t].addAliasedCode(e)}))},d.prototype.compile=function(){var e="(function(buffer, constructorFn, Long) { ".concat(this.getCode()," })");this.compiled=o.runInThisContext(e)},d.prototype.sizeOf=function(){var e=NaN;if(Object.keys(c).indexOf(this.type)>=0)e=c[this.type];else if("String"===this.type&&"number"===typeof this.options.length)e=this.options.length;else if("Buffer"===this.type&&"number"===typeof this.options.length)e=this.options.length;else if("Array"===this.type&&"number"===typeof this.options.length){var t=NaN;"string"===typeof this.options.type?t=c[l[this.options.type]]:this.options.type instanceof d&&(t=this.options.type.sizeOf()),e=this.options.length*t}else"Skip"===this.type?e=this.options.length:"Nest"===this.type?e=this.options.type.sizeOf():this.type||(e=0);return this.next&&(e+=this.next.sizeOf()),e},d.prototype.parse=function(e){return this.compiled||this.compile(),this.compiled(e,this.constructorFn,s)},d.prototype.setNextParser=function(e,t,r){var n=new d;return n.type=l[e],n.varName=t,n.options=r||n.options,n.endian=this.endian,this.head?this.head.next=n:this.next=n,this.head=n,this},d.prototype.generate=function(e){this.type&&(this["generate".concat(this.type)](e),this.generateAssert(e));var t=e.generateVariable(this.varName);return this.options.formatter&&this.generateFormatter(e,t,this.options.formatter),this.generateNext(e)},d.prototype.generateAssert=function(e){if(this.options.assert){var t=e.generateVariable(this.varName);switch(n(this.options.assert)){case"function":e.pushCode("if (!({0}).call(vars, {1})) {",this.options.assert,t);break;case"number":e.pushCode("if ({0} !== {1}) {",this.options.assert,t);break;case"string":e.pushCode('if ("{0}" !== {1}) {',this.options.assert,t);break;default:throw new Error("Assert option supports only strings, numbers and assert functions.")}e.generateError('"Assert error: {0} is " + {0}',t),e.pushCode("}")}},d.prototype.generateNext=function(e){return this.next&&(e=this.next.generate(e)),e},Object.keys(c).forEach((function(e){d.prototype["generate".concat(e)]=function(t){"UInt64"===e?t.pushCode("{0} = Long.fromBytes(buffer.slice(offset,offset+8), true, this.endian === 'le').toNumber();",t.generateVariable(this.varName),e):"Int64"===e?t.pushCode("{0} = Long.fromBytes(buffer.slice(offset,offset+8), false, this.endian === 'le').toNumber();",t.generateVariable(this.varName),e):t.pushCode("{0} = buffer.read{1}(offset);",t.generateVariable(this.varName),e),t.pushCode("offset += {0};",c[e])}})),d.prototype.generateBit=function(e){var t=JSON.parse(JSON.stringify(this));if(t.varName=e.generateVariable(t.varName),e.bitFields.push(t),!this.next||this.next&&["Bit","Nest"].indexOf(this.next.type)<0){var r=0;e.bitFields.forEach((function(e){r+=e.options.length}));var n=e.generateTmpVariable();if(r<=8)e.pushCode("var {0} = buffer.readUInt8(offset);",n),r=8;else if(r<=16)e.pushCode("var {0} = buffer.readUInt16BE(offset);",n),r=16;else if(r<=24){var a=e.generateTmpVariable(),o=e.generateTmpVariable();e.pushCode("var {0} = buffer.readUInt16BE(offset);",a),e.pushCode("var {0} = buffer.readUInt8(offset + 2);",o),e.pushCode("var {2} = ({0} << 8) | {1};",a,o,n),r=24}else{if(!(r<=32))throw new Error("Currently, bit field sequence longer than 4-bytes is not supported.");e.pushCode("var {0} = buffer.readUInt32BE(offset);",n),r=32}e.pushCode("offset += {0};",r/8);var i=0,s="be"===this.endian;e.bitFields.forEach((function(t){e.pushCode("{0} = {1} >> {2} & {3};",t.varName,n,s?r-i-t.options.length:i,(1<<t.options.length)-1),i+=t.options.length})),e.bitFields=[]}},d.prototype.generateSkip=function(e){var t=e.generateOption(this.options.length);e.pushCode("offset += {0};",t)},d.prototype.generateString=function(e){var t=e.generateVariable(this.varName),r=e.generateTmpVariable();this.options.length&&this.options.zeroTerminated?(e.pushCode("var {0} = offset;",r),e.pushCode("while(buffer.readUInt8(offset++) !== 0 && offset - {0}  < {1});",r,this.options.length),e.pushCode("{0} = buffer.toString('{1}', {2}, offset - {2} < {3} ? offset - 1 : offset);",t,this.options.encoding,r,this.options.length)):this.options.length?(e.pushCode("{0} = buffer.toString('{1}', offset, offset + {2});",t,this.options.encoding,e.generateOption(this.options.length)),e.pushCode("offset += {0};",e.generateOption(this.options.length))):this.options.zeroTerminated?(e.pushCode("var {0} = offset;",r),e.pushCode("while(buffer.readUInt8(offset++) !== 0);"),e.pushCode("{0} = buffer.toString('{1}', {2}, offset - 1);",t,this.options.encoding,r)):this.options.greedy&&(e.pushCode("var {0} = offset;",r),e.pushCode("while(buffer.length > offset++);"),e.pushCode("{0} = buffer.toString('{1}', {2}, offset);",t,this.options.encoding,r)),this.options.stripNull&&e.pushCode("{0} = {0}.replace(/\\x00+$/g, '')",t)},d.prototype.generateBuffer=function(e){"eof"===this.options.readUntil?e.pushCode("{0} = buffer.slice(offset);",e.generateVariable(this.varName)):(e.pushCode("{0} = buffer.slice(offset, offset + {1});",e.generateVariable(this.varName),e.generateOption(this.options.length)),e.pushCode("offset += {0};",e.generateOption(this.options.length))),this.options.clone&&e.pushCode("{0} = Buffer.from({0});",e.generateVariable(this.varName))},d.prototype.generateArray=function(e){var t=e.generateOption(this.options.length),r=e.generateOption(this.options.lengthInBytes),n=this.options.type,a=e.generateTmpVariable(),o=e.generateVariable(this.varName),i=e.generateTmpVariable(),s=this.options.key,h="string"===typeof s;if(h?e.pushCode("{0} = {};",o):e.pushCode("{0} = [];",o),"function"===typeof this.options.readUntil?e.pushCode("do {"):"eof"===this.options.readUntil?e.pushCode("for (var {0} = 0; offset < buffer.length; {0}++) {",a):void 0!==r?e.pushCode("for (var {0} = offset; offset - {0} < {1}; ) {",a,r):e.pushCode("for (var {0} = 0; {0} < {1}; {0}++) {",a,t),"string"===typeof n)if(f[n]){var p=e.generateTmpVariable();e.pushCode("var {0} = {1}(offset);",p,u+n),e.pushCode("var {0} = {1}.result; offset = {1}.offset;",i,p),n!==this.alias&&e.addReference(n)}else e.pushCode("var {0} = buffer.read{1}(offset);",i,l[n]),e.pushCode("offset += {0};",c[l[n]]);else n instanceof d&&(e.pushCode("var {0} = {};",i),e.pushScope(i),n.generate(e),e.popScope());h?e.pushCode("{0}[{2}.{1}] = {2};",o,s,i):e.pushCode("{0}.push({1});",o,i),e.pushCode("}"),"function"===typeof this.options.readUntil&&e.pushCode(" while (!({0}).call(this, {1}, buffer.slice(offset)));",this.options.readUntil,i)},d.prototype.generateChoiceCase=function(e,t,r){if("string"===typeof r)if(f[r]){var n=e.generateTmpVariable();e.pushCode("var {0} = {1}(offset);",n,u+r),e.pushCode("{0} = {1}.result; offset = {1}.offset;",e.generateVariable(this.varName),n),r!==this.alias&&e.addReference(r)}else e.pushCode("{0} = buffer.read{1}(offset);",e.generateVariable(this.varName),l[r]),e.pushCode("offset += {0};",c[l[r]]);else r instanceof d&&(e.pushPath(t),r.generate(e),e.popPath(t))},d.prototype.generateChoice=function(e){var t=e.generateOption(this.options.tag);this.varName&&e.pushCode("{0} = {};",e.generateVariable(this.varName)),e.pushCode("switch({0}) {",t),Object.keys(this.options.choices).forEach((function(t){var r=this.options.choices[t];Number.isNaN(parseInt(t,10))?e.pushCode("case '{0}':",t):e.pushCode("case {0}:",t),this.generateChoiceCase(e,this.varName,r),e.pushCode("break;")}),this),e.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(e,this.varName,this.options.defaultChoice):e.generateError('"Met undefined tag value " + {0} + " at choice"',t),e.pushCode("}")},d.prototype.generateNest=function(e){var t=e.generateVariable(this.varName);if(this.options.type instanceof d)this.varName&&e.pushCode("{0} = {};",t),e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName);else if(f[this.options.type]){var r=e.generateTmpVariable();e.pushCode("var {0} = {1}(offset);",r,u+this.options.type),e.pushCode("{0} = {1}.result; offset = {1}.offset;",t,r),this.options.type!==this.alias&&e.addReference(this.options.type)}},d.prototype.generateFormatter=function(e,t,r){"function"===typeof r&&e.pushCode("{0} = ({1}).call(this, {0});",t,r)},d.prototype.isInteger=function(){return!!this.type.match(/U?Int[8|16|32][BE|LE]?|Bit\d+/)},d.prototype.itf8=function(e,t){return this.setNextParser("itf8",e,t)},d.prototype.itf8=function(e,t){return this.setNextParser("itf8",e,t)},d.prototype.generateItf8=function(e){var t=e.generateVariable(this.varName),r=e.generateTmpVariable();e.pushCode("\n    var ".concat(r," = buffer[offset];\n    if (").concat(r," < 0x80) {\n      ").concat(t," = ").concat(r,";\n      offset += 1;\n    } else if (").concat(r," < 0xc0) {\n      ").concat(t," = ((").concat(r,"<<8) | buffer[offset+1]) & 0x3fff;\n      offset += 2;\n    } else if (").concat(r," < 0xe0) {\n      ").concat(t," = ((").concat(r,"<<16) | (buffer[offset+1]<< 8) |  buffer[offset+2]) & 0x1fffff;\n      offset += 3;\n    } else if (").concat(r," < 0xf0) {\n      ").concat(t," = ((").concat(r,"<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\n      offset += 4\n    } else {\n      ").concat(t," = ((").concat(r," & 0x0f)<<28) | (buffer[offset+1]<<20) | (buffer[offset+2]<<12) | (buffer[offset+3]<<4) | (buffer[offset+4] & 0x0f);\n      // x=((0xff & 0x0f)<<28) | (0xff<<20) | (0xff<<12) | (0xff<<4) | (0x0f & 0x0f);\n      // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\n      offset += 5\n    }\n  "))},d.prototype.ltf8=function(e,t){return this.setNextParser("ltf8",e,t)},d.prototype.generateLtf8=function(e){var t=e.generateVariable(this.varName),r=e.generateTmpVariable();e.pushCode("\n  var ".concat(r," = buffer[offset];\n  if (").concat(r," < 0x80) {\n    ").concat(t," = ").concat(r,";\n    offset += 1;\n  } else if (").concat(r," < 0xc0) {\n    ").concat(t," = ((buffer[offset]<<8) | buffer[offset+1]) & 0x3fff;\n    offset += 2;\n  } else if (").concat(r," < 0xe0) {\n    ").concat(t," = ((buffer[offset]<<16) | (buffer[offset+1]<<8) | buffer[offset+2]) & 0x1fffff;\n    ").concat(t," = (((").concat(r," & 63) << 16) | buffer.readUInt16LE(offset + 1));\n    offset += 3;\n  } else if (").concat(r," < 0xf0) {\n    ").concat(t," = ((buffer[offset]<<24) | (buffer[offset+1]<<16) | (buffer[offset+2]<<8) | buffer[offset+3]) & 0x0fffffff;\n    offset += 4;\n  } else if (").concat(r," < 0xf8) {\n    ").concat(t," = (((buffer[offset] & 15) * Math.pow(2,32))) +\n      (buffer[offset+1]<<24) | (buffer[offset+2]<<16 | buffer[offset+3]<<8 | buffer[offset+4])\n    // TODO *val_p = uv < 0x80000000UL ? uv : -((int32_t) (0xffffffffUL - uv)) - 1;\n    offset += 5;\n  } else if (").concat(r," < 0xfc) {\n    ").concat(t," = ((((buffer[offset] & 7) << 8) | buffer[offset+1] )) * Math.pow(2,32) +\n      (buffer[offset+2]<<24) | (buffer[offset+3]<<16 | buffer[offset+4]<<8 | buffer[offset+5])\n    offset += 6;\n  } else if (").concat(r," < 0xfe) {\n    ").concat(t," = ((((buffer[offset] & 3) << 16) | buffer[offset+1]<<8 | buffer[offset+2])) * Math.pow(2,32) +\n      (buffer[offset+3]<<24) | (buffer[offset+4]<<16 | buffer[offset+5]<<8 | buffer[offset+6])\n    offset += 7;\n  } else if (").concat(r," < 0xff) {\n    ").concat(t," = Long.fromBytesBE(buffer.slice(offset+1,offset+8));\n    if (").concat(t,".greaterThan(Number.MAX_SAFE_INTEGER) || ").concat(t,".lessThan(Number.MIN_SAFE_INTEGER))\n      throw new Error('integer overflow')\n    ").concat(t," = ").concat(t,".toNumber()\n    offset += 8;\n  } else {\n    ").concat(t," = Long.fromBytesBE(buffer.slice(offset+1,offset+9));\n    if (").concat(t,".greaterThan(Number.MAX_SAFE_INTEGER) || ").concat(t,".lessThan(Number.MIN_SAFE_INTEGER))\n      throw new Error('integer overflow')\n    ").concat(t," = ").concat(t,".toNumber()\n    offset += 9;\n  }\n  "))},t.Parser=d},358:function(e,t){e.exports.runInThisContext=function(e){return new Function("code","return eval(code);").call(globalThis,e)}},359:function(e,t,r){"use strict";function n(e){return n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}var a=function(){this.code="",this.scopes=[["vars"]],this.isAsync=!1,this.bitFields=[],this.tmpVariableCount=0,this.references={}};a.prototype.generateVariable=function(e){var t=[];for(Array.prototype.push.apply(t,this.scopes[this.scopes.length-1]);/^\$parent\./.test(e);)t.pop(),e=e.replace(/^\$parent\./,"");return e&&t.push(e),t.join(".")},a.prototype.generateOption=function(e){switch(n(e)){case"number":return e.toString();case"string":return this.generateVariable(e);case"function":return"(".concat(e,").call(").concat(this.generateVariable(),", vars)");default:return}},a.prototype.generateError=function(){var e=Array.prototype.slice.call(arguments),t=a.interpolate.apply(this,e);this.isAsync?this.pushCode("return process.nextTick(function() { callback(new Error(".concat(t,"), vars); });")):this.pushCode("throw new Error(".concat(t,");"))},a.prototype.generateTmpVariable=function(){return"$tmp".concat(this.tmpVariableCount++)},a.prototype.pushCode=function(){var e=Array.prototype.slice.call(arguments);this.code+="".concat(a.interpolate.apply(this,e),"\n")},a.prototype.pushPath=function(e){e&&this.scopes[this.scopes.length-1].push(e)},a.prototype.popPath=function(e){e&&this.scopes[this.scopes.length-1].pop()},a.prototype.pushScope=function(e){this.scopes.push([e])},a.prototype.popScope=function(){this.scopes.pop()},a.prototype.addReference=function(e){this.references[e]||(this.references[e]={resolved:!1,requested:!1})},a.prototype.markResolved=function(e){this.references[e].resolved=!0},a.prototype.markRequested=function(e){e.forEach(function(e){this.references[e].requested=!0}.bind(this))},a.prototype.getUnresolvedReferences=function(){var e=this.references;return Object.keys(this.references).filter((function(t){return!e[t].resolved&&!e[t].requested}))},a.interpolate=function(e){var t=/{\d+}/g,r=e.match(t),n=Array.prototype.slice.call(arguments,1);return r&&r.forEach((function(t){var r=parseInt(t.substr(1,t.length-2),10);e=e.replace(t,n[r].toString())})),e},t.Context=a},360:function(e,t,r){(function(t){var n=r(100).default,a=r(102).default;e.exports=function(){"use strict";function e(r){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;n(this,e),0!=o?(this.buf=t.allocUnsafe(o),this.length=o):(this.buf=r,this.length=r.length),this.pos=a}return a(e,[{key:"EOF",value:function(){return this.pos>=this.length}},{key:"ReadData",value:function(e){var t=this.buf.slice(this.pos,this.pos+e);return this.pos+=e,t}},{key:"ReadByte",value:function(){var e=this.buf[this.pos];return this.pos++,e}},{key:"ReadChar",value:function(){var e=this.buf[this.pos];return this.pos++,String.fromCharCode(e)}},{key:"ReadUint16",value:function(){var e=this.ReadByte();return e|=this.ReadByte()<<8}},{key:"ReadUint32",value:function(){var e=this.buf.readInt32LE(this.pos);return this.pos+=4,e}},{key:"ReadString",value:function(){var e="";do{var t=this.buf[this.pos++];t&&(e+=String.fromCharCode(t))}while(t);return e}},{key:"ReadUint7",value:function(){var e=0;do{var t=this.ReadByte();e=e<<7|127&t}while(128&t);return e}},{key:"ReadITF8",value:function(){var e=this.buf[this.pos];return this.pos++,e>=240?(e=(15&e)<<28,e+=(this.buf[this.pos+0]<<20)+(this.buf[this.pos+1]<<12)+(this.buf[this.pos+2]<<4)+(this.buf[this.pos+3]>>4),this.pos+=4):e>=224?(e=(15&e)<<24,e+=(this.buf[this.pos+0]<<16)+(this.buf[this.pos+1]<<8)+(this.buf[this.pos+2]<<0),this.pos+=3):e>=192?(e=(31&e)<<16,e+=(this.buf[this.pos+0]<<8)+(this.buf[this.pos+1]<<0),this.pos+=2):e>=128&&(e=(63&e)<<8,e+=this.buf[this.pos],this.pos++),e}},{key:"WriteByte",value:function(e){this.buf[this.pos++]=e}},{key:"WriteChar",value:function(e){this.buf[this.pos++]=e.charCodeAt(0)}},{key:"WriteString",value:function(e){for(var t=0;t<e.length;t++)this.buf[this.pos++]=e.charCodeAt(t);this.buf[this.pos++]=0}},{key:"WriteData",value:function(e,t){for(var r=0;r<t;r++)this.buf[this.pos++]=e[r]}},{key:"WriteStream",value:function(e){this.WriteData(e.buf,e.pos)}},{key:"WriteUint16",value:function(e){this.WriteByte(255&e),this.WriteByte(e>>8&255)}},{key:"WriteUint32",value:function(e){this.buf.writeInt32LE(e,this.pos),this.pos+=4}},{key:"WriteUint7",value:function(e){var t=0,r=e;do{t+=7,r>>=7}while(r>0);do{t-=7,this.WriteByte((e>>t&127)+((t>0)<<7))}while(t>0)}},{key:"WriteITF8",value:function(e){e<0&&(e=1+e),e<=127?this.buf[this.pos++]=e:e<=16383?(this.buf[this.pos++]=128|Math.floor(e/256),this.buf[this.pos++]=255&e):e<131071?(this.buf[this.pos++]=192|Math.floor(e/65536),this.buf[this.pos++]=255&Math.floor(e/256),this.buf[this.pos++]=255&e):e<268435455?(this.buf[this.pos++]=224|Math.floor(e/16777216),this.buf[this.pos++]=255&Math.floor(e/65536),this.buf[this.pos++]=255&Math.floor(e/256),this.buf[this.pos++]=255&e):(this.buf[this.pos++]=240|Math.floor(e/268435456),this.buf[this.pos++]=255&Math.floor(e/1048576),this.buf[this.pos++]=255&Math.floor(e/4096),this.buf[this.pos++]=255&Math.floor(e/4),this.buf[this.pos++]=15&e)}},{key:"WriteByteNeg",value:function(e){this.buf[--this.pos]=e}}]),e}()}).call(this,r(99).Buffer)},361:function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return c})),r.d(t,"e",(function(){return f})),r.d(t,"d",(function(){return u}));var n=r(1427),a=r.n(n),o=r(138);function i(e){return-128&e?-16384&e?-2097152&e?-268435456&e?5:4:3:2:1}function s(e,t){var r,n=t,a=e[n];if(a<128?(r=a,n+=1):a<192?(r=16383&(a<<8|e[n+1]),n+=2):a<224?(r=2097151&(a<<16|e[n+1]<<8|e[n+2]),n+=3):a<240?(r=268435455&(a<<24|e[n+1]<<16|e[n+2]<<8|e[n+3]),n+=4):(r=(15&a)<<28|e[n+1]<<20|e[n+2]<<12|e[n+3]<<4|15&e[n+4],n+=5),n>e.length)throw new o.b("Attempted to read beyond end of buffer; this file seems truncated.");return[r,n-t]}function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=t.parse(e),o=a.offset,i=a.result;return i._endPosition=o+n,i._size=o-r,i}function f(e,t){var r=e.prototype[t],n="_memo_".concat(t);e.prototype[t]=function(){var e=this;if(!(n in this)){var t=r.call(this);this[n]=t,Promise.resolve(t).catch((function(){delete e[n]}))}return this[n]}}function u(e){return a()(e.toUpperCase().replace(/[^\x21-\x7e]/g,""))}},468:function(e,t,r){"use strict";var n=r(11),a=r(81),o=r(138),i=r(469),s=Object(n.a)((function e(){Object(a.a)(this,e),this.F=void 0,this.C=void 0})),c=Object(n.a)((function e(){Object(a.a)(this,e),this.fc=new Array(256);for(var t=0;t<this.fc.length;t+=1)this.fc[t]=new s;this.R=null}));function f(e,t,r,n){return r*(e>>n)+(e&(1<<n)-1)-t}var u={FC:s,AriDecoder:c,Symbol:Object(n.a)((function e(){Object(a.a)(this,e),this.start=void 0,this.freq=void 0})),symbolInit:function(e,t,r){if(!(t<=65536))throw new o.c("assertion failed: start <= 1<<16");if(!(r<=65536-t))throw new o.c("assertion failed: freq <= 1<<16");e.start=t,e.freq=r},advanceStep:f,advanceSymbolStep:function(e,t,r){return f(e,t.start,t.freq,r)},get:function(e,t){return e&(1<<t)-1},advanceSymbol:function(e,t,r,n){return function(e,t,r,n,a){if((e=n*(e>>a)+(e&(1<<a)-1)-r)<i.a)do{e=e<<8|255&t.get()}while(e<i.a);return e}(e,t,r.start,r.freq,n)},renormalize:function(e,t){if(e<i.a)do{e=e<<8|255&t.get()}while(e<i.a);return e}};t.a=u},469:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return a})),r.d(t,"a",(function(){return o}));var n=12,a=1<<n,o=1<<23},600:function(e,t,r){"use strict";var n=r(80),a=r(146).default,o=r(208).default,i=r(100).default,s=r(102).default,c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(i(this,t),!(e.maxSize&&e.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");this.maxSize=e.maxSize,this.cache=new Map,this.oldCache=new Map,this._size=0}return s(t,[{key:"_set",value:function(e,t){this.cache.set(e,t),this._size++,this._size>=this.maxSize&&(this._size=0,this.oldCache=this.cache,this.cache=new Map)}},{key:"get",value:function(e){if(this.cache.has(e))return this.cache.get(e);if(this.oldCache.has(e)){var t=this.oldCache.get(e);return this._set(e,t),t}}},{key:"set",value:function(e,t){return this.cache.has(e)?this.cache.set(e,t):this._set(e,t),this}},{key:"has",value:function(e){return this.cache.has(e)||this.oldCache.has(e)}},{key:"peek",value:function(e){return this.cache.has(e)?this.cache.get(e):this.oldCache.has(e)?this.oldCache.get(e):void 0}},{key:"delete",value:function(e){var t=this.cache.delete(e);return t&&this._size--,this.oldCache.delete(e)||t}},{key:"clear",value:function(){this.cache.clear(),this.oldCache.clear(),this._size=0}},{key:"keys",value:n.mark((function e(){var t,r,i,s;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return i=a(r.value,1),s=i[0],e.next=7,s;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:"values",value:n.mark((function e(){var t,r,i,s;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o(this),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return i=a(r.value,2),s=i[1],e.next=7,s;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))},{key:e,value:n.mark((function e(){var t,r,i,s,c,f,u,h;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o(this.cache),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=9;break}return i=r.value,e.next=7,i;case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),t.e(e.t0);case 14:return e.prev=14,t.f(),e.finish(14);case 17:s=o(this.oldCache),e.prev=18,s.s();case 20:if((c=s.n()).done){e.next=28;break}if(f=c.value,u=a(f,1),h=u[0],this.cache.has(h)){e.next=26;break}return e.next=26,f;case 26:e.next=20;break;case 28:e.next=33;break;case 30:e.prev=30,e.t1=e.catch(18),s.e(e.t1);case 33:return e.prev=33,s.f(),e.finish(33);case 36:case"end":return e.stop()}}),e,this,[[1,11,14,17],[18,30,33,36]])}))},{key:"size",get:function(){var e,t=0,r=o(this.oldCache.keys());try{for(r.s();!(e=r.n()).done;){var n=e.value;this.cache.has(n)||t++}}catch(a){r.e(a)}finally{r.f()}return this._size+t}}]),t}(Symbol.iterator);e.exports=c},601:function(e,t,r){"use strict";t.a={CRAM_FLAG_PRESERVE_QUAL_SCORES:1,CRAM_FLAG_DETACHED:2,CRAM_FLAG_MATE_DOWNSTREAM:4,CRAM_FLAG_NO_SEQ:8,CRAM_FLAG_MASK:15,CRAM_M_REVERSE:1,CRAM_M_UNMAP:2,BAM_FPAIRED:1,BAM_FPROPER_PAIR:2,BAM_FUNMAP:4,BAM_FMUNMAP:8,BAM_FREVERSE:16,BAM_FMREVERSE:32,BAM_FREAD1:64,BAM_FREAD2:128,BAM_FSECONDARY:256,BAM_FQCFAIL:512,BAM_FDUP:1024,BAM_FSUPPLEMENTARY:2048,BAM_CMATCH:0,BAM_CINS:1,BAM_CDEL:2,BAM_CREF_SKIP:3,BAM_CSOFT_CLIP:4,BAM_CHARD_CLIP:5,BAM_CPAD:6,BAM_CEQUAL:7,BAM_CDIFF:8,BAM_CBACK:9,BAM_CIGAR_STR:"MIDNSHP:XB",BAM_CIGAR_SHIFT:4,BAM_CIGAR_MASK:15,BAM_CIGAR_TYPE:246183}},891:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return a}));var n=r(594);function a(t){return e.from(Object(n.inflate)(t))}}).call(this,r(99).Buffer)},892:function(e,t,r){(function(t){var n=r(146).default,a=r(360);function o(e,t){return e&(1<<t)-1}function i(e,t){for(var r=0;t>=e[r+1];)r++;return r}function s(e,t){for(var r=1<<t,n=new Array(r),a=0,o=0;o<r;o++){for(;o>=e[a+1];)a++;n[o]=a}return n}function c(e,t,r,n){return r*(e>>n)+(e&(1<<n)-1)-t}function f(e,t){return t<32768&&(t=(t<<16)+e.ReadUint16()),t}function u(e,t){t.WriteByteNeg(e>>24&255),t.WriteByteNeg(e>>16&255),t.WriteByteNeg(e>>8&255),t.WriteByteNeg(e>>0&255)}function h(e,t,r,n,a){return e=function(e,t,r,n){for(var a=(1<<31-n)*r;e>=a;)t.WriteByteNeg(e>>8&255),t.WriteByteNeg(255&e),e>>=16;return e}(e,t,n,a),e=(Math.floor(e/n)<<a)+e%n+r}function l(e,t,r){0==r&&(r=4);for(var n=new Array(r),o=new Array(r),i=0;i<r;i++)o[i]=Math.floor(t.length/r)+(t.length%r>i),n[i]=new Array(o[i]);for(var s=0,c=0;c<t.length;c+=r,s++)for(var f=0;f<r;f++)s<n[f].length&&(n[f][s]=t[c+f]);var u=new Array(r),h=0;for(i=0;i<r;i++){var l=p(n[i],0),d=p(n[i],1);u[i]=d.length<l.length?d:l,h+=u[i].length}var v=new a("",0,h+5*r+1);v.WriteByte(r);for(i=0;i<r;i++)v.WriteUint7(u[i].length);for(i=0;i<r;i++)v.WriteData(u[i],u[i].length);return v.buf.slice(0,v.buf.pos)}function d(e,r){var u=e.ReadByte(),h=1&u,l=8&u,p=32&u,g=64&u,m=128&u;if(16&u||(r=e.ReadUint7()),l)return function(e,r){for(var n=e.ReadByte(),a=new Array(n),o=new Array(n),i=0;i<n;i++)a[i]=e.ReadUint7();var s=new Array(n);for(i=0;i<n;i++)o[i]=Math.floor(r/n)+(r%n>i),s[i]=d(e,o[i]);var c=new t.allocUnsafe(r);for(i=0;i<n;i++)for(var f=0;f<o[i];f++)c[f*n+i]=s[i][f];return c}(e,r);if(m){var w=r,k=function(e){for(var t=e.ReadByte(),r=new Array(t),n=0;n<t;n++)r[n]=e.ReadByte();return[r,t,e.ReadUint7()]}(e),S=n(k,3),x=S[0],A=S[1];r=S[2]}if(g){var C=r,B=function(e){var t=e.ReadUint7(),r=e.ReadUint7();if(1&t)var n=e.ReadData((t-1)/2);else{var o=e.ReadUint7();n=e.ReadData(o),n=y(new a(n),t/2)}n=new a(n);var i=new Array(256),s=n.ReadByte();0==s&&(s=256);for(var c=0;c<s;c++)i[n.ReadByte()]=1;return[i,n,r]}(e),_=n(B,3),R=_[0],E=_[1];r=_[2]}if(p)var M=e.ReadData(r);else if(0==h)M=y(e,r);else M=function(e,r){var n=(d=e.ReadByte())>>4,u=e;if(1&d){var h=e.ReadUint7(),l=e.ReadUint7(),d=new a(e.ReadData(l));u=new a(y(d,h))}var p=new Array(256),g=new Array(256);!function(e,t,r,n){for(var a=0;a<256;a++){t[a]=new Array(256),r[a]=new Array(256);for(var o=0;o<256;o++)t[a][o]=0}var i=v(e);for(a=0;a<256;a++)if(i[a]){var s=0;for(o=0;o<256;o++)i[o]&&(s>0?s--:(t[a][o]=e.ReadUint7(),0==t[a][o]&&(s=e.ReadByte())));b(t[a],n),r[a][0]=0;for(o=0;o<256;o++)r[a][o+1]=r[a][o]+t[a][o]}}(u,p,g,n);for(var m=new Array(256),w=0;w<256;w++)m[w]=s(g[w],n);for(var k=new Array(4),S=new Array(4),x=0;x<4;x++)k[x]=e.ReadUint32(),S[x]=0;var A=new t.allocUnsafe(r),C=Math.floor(r/4);for(w=0;w<C;w++)for(x=0;x<4;x++){var B=o(k[x],n),_=m[S[x]][B];A[w+x*C]=_,k[x]=c(k[x],g[S[x]][_],p[S[x]][_],n),k[x]=f(e,k[x]),S[x]=_}w*=4;for(;w<r;){B=o(k[3],n),_=i(g[S[3]],B);A[w++]=_,k[3]=c(k[3],g[S[3]][_],p[S[3]][_],n),k[3]=f(e,k[3]),S[3]=_}return A}(e,r);return g&&(M=function(e,r,n,o){new a(e);for(var i=new t.allocUnsafe(o),s=0,c=0;s<o;c++){var f=e[c];if(r[f])for(var u=n.ReadUint7(),h=0;h<=u;h++)i[s++]=f;else i[s++]=f}return i}(M,R,E,C)),m&&(M=function(e,r,n,a){var o=new t.allocUnsafe(a),i=0;if(n<=1)for(var s=0;s<a;s++)o[s]=r[0];else if(n<=2)for(s=0;s<a;s++){if(s%8==0)var c=e[i++];o[s]=r[1&c],c>>=1}else if(n<=4)for(s=0;s<a;s++)s%4==0&&(c=e[i++]),o[s]=r[3&c],c>>=2;else if(n<=16)for(s=0;s<a;s++)s%2==0&&(c=e[i++]),o[s]=r[15&c],c>>=4;return o}(M,x,A,w)),M}function p(e,r){var o=new a("",0,10);o.WriteByte(r);var i=1&r,s=8&r,c=32&r,f=64&r,d=128&r,p=r>>8;if(16&r||o.WriteUint7(e.length),s)return t.concat([o.buf.slice(0,o.pos),l(0,e,p)]);var v=new t.alloc(0);if(d){var y=function(e){for(var r=new Array(256),n=0;n<256;n++)r[n]=0;for(n=0;n<e.length;n++)r[e[n]]++;var o=new Array(256),i=0;for(n=0;n<256;n++)r[n]>0&&(o[n]=i++);if(!(i>16)){if(i<=1)var s=new t.allocUnsafe(0);else if(i<=2){s=new t.allocUnsafe(Math.ceil(e.length/8));var c=-1;for(n=0;n<e.length;n++)n%8==0&&(s[++c]=0),s[c]+=o[e[n]]<<n%8}else if(i<=4)for(s=new t.allocUnsafe(Math.ceil(e.length/4)),c=-1,n=0;n<e.length;n++)n%4==0&&(s[++c]=0),s[c]+=o[e[n]]<<n%4*2;else for(s=new t.allocUnsafe(Math.ceil(e.length/2)),c=-1,n=0;n<e.length;n++)n%2==0&&(s[++c]=0),s[c]+=o[e[n]]<<n%2*4;var f=new a("",0,i+5);for(f.WriteByte(i),c=0,n=0;n<256;n++)r[n]>0&&(r[n]=c++,f.WriteByte(n));return f.WriteUint7(s.length),[f.buf.slice(0,f.pos),s]}}(e),k=n(y,2);v=k[0],e=k[1]}var S=new t.alloc(0);if(f){var x=function(e){for(var r=new Array(256),n=0;n<256;n++)r[n]=0;var o=-1;for(n=0;n<e.length;n++)r[e[n]]+=e[n]==o?1:-1,o=e[n];var i=0;for(n=0;n<256;n++)r[n]>0&&i++;for(i||(i=1,r[0]=1),(u=new a("",0,i+1+e.length)).WriteByte(i),n=0;n<256;n++)r[n]>0&&u.WriteByte(n);var s=new t.allocUnsafe(e.length),c=0;for(n=0;n<e.length;n++)if(s[c++]=e[n],r[e[n]]>0){o=e[n];for(var f=0;n+f+1<e.length&&e[n+f+1]==o;)f++;u.WriteUint7(f),n+=f}var u,h=w(u.buf.slice(0,u.pos)),l=new a("",0,16);return l.WriteUint7(2*u.pos),l.WriteUint7(c),l.WriteUint7(h.length),[u=t.concat([l.buf.slice(0,l.pos),h]),s.slice(0,c)]}(e),A=n(x,2);S=A[0],e=A[1]}if(e.length<4&&1==i&&(i=0,o.buf[0]&=-2),c)var C=e;else if(0==i)C=w(e);else C=function(e){for(var r=e.length,n=new a("",0,198156),o=new Array(256),i=new Array(256),s=new Array(256),c=0;c<256;c++)i[c]=new Array(256),s[c]=new Array(256);var f=12;(function(e,t,r){for(var n=0;n<256;n++){r[n]=0;for(var a=0;a<256;a++)t[n][a]=0}var o=0;for(n=0;n<e.length;n++)r[o]++,t[o][e[n]]++,o=e[n];r[o]++,t[0][e[1*(e.length>>2)]]++,t[0][e[2*(e.length>>2)]]++,t[0][e[3*(e.length>>2)]]++,r[0]+=3})(e,i,o),function(e,t,r){for(var n=0;n<256;n++)if(t[n]){var a=Math.ceil(Math.log2(t[n]));a>r&&(a=r),g(e[n],a)}}(i,o,f);var l=new a("",0,198156);!function(e,t,r){m(e,r);for(var n=0;n<256;n++)if(r[n])for(var a=0,o=0;o<256;o++)if(r[o])if(a)a--;else if(e.WriteUint7(t[n][o]),!t[n][o]){for(var i=o+1;i<256;i++)if(r[i]){if(0!=t[n][i])break;a++}e.WriteByte(a)}}(l,i,o);var d=w(l.buf.slice(0,l.pos));d.length<l.pos?(n.WriteByte(1|f<<4),n.WriteUint7(l.pos),n.WriteUint7(d.length),n.WriteData(d,d.length)):(n.WriteByte(0|f<<4),n.WriteData(l.buf,l.pos));!function(e,t,r){for(var n=0;n<256;n++)t[n]&&b(e[n],r)}(i,o,f);for(c=0;c<256;c++)if(o[c]){s[c][0]=0;for(var p=1;p<256;p++)s[c][p]=s[c][p-1]+i[c][p-1]}var v=new Array(4),y=new Array(4);for(p=0;p<4;p++)v[p]=32768,y[p]=0;var k=new a("",1.05*r+100>>0,1.05*r+100>>0),S=Math.floor(r/4),x=new Array(4),A=new Array(4);for(p=0;p<4;p++)x[p]=(p+1)*S-2,A[p]=e[x[p]+1];A[3]=e[r-1];for(c=r-2;c>4*S-2;c--)v[3]=h(v[3],k,s[e[c]][A[3]],i[e[c]][A[3]],f),A[3]=e[c];for(;x[0]>=0;)for(p=3;p>=0;p--){var C=e[x[p]];v[p]=h(v[p],k,s[C][A[p]],i[C][A[p]],f),A[p]=C,x[p]--}for(p=3;p>=0;p--)v[p]=h(v[p],k,s[0][A[p]],i[0][A[p]],f);for(c=3;c>=0;c--)u(v[c],k);return t.concat([n.buf.slice(0,n.pos),k.buf.slice(k.pos,k.length)],n.pos+k.length-k.pos)}(e);return t.concat([o.buf.slice(0,o.pos),v,S,C])}function v(e){for(var t=new Array(256),r=0;r<256;r++)t[r]=0;var n=0,a=e.ReadByte(),o=a;do{t[a]=1,n>0?(n--,a++):(a=e.ReadByte())==o+1&&(n=e.ReadByte()),o=a}while(0!=a);return t}function y(e,r){var n=new Array(256),a=new Array(256);!function(e,t,r){for(var n=0;n<256;n++)t[n]=0;var a=v(e);for(n=0;n<256;n++)a[n]>0&&(t[n]=e.ReadUint7());for(b(t,12),r[0]=0,n=0;n<=255;n++)r[n+1]=r[n]+t[n]}(e,n,a);for(var i=s(a,12),u=new Array(4),h=0;h<4;h++)u[h]=e.ReadUint32();var l=new t.allocUnsafe(r);for(h=0;h<r;h++){var d=h%4,p=i[o(u[d],12)];l[h]=p,u[d]=c(u[d],a[p],n[p],12),u[d]=f(e,u[d])}return l}function g(e,t){for(var r=0,n=0;n<256;n++)r+=e[n];var a=1<<t,o=a/r;do{var i=0,s=0,c=0;r=0;for(n=0;n<256;n++)0!=e[n]&&(i<e[n]&&(i=e[n],s=n),e[n]=Math.floor(e[n]*o),0==e[n]&&(e[n]=1),r+=e[n]);r<a?e[s]+=a-r:r-a<e[s]/2&&e[s]>2?e[s]-=r-a:r!=a&&(o=a/r,c=1)}while(c)}function b(e,t){for(var r=0,n=0;n<256;n++)r+=e[n];if(0!=r&&r!=1<<t){for(var a=0;r<1<<t;)r*=2,a++;for(n=0;n<256;n++)e[n]<<=a}}function m(e,t){for(var r=0,n=0;n<256;n++)if(t[n])if(r>0)r--;else if(e.WriteByte(n),n>0&&t[n-1]>0){for(r=n+1;r<256&&t[r];r++);r-=n+1,e.WriteByte(r)}e.WriteByte(0)}function w(e){var r=e.length,n=new a("",0,780),o=new Array(256);!function(e,t){for(var r=0;r<256;r++)t[r]=0;for(r=0;r<e.length;r++)t[e[r]]++}(e,o);var i=Math.ceil(Math.log2(r));i>12&&(i=12),g(o,i),function(e,t){m(e,t);for(var r=0;r<256;r++)t[r]&&e.WriteUint7(t[r])}(n,o),g(o,12);var s=new Array(256);s[0]=0;for(var c=1;c<256;c++)s[c]=s[c-1]+o[c-1];var f=new Array(4);for(c=0;c<4;c++)f[c]=32768;var l=new a("",1.05*r+100>>0,1.05*r+100>>0);for(c=r-1;c>=0;c--)f[c%4]=h(f[c%4],l,s[e[c]],o[e[c]],12);for(c=3;c>=0;c--)u(f[c],l);return t.concat([n.buf.slice(0,n.pos),l.buf.slice(l.pos,l.length)],n.pos+l.length-l.pos)}e.exports={decode:function(e){return d(new a(e),0)},encode:p}}).call(this,r(99).Buffer)},893:function(e,t,r){(function(t){var n=r(146).default,a=r(100).default,o=r(102).default,i=r(894),s=r(360),c=r(895),f=r(1423),u=128;e.exports=function(){"use strict";function e(){a(this,e)}return o(e,[{key:"decode",value:function(e){return this.stream=new s(e),this.decodeStream(this.stream)}},{key:"decodeStream",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.stream.ReadByte();16&r||(t=this.stream.ReadUint7());var a=t,o=1&r;if(8&r)return this.decodeStripe(this.stream,t);if(r&u){var i,s=this.decodePackMeta(this.stream),c=n(s,2);i=c[0],a=c[1]}if(32&r)var f=this.decodeCat(this.stream,a);else if(4&r)f=this.decodeExt(this.stream,a);else if(64&r)f=o?this.decodeRLE1(this.stream,a):this.decodeRLE0(this.stream,a);else f=o?this.decode1(this.stream,a):this.decode0(this.stream,a);return r&u&&(f=this.decodePack(f,i,t)),f}},{key:"encode",value:function(e,r){if(this.stream=new s("",0,1.1*e.length+100),this.stream.WriteByte(r),16&r||this.stream.WriteUint7(e.length),8&r)return t.concat([this.stream.buf.slice(0,this.stream.pos),this.encodeStripe(this.stream,e,r>>8)]);var a,o=1&r,i=e.length;if(r&u){var c=this.encodePack(e),f=n(c,3);a=f[0],e=f[1],i=f[2]}return r&u&&this.stream.WriteStream(a),64&r?o?this.encodeRLE1(e,i,this.stream):this.encodeRLE0(e,i,this.stream):o?this.encode1(e,i,this.stream):this.encode0(e,i,this.stream)}},{key:"decode0",value:function(e,r){var n=new t.allocUnsafe(r),a=e.ReadByte();0==a&&(a=256);var o=new c(a),s=new i(e);s.RangeStartDecode(e);for(var f=0;f<r;f++)n[f]=o.ModelDecode(e,s);return n}},{key:"encode0",value:function(e,t,r){for(var n=0,a=0;a<t;a++)n<e[a]&&(n=e[a]);n++;var o=new c(n);r.WriteByte(n);var s=new i(r);for(a=0;a<t;a++)o.ModelEncode(r,s,e[a]);return s.RangeFinishEncode(r),r.buf.slice(0,r.pos)}},{key:"decode1",value:function(e,r){var n=new t.allocUnsafe(r),a=e.ReadByte();0==a&&(a=256);for(var o=new Array(a),s=0;s<a;s++)o[s]=new c(a);var f=new i(e);f.RangeStartDecode(e);var u=0;for(s=0;s<r;s++)n[s]=o[u].ModelDecode(e,f),u=n[s];return n}},{key:"encode1",value:function(e,t,r){for(var n=0,a=0;a<t;a++)n<e[a]&&(n=e[a]);n++;var o=new Array(n);for(a=0;a<n;a++)o[a]=new c(n);r.WriteByte(n);var s=new i(r),f=0;for(a=0;a<t;a++)o[f].ModelEncode(r,s,e[a]),f=e[a];return s.RangeFinishEncode(r),r.buf.slice(0,r.pos)}},{key:"decodeExt",value:function(e,r){var n=new t.allocUnsafe(r),a=f.array(e.buf.slice(e.pos)),o=f.header(a),i=0;do{var s=f.decompress(a,o);-1!=s&&(t.from(s).copy(n,i),i+=s.length,o-=s.length)}while(-1!=s);return n}},{key:"encodeExt",value:function(e,t){}},{key:"decodeRLE0",value:function(e,r){var n=new t.allocUnsafe(r),a=e.ReadByte();0==a&&(a=256);for(var o=new c(a),s=new Array(258),f=0;f<=257;f++)s[f]=new c(4);var u=new i(e);u.RangeStartDecode(e);for(f=0;f<r;){n[f]=o.ModelDecode(e,u);for(var h=s[n[f]].ModelDecode(e,u),l=h,d=256;3==h;)h=s[d].ModelDecode(e,u),d=257,l+=h;for(var p=1;p<=l;p++)n[f+p]=n[f];f+=l+1}return n}},{key:"encodeRLE0",value:function(e,t,r){for(var n=0,a=0;a<t;a++)n<e[a]&&(n=e[a]);n++;var o=new c(n),s=new Array(258);for(a=0;a<=257;a++)s[a]=new c(4);r.WriteByte(n);var f=new i(r);for(a=0;a<t;){o.ModelEncode(r,f,e[a]);for(var u=1;a+u<t&&e[a+u]==e[a];)u++;u--;var h=e[a];e[a];a+=u+1;var l=u>=3?3:u;for(s[h].ModelEncode(r,f,l),u-=l,h=256;3==l;)l=u>=3?3:u,s[h].ModelEncode(r,f,l),h=257,u-=l}return f.RangeFinishEncode(r),r.buf.slice(0,r.pos)}},{key:"decodeRLE1",value:function(e,r){var n=new t.allocUnsafe(r),a=e.ReadByte();0==a&&(a=256);for(var o=new Array(a),s=0;s<a;s++)o[s]=new c(a);var f=new Array(258);for(s=0;s<=257;s++)f[s]=new c(4);var u=new i(e);u.RangeStartDecode(e);var h=0;for(s=0;s<r;){n[s]=o[h].ModelDecode(e,u),h=n[s];for(var l=f[n[s]].ModelDecode(e,u),d=l,p=256;3==l;)l=f[p].ModelDecode(e,u),p=257,d+=l;for(var v=1;v<=d;v++)n[s+v]=n[s];s+=d+1}return n}},{key:"encodeRLE1",value:function(e,t,r){for(var n=0,a=0;a<t;a++)n<e[a]&&(n=e[a]);n++;var o=new Array(n);for(a=0;a<n;a++)o[a]=new c(n);var s=new Array(258);for(a=0;a<=257;a++)s[a]=new c(4);r.WriteByte(n);for(var f=new i(r),u=(a=0,0);a<t;){o[u].ModelEncode(r,f,e[a]);for(var h=1;a+h<t&&e[a+h]==e[a];)h++;h--;var l=e[a];u=e[a],a+=h+1;var d=h>=3?3:h;for(s[l].ModelEncode(r,f,d),h-=d,l=256;3==d;)d=h>=3?3:h,s[l].ModelEncode(r,f,d),l=257,h-=d}return f.RangeFinishEncode(r),r.buf.slice(0,r.pos)}},{key:"decodePackMeta",value:function(e){this.nsym=e.ReadByte();for(var t=new Array(this.nsym),r=0;r<this.nsym;r++)t[r]=e.ReadByte();return[t,e.ReadUint7()]}},{key:"decodePack",value:function(e,r,n){var a=new t.allocUnsafe(n);if(this.nsym<=1)for(var o=0;o<n;o++)a[o]=r[0];else if(this.nsym<=2){o=0;for(var i=0;o<n;o++){if(o%8==0)var s=e[i++];a[o]=r[1&s],s>>=1}}else if(this.nsym<=4)for(o=0,i=0;o<n;o++){if(o%4==0)s=e[i++];a[o]=r[3&s],s>>=2}else{if(!(this.nsym<=16))return e;for(o=0,i=0;o<n;o++){if(o%2==0)s=e[i++];a[o]=r[15&s],s>>=4}}return a}},{key:"packMeta",value:function(e){for(var t=new s("",0,1024),r=new Array(256),n=0;n<e.length;n++)r[e[n]]=1;var a=0;for(n=0;n<256;n++)r[n]&&(r[n]=++a);t.WriteByte(a);for(n=0;n<256;n++)r[n]&&(t.WriteByte(n),r[n]--);return[t,r,a]}},{key:"encodePack",value:function(e){var r,a,o,i=this.packMeta(e),s=n(i,3);r=s[0],a=s[1],o=s[2];var c=e.length,f=0;if(o<=1)return r.WriteUint7(0),[r,new t.allocUnsafe(0),0];if(o<=2){for(var u=new t.allocUnsafe(Math.floor((c+7)/8)),h=(f=0,0);f<(-8&c);f+=8,h++)u[h]=(a[e[f+0]]<<0)+(a[e[f+1]]<<1)+(a[e[f+2]]<<2)+(a[e[f+3]]<<3)+(a[e[f+4]]<<4)+(a[e[f+5]]<<5)+(a[e[f+6]]<<6)+(a[e[f+7]]<<7);if(f<c){u[h]=0;for(var l=0;f<c;)u[h]|=a[e[f++]]<<l,l++;h++}return r.WriteUint7(h),[r,u,u.length]}if(o<=4){for(u=new t.allocUnsafe(Math.floor((c+3)/4)),f=0,h=0;f<(-4&c);f+=4,h++)u[h]=(a[e[f+0]]<<0)+(a[e[f+1]]<<2)+(a[e[f+2]]<<4)+(a[e[f+3]]<<6);if(f<c){u[h]=0;for(l=0;f<c;)u[h]|=a[e[f++]]<<l,l+=2;h++}return r.WriteUint7(h),[r,u,u.length]}if(o<=16){for(u=new t.allocUnsafe(Math.floor((c+1)/2)),f=0,h=0;f<(-2&c);f+=2,h++)u[h]=(a[e[f+0]]<<0)+(a[e[f+1]]<<4);return f<c&&(u[h++]=a[e[f++]]),r.WriteUint7(h),[r,u,u.length]}return r.WriteUint7(e.length),[r,e,e.length]}},{key:"encodeStripe",value:function(e,t,r){0==r&&(r=4);for(var n=new Array(r),a=new Array(r),o=0;o<r;o++)a[o]=Math.floor(t.length/r)+(t.length%r>o),n[o]=new Array(a[o]);for(var i=0,c=0;c<t.length;c+=r,i++)for(var f=0;f<r;f++)i<n[f].length&&(n[f][i]=t[c+f]);var u=new Array(r),h=0;for(o=0;o<r;o++){var l=this.encode(n[o],0),d=this.encode(n[o],1);u[o]=d.length<l.length?d:l,h+=u[o].length}var p=new s("",0,h+5*r+1);p.WriteByte(r);for(o=0;o<r;o++)p.WriteUint7(u[o].length);for(o=0;o<r;o++)p.WriteData(u[o],u[o].length);return p.buf.slice(0,p.buf.pos)}},{key:"decodeStripe",value:function(e,r){for(var n=e.ReadByte(),a=new Array(n),o=new Array(n),i=0;i<n;i++)a[i]=e.ReadUint7();var s=new Array(n);for(i=0;i<n;i++)o[i]=Math.floor(r/n)+(r%n>i),s[i]=this.decodeStream(e,o[i]);var c=new t.allocUnsafe(r);for(i=0;i<n;i++)for(var f=0;f<o[i];f++)c[f*n+i]=s[i][f];return c}},{key:"decodeCat",value:function(e,r){for(var n=new t.allocUnsafe(r),a=0;a<r;a++)n[a]=e.ReadByte();return n}}]),e}()}).call(this,r(99).Buffer)},894:function(e,t,r){var n=r(100).default,a=r(102).default;e.exports=function(){"use strict";function e(t){n(this,e),this.low=0,this.range=4294967295,this.code=0,this.FFnum=0,this.carry=0,this.cache=0}return a(e,[{key:"RangeStartDecode",value:function(e){for(var t=0;t<5;t++)this.code=(this.code<<8)+e.ReadByte();this.code&=4294967295,this.code>>>=0}},{key:"RangeGetFrequency",value:function(e){return this.range=Math.floor(this.range/e),Math.floor(this.code/this.range)}},{key:"RangeDecode",value:function(e,t,r,n){for(this.code-=t*this.range,this.range*=r;this.range<1<<24;)this.range*=256,this.code=256*this.code+e.ReadByte()}},{key:"RangeShiftLow",value:function(e){if(this.low<4278190080|this.carry){for(e.WriteByte(this.cache+this.carry);this.FFnum;)e.WriteByte(this.carry-1),this.FFnum--;this.cache=this.low>>>24,this.carry=0}else this.FFnum++;this.low<<=8,this.low>>>=0}},{key:"RangeEncode",value:function(e,t,r,n){var a=this.low;for(this.range=Math.floor(this.range/n),this.low+=t*this.range,this.low>>>=0,this.range*=r,this.low<a&&(0!=this.carry&&console.log("ERROR: Multiple carry"),this.carry=1);this.range<1<<24;)this.range*=256,this.RangeShiftLow(e)}},{key:"RangeFinishEncode",value:function(e){for(var t=0;t<5;t++)this.RangeShiftLow(e)}}]),e}()},895:function(e,t,r){var n=r(100).default,a=r(102).default;e.exports=function(){"use strict";function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256;n(this,e),this.total_freq=t,this.max_sym=t-1,this.S=new Array,this.F=new Array;for(var r=0;r<=this.max_sym;r++)this.S[r]=r,this.F[r]=1}return a(e,[{key:"ModelDecode",value:function(e,t){for(var r=t.RangeGetFrequency(this.total_freq),n=0,a=0;n+this.F[a]<=r;)n+=this.F[a++];t.RangeDecode(e,n,this.F[a],this.total_freq),this.F[a]+=16,this.total_freq+=16,this.total_freq>65519&&this.ModelRenormalise();var o=this.S[a];if(a>0&&this.F[a]>this.F[a-1]){var i=this.F[a];this.F[a]=this.F[a-1],this.F[a-1]=i,i=this.S[a],this.S[a]=this.S[a-1],this.S[a-1]=i}return o}},{key:"ModelRenormalise",value:function(){this.total_freq=0;for(var e=0;e<=this.max_sym;e++)this.F[e]-=Math.floor(this.F[e]/2),this.total_freq+=this.F[e]}},{key:"ModelEncode",value:function(e,t,r){for(var n=0,a=0;this.S[a]!=r;a++)n+=this.F[a];t.RangeEncode(e,n,this.F[a],this.total_freq),this.F[a]+=16,this.total_freq+=16,this.total_freq>65519&&this.ModelRenormalise();r=this.S[a];if(a>0&&this.F[a]>this.F[a-1]){var o=this.F[a];this.F[a]=this.F[a-1],this.F[a-1]=o,o=this.S[a],this.S[a]=this.S[a-1],this.S[a-1]=o}}}]),e}()},896:function(e,t){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=r},897:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));var n=r(356),a=r.n(n),o=r(898),i=r(899),s=r.n(i);function c(e,t,r){if(r)return r;if(e)return function(e){var t=a.a.parse(e),r=t.protocol,n=t.pathname;return"file:"===r?new s.a(unescape(n)):new o.a(e)}(e);if(t)return new s.a(t);throw new Error("no url, path, or filehandle provided, cannot open")}},898:function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return h}));var n=r(82),a=r(81),o=r(11),i=r(80),s=r.n(i),c=r(1433),f=r.n(c),u=r(1434),h=function(){function t(e){var r=this;Object(a.a)(this,t),this.position=0,this.url=e,this.cache=new u.a({fetch:function(e,t){return r._fetch(e,t)}})}return Object(o.a)(t,[{key:"_fetch",value:function(){var t=Object(n.a)(s.a.mark((function t(r,n){var a,o,i,c;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={},n<1/0?a.range="bytes=".concat(r,"-").concat(r+n):n===1/0&&0!==r&&(a.range="bytes=".concat(r,"-")),t.next=4,f()(this.url,{method:"GET",headers:a,redirect:"follow",mode:"cors"});case 4:if((200!==(o=t.sent).status||0!==r)&&206!==o.status){t.next=14;break}return t.t0=e,t.next=9,o.arrayBuffer();case 9:return t.t1=t.sent,i=t.t0.from.call(t.t0,t.t1),(c=/\/(\d+)$/.exec(o.headers.get("content-range")))[1]&&(this._stat={size:parseInt(c[1],10)}),t.abrupt("return",i);case 14:throw new Error("HTTP ".concat(o.status," fetching ").concat(this.url));case 15:case"end":return t.stop()}}),t,this)})));return function(e,r){return t.apply(this,arguments)}}()},{key:"read",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=n;return null===a&&(a=this.position,this.position+=r),this.cache.get(e,t,r,n)}},{key:"readFile",value:function(){var t=Object(n.a)(s.a.mark((function t(){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f()(this.url,{method:"GET",redirect:"follow",mode:"cors"});case 2:return r=t.sent,t.t0=e,t.next=6,r.arrayBuffer();case 6:return t.t1=t.sent,t.abrupt("return",t.t0.from.call(t.t0,t.t1));case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"stat",value:function(){var t=Object(n.a)(s.a.mark((function t(){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._stat){t.next=6;break}return r=e.allocUnsafe(10),t.next=4,this.read(r,0,10,0);case 4:if(this._stat){t.next=6;break}throw new Error("unable to determine size of file at ".concat(this.url));case 6:return t.abrupt("return",this._stat);case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}()}).call(this,r(99).Buffer)}}]);
//# sourceMappingURL=16.8a101926.chunk.js.map