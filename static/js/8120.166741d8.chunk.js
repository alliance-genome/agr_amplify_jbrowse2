"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[8120,7706],{7706:(e,t,n)=>{n.d(t,{sG:()=>d,unzip:()=>a,i2:()=>s});var r=n(35451),i=n(45834),o=n(57864);async function a(e){try{let t,n=0,i=0;const a=[];let s,l=0;do{const r=e.subarray(n);if(s=new o.Inflate,({strm:t}=s),s.push(r,o.Z_SYNC_FLUSH),s.err)throw new Error(s.msg);n+=t.next_in,a[i]=s.result,l+=a[i].length,i+=1}while(t.avail_in);const c=new Uint8Array(l);for(let e=0,t=0;e<a.length;e++)c.set(a[e],t),t+=a[e].length;return r.Buffer.from(c)}catch(e){if(`${e}`.match(/incorrect header check/))throw new Error("problem decompressing block: incorrect gzip header check");throw e}}async function s(e,t){try{let n;const{minv:i,maxv:a}=t;let s=i.blockPosition,l=i.dataPosition;const c=[],h=[],d=[];let f=0,u=0;do{const t=e.subarray(s-i.blockPosition),r=new o.Inflate;if(({strm:n}=r),r.push(t,o.Z_SYNC_FLUSH),r.err)throw new Error(r.msg);const m=r.result;c.push(m);let b=m.length;h.push(s),d.push(l),1===c.length&&i.dataPosition&&(c[0]=c[0].subarray(i.dataPosition),b=c[0].length);const w=s;if(s+=n.next_in,l+=b,w>=a.blockPosition){c[u]=c[u].subarray(0,a.blockPosition===i.blockPosition?a.dataPosition-i.dataPosition+1:a.dataPosition+1),h.push(s),d.push(l),f+=c[u].length;break}f+=c[u].length,u++}while(n.avail_in);const m=new Uint8Array(f);for(let e=0,t=0;e<c.length;e++)m.set(c[e],t),t+=c[e].length;return{buffer:r.Buffer.from(m),cpositions:h,dpositions:d}}catch(e){if(`${e}`.match(/incorrect header check/))throw new Error("problem decompressing block: incorrect gzip header check");throw e}}var l=n(59086),c=n.n(l);class h{constructor({filehandle:e,path:t}){if(e)this.filehandle=e;else{if(!t)throw new TypeError("either filehandle or path must be defined");this.filehandle=new i.EY(t)}}_readLongWithOverflow(e,t=0,n=!0){const r=c().fromBytesLE(e.slice(t,t+8),n);if(r.greaterThan(Number.MAX_SAFE_INTEGER)||r.lessThan(Number.MIN_SAFE_INTEGER))throw new TypeError("integer overflow");return r.toNumber()}_getIndex(){return this.index||(this.index=this._readIndex()),this.index}async _readIndex(){let e=r.Buffer.allocUnsafe(8);await this.filehandle.read(e,0,8,0);const t=this._readLongWithOverflow(e,0,!0);if(!t)return[[0,0]];const n=new Array(t+1);n[0]=[0,0];const i=16*t;if(i>Number.MAX_SAFE_INTEGER)throw new TypeError("integer overflow");e=r.Buffer.allocUnsafe(i),await this.filehandle.read(e,0,i,8);for(let r=0;r<t;r+=1){const t=this._readLongWithOverflow(e,16*r),i=this._readLongWithOverflow(e,16*r+8);n[r+1]=[t,i]}return n}async getLastBlock(){const e=await this._getIndex();if(e.length)return e[e.length-1]}async getRelevantBlocksForRead(e,t){const n=t+e;if(0===e)return[];const r=await this._getIndex(),i=[],o=(e,n)=>{const r=e[1],i=n?n[1]:1/0;return r<=t&&i>t?0:r<t?-1:1};let a=0,s=r.length-1,l=Math.floor(r.length/2),c=o(r[l],r[l+1]);for(;0!==c;)c>0?s=l-1:c<0&&(a=l+1),l=Math.ceil((s-a)/2)+a,c=o(r[l],r[l+1]);i.push(r[l]);let h=l+1;for(;h<r.length&&(i.push(r[h]),!(r[h][1]>=n));h+=1);return i[i.length-1][1]<n&&i.push([]),i}}class d{constructor({filehandle:e,path:t,gziFilehandle:n,gziPath:r}){if(e)this.filehandle=e;else{if(!t)throw new TypeError("either filehandle or path must be defined");this.filehandle=new i.EY(t)}if(!n&&!r&&!t)throw new TypeError("either gziFilehandle or gziPath must be defined");this.gzi=new h({filehandle:n,path:n||r||!t?`${t}.gzi`:r})}async stat(){const e=await this.filehandle.stat();return Object.assign(e,{size:await this.getUncompressedFileSize(),blocks:void 0,blksize:void 0})}async getUncompressedFileSize(){const[,e]=await this.gzi.getLastBlock(),{size:t}=await this.filehandle.stat(),n=r.Buffer.allocUnsafe(4),{bytesRead:i}=await this.filehandle.read(n,0,4,t-28-4);if(4!==i)throw new Error("read error");return e+n.readUInt32LE(0)}async _readAndUncompressBlock(e,[t],[n]){let r=n;r||(r=(await this.filehandle.stat()).size);const i=r-t;return await this.filehandle.read(e,0,i,t),await a(e.slice(0,i))}async read(e,t,n,i){const o=await this.gzi.getRelevantBlocksForRead(n,i),a=r.Buffer.allocUnsafe(65536);let s=t,l=0;for(let t=0;t<o.length-1;t+=1){const r=await this._readAndUncompressBlock(a,o[t],o[t+1]),[,c]=o[t],h=c>=i?0:i-c,d=Math.min(i+n,c+r.length)-c;h>=0&&h<r.length&&(r.copy(e,s,h,d),s+=d-h,l+=d-h)}return{bytesRead:l,buffer:e}}}},68120:(e,t,n)=>{n.d(t,{wD:()=>S});var r=n(5742),i=n.n(r),o=n(16308),a=n.n(o),s=n(35451),l=n(45834),c=n(7706);function h(e){if(e.greaterThan(Number.MAX_SAFE_INTEGER)||e.lessThan(Number.MIN_SAFE_INTEGER))throw new Error("integer overflow");return e.toNumber()}class d extends Error{}function f(e){if(e&&e.aborted){if("undefined"!=typeof DOMException)throw new DOMException("aborted","AbortError");{const e=new d("aborted");throw e.code="ERR_ABORTED",e}}}function u(e,t){const n=[];let r=null;return 0===e.length?e:(e.sort((function(e,t){const n=e.minv.blockPosition-t.minv.blockPosition;return 0!==n?n:e.minv.dataPosition-t.minv.dataPosition})),e.forEach((e=>{var i,o;(!t||e.maxv.compareTo(t)>0)&&(null===r?(n.push(e),r=e):(i=r,(o=e).minv.blockPosition-i.maxv.blockPosition<65e3&&o.maxv.blockPosition-i.minv.blockPosition<5e6?e.maxv.compareTo(r.maxv)>0&&(r.maxv=e.maxv):(n.push(e),r=e)))})),n)}var m=n(59086),b=n.n(m);class w{constructor(e,t){this.blockPosition=e,this.dataPosition=t}toString(){return`${this.blockPosition}:${this.dataPosition}`}compareTo(e){return this.blockPosition-e.blockPosition||this.dataPosition-e.dataPosition}static min(...e){let t,n=0;for(;!t;n+=1)t=e[n];for(;n<e.length;n+=1)t.compareTo(e[n])>0&&(t=e[n]);return t}}function p(e,t=0,n=!1){if(n)throw new Error("big-endian virtual file offsets not implemented");return new w(1099511627776*e[t+7]+4294967296*e[t+6]+16777216*e[t+5]+65536*e[t+4]+256*e[t+3]+e[t+2],e[t+1]<<8|e[t])}class g{constructor(e,t,n,r=void 0){this.minv=e,this.maxv=t,this.bin=n,this._fetchedSize=r}toUniqueString(){return`${this.minv}..${this.maxv} (bin ${this.bin}, fetchedSize ${this.fetchedSize()})`}toString(){return this.toUniqueString()}compareTo(e){return this.minv.compareTo(e.minv)||this.maxv.compareTo(e.maxv)||this.bin-e.bin}fetchedSize(){return void 0!==this._fetchedSize?this._fetchedSize:this.maxv.blockPosition+65536-this.minv.blockPosition}}class E{constructor({filehandle:e,renameRefSeqs:t=(e=>e)}){this.filehandle=e,this.renameRefSeq=t}async getMetadata(e={}){const{indices:t,...n}=await this.parse(e);return n}_findFirstData(e,t){return e?e.compareTo(t)>0?t:e:t}async parse(e={}){return this.parseP||(this.parseP=this._parse(e).catch((e=>{throw this.parseP=void 0,e}))),this.parseP}async hasRefSeq(e,t={}){var n;return!!(null===(n=(await this.parse(t)).indices[e])||void 0===n?void 0:n.binIndex)}}class v extends E{async lineCount(e,t={}){const n=await this.parse(t);if(!n)return-1;const r=n.refNameToId[e];if(!n.indices[r])return-1;const{stats:i}=n.indices[r];return i?i.lineCount:-1}async _parse(e={}){const t=await this.filehandle.readFile(e),n=await(0,c.unzip)(t);if(f(e.signal),21578324!==n.readUInt32LE(0))throw new Error("Not a TBI file");const r=n.readInt32LE(4),i=n.readInt32LE(8),o=65536&i?"zero-based-half-open":"1-based-closed",a={0:"generic",1:"SAM",2:"VCF"}[15&i];if(!a)throw new Error(`invalid Tabix preset format flags ${i}`);const s={ref:n.readInt32LE(12),start:n.readInt32LE(16),end:n.readInt32LE(20)},l=n.readInt32LE(24),h=l?String.fromCharCode(l):null,d=n.readInt32LE(28),u=n.readInt32LE(32),{refNameToId:m,refIdToName:b}=this._parseNameBytes(n.slice(36,36+u));let w,E=36+u;return{indices:new Array(r).fill(0).map((()=>{const e=n.readInt32LE(E);E+=4;const t={};let r;for(let i=0;i<e;i+=1){const e=n.readUInt32LE(E);if(E+=4,e>37450)throw new Error("tabix index contains too many bins, please use a CSI index");if(37450===e){const e=n.readInt32LE(E);E+=4,2===e&&(r=this.parsePseudoBin(n,E)),E+=16*e}else{const r=n.readInt32LE(E);E+=4;const i=new Array(r);for(let t=0;t<r;t+=1){const r=p(n,E),o=p(n,E+8);E+=16,w=this._findFirstData(w,r),i[t]=new g(r,o,e)}t[e]=i}}const i=n.readInt32LE(E);E+=4;const o=new Array(i);for(let e=0;e<i;e+=1)o[e]=p(n,E),E+=8,w=this._findFirstData(w,o[e]);return{binIndex:t,linearIndex:o,stats:r}})),metaChar:h,maxBinNumber:37449,maxRefLength:536870912,skipLines:d,firstDataLine:w,columnNumbers:s,coordinateType:o,format:a,refIdToName:b,refNameToId:m,maxBlockSize:65536}}parsePseudoBin(e,t){return{lineCount:h(b().fromBytesLE(e.slice(t+16,t+24),!0))}}_parseNameBytes(e){let t=0,n=0;const r=[],i={};for(let o=0;o<e.length;o+=1)if(!e[o]){if(n<o){let a=e.toString("utf8",n,o);a=this.renameRefSeq(a),r[t]=a,i[a]=t}n=o+1,t+=1}return{refNameToId:i,refIdToName:r}}async blocksForRange(e,t,n,r={}){t<0&&(t=0);const i=await this.parse(r);if(!i)return[];const o=i.refNameToId[e],a=i.indices[o];if(!a)return[];(a.linearIndex.length?a.linearIndex[t>>14>=a.linearIndex.length?a.linearIndex.length-1:t>>14]:new w(0,0))||console.warn("querying outside of possible tabix range");const s=(l=t,c=n,[[0,0],[1+((l+=1)>>26),1+((c-=1)>>26)],[9+(l>>23),9+(c>>23)],[73+(l>>20),73+(c>>20)],[585+(l>>17),585+(c>>17)],[4681+(l>>14),4681+(c>>14)]]);var l,c;const h=[];for(const[e,t]of s)for(let n=e;n<=t;n++)if(a.binIndex[n])for(const e of a.binIndex[n])h.push(new g(e.minv,e.maxv,n));const d=a.linearIndex.length;let f=null;const m=Math.min(t>>14,d-1),b=Math.min(n>>14,d-1);for(let e=m;e<=b;++e){const t=a.linearIndex[e];t&&(!f||t.compareTo(f)<0)&&(f=t)}return u(h,f)}}function y(e,t){return Math.floor(e/2**t)}class x extends E{constructor(e){super(e),this.maxBinNumber=0,this.depth=0,this.minShift=0}async lineCount(e,t={}){const n=await this.parse(t);if(!n)return-1;const r=n.refNameToId[e];if(!n.indices[r])return-1;const{stats:i}=n.indices[r];return i?i.lineCount:-1}indexCov(){throw new Error("CSI indexes do not support indexcov")}parseAuxData(e,t){const n=e.readInt32LE(t),r=65536&n?"zero-based-half-open":"1-based-closed",i={0:"generic",1:"SAM",2:"VCF"}[15&n];if(!i)throw new Error(`invalid Tabix preset format flags ${n}`);const o={ref:e.readInt32LE(t+4),start:e.readInt32LE(t+8),end:e.readInt32LE(t+12)},a=e.readInt32LE(t+16),s=a?String.fromCharCode(a):null,l=e.readInt32LE(t+20),c=e.readInt32LE(t+24),{refIdToName:h,refNameToId:d}=this._parseNameBytes(e.slice(t+28,t+28+c));return{refIdToName:h,refNameToId:d,skipLines:l,metaChar:s,columnNumbers:o,format:i,coordinateType:r}}_parseNameBytes(e){let t=0,n=0;const r=[],i={};for(let o=0;o<e.length;o+=1)if(!e[o]){if(n<o){let a=e.toString("utf8",n,o);a=this.renameRefSeq(a),r[t]=a,i[a]=t}n=o+1,t+=1}return{refNameToId:i,refIdToName:r}}async _parse(e={}){const t=await(0,c.unzip)(await this.filehandle.readFile(e));let n;if(21582659===t.readUInt32LE(0))n=1;else{if(38359875!==t.readUInt32LE(0))throw new Error("Not a CSI file");n=2}this.minShift=t.readInt32LE(4),this.depth=t.readInt32LE(8),this.maxBinNumber=((1<<3*(this.depth+1))-1)/7;const r=2**(this.minShift+3*this.depth),i=t.readInt32LE(12),o=i&&i>=30?this.parseAuxData(t,16):{refIdToName:[],refNameToId:{},metaChar:null,columnNumbers:{ref:0,start:1,end:2},coordinateType:"zero-based-half-open",format:"generic"},a=t.readInt32LE(16+i);let s,l=16+i+4;const h=new Array(a).fill(0).map((()=>{const e=t.readInt32LE(l);l+=4;const n={};let r;for(let i=0;i<e;i+=1){const e=t.readUInt32LE(l);if(e>this.maxBinNumber)r=this.parsePseudoBin(t,l+4),l+=48;else{const r=p(t,l+4);s=this._findFirstData(s,r);const i=t.readInt32LE(l+12);l+=16;const o=new Array(i);for(let n=0;n<i;n+=1){const r=p(t,l),i=p(t,l+8);l+=16,o[n]=new g(r,i,e)}n[e]=o}}return{binIndex:n,stats:r}}));return{...o,csi:!0,refCount:a,maxBlockSize:65536,firstDataLine:s,csiVersion:n,indices:h,depth:this.depth,maxBinNumber:this.maxBinNumber,maxRefLength:r}}parsePseudoBin(e,t){return{lineCount:h(b().fromBytesLE(e.slice(t+28,t+36),!0))}}async blocksForRange(e,t,n,r={}){t<0&&(t=0);const i=await this.parse(r);if(!i)return[];const o=i.refNameToId[e],a=i.indices[o];if(!a)return[];const s=this.reg2bins(t,n),l=[];for(const[e,t]of s)for(let n=e;n<=t;n++)if(a.binIndex[n])for(const e of a.binIndex[n])l.push(new g(e.minv,e.maxv,n));return u(l,new w(0,0))}reg2bins(e,t){(e-=1)<1&&(e=1),t>2**50&&(t=2**34),t-=1;let n=0,r=0,i=this.minShift+3*this.depth;const o=[];for(;n<=this.depth;i-=3,r+=1*2**(3*n),n+=1){const n=r+y(e,i),a=r+y(t,i);if(a-n+o.length>this.maxBinNumber)throw new Error(`query ${e}-${t} is too large for current binning scheme (shift ${this.minShift}, depth ${this.depth}), try a smaller query or a coarser index binning scheme`);o.push([n,a])}return o}}const I="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function k(e){return new Promise((t=>setTimeout(t,e)))}class S{constructor({path:e,filehandle:t,tbiPath:n,tbiFilehandle:r,csiPath:o,csiFilehandle:s,yieldTime:c=500,chunkSizeLimit:h=5e7,renameRefSeqs:d=(e=>e),chunkCacheSize:f=5242880}){if(t)this.filehandle=t;else{if(!e)throw new TypeError("must provide either filehandle or path");this.filehandle=new l.EY(e)}if(r)this.index=new v({filehandle:r,renameRefSeqs:d});else if(s)this.index=new x({filehandle:s,renameRefSeqs:d});else if(n)this.index=new v({filehandle:new l.EY(n),renameRefSeqs:d});else if(o)this.index=new x({filehandle:new l.EY(o),renameRefSeqs:d});else{if(!e)throw new TypeError("must provide one of tbiFilehandle, tbiPath, csiFilehandle, or csiPath");this.index=new v({filehandle:new l.EY(`${e}.tbi`),renameRefSeqs:d})}this.chunkSizeLimit=h,this.renameRefSeq=d,this.yieldTime=c,this.chunkCache=new(i())({cache:new(a())({maxSize:Math.floor(f/65536)}),fill:(e,t)=>this.readChunk(e,{signal:t})})}async getLines(e,t,n,r){var i;let o,a,s={};if(void 0===r)throw new TypeError("line callback must be provided");if("function"==typeof r?a=r:(s=r,a=r.lineCallback,o=r.signal),void 0===e)throw new TypeError("must provide a reference sequence name");if(!a)throw new TypeError("line callback must be provided");const l=await this.index.getMetadata(s);f(o);const c=null!=t?t:0,h=null!=n?n:l.maxRefLength;if(!(c<=h))throw new TypeError("invalid start and end coordinates. start must be less than or equal to end");if(c===h)return;const d=await this.index.blocksForRange(e,c,h,s);f(o);for(const e of d){const t=e.fetchedSize();if(t>this.chunkSizeLimit)throw new Error(`Too much data. Chunk size ${t.toLocaleString()} bytes exceeds chunkSizeLimit of ${this.chunkSizeLimit.toLocaleString()}.`)}let u=Date.now();for(const t of d){let n;const{buffer:r,cpositions:s,dpositions:d}=await this.chunkCache.get(t.toString(),t,o);f(o);let m=0,b=0;for(;m<r.length;){const w=r.indexOf("\n",m);if(-1===w)break;const p=r.slice(m,w),g=null!==(i=null==I?void 0:I.decode(p))&&void 0!==i?i:p.toString();if(d){for(;m+t.minv.dataPosition>=d[b++];);b--}const{startCoordinate:E,overlaps:v}=this.checkLine(l,e,c,h,g);if(void 0!==n&&void 0!==E&&n>E)throw new Error(`Lines not sorted by start coordinate (${n} > ${E}), this file is not usable with Tabix.`);if(n=E,v)a(g.trim(),256*s[b]+(m-d[b])+t.minv.dataPosition+1);else if(void 0!==E&&E>=h)return;this.yieldTime&&u-Date.now()>this.yieldTime&&(u=Date.now(),f(o),await k(1)),m=w+1}}}async getMetadata(e={}){return this.index.getMetadata(e)}async getHeaderBuffer(e={}){const{firstDataLine:t,metaChar:n,maxBlockSize:r}=await this.getMetadata(e);f(e.signal);const i=((null==t?void 0:t.blockPosition)||0)+r,o=await this._readRegion(0,i,e),a=await(0,c.unzip)(o);if(n){let e=-1;const t="\n".charCodeAt(0),r=n.charCodeAt(0);for(let n=0;n<a.length&&(n!==e+1||a[n]===r);n+=1)a[n]===t&&(e=n);return a.slice(0,e+1)}return a}async getHeader(e={}){return(await this.getHeaderBuffer(e)).toString("utf8")}async getReferenceSequenceNames(e={}){return(await this.getMetadata(e)).refIdToName}checkLine(e,t,n,r,i){const{columnNumbers:o,metaChar:a,coordinateType:s,format:l}=e;if(a&&i.startsWith(a))return{overlaps:!1};let{ref:c,start:h,end:d}=o;c||(c=0),h||(h=0),d||(d=0),"VCF"===l&&(d=8);const f=Math.max(c,h,d);let u=1,m=0,b="",w=-1/0;for(let e=0;e<i.length+1;e+=1)if("\t"===i[e]||e===i.length){if(u===c){if(this.renameRefSeq(i.slice(m,e))!==t)return{overlaps:!1}}else if(u===h){if(w=parseInt(i.slice(m,e),10),"1-based-closed"===s&&(w-=1),w>=r)return{startCoordinate:w,overlaps:!1};if((0===d||d===h)&&w+1<=n)return{startCoordinate:w,overlaps:!1}}else if("VCF"===l&&4===u)b=i.slice(m,e);else if(u===d&&("VCF"===l?this._getVcfEnd(w,b,i.slice(m,e)):parseInt(i.slice(m,e),10))<=n)return{overlaps:!1};if(m=e+1,u+=1,u>f)break}return{startCoordinate:w,overlaps:!0}}_getVcfEnd(e,t,n){let r=e+t.length;const i=n.includes("SVTYPE=TRA");if("."===n[0]||i){if(i)return e+1}else{let e=";";for(let t=0;t<n.length;t+=1){if(";"===e&&"END="===n.slice(t,t+4)){let e=n.indexOf(";",t);-1===e&&(e=n.length),r=parseInt(n.slice(t+4,e),10);break}e=n[t]}}return r}async lineCount(e,t={}){return this.index.lineCount(e,t)}async _readRegion(e,t,n={}){const r=s.Buffer.alloc(t),{bytesRead:i,buffer:o}=await this.filehandle.read(r,0,t,e,n);return o.slice(0,i)}async readChunk(e,t={}){const n=await this._readRegion(e.minv.blockPosition,e.fetchedSize(),t);return(0,c.i2)(n,e)}}},12401:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(53472),o=r(n(58607)),a=r(n(56086));class s{constructor({fill:e,cache:t}){if("function"!=typeof e)throw new TypeError("must pass a fill function");if("object"!=typeof t)throw new TypeError("must pass a cache object");if("function"!=typeof t.get||"function"!=typeof t.set||"function"!=typeof t.delete)throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=t,this.fillCallback=e}static isAbortException(e){return"AbortError"===e.name||"ERR_ABORTED"===e.code||"AbortError: aborted"===e.message||"Error: aborted"===e.message}evict(e,t){this.cache.get(e)===t&&this.cache.delete(e)}fill(e,t,n,r){const i=new o.default,s=new a.default;s.addCallback(r);const l={aborter:i,promise:this.fillCallback(t,i.signal,(e=>{s.callback(e)})),settled:!1,statusReporter:s,get aborted(){return this.aborter.signal.aborted}};l.aborter.addSignal(n),l.aborter.signal.addEventListener("abort",(()=>{l.settled||this.evict(e,l)})),l.promise.then((()=>{l.settled=!0}),(()=>{l.settled=!0,this.evict(e,l)})).catch((e=>{throw console.error(e),e})),this.cache.set(e,l)}static checkSinglePromise(e,t){function n(){if(t&&t.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return e.then((e=>(n(),e)),(e=>{throw n(),e}))}has(e){return this.cache.has(e)}get(e,t,n,r){if(!n&&t instanceof i.AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");const o=this.cache.get(e);return o?o.aborted&&!o.settled?(this.evict(e,o),this.get(e,t,n,r)):o.settled?o.promise:(o.aborter.addSignal(n),o.statusReporter.addCallback(r),s.checkSinglePromise(o.promise,n)):(this.fill(e,t,n,r),s.checkSinglePromise(this.cache.get(e).promise,n))}delete(e){const t=this.cache.get(e);t&&(t.settled||t.aborter.abort(),this.cache.delete(e))}clear(){const e=this.cache.keys();let t=0;for(let n=e.next();!n.done;n=e.next())this.delete(n.value),t+=1;return t}}t.default=s},58607:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const r=n(53472);class i{}t.default=class{constructor(){this.signals=new Set,this.abortController=new r.AbortController}addSignal(e=new i){if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(e),e.aborted?this.handleAborted(e):"function"==typeof e.addEventListener&&e.addEventListener("abort",(()=>{this.handleAborted(e)}))}handleAborted(e){this.signals.delete(e),0===this.signals.size&&this.abortController.abort()}get signal(){return this.abortController.signal}abort(){this.abortController.abort()}}},56086:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.callbacks=new Set}addCallback(e=(()=>{})){this.callbacks.add(e),e(this.currentMessage)}callback(e){this.currentMessage=e,this.callbacks.forEach((t=>{t(e)}))}}},53472:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AbortSignal=t.AbortController=void 0;const r=n(16006);var i=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==n.g)return n.g;throw new Error("unable to locate global object")};let o=void 0===i().AbortController?r.AbortController:i().AbortController;t.AbortController=o;let a=void 0===i().AbortController?r.AbortSignal:i().AbortSignal;t.AbortSignal=a},5742:function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=r(n(12401));t.default=i.default}}]);
//# sourceMappingURL=8120.166741d8.chunk.js.map