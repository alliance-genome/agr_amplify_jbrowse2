"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[94,3180],{17560:(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var r=n(66204),a=n(80846),l=n(86636),i=n(25063),o=n(44047),s=n(25086),c=n(80013),u=n(46338),d=n(39780),m=n(70539),f=n(23155),p=n(84081),h=n(90872),g=n(90375),v=n(13577);function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}function b({columns:e,filter:t,setFilter:n}){return r.createElement(r.Fragment,null,r.createElement(c.Z,null,"These filters can use a plain text search or regex style query, e.g. in the genotype field, entering 1 will query for all genotypes that include the first alternate allele e.g. 0|1 or 1|1, entering [1-9]\\d* will find any non-zero allele e.g. 0|2 or 2/33"),e.map((({field:e})=>r.createElement(u.Z,{key:`filter-${e}`,placeholder:`Filter ${e}`,value:t[e]||"",onChange:r=>n({...t,[e]:r.target.value})}))))}function w(e){const{feature:t,descriptions:n={}}=e,{ref:a,scrollLeft:l}=(0,v.x)(),[i,s]=(0,r.useState)({}),u=t.samples||{},w=Object.entries(u);let y,Z=[];const k=Object.keys(i);try{Z=w.map((e=>({...Object.fromEntries(Object.entries(e[1]).map((e=>[e[0],`${e[1]}`]))),sample:e[0],id:e[0]}))).filter((e=>!k.length||k.every((t=>{const n=i[t];return!n||e[t].match(new RegExp(n,"i"))}))))}catch(e){y=e}const S=["sample",...Object.keys(w[0]?.[1]||{})],[O,C]=(0,r.useState)(!1),[N,L]=(0,r.useState)(S.map((e=>(0,h.measureGridWidth)(Z.map((t=>t[e])))))),T=S.map(((e,t)=>({field:e,description:n?.FORMAT?.[e]?.Description,width:N[t]})));return w.length?r.createElement(o.BaseCard,E({},e,{title:"Samples"}),y?r.createElement(c.Z,{color:"error"},`${y}`):null,r.createElement(d.Z,{control:r.createElement(m.Z,{checked:O,onChange:e=>C(e.target.checked)}),label:r.createElement(c.Z,{variant:"body2"},"Show options")}),O?r.createElement(b,{setFilter:s,columns:T,filter:i}):null,r.createElement("div",{ref:a},r.createElement(g.Z,{widths:N,setWidths:L,scrollLeft:l}),r.createElement(f._$,{rows:Z,hideFooter:Z.length<100,columns:T,disableRowSelectionOnClick:!0,rowHeight:25,columnHeaderHeight:35,disableColumnMenu:!0,slots:{toolbar:O?p.n:null},slotProps:{toolbar:{printOptions:{disableToolbarButton:!0}}}}))):null}var y=n(66159),Z=n(85291),k=n(29520),S=n(62301),O=n(7146),C=n(38684),N=n(88196),L=n(35421);const T=(0,C.ZL)()({block:{display:"block"}}),F=(0,a.observer)((function({model:e,handleClose:t,feature:n,viewType:a}){const{classes:l}=T(),[i,o]=(0,r.useState)(!0),[s,c]=(0,r.useState)(!0);return r.createElement(L.Dialog,{open:!0,onClose:t,title:"Breakpoint split view options"},r.createElement(k.Z,null,r.createElement(d.Z,{className:l.block,control:r.createElement(m.Z,{checked:i,onChange:e=>o(e.target.checked)}),label:"Copy tracks into the new view"}),r.createElement(d.Z,{className:l.block,control:r.createElement(m.Z,{checked:s,onChange:e=>c(e.target.checked)}),label:"Mirror tracks vertically in vertically stacked view"})),r.createElement(S.Z,null,r.createElement(O.Z,{onClick:()=>{const{view:r}=e,l=(0,h.getSession)(e);try{const i=a.snapshotFromBreakendFeature(n,r);function o(e){return e.map((e=>({...e,id:`${e.trackId}-${Math.random()}`})))}i.views[0].offsetPx-=r.width/2+100,i.views[1].offsetPx-=r.width/2+100,i.featureData=n;const c=(0,N.getSnapshot)(r.tracks);i.views[0].tracks=o(c),i.views[1].tracks=o(s?[...c].reverse():c),l.addView("BreakpointSplitView",i)}catch(u){console.error(u),l.notify(`${u}`)}t()},variant:"contained",color:"primary",autoFocus:!0},"OK"),r.createElement(O.Z,{onClick:()=>t(),color:"secondary",variant:"contained"},"Cancel")))}));function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j.apply(this,arguments)}function $(e){const{model:t,locStrings:n,feature:a}=e,l=(0,h.getSession)(t),{pluginManager:i}=(0,h.getEnv)(l),[s,u]=(0,r.useState)(!1);let d;try{d=i.getViewType("BreakpointSplitView")}catch(e){}const m=new Z.Z(a);return r.createElement(o.BaseCard,j({},e,{title:"Breakends"}),r.createElement(c.Z,null,"Link to linear view of breakend endpoints"),r.createElement("ul",null,n.map((e=>r.createElement("li",{key:`${JSON.stringify(e)}`},r.createElement(y.Z,{href:"#",onClick:n=>{n.preventDefault();const{view:r}=t;try{if(!r)throw new Error("No view associated with this feature detail panel anymore");r.navToLocString?.(e)}catch(e){console.error(e),l.notify(`${e}`)}}},`LGV - ${e}`))))),d?r.createElement("div",null,r.createElement(c.Z,null,"Launch split views with breakend source and target"),r.createElement("ul",null,n.map((e=>r.createElement("li",{key:`${JSON.stringify(e)}`},r.createElement(y.Z,{href:"#",onClick:e=>{e.preventDefault(),u(!0)}},`${a.refName}:${a.start} // ${e} (split view)`))))),s?r.createElement(F,{model:t,feature:m,viewType:d,handleClose:()=>{u(!1)}}):null):null)}function R({rows:e,columns:t}){const{ref:n,scrollLeft:a}=(0,v.x)(),[l,i]=(0,r.useState)(!1),[o,s]=(0,r.useState)(t.map((t=>(0,h.measureGridWidth)(e.map((e=>e[t.field]))))));return e.length?r.createElement("div",{ref:n},r.createElement(d.Z,{control:r.createElement(m.Z,{checked:l,onChange:e=>i(e.target.checked)}),label:r.createElement(c.Z,{variant:"body2"},"Show options")}),r.createElement("div",{ref:n},r.createElement(g.Z,{widths:o,setWidths:s,scrollLeft:a}),r.createElement(f._$,{rowHeight:25,rows:e,columns:t.map(((e,t)=>({...e,width:o[t]}))),slots:{toolbar:l?p.n:null}}))):null}function P({data:e,fields:t,title:n}){return e.length?r.createElement(o.BaseCard,{title:n},r.createElement(R,{rows:e.map(((e,n)=>({id:n,...Object.fromEntries(e.split("|").map(((e,n)=>[t[n],e])))})))||[],columns:t.map((e=>({field:e})))})):null}function x(){return x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x.apply(this,arguments)}const A={CHROM:"chromosome: An identifier from the reference genome",POS:"position: The reference position, with the 1st base having position 1",ID:"identifier: Semi-colon separated list of unique identifiers where available",REF:"reference base(s): Each base must be one of A,C,G,T,N (case insensitive).",ALT:"alternate base(s): Comma-separated list of alternate non-reference alleles",QUAL:"quality: Phred-scaled quality score for the assertion made in ALT",FILTER:"filter status: PASS if this position has passed all filters, otherwise a semicolon-separated list of codes for filters that fail"};function D({descriptions:e,feature:t}){const n=e?.INFO?.ANN?.Description,a=n?.match(/.*Functional annotations:'(.*)'$/)?.[1].split("|")||[],l=t.INFO?.ANN||[];return r.createElement(P,{fields:a,data:l,title:"Variant ANN field"})}function I({descriptions:e,feature:t}){const n=e?.INFO?.CSQ?.Description,a=n?.match(/.*Format: (.*)/)?.[1].split("|")||[],l=t.INFO?.CSQ||[];return r.createElement(P,{fields:a,data:l,title:"Variant CSQ field"})}const M=(0,a.observer)((function(e){const{model:t}=e,{featureData:n,descriptions:a}=t,c=JSON.parse(JSON.stringify(n)),{samples:u,...d}=c;return r.createElement(l.Z,{"data-testid":"variant-side-drawer"},r.createElement(o.FeatureDetails,x({feature:d,descriptions:{...A,...a}},e)),r.createElement(i.Z,null),r.createElement(I,{feature:d,descriptions:a}),r.createElement(i.Z,null),r.createElement(D,{feature:d,descriptions:a}),r.createElement(i.Z,null),"breakend"===c.type?r.createElement($,{feature:c,locStrings:c.ALT.map((e=>(0,s.I)(e)?.MatePosition||"")),model:t}):null,"translocation"===c.type?r.createElement($,{feature:c,model:t,locStrings:[`${c.INFO.CHR2[0]}:${c.INFO.END}`]}):null,r.createElement(w,x({feature:c},e,{descriptions:a})))}))},6816:(e,t,n)=>{n.d(t,{d:()=>c});var r=n(66204),a=n(52682),l=n(76734),i=n(26074),o=n(43188);function s(e){return e.substring(2).toLowerCase()}function c(e){const{children:t,disableReactTree:n=!1,mouseEvent:c="onClick",onClickAway:u,touchEvent:d="onTouchEnd"}=e,m=r.useRef(!1),f=r.useRef(null),p=r.useRef(!1),h=r.useRef(!1);r.useEffect((()=>(setTimeout((()=>{p.current=!0}),0),()=>{p.current=!1})),[]);const g=(0,a.Z)(t.ref,f),v=(0,l.Z)((e=>{const t=h.current;h.current=!1;const r=(0,i.Z)(f.current);if(!p.current||!f.current||"clientX"in e&&function(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}(e,r))return;if(m.current)return void(m.current=!1);let a;a=e.composedPath?e.composedPath().indexOf(f.current)>-1:!r.documentElement.contains(e.target)||f.current.contains(e.target),a||!n&&t||u(e)})),E=e=>n=>{h.current=!0;const r=t.props[e];r&&r(n)},b={ref:g};return!1!==d&&(b[d]=E(d)),r.useEffect((()=>{if(!1!==d){const e=s(d),t=(0,i.Z)(f.current),n=()=>{m.current=!0};return t.addEventListener(e,v),t.addEventListener("touchmove",n),()=>{t.removeEventListener(e,v),t.removeEventListener("touchmove",n)}}}),[v,d]),!1!==c&&(b[c]=E(c)),r.useEffect((()=>{if(!1!==c){const e=s(c),t=(0,i.Z)(f.current);return t.addEventListener(e,v),()=>{t.removeEventListener(e,v)}}}),[v,c]),(0,o.jsx)(r.Fragment,{children:r.cloneElement(t,b)})}},96987:(e,t,n)=>{n.d(t,{Z:()=>p});var r=n(55559),a=n(30984),l=n(66204),i=n(56317),o=n(58029),s=n(57369),c=n(61125),u=n(41666),d=n(43188);const m=["className","component","disableGutters","variant"],f=(0,c.ZP)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableGutters&&t.gutters,t[n.variant]]}})((({theme:e,ownerState:t})=>(0,a.Z)({position:"relative",display:"flex",alignItems:"center"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}},"dense"===t.variant&&{minHeight:48})),(({theme:e,ownerState:t})=>"regular"===t.variant&&e.mixins.toolbar)),p=l.forwardRef((function(e,t){const n=(0,s.Z)({props:e,name:"MuiToolbar"}),{className:l,component:c="div",disableGutters:p=!1,variant:h="regular"}=n,g=(0,r.Z)(n,m),v=(0,a.Z)({},n,{component:c,disableGutters:p,variant:h}),E=(e=>{const{classes:t,disableGutters:n,variant:r}=e,a={root:["root",!n&&"gutters",r]};return(0,o.Z)(a,u.N,t)})(v);return(0,d.jsx)(f,(0,a.Z)({as:c,className:(0,i.Z)(E.root,l),ref:t,ownerState:v},g))}))},41666:(e,t,n)=>{n.d(t,{N:()=>l,Z:()=>i});var r=n(58109),a=n(95201);function l(e){return(0,a.Z)("MuiToolbar",e)}const i=(0,r.Z)("MuiToolbar",["root","gutters","regular","dense"])}}]);
//# sourceMappingURL=94.7f9fddc8.chunk.js.map