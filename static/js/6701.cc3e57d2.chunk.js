"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[6701],{86701:(e,t,a)=>{a.r(t),a.d(t,{default:()=>be});var n=a(66204),r=a(43800),l=a(31617),o=a(90228),s=a(80013),c=a(2749),i=a(53447),m=a(38684),d=a(80846),u=a(88196),p=a(61053),v=a(2266),g=a(90872),E=a(35421),h=a(84535),b=a(46338),Z=a(81650),y=a(78781),f=a(86636),C=a(49140),x=a(65484),N=a(60962),k=a(86600),T=a(74780),w=a(81799),S=a(7146),M=a(35861),j=a(15971);const P=(0,d.observer)((function({slot:e}){const[t,a]=(0,n.useState)(""),[r,l]=(0,n.useState)(!1);return n.createElement(n.Fragment,null,e.name?n.createElement(N.Z,null,e.name):null,n.createElement(k.Z,{disablePadding:!0},e.value.map(((t,a)=>n.createElement(T.ZP,{key:a,disableGutters:!0},n.createElement(b.Z,{value:t,onChange:t=>e.setAtIndex(a,t.target.value),InputProps:{endAdornment:n.createElement(w.Z,{position:"end"},n.createElement(C.Z,{onClick:()=>e.removeAtIndex(a)},n.createElement(j.Z,null)))}})))),r?n.createElement(T.ZP,{disableGutters:!0},n.createElement(b.Z,{value:t,placeholder:"add new",onChange:e=>a(e.target.value),InputProps:{endAdornment:n.createElement(w.Z,{position:"end"},n.createElement(n.Fragment,null,n.createElement(S.Z,{color:"primary",variant:"contained",style:{margin:2},"data-testid":`stringArrayAdd-${e.name}`,onClick:()=>{l(!1),e.add(t),a("")}},"OK"),n.createElement(S.Z,{color:"primary",variant:"contained",style:{margin:2},onClick:()=>{l(!1),a("")}},"Cancel")))}})):null,n.createElement(S.Z,{color:"primary",variant:"contained",style:{margin:4},disabled:r,onClick:()=>l(!0)},"Add item")),n.createElement(M.Z,null,e.description))}));var A=a(23540),L=a(88826),I=a(98621);const O='Consolas, "Andale Mono WT", "Andale Mono", "Lucida Console", "Lucida Sans Typewriter", "DejaVu Sans Mono", "Bitstream Vera Sans Mono", "Liberation Mono", "Nimbus Mono L", Monaco, "Courier New", Courier, monospace',F=(0,m.ZL)()((e=>({callbackEditor:{marginTop:"16px",borderBottom:`1px solid ${e.palette.divider}`,width:"100%",fontFamily:O},textAreaFont:{fontFamily:O},callbackContainer:{width:"100%",overflowX:"auto"},error:{color:"red",fontSize:"0.8em"}}))),H=(0,d.observer)((function({slot:e}){const{classes:t}=F(),[a,r]=(0,n.useState)(e.value),[l,o]=(0,n.useState)(),s=(0,g.useDebounce)(a,400);return(0,n.useEffect)((()=>{try{const t=s.startsWith("jexl:")?s:`jexl:${s}`;if("jexl:"===t)throw new Error("Empty jexl expression is not valid");(0,L.P)(t,(0,u.getEnv)(e).pluginManager?.jexl),e.set(t),o(void 0)}catch(e){console.error({e}),o(e)}}),[s,e]),n.createElement(n.Fragment,null,l?n.createElement("p",{className:t.error},`${l}`):null,n.createElement("div",{className:t.callbackContainer},n.createElement(b.Z,{multiline:!0,className:t.callbackEditor,value:a.startsWith("jexl:")?a.split("jexl:")[1]:a,onChange:e=>r(e.target.value),style:{background:l?"#fdd":void 0},InputProps:{classes:{input:t.textAreaFont}}}),n.createElement("p",null,e.description),n.createElement(A.Z,{title:n.createElement("div",null,"Callbacks are written in Jexl format. Click to learn more.",n.createElement("br",null)," Names of available context items: ",e.contextVariable),arrow:!0},n.createElement(C.Z,{color:"primary",onClick:()=>{const e=window.open("https://github.com/TomFrost/Jexl","_blank","noopener,noreferrer");e&&(e.opener=null)}},n.createElement(I.Z,null)))))}));function $(){return $=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},$.apply(this,arguments)}const R=(0,n.lazy)((()=>a.e(2291).then(a.bind(a,52291)))),D=e=>{const{value:t="#000",label:a="",TextFieldProps:r={},onChange:l}=e,[o,s]=(0,n.useState)(!1);return n.createElement("div",{style:{display:"flex"}},n.createElement(b.Z,$({value:t,label:a,onClick:()=>s(!o),onChange:e=>l(e.target.value)},r)),n.createElement("div",{style:{marginTop:10}},n.createElement(n.Suspense,{fallback:n.createElement("div",null)},n.createElement(R,{color:t,onChange:e=>l(e)}))))},W=(0,d.observer)((function(e){const{slot:t}=e;return n.createElement(D,{label:t.name,value:t.value,onChange:e=>t.set(e),TextFieldProps:{helperText:t.description,fullWidth:!0}})}));var V=a(24137),_=a(2331),z=a(42809),B=a(75174),J=a(97916);const K=(0,m.ZL)()((e=>({card:{marginTop:e.spacing(1)}}))),U=(0,d.observer)((function({slot:e}){const{classes:t}=K(),[a,r]=(0,n.useState)("");return n.createElement(n.Fragment,null,n.createElement(N.Z,null,e.name),[...e.value].map((([a,r])=>n.createElement(_.Z,{raised:!0,key:a,className:t.card},n.createElement(z.Z,{title:a,action:n.createElement(C.Z,{onClick:()=>e.remove(a)},n.createElement(j.Z,null))}),n.createElement(B.Z,null,n.createElement(P,{slot:{name:e.name,value:r,description:`Values associated with entry ${a}`,setAtIndex:(t,n)=>e.setAtKeyIndex(a,t,n),removeAtIndex:t=>e.removeAtKeyIndex(a,t),add:t=>e.addToKey(a,t)}}))))),n.createElement(_.Z,{raised:!0,className:t.card},n.createElement(z.Z,{disableTypography:!0,title:n.createElement(b.Z,{fullWidth:!0,value:a,placeholder:"add new",onChange:e=>r(e.target.value),InputProps:{endAdornment:n.createElement(w.Z,{position:"end"},n.createElement(C.Z,{disabled:""===a,onClick:()=>{e.add(a,[]),r("")}},n.createElement(J.Z,null)))}})})),n.createElement(M.Z,null,e.description))}));function G(){return G=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},G.apply(this,arguments)}function X(e){const{helperText:t}=e;return n.createElement(b.Z,G({},e,{helperText:n.createElement(E.SanitizedHTML,{html:t||""}),FormHelperTextProps:{component:"div"},fullWidth:!0}))}const q=(0,d.observer)((function({slot:e}){const[t,a]=(0,n.useState)(e.value);return(0,n.useEffect)((()=>{const a=Number.parseFloat(t);Number.isNaN(a)?e.reset?.():e.set(a)}),[e,t]),n.createElement(X,{label:e.name,helperText:e.description,value:t,type:"number",onChange:e=>a(e.target.value)})})),Q=(0,m.ZL)()((e=>({card:{marginTop:e.spacing(1)}}))),Y=(0,d.observer)((function({slot:e}){const{classes:t}=Q(),[a,r]=(0,n.useState)("");return n.createElement(n.Fragment,null,n.createElement(N.Z,null,e.name),[...e.value].map((([a,r])=>n.createElement(_.Z,{raised:!0,key:a,className:t.card},n.createElement(z.Z,{title:a,action:n.createElement(C.Z,{onClick:()=>e.remove(a)},n.createElement(j.Z,null))}),n.createElement(B.Z,null,n.createElement(q,{slot:{value:r,set:t=>e.add(a,t)}}))))),n.createElement(_.Z,{raised:!0,className:t.card},n.createElement(z.Z,{disableTypography:!0,title:n.createElement(b.Z,{fullWidth:!0,value:a,placeholder:"add new",onChange:e=>r(e.target.value),InputProps:{endAdornment:n.createElement(w.Z,{position:"end"},n.createElement(C.Z,{disabled:""===a,onClick:()=>{e.add(a,0),r("")}},n.createElement(J.Z,null)))}})})),n.createElement(M.Z,null,e.description))}));var ee=a(94926),te=a(39780),ae=a(70539);const ne=(0,d.observer)((function({slot:e}){return n.createElement(ee.Z,null,n.createElement(te.Z,{label:e.name,control:n.createElement(ae.Z,{checked:e.value,onChange:t=>e.set(t.target.checked)})}),n.createElement(M.Z,null,e.description))})),re=(0,m.ZL)()((e=>({paper:{display:"flex",marginBottom:e.spacing(2),position:"relative"},paperContent:{width:"100%"},slotModeSwitch:{width:24,background:e.palette.secondary.light,display:"flex",justifyContent:"center",alignItems:"center"}}))),le=(0,d.observer)((function({slot:e}){return n.createElement(X,{label:e.name,helperText:e.description,value:e.value,onChange:t=>e.set(t.target.value)})})),oe=(0,d.observer)((function({slot:e}){return n.createElement(b.Z,{label:e.name,helperText:e.description,multiline:!0,value:e.value,onChange:t=>e.set(t.target.value)})})),se=()=>n.createElement(Z.Z,null,n.createElement("path",{d:"M20.41,3C21.8,5.71 22.35,8.84 22,12C21.8,15.16 20.7,18.29 18.83,21L17.3,20C18.91,17.57 19.85,14.8 20,12C20.34,9.2 19.89,6.43 18.7,4L20.41,3M5.17,3L6.7,4C5.09,6.43 4.15,9.2 4,12C3.66,14.8 4.12,17.57 5.3,20L3.61,21C2.21,18.29 1.65,15.17 2,12C2.2,8.84 3.3,5.71 5.17,3M12.08,10.68L14.4,7.45H16.93L13.15,12.45L15.35,17.37H13.09L11.71,14L9.28,17.33H6.76L10.66,12.21L8.53,7.45H10.8L12.08,10.68Z"})),ce=(0,d.observer)((function({slot:e}){const[t,a]=(0,n.useState)(e.value);return(0,n.useEffect)((()=>{const a=Number.parseInt(t,10);Number.isNaN(a)||e.set(a)}),[e,t]),n.createElement(X,{label:e.name,helperText:e.description,value:t,type:"number",onChange:e=>a(e.target.value)})})),ie=(0,d.observer)((function({slot:e,slotSchema:t}){const a=(0,u.getPropertyMembers)((0,h.getSubType)(t)),r=(0,h.getUnionSubTypes)((0,h.getUnionSubTypes)((0,h.getSubType)(a.properties.value))[1]).map((e=>e.value));return n.createElement(X,{value:e.value,label:e.name,select:!0,helperText:e.description,onChange:t=>e.set(t.target.value)},r.map((e=>n.createElement(y.Z,{key:e,value:e},e))))})),me=(0,d.observer)((function({slot:e}){return n.createElement(E.FileSelector,{location:e.value,setLocation:t=>e.set(t),name:e.name,description:e.description,rootModel:(0,g.getEnv)(e).pluginManager?.rootModel})})),de={string:le,text:oe,fileLocation:me,stringArray:P,stringArrayMap:U,numberMap:Y,number:q,integer:ce,color:W,stringEnum:ie,boolean:ne,frozen:V.Z,configRelationships:V.Z},ue=(0,d.observer)((function({slot:e,slotSchema:t}){const{classes:a}=re(),{type:r}=e;let l=e.isCallback?H:de[r];return l||(console.warn(`no slot editor defined for ${r}, editing as string`),l=le),r in de||console.warn(`SlotEditor needs to implement ${r}`),n.createElement(f.Z,{className:a.paper},n.createElement("div",{className:a.paperContent},n.createElement(l,{slot:e,slotSchema:t})),n.createElement("div",{className:a.slotModeSwitch},e.contextVariable.length?n.createElement(C.Z,{onClick:()=>e.isCallback?e.convertToValue():e.convertToCallback(),title:"convert to "+(e.isCallback?"regular value":"callback")},e.isCallback?n.createElement(se,null):n.createElement(x.Z,null)):null))})),pe=(0,d.observer)((function({typeNameChoices:e,slot:t,slotName:a,onChange:r}){const{classes:l}=re();return n.createElement(f.Z,{className:l.paper},n.createElement("div",{className:l.paperContent},n.createElement(b.Z,{value:t.type,label:"Type",select:!0,helperText:`Type of ${a} to use`,fullWidth:!0,onChange:r},e.map((e=>n.createElement(y.Z,{key:e,value:e},e))))))}));function ve(){return ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},ve.apply(this,arguments)}const ge=(0,m.ZL)()((e=>({expandIcon:{color:e.palette.tertiary?.contrastText||"#fff"},root:{padding:e.spacing(1,3,1,1)},expansionPanelDetails:{display:"block",padding:e.spacing(1)},accordion:{border:`1px solid ${e.palette.text.primary}`},noOverflow:{width:"100%",overflowX:"auto"}}))),Ee=(0,d.observer)((function(e){const{classes:t}=ge(),{slotName:a,slotSchema:m,schema:d,slot:u=d[a],path:g=[]}=e;let E;if((0,r.isConfigurationSchemaType)(m)){if(u.length)return u.map(((t,r)=>{const l=`${(0,p.singular)(a)} ${r+1}`;return n.createElement(Ee,ve({},e,{key:l,slot:t,slotName:l}))}));const h=(0,r.getTypeNamesFromExplicitlyTypedUnion)(m);return h.length&&(E=n.createElement(pe,{typeNameChoices:h,slotName:a,slot:u,onChange:e=>{e.target.value!==u.type&&d.setSubschema(a,{type:e.target.value})}})),n.createElement(l.Z,{defaultExpanded:!0,className:t.accordion},n.createElement(o.Z,{expandIcon:n.createElement(v.Z,{className:t.expandIcon})},n.createElement(s.Z,null,[...g,a].join("➔"))),n.createElement(c.Z,{className:t.expansionPanelDetails},E,n.createElement(i.Z,{className:t.noOverflow},n.createElement(he,{schema:u,path:[...g,a]}))))}return(0,r.isConfigurationSlotType)(m)?n.createElement(ue,{key:a,slot:u,slotSchema:m}):null})),he=(0,d.observer)((function({schema:e,path:t=[]}){const a=(0,u.getMembers)(e).properties;return n.createElement(n.Fragment,null,Object.entries(a).map((([a,r])=>n.createElement(Ee,{key:a,slotName:a,slotSchema:r,path:t,schema:e}))))})),be=(0,d.observer)((function({model:e}){const{classes:t}=ge(),{target:a}=e,i=a&&(0,r.readConfObject)(a,"trackId"),m=a&&(0,r.readConfObject)(a,"name");return n.createElement(l.Z,{key:i,defaultExpanded:!0,className:t.accordion},n.createElement(o.Z,{expandIcon:n.createElement(v.Z,{className:t.expandIcon})},n.createElement(s.Z,null,m??"Configuration")),n.createElement(c.Z,{className:t.expansionPanelDetails,"data-testid":"configEditor"},a?n.createElement(he,{schema:a}):"no target set"))}))},2749:(e,t,a)=>{a.d(t,{Z:()=>v});var n=a(30984),r=a(55559),l=a(66204),o=a(56317),s=a(58029),c=a(61125),i=a(57369),m=a(72197),d=a(43188);const u=["className"],p=(0,c.ZP)("div",{name:"MuiAccordionDetails",slot:"Root",overridesResolver:(e,t)=>t.root})((({theme:e})=>({padding:e.spacing(1,2,2)}))),v=l.forwardRef((function(e,t){const a=(0,i.Z)({props:e,name:"MuiAccordionDetails"}),{className:l}=a,c=(0,r.Z)(a,u),v=a,g=(e=>{const{classes:t}=e;return(0,s.Z)({root:["root"]},m.s,t)})(v);return(0,d.jsx)(p,(0,n.Z)({className:(0,o.Z)(g.root,l),ref:t,ownerState:v},c))}))},72197:(e,t,a)=>{a.d(t,{Z:()=>o,s:()=>l});var n=a(58109),r=a(95201);function l(e){return(0,r.Z)("MuiAccordionDetails",e)}const o=(0,n.Z)("MuiAccordionDetails",["root"])},42809:(e,t,a)=>{a.d(t,{Z:()=>b});var n=a(55559),r=a(30984),l=a(66204),o=a(56317),s=a(58029),c=a(80013),i=a(57369),m=a(61125),d=a(4268),u=a(43188);const p=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],v=(0,m.ZP)("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(e,t)=>(0,r.Z)({[`& .${d.Z.title}`]:t.title,[`& .${d.Z.subheader}`]:t.subheader},t.root)})({display:"flex",alignItems:"center",padding:16}),g=(0,m.ZP)("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(e,t)=>t.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),E=(0,m.ZP)("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(e,t)=>t.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),h=(0,m.ZP)("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(e,t)=>t.content})({flex:"1 1 auto"}),b=l.forwardRef((function(e,t){const a=(0,i.Z)({props:e,name:"MuiCardHeader"}),{action:l,avatar:m,className:b,component:Z="div",disableTypography:y=!1,subheader:f,subheaderTypographyProps:C,title:x,titleTypographyProps:N}=a,k=(0,n.Z)(a,p),T=(0,r.Z)({},a,{component:Z,disableTypography:y}),w=(e=>{const{classes:t}=e;return(0,s.Z)({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},d.J,t)})(T);let S=x;null==S||S.type===c.Z||y||(S=(0,u.jsx)(c.Z,(0,r.Z)({variant:m?"body2":"h5",className:w.title,component:"span",display:"block"},N,{children:S})));let M=f;return null==M||M.type===c.Z||y||(M=(0,u.jsx)(c.Z,(0,r.Z)({variant:m?"body2":"body1",className:w.subheader,color:"text.secondary",component:"span",display:"block"},C,{children:M}))),(0,u.jsxs)(v,(0,r.Z)({className:(0,o.Z)(w.root,b),as:Z,ref:t,ownerState:T},k,{children:[m&&(0,u.jsx)(g,{className:w.avatar,ownerState:T,children:m}),(0,u.jsxs)(h,{className:w.content,ownerState:T,children:[S,M]}),l&&(0,u.jsx)(E,{className:w.action,ownerState:T,children:l})]}))}))},4268:(e,t,a)=>{a.d(t,{J:()=>l,Z:()=>o});var n=a(58109),r=a(95201);function l(e){return(0,r.Z)("MuiCardHeader",e)}const o=(0,n.Z)("MuiCardHeader",["root","avatar","action","content","title","subheader"])}}]);
//# sourceMappingURL=6701.cc3e57d2.chunk.js.map