"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[9810,2291],{52291:function(e,n,t){t.r(n),t.d(n,{ColorPicker:function(){return U},ColorPopover:function(){return G},PopoverPicker:function(){return q},default:function(){return X}});var r=t(96234),o=t(41867),a=t(622),l=t(64980),c=t(36669),i=t(59231),u=t(49133),s=t(47192),f=t(39092),d=t(90872);function h(){return(h=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}function v(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n.indexOf(t=a[r])>=0||(o[t]=e[t]);return o}function g(e){var n=(0,o.useRef)(e),t=(0,o.useRef)((function(e){n.current&&n.current(e)}));return n.current=e,t.current}var m=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e>t?t:e<n?n:e},p=function(e){return"touches"in e},x=function(e){return e&&e.ownerDocument.defaultView||self},b=function(e,n,t){var r=e.getBoundingClientRect(),o=p(n)?function(e,n){for(var t=0;t<e.length;t++)if(e[t].identifier===n)return e[t];return e[0]}(n.touches,t):n;return{left:m((o.pageX-(r.left+x(e).pageXOffset))/r.width),top:m((o.pageY-(r.top+x(e).pageYOffset))/r.height)}},C=function(e){!p(e)&&e.preventDefault()},j=o.memo((function(e){var n=e.onMove,t=e.onKey,a=v(e,["onMove","onKey"]),l=(0,o.useRef)(null),c=g(n),i=g(t),u=(0,o.useRef)(null),s=(0,o.useRef)(!1),f=(0,o.useMemo)((function(){var e=function(e){C(e),(p(e)?e.touches.length>0:e.buttons>0)&&l.current?c(b(l.current,e,u.current)):t(!1)},n=function(){return t(!1)};function t(t){var r=s.current,o=x(l.current),a=t?o.addEventListener:o.removeEventListener;a(r?"touchmove":"mousemove",e),a(r?"touchend":"mouseup",n)}return[function(e){var n=e.nativeEvent,r=l.current;if(r&&(C(n),!function(e,n){return n&&!p(e)}(n,s.current)&&r)){if(p(n)){s.current=!0;var o=n.changedTouches||[];o.length&&(u.current=o[0].identifier)}r.focus(),c(b(r,n,u.current)),t(!0)}},function(e){var n=e.which||e.keyCode;n<37||n>40||(e.preventDefault(),i({left:39===n?.05:37===n?-.05:0,top:40===n?.05:38===n?-.05:0}))},t]}),[i,c]),d=(0,r.Z)(f,3),m=d[0],j=d[1],w=d[2];return(0,o.useEffect)((function(){return w}),[w]),o.createElement("div",h({},a,{onTouchStart:m,onMouseDown:m,className:"react-colorful__interactive",ref:l,onKeyDown:j,tabIndex:0,role:"slider"}))})),w=function(e){return e.filter(Boolean).join(" ")},_=function(e){var n=e.className,t=e.color,r=e.left,a=e.top,l=void 0===a?.5:a,c=w(["react-colorful__pointer",n]);return o.createElement("div",{className:c,style:{top:100*l+"%",left:100*r+"%"}},o.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},Z=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Math.pow(10,n);return Math.round(t*e)/t},k=(Math.PI,function(e){var n=e.h,t=e.s,r=e.v,o=e.a,a=(200-t)*r/100;return{h:Z(n),s:Z(a>0&&a<200?t*r/100/(a<=100?a:200-a)*100:0),l:Z(a/2),a:Z(o,2)}}),y=function(e){var n=k(e),t=n.h,r=n.s,o=n.l;return"hsl(".concat(t,", ").concat(r,"%, ").concat(o,"%)")},M=function(e){var n=k(e),t=n.h,r=n.s,o=n.l,a=n.a;return"hsla(".concat(t,", ").concat(r,"%, ").concat(o,"%, ").concat(a,")")},E=function(e){var n=e.h,t=e.s,r=e.v,o=e.a;n=n/360*6,t/=100,r/=100;var a=Math.floor(n),l=r*(1-t),c=r*(1-(n-a)*t),i=r*(1-(1-n+a)*t),u=a%6;return{r:Z(255*[r,c,l,l,i,r][u]),g:Z(255*[i,r,r,c,l,l][u]),b:Z(255*[l,l,i,r,r,c][u]),a:Z(o,2)}},N=function(e){var n=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(e);return n?S({r:Number(n[1])/(n[2]?100/255:1),g:Number(n[3])/(n[4]?100/255:1),b:Number(n[5])/(n[6]?100/255:1),a:void 0===n[7]?1:Number(n[7])/(n[8]?100:1)}):{h:0,s:0,v:0,a:1}},S=function(e){var n=e.r,t=e.g,r=e.b,o=e.a,a=Math.max(n,t,r),l=a-Math.min(n,t,r),c=l?a===n?(t-r)/l:a===t?2+(r-n)/l:4+(n-t)/l:0;return{h:Z(60*(c<0?c+6:c)),s:Z(a?l/a*100:0),v:Z(a/255*100),a:o}},O=o.memo((function(e){var n=e.className,t=e.hue,r=e.onChange,a=w(["react-colorful__hue",n]);return o.createElement("div",{className:a},o.createElement(j,{onMove:function(e){r({h:360*e.left})},onKey:function(e){r({h:m(t+360*e.left,0,360)})},"aria-label":"Hue","aria-valuetext":Z(t)},o.createElement(_,{className:"react-colorful__hue-pointer",left:t/360,color:y({h:t,s:100,v:100,a:1})})))})),H=o.memo((function(e){var n=e.hsva,t=e.onChange,r={backgroundColor:y({h:n.h,s:100,v:100,a:1})};return o.createElement("div",{className:"react-colorful__saturation",style:r},o.createElement(j,{onMove:function(e){t({s:100*e.left,v:100-100*e.top})},onKey:function(e){t({s:m(n.s+100*e.left,0,100),v:m(n.v-100*e.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation ".concat(Z(n.s),"%, Brightness ").concat(Z(n.v),"%")},o.createElement(_,{className:"react-colorful__saturation-pointer",top:1-n.v/100,left:n.s/100,color:y(n)})))})),L=function(e,n){if(e===n)return!0;for(var t in e)if(e[t]!==n[t])return!1;return!0},R=function(e,n){return e.replace(/\s/g,"")===n.replace(/\s/g,"")};function T(e,n,t){var a=g(t),l=(0,o.useState)((function(){return e.toHsva(n)})),c=(0,r.Z)(l,2),i=c[0],u=c[1],s=(0,o.useRef)({color:n,hsva:i});(0,o.useEffect)((function(){if(!e.equal(n,s.current.color)){var t=e.toHsva(n);s.current={hsva:t,color:n},u(t)}}),[n,e]),(0,o.useEffect)((function(){var n;L(i,s.current.hsva)||e.equal(n=e.fromHsva(i),s.current.color)||(s.current={hsva:i,color:n},a(n))}),[i,e,a]);var f=(0,o.useCallback)((function(e){u((function(n){return Object.assign({},n,e)}))}),[]);return[i,f]}var P,z="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,D=new Map,I=function(e){z((function(){var n=e.current?e.current.ownerDocument:document;if(void 0!==n&&!D.has(n)){var r=n.createElement("style");r.innerHTML='.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url(\'data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>\')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}',D.set(n,r);var o=P||t.nc;o&&r.setAttribute("nonce",o),n.head.appendChild(r)}}),[])},K=function(e){var n=e.className,t=e.hsva,r=e.onChange,a={backgroundImage:"linear-gradient(90deg, ".concat(M(Object.assign({},t,{a:0})),", ").concat(M(Object.assign({},t,{a:1})),")")},l=w(["react-colorful__alpha",n]);return o.createElement("div",{className:l},o.createElement("div",{className:"react-colorful__alpha-gradient",style:a}),o.createElement(j,{onMove:function(e){r({a:e.left})},onKey:function(e){r({a:m(t.a+e.left)})},"aria-label":"Alpha","aria-valuetext":"".concat(Z(100*t.a),"%")},o.createElement(_,{className:"react-colorful__alpha-pointer",left:t.a,color:M(t)})))},A=function(e){var n=e.className,t=e.colorModel,a=e.color,l=void 0===a?t.defaultColor:a,c=e.onChange,i=v(e,["className","colorModel","color","onChange"]),u=(0,o.useRef)(null);I(u);var s=T(t,l,c),f=(0,r.Z)(s,2),d=f[0],g=f[1],m=w(["react-colorful",n]);return o.createElement("div",h({},i,{ref:u,className:m}),o.createElement(H,{hsva:d,onChange:g}),o.createElement(O,{hue:d.h,onChange:g}),o.createElement(K,{hsva:d,onChange:g,className:"react-colorful__last-control"}))},B={defaultColor:"rgba(0, 0, 0, 1)",toHsva:N,fromHsva:function(e){var n=E(e),t=n.r,r=n.g,o=n.b,a=n.a;return"rgba(".concat(t,", ").concat(r,", ").concat(o,", ").concat(a,")")},equal:R},W=function(e){return o.createElement(A,h({},e,{colorModel:B}))},V=t(80838),Y=(0,s.ZL)()({picker:{position:"relative"},swatches:{display:"flex",padding:12,flexWrap:"wrap"},swatch:{width:24,height:24,margin:4,border:"none",padding:0,cursor:"pointer",outline:"none"}}),q=function(e){var n=e.color,t=e.onChange,a=(0,o.useState)(null),l=(0,r.Z)(a,2),c=l[0],i=l[1],u=Y().classes;return(0,V.jsxs)("div",{className:u.picker,children:[(0,V.jsx)("div",{className:u.swatch,style:{backgroundColor:n},onClick:function(e){return i(e.currentTarget)}}),(0,V.jsx)(G,{anchorEl:c,onClose:function(){return i(null)},color:n,onChange:t})]})};function G(e){var n=e.anchorEl,t=e.onChange,r=e.onClose,o=e.color;return(0,V.jsx)(l.ZP,{open:!!n,anchorEl:n,onClose:r,children:(0,V.jsx)(U,{color:o,onChange:t})})}function U(e){var n=e.onChange,t=e.color,l=Y().classes,s=(0,d.useLocalStorage)("colorPickerPalette","set1"),h=(0,r.Z)(s,2),v=h[0],g=h[1],m=f[v],p=Object.keys(f),x=(0,o.useState)(t),b=(0,r.Z)(x,2),C=b[0],j=b[1],w=(0,a.V)(t).toRgbString(),_=(0,d.useDebounce)(w,1e3),Z=function(e){j(e);try{n((0,a.V)(e).toRgbString())}catch(t){}};return(0,V.jsxs)("div",{style:{display:"flex",padding:10},children:[(0,V.jsx)("div",{style:{width:200,margin:5},children:(0,V.jsx)(W,{color:_,onChange:Z})}),(0,V.jsxs)("div",{style:{width:200,margin:5},children:[(0,V.jsx)(c.Z,{value:v,onChange:function(e){var n=e.target.value;g(n)},children:p.map((function(e){return(0,V.jsx)(i.Z,{value:e,children:e},e)}))}),(0,V.jsx)("div",{className:l.swatches,children:m.map((function(e,n){return(0,V.jsx)("button",{className:l.swatch,style:{background:e},onClick:function(){return Z(e)}},"".concat(e,"-").concat(n))}))}),(0,V.jsx)(u.Z,{helperText:"Manually set color (hex, rgb, or css color name)",value:C,onChange:function(e){return Z(e.target.value)}})]})]})}var X=q},39810:function(e,n,t){t.r(n),t.d(n,{default:function(){return A}});var r=t(68079),o=t(96234),a=t(41867),l=t(47409),c=t(23801),i=t(27768),u=t(47192),s=t(90872),f=t(25217),d=t.n(f),h=t(33028),v=t(7229),g=t(27341),m=t(51825),p=t(87984),x=t(68367),b=t(72176),C=t(3762),j=t(21941),w=t.n(j),_=t(22177),Z=t(80838),k=(0,u.ZL)()((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}));function y(e){return(0,Z.jsx)(w(),{handle:"#draggable-dialog-title",cancel:'[class*="MuiDialogContent-root"]',children:(0,Z.jsx)(v.Z,(0,h.Z)({},e))})}var M=(0,C.observer)((function(e){var n=k().classes,t=e.title,r=e.children,o=e.onClose;return(0,Z.jsx)(g.Z,(0,h.Z)((0,h.Z)({},e),{},{PaperComponent:y,"aria-labelledby":"draggable-dialog-title",children:(0,Z.jsxs)(m.Z,{children:[(0,Z.jsxs)(p.Z,{style:{cursor:"move"},id:"draggable-dialog-title",children:[t,o?(0,Z.jsx)(x.Z,{className:n.closeButton,onClick:function(){o()},children:(0,Z.jsx)(_.Z,{})}):null]}),(0,Z.jsx)(b.Z,{}),r]})}))})),E=t(59740),N=t(58753),S=t(52291),O=t(14846),H=t(99641),L=t(70532),R=t(2829),T=t(81184),P=t(35421),z=["name","color","baseUri"],D=(0,u.ZL)()({cell:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}});var I=function(e){var n=e.rows,t=e.onChange,l=e.showTips,i=D().classes,u=(0,a.useState)(null),f=(0,o.Z)(u,2),d=f[0],h=f[1],v=(0,a.useState)([]),g=(0,o.Z)(v,2),m=g[0],p=g[1],x=n[0],b=(x.name,x.color,x.baseUri,(0,E.Z)(x,z)),C=(0,a.useState)("blue"),j=(0,o.Z)(C,2),w=j[0],_=j[1],k=(0,a.useState)({idx:0,field:null}),y=(0,o.Z)(k,2),M=y[0],I=y[1];return(0,Z.jsxs)("div",{children:[(0,Z.jsx)(c.Z,{disabled:!m.length,onClick:function(e){return h(e.currentTarget)},children:"Change color of selected items"}),(0,Z.jsxs)(c.Z,{onClick:function(){return t((0,O.A1)((0,r.Z)(n),m))},disabled:!m.length,children:[(0,Z.jsx)(T.Z,{}),l?"Move selected items up":null]}),(0,Z.jsxs)(c.Z,{onClick:function(){return t((0,O.vi)((0,r.Z)(n),m))},disabled:!m.length,children:[(0,Z.jsx)(R.Z,{}),l?"Move selected items down":null]}),(0,Z.jsxs)(c.Z,{onClick:function(){return t((0,O.A1)((0,r.Z)(n),m,n.length))},disabled:!m.length,children:[(0,Z.jsx)(H.Z,{}),l?"Move selected items to top":null]}),(0,Z.jsxs)(c.Z,{onClick:function(){return t((0,O.vi)((0,r.Z)(n),m,n.length))},disabled:!m.length,children:[(0,Z.jsx)(L.Z,{}),l?"Move selected items to bottom":null]}),(0,Z.jsx)(S.ColorPopover,{anchorEl:d,color:w,onChange:function(e){_(e),m.forEach((function(t){var r=n.find((function(e){return e.name===t}));r&&(r.color=e)})),t((0,r.Z)(n))},onClose:function(){return h(null)}}),(0,Z.jsx)("div",{style:{height:400,width:"100%"},children:(0,Z.jsx)(N._$,{getRowId:function(e){return e.name},checkboxSelection:!0,disableRowSelectionOnClick:!0,onRowSelectionModelChange:function(e){return p(e)},rows:n,rowHeight:25,columnHeaderHeight:33,columns:[{field:"color",headerName:"Color",renderCell:function(e){var o=e.value,a=e.id;return(0,Z.jsx)(S.default,{color:o||"blue",onChange:function(e){var o=n.find((function(e){return e.name===a}));o&&(o.color=e),t((0,r.Z)(n))}})}},{field:"name",sortingOrder:[null],headerName:"Name",width:(0,s.measureGridWidth)(n.map((function(e){return e.name})))}].concat((0,r.Z)(Object.keys(b).map((function(e){return{field:e,sortingOrder:[null],renderCell:function(e){var n=e.value;return(0,Z.jsx)("div",{className:i.cell,children:(0,Z.jsx)(P.SanitizedHTML,{html:(0,s.getStr)(n)})})},width:(0,s.measureGridWidth)(n.map((function(n){return n[e]})))}})))),sortModel:[],onSortModelChange:function(e){var o=e[0],a=(M.idx+1)%2,l=(null===o||void 0===o?void 0:o.field)||M.field;I({idx:a,field:l}),t(l?(0,r.Z)(n).sort((function(e,n){var t=(0,s.getStr)(e[l]),r=(0,s.getStr)(n[l]);return 1===a?t.localeCompare(r):r.localeCompare(t)})):n)}})})]})},K=(0,u.ZL)()({content:{minWidth:800}});function A(e){var n=e.model,t=e.handleClose,u=K().classes,f=n.sources,h=(0,a.useState)(d()(f||[])),v=(0,o.Z)(h,2),g=v[0],m=v[1],p=(0,s.useLocalStorage)("multiwiggle-showTips",!0),x=(0,o.Z)(p,2),b=x[0],C=x[1];return(0,Z.jsxs)(M,{open:!0,onClose:t,maxWidth:"xl",title:"Multi-wiggle color/arrangement editor",children:[(0,Z.jsxs)(l.Z,{className:u.content,children:[(0,Z.jsx)(c.Z,{variant:"contained",style:{float:"right"},onClick:function(){return C(!b)},children:b?"Hide tips":"Show tips"}),(0,Z.jsx)("br",{}),b?(0,Z.jsxs)(Z.Fragment,{children:["Helpful tips",(0,Z.jsxs)("ul",{children:[(0,Z.jsx)("li",{children:"You can select rows in the table with the checkboxes"}),(0,Z.jsx)("li",{children:"Multi-select is enabled with shift-click and control-click"}),(0,Z.jsx)("li",{children:'The "Move selected items up/down" can re-arrange subtracks'}),(0,Z.jsx)("li",{children:"Sorting the data grid itself can also re-arrange subtracks"}),(0,Z.jsx)("li",{children:"Changes are applied when you hit Submit"}),(0,Z.jsx)("li",{children:"You can click and drag the dialog box to move it on the screen"}),(0,Z.jsx)("li",{children:"Columns in the table can be hidden using a vertical '...' menu on the right side of each column"})]})]}):null,(0,Z.jsx)(I,{rows:g,onChange:m,showTips:b})]}),(0,Z.jsxs)(i.Z,{children:[(0,Z.jsx)(c.Z,{variant:"contained",type:"submit",color:"inherit",onClick:function(){n.clearLayout(),m(n.sources||[])},children:"Clear custom settings"}),(0,Z.jsx)(c.Z,{variant:"contained",color:"secondary",onClick:function(){t(),m((0,r.Z)(n.sources||[]))},children:"Cancel"}),(0,Z.jsx)(c.Z,{variant:"contained",color:"primary",type:"submit",onClick:function(){n.setLayout(g),t()},children:"Submit"})]})]})}},14846:function(e,n,t){t.d(n,{A1:function(){return l},os:function(){return u},vi:function(){return c}});var r=t(41361),o=t(90872),a=t(43800);function l(e,n){var t,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=n.map((function(n){return e.findIndex((function(e){return e.name===n}))})).sort((function(e,n){return e-n})),l=0,c=(0,r.Z)(a);try{for(c.s();!(t=c.n()).done;){var i=t.value,u=Math.max(l,i-o);u>=l&&e.splice(u,0,e.splice(i,1)[0]),l+=1}}catch(s){c.e(s)}finally{c.f()}return e}function c(e,n){var t,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=n.map((function(n){return e.findIndex((function(e){return e.name===n}))})).sort((function(e,n){return n-e})),l=e.length-1,c=(0,r.Z)(a);try{for(c.s();!(t=c.n()).done;){var i=t.value,u=Math.min(l,i+o);u<=l&&e.splice(u,0,e.splice(i,1)[0]),l-=1}}catch(s){c.e(s)}finally{c.f()}return e}var i=12.8;function u(e){var n=e.prefersOffset,t=(0,o.getContainingView)(e).trackLabels,r=(0,o.getContainingTrack)(e),l=(0,a.getConf)(r,"name");return"overlapping"!==t||n?10:(0,o.measureText)(l,i)+100}}}]);
//# sourceMappingURL=9810.af745adf.chunk.js.map