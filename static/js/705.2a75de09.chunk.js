"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[705],{10705:function(t,n,e){e.r(n),e.d(n,{GenomesFile:function(){return v},HubFile:function(){return m},RaFile:function(){return d},RaStanza:function(){return l},TrackDbFile:function(){return f}});var i=e(9249),r=e(87371),a=e(93069),o=e(95058),s=e(45754),c=e(13820),h=e(30364),u=e(96234),l=function(t){(0,s.Z)(e,t);var n=(0,c.Z)(e);function e(t){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{checkIndent:!0};(0,i.Z)(this,e),r=n.call(this);var o,s=a.checkIndent;return r._checkIndent=s,o="string"===typeof t?t.trimEnd().split(/\r?\n/):t||[],r._keyAndCommentOrder=[],o.forEach((function(t){r.add(t)})),r}return(0,r.Z)(e,[{key:"add",value:function(t){if(""===t)throw new Error("Invalid stanza, contained blank lines");if(t.trim().startsWith("#"))return this._keyAndCommentOrder.push(t.trim()),this;if(t.trimEnd().endsWith("\\")){var n=t.trimEnd().slice(0,-1);return this._continuedLine?this._continuedLine+=n.trimStart():this._continuedLine=n,this}var i=t;if(this._continuedLine&&(i=this._continuedLine+i.trimStart(),this._continuedLine=void 0),this.indent||this._checkIndent){var r=i.match(/^([ \t]+)/);if(void 0===this.indent)if(r){var s=(0,u.Z)(r,2);this.indent=s[1]}else this.indent="";else if(""===this.indent&&null!==r||this.indent&&r&&this.indent!==r[1])throw new Error("Inconsistent indentation of stanza")}else this.indent="";var c=i.trim(),h=c.indexOf(" ");if(-1===h){if(!this.nameKey)throw new Error("First line in a stanza must have both a key and a value");return this.has(c)?this:(this._keyAndCommentOrder.push(c),(0,a.Z)((0,o.Z)(e.prototype),"set",this).call(this,c,""))}var l=c.slice(0,h),d=c.slice(h+1);if(this.has(l)&&d!==this.get(l))throw new Error("Got duplicate key with a different value in stanza: "+'"'.concat(l,'" key has both ').concat(this.get(l)," and ").concat(d));return this._keyAndCommentOrder.push(l),this.nameKey||(this.nameKey=l,this.name=c.slice(h+1)),(0,a.Z)((0,o.Z)(e.prototype),"set",this).call(this,l,d)}},{key:"set",value:function(t,n){if("string"!==typeof n)throw new Error("Value of ".concat(t," must be a string, got ").concat(typeof n));return(0,a.Z)((0,o.Z)(e.prototype),"set",this).call(this,t,n)}},{key:"delete",value:function(t){if(t===this.nameKey)throw new Error("Cannot delete the first line in a stanza (you can still overwrite it with set()).");return this._keyAndCommentOrder.includes(t)&&(this._keyAndCommentOrder=this._keyAndCommentOrder.filter((function(n){return n!==t}))),(0,a.Z)((0,o.Z)(e.prototype),"delete",this).call(this,t)}},{key:"clear",value:function(){this._keyAndCommentOrder.length=0,this._continuedLine=void 0,this.indent=void 0,this.name=void 0,this.nameKey=void 0,(0,a.Z)((0,o.Z)(e.prototype),"clear",this).call(this)}},{key:"toString",value:function(){var t=this;if(0===this.size)return"";var n=[];return this._keyAndCommentOrder.forEach((function(e){e.startsWith("#")?n.push("".concat(t.indent).concat(e)):n.push("".concat(t.indent).concat(e," ").concat(t.get(e)).trimEnd())})),"".concat(n.join("\n"),"\n")}}]),e}((0,h.Z)(Map)),d=function(t){(0,s.Z)(e,t);var n=(0,c.Z)(e);function e(t){var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{checkIndent:!0};(0,i.Z)(this,e),r=n.call(this);var o,s=a.checkIndent;return r._checkIndent=s,o="string"===typeof t?t.trimEnd().split(/(?:[\t ]*\r?\n){2,}/):t||[],r._stanzaAndCommentOrder=[],o.forEach((function(t){r.add(t)})),r}return(0,r.Z)(e,[{key:"add",value:function(t){if(""===t)throw new Error("Invalid stanza, was empty");if(t.trim().startsWith("#")){var n=t.trimEnd().split(/\r?\n/).map((function(t){return t.trim()}));if(n.every((function(t){return t.startsWith("#")})))return this._stanzaAndCommentOrder.push(n.join("\n")),this}var i=new l(t,{checkIndent:this._checkIndent});if(this.nameKey){if(i.nameKey!==this.nameKey)throw new Error("The first line in each stanza must have the same key. "+"Saw both ".concat(this.nameKey," and ").concat(i.nameKey))}else this.nameKey=i.nameKey;if(!i.name)throw new Error("No stanza name: ".concat(i.name));if(this.has(i.name))throw new Error("Got duplicate stanza name: ".concat(i.name));return this._stanzaAndCommentOrder.push(i.name),(0,a.Z)((0,o.Z)(e.prototype),"set",this).call(this,i.name,i)}},{key:"update",value:function(t,n){if(!(n instanceof l))throw new Error("Value of ".concat(t," is not an RaStanza"));(0,a.Z)((0,o.Z)(e.prototype),"set",this).call(this,t,n)}},{key:"delete",value:function(t){return this._stanzaAndCommentOrder.includes(t)&&(this._stanzaAndCommentOrder=this._stanzaAndCommentOrder.filter((function(n){return n!==t}))),(0,a.Z)((0,o.Z)(e.prototype),"delete",this).call(this,t)}},{key:"clear",value:function(){this._stanzaAndCommentOrder.length=0,this.nameKey=void 0,(0,a.Z)((0,o.Z)(e.prototype),"clear",this).call(this)}},{key:"toString",value:function(){var t=this;if(0===this.size)return"";var n=[];return this._stanzaAndCommentOrder.forEach((function(e){if(e.startsWith("#"))n.push("".concat(e,"\n"));else{var i=t.get(e);i&&n.push(i.toString())}})),n.join("\n")}}]),e}((0,h.Z)(Map)),f=function(t){(0,s.Z)(e,t);var n=(0,c.Z)(e);function e(t){var r;if((0,i.Z)(this,e),"track"!==(r=n.call(this,t,{checkIndent:!1})).nameKey)throw new Error('trackDb has "'.concat(r.nameKey,'" instead of "track" as the first line in each track'));return r.forEach((function(t,n){var e,i=Array.from(t.keys()),a=[];if(["track","shortLabel"].forEach((function(t){i.includes(t)||a.push(t)})),a.length>0)throw new Error("Track ".concat(n," is missing required key(s): ").concat(a.join(", ")));var o=["superTrack","compositeTrack","container","view"];if(!i.some((function(t){return o.includes(t)}))){if(!i.includes("bigDataUrl"))throw new Error("Track ".concat(n,' is missing required key "bigDataUrl"'));if(!i.includes("type")){var s=r.settings(n);if(!Array.from(s.keys()).includes("type"))throw new Error("Neither track ".concat(n,' nor any of its parent tracks have the required key "type"'))}}var c="",h=n;do{if(h=null===(e=r.get(h))||void 0===e?void 0:e.get("parent")){var l=h.split(" ");h=(0,u.Z)(l,1)[0],c+="    "}}while(h);var d=r.get(n);d&&(d.indent=c,r.set(n,d))})),r}return(0,r.Z)(e,[{key:"settings",value:function(t){var n,e=this;if(!this.has(t))throw new Error("Track ".concat(t," does not exist"));var i=[t],r=t;do{(r=null===(n=this.get(r))||void 0===n?void 0:n.get("parent"))&&i.push(r)}while(r);var a=new Map;return i.reverse(),i.forEach((function(t){var n;null===(n=e.get(t))||void 0===n||n.forEach((function(t,n){a.set(n,t)}))})),a}}]),e}(d),m=function(t){(0,s.Z)(e,t);var n=(0,c.Z)(e);function e(t){var r;if((0,i.Z)(this,e),"hub"!==(r=n.call(this,t)).nameKey)throw new Error('Hub file must begin with a line like "hub <hub_name>"');var a=["hub","shortLabel","longLabel","genomesFile","email","descriptionUrl"],o=[];if(r.forEach((function(t,n){a.includes(n)||o.push(n)})),o.length>0)throw new Error("Hub file has invalid entr".concat(1===o.length?"y":"ies",": ").concat(o.join(", ")));var s=[];if(a.forEach((function(t){"descriptionUrl"===t||r.get(t)||s.push(t)})),s.length>0)throw new Error("Hub file is missing required entr".concat(1===s.length?"y":"ies",": ").concat(s.join(", ")));return r}return(0,r.Z)(e)}(l),v=function(t){(0,s.Z)(e,t);var n=(0,c.Z)(e);function e(t){var r;if((0,i.Z)(this,e),"genome"!==(r=n.call(this,t)).nameKey)throw new Error('Genomes file must begin with a line like "genome <genome_name>"');var a=["genome","trackDb"];return r.forEach((function(t,n){var e=[];if(a.forEach((function(n){t.get(n)||e.push(n)})),e.length>0)throw new Error("Genomes file entry ".concat(n," is missing required entr").concat(1===e.length?"y":"ies",": ").concat(e.join(", ")))})),r}return(0,r.Z)(e)}(d)}}]);
//# sourceMappingURL=705.2a75de09.chunk.js.map