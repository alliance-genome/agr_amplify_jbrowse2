(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[4061],{52954:function(e){function t(e,t,r,n,a,i,o){try{var u=e[i](o),s=u.value}catch(c){return void r(c)}u.done?t(s):Promise.resolve(s).then(n,a)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(a,i){var o=e.apply(r,n);function u(e){t(o,a,i,u,s,"next",e)}function s(e){t(o,a,i,u,s,"throw",e)}u(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports},70417:function(e,t,r){var n=r(81260);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e},e.exports.__esModule=!0,e.exports.default=e.exports},22220:function(e,t,r){var n=r(78834);e.exports=function(e,t){if(null==e)return{};var r,a,i=n(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)r=o[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i},e.exports.__esModule=!0,e.exports.default=e.exports},78834:function(e){e.exports=function(e,t){if(null==e)return{};var r,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(a[r]=e[r]);return a},e.exports.__esModule=!0,e.exports.default=e.exports},50663:function(e,t,r){"use strict";var n=r(50085).default,a=r(15198).default;Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(t,r,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;n(this,e),this.minv=t,this.maxv=r,this.bin=a,this._fetchedSize=i}return a(e,[{key:"toUniqueString",value:function(){return"".concat(this.minv,"..").concat(this.maxv," (bin ").concat(this.bin,", fetchedSize ").concat(this.fetchedSize(),")")}},{key:"toString",value:function(){return this.toUniqueString()}},{key:"compareTo",value:function(e){return this.minv.compareTo(e.minv)||this.maxv.compareTo(e.maxv)||this.bin-e.bin}},{key:"fetchedSize",value:function(){return void 0!==this._fetchedSize?this._fetchedSize:this.maxv.blockPosition+65536-this.minv.blockPosition}}]),e}();t.default=i},29237:function(e,t,r){"use strict";var n=r(51068).default,a=r(93041).default,i=r(70417).default,o=r(77162),u=r(52954).default,s=r(50085).default,c=r(15198).default,f=r(60270).default,l=r(84564).default,d=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),h=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),p=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&d(t,e,r);return h(t,e),t},v=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var b=v(r(62821)),m=r(42098),x=p(r(27650)),k=v(r(50663)),w=r(1197),y=v(r(96182)),g=21582659,_=38359875;function I(e,t){return Math.floor(e/Math.pow(2,t))}var S=function(e){f(r,e);var t=l(r);function r(e){var n;return s(this,r),(n=t.call(this,e)).maxBinNumber=0,n.depth=0,n.minShift=0,n}return c(r,[{key:"lineCount",value:function(){var e=u(o.mark((function e(t){var r,n,a,i,u=arguments;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.parse(r);case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return",-1);case 6:if(a=n.refNameToId[t],n.indices[a]){e.next=10;break}return e.abrupt("return",-1);case 10:if(!(i=n.indices[a].stats)){e.next=13;break}return e.abrupt("return",i.lineCount);case 13:return e.abrupt("return",-1);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"indexCov",value:function(){var e=u(o.mark((function e(){return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("CSI indexes do not support indexcov");case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"parseAuxData",value:function(e,t,r){if(r<30)return{refIdToName:[],refNameToId:{}};var n=e.readInt32LE(t),a=65536&n?"zero-based-half-open":"1-based-closed",i={0:"generic",1:"SAM",2:"VCF"}[15&n];if(!i)throw new Error("invalid Tabix preset format flags ".concat(n));var o={ref:e.readInt32LE(t+4),start:e.readInt32LE(t+8),end:e.readInt32LE(t+12)},u=e.readInt32LE(t+16),s=u?String.fromCharCode(u):"",c=e.readInt32LE(t+20),f=e.readInt32LE(t+24),l=this._parseNameBytes(e.slice(t+28,t+28+f));return{refIdToName:l.refIdToName,refNameToId:l.refNameToId,skipLines:c,metaChar:s,columnNumbers:o,format:i,coordinateType:a}}},{key:"_parseNameBytes",value:function(e){for(var t=0,r=0,n=[],a={},i=0;i<e.length;i+=1)if(!e[i]){if(r<i){var o=e.toString("utf8",r,i);o=this.renameRefSeq(o),n[t]=o,a[o]=t}r=i+1,t+=1}return{refNameToId:a,refIdToName:n}}},{key:"_parse",value:function(){var e=u(o.mark((function e(){var t,r,n,a,u,s,c,f,l,d,h=this,p=arguments;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.t0=m.unzip,e.next=4,this.filehandle.readFile(t);case 4:return e.t1=e.sent,e.next=7,(0,e.t0)(e.t1);case 7:if((r=e.sent).readUInt32LE(0)!==g){e.next=12;break}n=1,e.next=17;break;case 12:if(r.readUInt32LE(0)!==_){e.next=16;break}n=2,e.next=17;break;case 16:throw new Error("Not a CSI file");case 17:return this.minShift=r.readInt32LE(4),this.depth=r.readInt32LE(8),this.maxBinNumber=((1<<3*(this.depth+1))-1)/7,a=Math.pow(2,this.minShift+3*this.depth),u=r.readInt32LE(12),s={refIdToName:[],refNameToId:{}},u&&(s=this.parseAuxData(r,16,u)),c=r.readInt32LE(16+u),l=16+u+4,d=new Array(c).fill(0).map((function(){var e=r.readInt32LE(l);l+=4;for(var t,n={},a=0;a<e;a+=1){var i=r.readUInt32LE(l);if(i>h.maxBinNumber)t=h.parsePseudoBin(r,l+4),l+=48;else{var o=(0,x.fromBytes)(r,l+4);f=h._findFirstData(f,o);var u=r.readInt32LE(l+12);l+=16;for(var s=new Array(u),c=0;c<u;c+=1){var d=(0,x.fromBytes)(r,l),p=(0,x.fromBytes)(r,l+8);l+=16,s[c]=new k.default(d,p,i)}n[i]=s}}return{binIndex:n,stats:t}})),e.abrupt("return",i(i({},s),{},{csi:!0,refCount:c,maxBlockSize:65536,firstDataLine:f,csiVersion:n,indices:d,depth:this.depth,maxBinNumber:this.maxBinNumber,maxRefLength:a}));case 28:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parsePseudoBin",value:function(e,t){return{lineCount:(0,w.longToNumber)(b.default.fromBytesLE(Array.prototype.slice.call(e,t+28,t+36),!0))}}},{key:"blocksForRange",value:function(){var e=u(o.mark((function e(t,r,i){var u,s,c,f,l,d,h,p,v,b,m,y,g,_,I=arguments;return o.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=I.length>3&&void 0!==I[3]?I[3]:{},r<0&&(r=0),e.next=4,this.parse(u);case 4:if(s=e.sent){e.next=7;break}return e.abrupt("return",[]);case 7:if(c=s.refNameToId[t],f=s.indices[c]){e.next=11;break}return e.abrupt("return",[]);case 11:l=this.reg2bins(r,i),d=[],h=a(l);try{for(h.s();!(p=h.n()).done;)for(v=n(p.value,2),b=v[0],m=v[1],y=b;y<=m;y++)if(f.binIndex[y])for(g=f.binIndex[y],_=0;_<g.length;++_)d.push(new k.default(g[_].minv,g[_].maxv,y))}catch(o){h.e(o)}finally{h.f()}return e.abrupt("return",(0,w.optimizeChunks)(d,new x.default(0,0)));case 16:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()},{key:"reg2bins",value:function(e,t){(e-=1)<1&&(e=1),t>Math.pow(2,50)&&(t=Math.pow(2,34)),t-=1;for(var r,n=0,a=0,i=this.minShift+3*this.depth,o=[];n<=this.depth;i-=3,a+=(r=3*n,1*Math.pow(2,r)),n+=1){var u=a+I(e,i),s=a+I(t,i);if(s-u+o.length>this.maxBinNumber)throw new Error("query ".concat(e,"-").concat(t," is too large for current binning scheme (shift ").concat(this.minShift,", depth ").concat(this.depth,"), try a smaller query or a coarser index binning scheme"));o.push([u,s])}return o}}]),r}(y.default);t.default=S},44061:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CSI=t.TBI=t.TabixIndexedFile=void 0;var a=n(r(60158));t.TabixIndexedFile=a.default;var i=n(r(95105));t.TBI=i.default;var o=n(r(29237));t.CSI=o.default},96182:function(e,t,r){"use strict";var n=r(77162),a=r(22220).default,i=r(52954).default,o=r(50085).default,u=r(15198).default,s=["indices"],c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var f=c(r(89410)),l=c(r(43245)),d=function(){function e(t){var r=t.filehandle,n=t.renameRefSeqs,a=void 0===n?function(e){return e}:n;o(this,e),this.filehandle=r,this.renameRefSeq=a}return u(e,[{key:"getMetadata",value:function(){var e=i(n.mark((function e(){var t,r,i,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},e.next=3,this.parse(t);case 3:return r=e.sent,r.indices,i=a(r,s),e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_findFirstData",value:function(e,t){return e?e.compareTo(t)>0?t:e:t}},{key:"parse",value:function(){var e=i(n.mark((function e(){var t,r=this,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},this._parseCache||(this._parseCache=new f.default({cache:new l.default({maxSize:1}),fill:function(){return r._parse(t)}})),e.abrupt("return",this._parseCache.get("index",null,void 0));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hasRefSeq",value:function(){var e=i(n.mark((function e(t){var r,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.parse(r);case 3:if(e.t1=t,e.t0=e.sent.indices[e.t1],e.t0){e.next=7;break}e.t0={};case 7:return e.abrupt("return",!!e.t0.binIndex);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.default=d},60158:function(e,t,r){"use strict";var n=r(49882).Buffer,a=r(77162),i=r(52954).default,o=r(50085).default,u=r(15198).default,s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=s(r(89410)),f=s(r(43245)),l=r(2877),d=r(42098),h=r(1197),p=s(r(95105)),v=s(r(29237));function b(e){return new Promise((function(t){setTimeout(t,e)}))}var m=function(){function e(t){var r=t.path,n=t.filehandle,a=t.tbiPath,i=t.tbiFilehandle,u=t.csiPath,s=t.csiFilehandle,d=t.chunkSizeLimit,h=void 0===d?5e7:d,b=t.renameRefSeqs,m=void 0===b?function(e){return e}:b,x=t.chunkCacheSize,k=void 0===x?5*Math.pow(2,20):x;if(o(this,e),n)this.filehandle=n;else{if(!r)throw new TypeError("must provide either filehandle or path");this.filehandle=new l.LocalFile(r)}if(i)this.index=new p.default({filehandle:i,renameRefSeqs:m});else if(s)this.index=new v.default({filehandle:s,renameRefSeqs:m});else if(a)this.index=new p.default({filehandle:new l.LocalFile(a),renameRefSeqs:m});else if(u)this.index=new v.default({filehandle:new l.LocalFile(u),renameRefSeqs:m});else{if(!r)throw new TypeError("must provide one of tbiFilehandle, tbiPath, csiFilehandle, or csiPath");this.index=new p.default({filehandle:new l.LocalFile("".concat(r,".tbi")),renameRefSeqs:m})}this.chunkSizeLimit=h,this.renameRefSeq=m,this.chunkCache=new c.default({cache:new f.default({maxSize:Math.floor(k/65536)}),fill:this.readChunk.bind(this)})}return u(e,[{key:"getLines",value:function(){var e=i(a.mark((function e(t,r,n,i){var o,u,s,c,f,l,d,p,v,m,x,k,w,y,g,_,I,S,E,T,P,L,C;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u={},"undefined"!==typeof i){e.next=3;break}throw new TypeError("line callback must be provided");case 3:if("function"===typeof i?s=i:(u=i,s=i.lineCallback),void 0!==t){e.next=6;break}throw new TypeError("must provide a reference sequence name");case 6:if(s){e.next=8;break}throw new TypeError("line callback must be provided");case 8:return e.next=10,this.index.getMetadata(u);case 10:if(c=e.sent,(0,h.checkAbortSignal)(o),r||(r=0),n||(n=c.maxRefLength),r<=n){e.next=16;break}throw new TypeError("invalid start and end coordinates. start must be less than or equal to end");case 16:if(r!==n){e.next=18;break}return e.abrupt("return");case 18:return e.next=20,this.index.blocksForRange(t,r,n,u);case 20:f=e.sent,(0,h.checkAbortSignal)(o),l=0;case 23:if(!(l<f.length)){e.next=30;break}if(!((d=f[l].fetchedSize())>this.chunkSizeLimit)){e.next=27;break}throw new Error("Too much data. Chunk size ".concat(d.toLocaleString()," bytes exceeds chunkSizeLimit of ").concat(this.chunkSizeLimit.toLocaleString(),"."));case 27:l+=1,e.next=23;break;case 30:p=Date.now(),v=0;case 32:if(!(v<f.length)){e.next=72;break}return m=void 0,x=f[v],e.next=37,this.chunkCache.get(x.toString(),x,o);case 37:k=e.sent,w=k.buffer,y=k.cpositions,g=k.dpositions,(_=("undefined"!==typeof TextDecoder?new TextDecoder("utf-8").decode(w):w.toString()).split("\n")).pop(),(0,h.checkAbortSignal)(o),I=x.minv.dataPosition,S=void 0,E=0;case 47:if(!(E<_.length)){e.next=69;break}for(T=_[E],S=0;I>=g[S];S+=1);if(P=this.checkLine(c,t,r,n,T),L=P.startCoordinate,C=P.overlaps,!(void 0!==m&&void 0!==L&&m>L)){e.next=53;break}throw new Error("Lines not sorted by start coordinate (".concat(m," > ").concat(L,"), this file is not usable with Tabix."));case 53:if(m=L,!C){e.next=58;break}s(T.trim(),256*y[S]+(I-g[S])),e.next=60;break;case 58:if(!(void 0!==L&&L>=n)){e.next=60;break}return e.abrupt("return");case 60:if(I+=T.length+1,!(p-Date.now()>500)){e.next=66;break}return p=Date.now(),(0,h.checkAbortSignal)(o),e.next=66,b(1);case 66:E+=1,e.next=47;break;case 69:v+=1,e.next=32;break;case 72:case"end":return e.stop()}}),e,this)})));return function(t,r,n,a){return e.apply(this,arguments)}}()},{key:"getMetadata",value:function(){var e=i(a.mark((function e(){var t,r=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.abrupt("return",this.index.getMetadata(t));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeaderBuffer",value:function(){var e=i(a.mark((function e(){var t,r,n,i,o,u,s,c,f,l,p,v=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.getMetadata(t);case 3:return r=e.sent,n=r.firstDataLine,i=r.metaChar,o=r.maxBlockSize,(0,h.checkAbortSignal)(t.signal),u=n&&n.blockPosition?n.blockPosition+o:o,e.next=11,this._readRegion(0,u,t);case 11:return s=e.sent,(0,h.checkAbortSignal)(t.signal),e.prev=13,e.next=16,(0,d.unzip)(s);case 16:s=e.sent,e.next=23;break;case 19:throw e.prev=19,e.t0=e.catch(13),console.error(e.t0),new Error("error decompressing block ".concat(e.t0.code," at 0 (length ").concat(u,") ").concat(e.t0));case 23:if(!i){e.next=36;break}c=-1,f="\n".charCodeAt(0),l=i.charCodeAt(0),p=0;case 28:if(!(p<s.length)){e.next=35;break}if(p!==c+1||s[p]===l){e.next=31;break}return e.abrupt("break",35);case 31:s[p]===f&&(c=p);case 32:p+=1,e.next=28;break;case 35:s=s.slice(0,c+1);case 36:return e.abrupt("return",s);case 37:case"end":return e.stop()}}),e,this,[[13,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"getHeader",value:function(){var e=i(a.mark((function e(){var t,r,n=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.getHeaderBuffer(t);case 3:return r=e.sent,(0,h.checkAbortSignal)(t.signal),e.abrupt("return",r.toString("utf8"));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getReferenceSequenceNames",value:function(){var e=i(a.mark((function e(){var t,r,n=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.getMetadata(t);case 3:return r=e.sent,e.abrupt("return",r.refIdToName);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkLine",value:function(e,t,r,n,a){var i=e.columnNumbers,o=e.metaChar,u=e.coordinateType,s=e.format;if(a.charAt(0)===o)return{overlaps:!1};var c=i.ref,f=i.start,l=i.end;c||(c=0),f||(f=0),l||(l=0),"VCF"===s&&(l=8);for(var d=Math.max(c,f,l),h=1,p=0,v="",b=-1/0,m=0;m<a.length+1;m+=1)if("\t"===a[m]||m===a.length){if(h===c){if(this.renameRefSeq(a.slice(p,m))!==t)return{overlaps:!1}}else if(h===f){if(b=parseInt(a.slice(p,m),10),"1-based-closed"===u&&(b-=1),b>=n)return{startCoordinate:b,overlaps:!1};if((0===l||l===f)&&b+1<=r)return{startCoordinate:b,overlaps:!1}}else if("VCF"===s&&4===h)v=a.slice(p,m);else if(h===l){if(("VCF"===s?this._getVcfEnd(b,v,a.slice(p,m)):parseInt(a.slice(p,m),10))<=r)return{overlaps:!1}}if(p=m+1,(h+=1)>d)break}return{startCoordinate:b,overlaps:!0}}},{key:"_getVcfEnd",value:function(e,t,r){var n=e+t.length,a=-1!==r.indexOf("SVTYPE=TRA");if("."===r[0]||a){if(a)return e+1}else for(var i=";",o=0;o<r.length;o+=1){if(";"===i&&"END="===r.slice(o,o+4)){var u=r.indexOf(";",o);-1===u&&(u=r.length),n=parseInt(r.slice(o+4,u),10);break}i=r[o]}return n}},{key:"lineCount",value:function(){var e=i(a.mark((function e(t){var r,n=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.abrupt("return",this.index.lineCount(t,r));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_readRegion",value:function(){var e=i(a.mark((function e(t,r){var i,o,u,s,c=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>2&&void 0!==c[2]?c[2]:{},e.next=3,this.filehandle.read(n.alloc(r),0,r,t,i);case 3:return o=e.sent,u=o.bytesRead,s=o.buffer,e.abrupt("return",u<r?s.slice(0,u):s);case 7:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"readChunk",value:function(){var e=i(a.mark((function e(t){var r,n,i=arguments;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:{},e.next=3,this._readRegion(t.minv.blockPosition,t.fetchedSize(),r);case 3:return n=e.sent,e.prev=4,e.abrupt("return",(0,d.unzipChunkSlice)(n,t));case 8:throw e.prev=8,e.t0=e.catch(4),new Error("error decompressing chunk ".concat(t.toString()," ").concat(e.t0));case 11:case"end":return e.stop()}}),e,this,[[4,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.default=m},95105:function(e,t,r){"use strict";var n=r(51068).default,a=r(93041).default,i=r(77162),o=r(52954).default,u=r(50085).default,s=r(15198).default,c=r(60270).default,f=r(84564).default,l=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),d=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),h=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&l(t,e,r);return d(t,e),t},p=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var v=p(r(62821)),b=h(r(27650)),m=p(r(50663)),x=r(42098),k=r(1197),w=p(r(96182)),y=21578324;function g(e,t){return[[0,0],[1+((e+=1)>>26),1+((t-=1)>>26)],[9+(e>>23),9+(t>>23)],[73+(e>>20),73+(t>>20)],[585+(e>>17),585+(t>>17)],[4681+(e>>14),4681+(t>>14)]]}var _=function(e){c(r,e);var t=f(r);function r(){return u(this,r),t.apply(this,arguments)}return s(r,[{key:"lineCount",value:function(){var e=o(i.mark((function e(t){var r,n,a,o,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.parse(r);case 3:if(n=e.sent){e.next=6;break}return e.abrupt("return",-1);case 6:if(a=n.refNameToId[t],n.indices[a]){e.next=10;break}return e.abrupt("return",-1);case 10:if(!(o=n.indices[a].stats)){e.next=13;break}return e.abrupt("return",o.lineCount);case 13:return e.abrupt("return",-1);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_parse",value:function(){var e=o(i.mark((function e(){var t,r,n,a,o,u,s,c,f,l,d,h,p,v,w,g,_,I,S,E,T=this,P=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=P.length>0&&void 0!==P[0]?P[0]:{},e.t0=x.unzip,e.next=4,this.filehandle.readFile(t);case 4:return e.t1=e.sent,e.next=7,(0,e.t0)(e.t1);case 7:if(r=e.sent,(0,k.checkAbortSignal)(t.signal),r.readUInt32LE(0)===y){e.next=11;break}throw new Error("Not a TBI file");case 11:if(n=r.readInt32LE(4),a=r.readInt32LE(8),o=65536&a?"zero-based-half-open":"1-based-closed",u={0:"generic",1:"SAM",2:"VCF"}[15&a]){e.next=18;break}throw new Error("invalid Tabix preset format flags ".concat(a));case 18:return s={ref:r.readInt32LE(12),start:r.readInt32LE(16),end:r.readInt32LE(20)},c=r.readInt32LE(24),l=((1<<3*((f=5)+1))-1)/7,d=Math.pow(2,14+3*f),h=c?String.fromCharCode(c):null,p=r.readInt32LE(28),v=r.readInt32LE(32),w=this._parseNameBytes(r.slice(36,36+v)),g=w.refNameToId,_=w.refIdToName,I=36+v,E=new Array(n).fill(0).map((function(){var e=r.readInt32LE(I);I+=4;for(var t,n={},a=0;a<e;a+=1){var i=r.readUInt32LE(I);if(I+=4,i>l+1)throw new Error("tabix index contains too many bins, please use a CSI index");if(i===l+1){var o=r.readInt32LE(I);I+=4,2===o&&(t=T.parsePseudoBin(r,I)),I+=16*o}else{var u=r.readInt32LE(I);I+=4;for(var s=new Array(u),c=0;c<u;c+=1){var f=(0,b.fromBytes)(r,I),d=(0,b.fromBytes)(r,I+8);I+=16,S=T._findFirstData(S,f),s[c]=new m.default(f,d,i)}n[i]=s}}var h=r.readInt32LE(I);I+=4;for(var p=new Array(h),v=0;v<h;v+=1)p[v]=(0,b.fromBytes)(r,I),I+=8,S=T._findFirstData(S,p[v]);return{binIndex:n,linearIndex:p,stats:t}})),e.abrupt("return",{indices:E,metaChar:h,maxBinNumber:l,maxRefLength:d,skipLines:p,firstDataLine:S,columnNumbers:s,coordinateType:o,format:u,refIdToName:_,refNameToId:g,maxBlockSize:65536});case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parsePseudoBin",value:function(e,t){return{lineCount:(0,k.longToNumber)(v.default.fromBytesLE(e.slice(t+16,t+24),!0))}}},{key:"_parseNameBytes",value:function(e){for(var t=0,r=0,n=[],a={},i=0;i<e.length;i+=1)if(!e[i]){if(r<i){var o=e.toString("utf8",r,i);o=this.renameRefSeq(o),n[t]=o,a[o]=t}r=i+1,t+=1}return{refNameToId:a,refIdToName:n}}},{key:"blocksForRange",value:function(){var e=o(i.mark((function e(t,r,o){var u,s,c,f,l,d,h,p,v,x,w,y,_,I,S,E,T,P,L,C,O=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=O.length>3&&void 0!==O[3]?O[3]:{},r<0&&(r=0),e.next=4,this.parse(u);case 4:if(s=e.sent){e.next=7;break}return e.abrupt("return",[]);case 7:if(c=s.refNameToId[t],f=s.indices[c]){e.next=11;break}return e.abrupt("return",[]);case 11:(f.linearIndex.length?f.linearIndex[r>>14>=f.linearIndex.length?f.linearIndex.length-1:r>>14]:new b.default(0,0))||console.warn("querying outside of possible tabix range"),l=g(r,o),d=[],h=a(l);try{for(h.s();!(p=h.n()).done;)for(v=n(p.value,2),x=v[0],w=v[1],y=x;y<=w;y++)if(f.binIndex[y])for(_=f.binIndex[y],I=0;I<_.length;++I)d.push(new m.default(_[I].minv,_[I].maxv,y))}catch(i){h.e(i)}finally{h.f()}for(S=f.linearIndex.length,E=null,T=Math.min(r>>14,S-1),P=Math.min(o>>14,S-1),L=T;L<=P;++L)(C=f.linearIndex[L])&&(!E||C.compareTo(E)<0)&&(E=C);return e.abrupt("return",(0,k.optimizeChunks)(d,E));case 23:case"end":return e.stop()}}),e,this)})));return function(t,r,n){return e.apply(this,arguments)}}()}]),r}(w.default);t.default=_},1197:function(e,t,r){"use strict";var n=r(77162),a=r(52954).default,i=r(15198).default,o=r(50085).default,u=r(60270).default,s=r(84564).default,c=r(88240).default;Object.defineProperty(t,"__esModule",{value:!0}),t.optimizeChunks=t.canMergeBlocks=t.abortBreakPoint=t.checkAbortSignal=t.longToNumber=void 0,t.longToNumber=function(e){if(e.greaterThan(Number.MAX_SAFE_INTEGER)||e.lessThan(Number.MIN_SAFE_INTEGER))throw new Error("integer overflow");return e.toNumber()};var f=function(e){u(r,e);var t=s(r);function r(){return o(this,r),t.apply(this,arguments)}return i(r)}(c(Error));function l(e){if(e&&e.aborted){if("undefined"!==typeof DOMException)throw new DOMException("aborted","AbortError");var t=new f("aborted");throw t.code="ERR_ABORTED",t}}function d(){return(d=a(n.mark((function e(t){return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve();case 2:l(t);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t){return t.minv.blockPosition-e.maxv.blockPosition<65e3&&t.maxv.blockPosition-e.minv.blockPosition<5e6}t.checkAbortSignal=l,t.abortBreakPoint=function(e){return d.apply(this,arguments)},t.canMergeBlocks=h,t.optimizeChunks=function(e,t){var r=[],n=null;return 0===e.length?e:(e.sort((function(e,t){var r=e.minv.blockPosition-t.minv.blockPosition;return 0!==r?r:e.minv.dataPosition-t.minv.dataPosition})),e.forEach((function(e){(!t||e.maxv.compareTo(t)>0)&&(null===n?(r.push(e),n=e):h(n,e)?e.maxv.compareTo(n.maxv)>0&&(n.maxv=e.maxv):(r.push(e),n=e))})),r)}},27650:function(e,t,r){"use strict";var n=r(50085).default,a=r(15198).default;Object.defineProperty(t,"__esModule",{value:!0}),t.fromBytes=void 0;var i=function(){function e(t,r){n(this,e),this.blockPosition=t,this.dataPosition=r}return a(e,[{key:"toString",value:function(){return"".concat(this.blockPosition,":").concat(this.dataPosition)}},{key:"compareTo",value:function(e){return this.blockPosition-e.blockPosition||this.dataPosition-e.dataPosition}}],[{key:"min",value:function(){for(var e,t=0,r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];for(;!e;t+=1)e=n[t];for(;t<n.length;t+=1)e.compareTo(n[t])>0&&(e=n[t]);return e}}]),e}();t.default=i,t.fromBytes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r)throw new Error("big-endian virtual file offsets not implemented");return new i(1099511627776*e[t+7]+4294967296*e[t+6]+16777216*e[t+5]+65536*e[t+4]+256*e[t+3]+e[t+2],e[t+1]<<8|e[t])}}}]);
//# sourceMappingURL=4061.1dd0c213.chunk.js.map