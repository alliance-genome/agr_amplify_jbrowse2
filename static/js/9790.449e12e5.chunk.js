"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[9790,3990],{89790:(e,t,a)=>{a.r(t),a.d(t,{default:()=>L});var r=a(66204),n=a(80846),o=a(35421),l=a(90872),i=a(38684),s=a(97202),c=a(49140),m=a(56762),d=a(41247),u=a(54378),g=a(16990),h=a(19633),p=a(5359),b=a(3418),f=a(55680),v=a(98313),x=a(24728),E=a(23990);const Z=(0,i.ZL)()((e=>({controls:{position:"absolute",borderRight:`1px solid ${e.palette.divider}`,borderBottom:`1px solid ${e.palette.divider}`,left:0,top:0}}))),k=(0,n.observer)((function({model:e}){const{classes:t}=Z(),[a,n]=(0,r.useState)(null);return r.createElement("div",{className:t.controls},r.createElement(c.Z,{onClick:e.zoomOutButton,title:e.lockedFitToWindow?"unlock to zoom out":"zoom out",disabled:e.atMaxBpPerPx||e.lockedFitToWindow},r.createElement(d.Z,null)),r.createElement(c.Z,{onClick:e.zoomInButton,disabled:e.atMinBpPerPx,title:"zoom in"},r.createElement(u.Z,null)),r.createElement(c.Z,{onClick:e.rotateCounterClockwiseButton,title:"rotate counter-clockwise"},r.createElement(g.Z,null)),r.createElement(c.Z,{onClick:e.rotateClockwiseButton,title:"rotate clockwise"},r.createElement(h.Z,null)),r.createElement(c.Z,{onClick:e.toggleFitToWindowLock,title:e.lockedFitToWindow?"locked model to window size":"unlocked model to zoom further",disabled:e.tooSmallToLock},e.lockedFitToWindow?r.createElement(b.Z,null):r.createElement(p.Z,null)),r.createElement(c.Z,{onClick:e=>n(e.currentTarget)},r.createElement(v.Z,null)),e.hideTrackSelectorButton?null:r.createElement(c.Z,{onClick:e.activateTrackSelector,title:"Open track selector","data-testid":"circular_track_select"},r.createElement(x.GD,null)),a?r.createElement(m.Z,{anchorEl:a,menuItems:[{label:"Export SVG",icon:f.Z,onClick:()=>{(0,l.getSession)(e).queueDialog((t=>[E.default,{model:e,handleClose:t}]))}}],onMenuItemClick:(e,t)=>{t(),n(null)},open:Boolean(a),onClose:()=>n(null)}):null)}));var y=a(82051),C=a(93840),S=a(7146);const w=(0,i.ZL)()((e=>({importFormContainer:{padding:e.spacing(6)}}))),z=(0,n.observer)((({model:e})=>{const{classes:t}=w(),a=(0,l.getSession)(e),{error:n}=e,{assemblyNames:i,assemblyManager:s}=a,[c,m]=(0,r.useState)(i[0]),d=s.get(c),u=i.length?d?.error:"No configured assemblies",g=d?.regions||[],h=u||n;return r.createElement(y.Z,{className:t.importFormContainer},h?r.createElement(C.ZP,{container:!0,spacing:1,justifyContent:"center",alignItems:"center"},r.createElement(C.ZP,{item:!0},r.createElement(o.ErrorMessage,{error:h}))):null,r.createElement(C.ZP,{container:!0,spacing:1,justifyContent:"center",alignItems:"center"},r.createElement(C.ZP,{item:!0},r.createElement(o.AssemblySelector,{onChange:t=>{e.setError(void 0),m(t)},session:a,selected:c})),r.createElement(C.ZP,{item:!0},r.createElement(S.Z,{disabled:!g?.length,onClick:()=>{e.setError(void 0),e.setDisplayedRegions(g)},variant:"contained",color:"primary"},g.length||h?"Open":"Loading..."))))})),W=(0,i.ZL)()((e=>({root:{position:"relative",marginBottom:e.spacing(1),overflow:"hidden"},scroller:{overflow:"auto"}}))),T=(0,n.observer)((({model:e})=>r.createElement(r.Fragment,null,e.staticSlices.map((t=>r.createElement(s.Z,{key:(0,l.assembleLocString)(t.region.elided?t.region.regions[0]:t.region),model:e,slice:t}))),e.tracks.map((t=>{const a=t.displays[0];return r.createElement(a.RenderingComponent,{key:a.id,display:a,view:e})}))))),M=(0,n.observer)((({model:e})=>{const t=!!e.displayedRegions.length&&!!e.figureWidth&&!!e.figureHeight&&e.initialized,a=!t&&!e.disableImportForm,n=t&&!a;return r.createElement(r.Fragment,null,a||e.error?r.createElement(z,{model:e}):n?r.createElement(R,{model:e}):null)})),R=(0,n.observer)((function({model:e}){const{width:t,height:a,id:n,offsetRadians:l,centerXY:i,figureWidth:s,figureHeight:c,hideVerticalResizeHandle:m}=e,{classes:d}=W();return r.createElement("div",{className:d.root,style:{width:t,height:a},"data-testid":n},r.createElement("div",{className:d.scroller,style:{width:t,height:a}},r.createElement("svg",{style:{transform:`rotate(${l}rad)`,transition:"transform 0.5s",transformOrigin:i.map((e=>`${e}px`)).join(" "),position:"absolute",left:0,top:0},width:s,height:c},r.createElement("g",{transform:`translate(${i})`},r.createElement(T,{model:e})))),r.createElement(k,{model:e}),m?null:r.createElement(o.ResizeHandle,{onDrag:e.resizeHeight,style:{height:3,position:"absolute",bottom:0,left:0,background:"#ccc",boxSizing:"border-box",borderTop:"1px solid #fafafa"}}))})),L=M},23990:(e,t,a)=>{a.r(t),a.d(t,{default:()=>f});var r=a(66204),n=a(10126),o=a(80013),l=a(29520),i=a(46338),s=a(78781),c=a(39780),m=a(70539),d=a(62301),u=a(7146),g=a(35421),h=a(90872);function p(){return r.createElement("div",null,r.createElement(n.Z,{size:20,style:{marginRight:20}}),r.createElement(o.Z,{display:"inline"},"Creating SVG"))}function b(e,t){return(0,h.useLocalStorage)("svg-"+e,t)}function f({model:e,handleClose:t}){const a=(0,h.getSession)(e),n="undefined"!=typeof OffscreenCanvas,[f,v]=(0,r.useState)(n),[x,E]=(0,r.useState)(!1),[Z,k]=(0,r.useState)(),[y,C]=b("file","jbrowse.svg"),[S,w]=b("theme",a.themeName||"default");return r.createElement(g.Dialog,{open:!0,onClose:t,title:"Export SVG"},r.createElement(l.Z,null,Z?r.createElement(g.ErrorMessage,{error:Z}):x?r.createElement(p,null):null,r.createElement(i.Z,{helperText:"filename",value:y,onChange:e=>C(e.target.value)}),r.createElement("br",null),a.allThemes?r.createElement(i.Z,{select:!0,label:"Theme",value:S,onChange:e=>w(e.target.value)},Object.entries(a.allThemes()).map((([e,t])=>r.createElement(s.Z,{key:e,value:e},t.name||"(Unknown name)")))):null,n?r.createElement(c.Z,{control:r.createElement(m.Z,{checked:f,onChange:()=>v((e=>!e))}),label:"Rasterize canvas based tracks? File may be much larger if this is turned off"}):r.createElement(o.Z,null,"Note: rasterizing layers not yet supported in this browser, so SVG size may be large")),r.createElement(d.Z,null,r.createElement(u.Z,{variant:"contained",color:"secondary",onClick:()=>t()},"Cancel"),r.createElement(u.Z,{variant:"contained",color:"primary",type:"submit",onClick:async()=>{E(!0),k(void 0);try{await e.exportSvg({rasterizeLayers:f,filename:y,themeName:S}),t()}catch(e){console.error(e),k(e),E(!1)}}},"Submit")))}},97202:(e,t,a)=>{a.d(t,{Z:()=>g});var r=a(66204),n=a(80846),o=a(90872),l=a(71472),i=a(92368);const s=(0,a(38684).ZL)()({rulerLabel:{fontSize:"0.8rem",fontWeight:500,lineHeight:1.6,letterSpacing:"0.0075em"}});function c(e,t,a,r){e.flipped&&([a,r]=[r,a]);const n=e.bpToXY(a,t),o=e.bpToXY(r,t);return["M",...n,"A",t,t,"0",Math.abs(r-a)/e.bpPerRadian>Math.PI?"1":"0","1",...o].join(" ")}const m=(0,n.observer)((function({model:e,slice:t,region:a}){const n=(0,i.Z)(),{radiusPx:l}=e,s=l+1,{endRadians:c,startRadians:m}=t,u=(0,o.polarToCartesian)(s,m),g=(0,o.polarToCartesian)(s,c),h=(c-m)*s,p=c-m>Math.PI?"1":"0",b=(c+m)/2,f=`[${Number(a.regions.length).toLocaleString()}]`;return r.createElement(r.Fragment,null,r.createElement(d,{text:f,view:e,maxWidthPx:h,radians:b,radiusPx:s,title:`${f} more regions`,color:n.palette.text.primary}),r.createElement("path",{d:["M",...u,"A",s,s,"0",p,"1",...g].join(" "),stroke:n.palette.text.secondary,strokeWidth:2,strokeDasharray:"2,2",fill:"none"}))})),d=(0,n.observer)((function({view:e,text:t,maxWidthPx:a,radians:n,radiusPx:l,title:i,color:c}){const{classes:m}=s(),d=(0,o.polarToCartesian)(l+5,n);return t?6.5*t.length<a?r.createElement("text",{x:0,y:0,className:m.rulerLabel,textAnchor:"middle",dominantBaseline:"baseline",transform:`translate(${d}) rotate(${(0,o.radToDeg)(n)+90})`,style:{fill:c}},t,r.createElement("title",null,i||t)):a>4?(0,o.radToDeg)(n+e.offsetRadians-Math.PI/2)>=180?r.createElement("text",{x:0,y:0,className:m.rulerLabel,textAnchor:"start",dominantBaseline:"middle",transform:`translate(${d}) rotate(${(0,o.radToDeg)(n)})`,style:{fill:c}},t,r.createElement("title",null,i||t)):r.createElement("text",{x:0,y:0,className:m.rulerLabel,textAnchor:"end",dominantBaseline:"middle",transform:`translate(${d}) rotate(${(0,o.radToDeg)(n)+180})`,style:{fill:c}},t,r.createElement("title",null,i||t)):null:null})),u=(0,n.observer)((function({model:e,slice:t,region:a}){const n=(0,i.Z)(),{radiusPx:s}=e,{endRadians:m,startRadians:u}=t,g=(m+u)/2,h=(m-u)*s;let p;const b=(0,o.getSession)(e).assemblyManager.get(a.assemblyName);if(b&&(p=b.getRefNameColor(a.refName)),p)try{p=(0,l.makeContrasting)(p,n.palette.background.paper)}catch(e){p=n.palette.text.primary}else p=n.palette.text.primary;return r.createElement(r.Fragment,null,r.createElement(d,{text:a.refName,view:e,maxWidthPx:h,radians:g,radiusPx:s,color:p}),r.createElement("path",{d:c(t,s+1,a.start,a.end),stroke:p,strokeWidth:2,fill:"none"}))})),g=(0,n.observer)((function({model:e,slice:t}){return t.region.elided?r.createElement(m,{key:(0,o.assembleLocString)(t.region.regions[0]),model:e,region:t.region,slice:t}):r.createElement(u,{key:(0,o.assembleLocString)(t.region),region:t.region,model:e,slice:t})}))},3418:(e,t,a)=>{var r=a(57739);t.Z=void 0;var n=r(a(53948)),o=a(43188),l=(0,n.default)((0,o.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"}),"Lock");t.Z=l},5359:(e,t,a)=>{var r=a(57739);t.Z=void 0;var n=r(a(53948)),o=a(43188),l=(0,n.default)((0,o.jsx)("path",{d:"M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"}),"LockOpen");t.Z=l},16990:(e,t,a)=>{var r=a(57739);t.Z=void 0;var n=r(a(53948)),o=a(43188),l=(0,n.default)((0,o.jsx)("path",{d:"M7.11 8.53 5.7 7.11C4.8 8.27 4.24 9.61 4.07 11h2.02c.14-.87.49-1.72 1.02-2.47zM6.09 13H4.07c.17 1.39.72 2.73 1.62 3.89l1.41-1.42c-.52-.75-.87-1.59-1.01-2.47zm1.01 5.32c1.16.9 2.51 1.44 3.9 1.61V17.9c-.87-.15-1.71-.49-2.46-1.03L7.1 18.32zM13 4.07V1L8.45 5.55 13 10V6.09c2.84.48 5 2.94 5 5.91s-2.16 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93s-3.05-7.44-7-7.93z"}),"RotateLeft");t.Z=l},19633:(e,t,a)=>{var r=a(57739);t.Z=void 0;var n=r(a(53948)),o=a(43188),l=(0,n.default)((0,o.jsx)("path",{d:"M15.55 5.55 11 1v3.07C7.06 4.56 4 7.92 4 12s3.05 7.44 7 7.93v-2.02c-2.84-.48-5-2.94-5-5.91s2.16-5.43 5-5.91V10l4.55-4.45zM19.93 11c-.17-1.39-.72-2.73-1.62-3.89l-1.42 1.42c.54.75.88 1.6 1.02 2.47h2.02zM13 17.9v2.02c1.39-.17 2.74-.71 3.9-1.61l-1.44-1.44c-.75.54-1.59.89-2.46 1.03zm3.89-2.42 1.42 1.41c.9-1.16 1.45-2.5 1.62-3.89h-2.02c-.14.87-.48 1.72-1.02 2.48z"}),"RotateRight");t.Z=l},82051:(e,t,a)=>{a.d(t,{Z:()=>k});var r=a(55559),n=a(30984),o=a(66204),l=a(56317),i=a(46730),s=a(95201),c=a(58029),m=a(77877),d=a(605),u=a(71684),g=a(43188);const h=["className","component","disableGutters","fixed","maxWidth","classes"],p=(0,u.Z)(),b=(0,d.Z)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[`maxWidth${(0,i.Z)(String(a.maxWidth))}`],a.fixed&&t.fixed,a.disableGutters&&t.disableGutters]}}),f=e=>(0,m.Z)({props:e,name:"MuiContainer",defaultTheme:p});var v=a(40118),x=a(61125),E=a(57369);const Z=function(e={}){const{createStyledComponent:t=b,useThemeProps:a=f,componentName:m="MuiContainer"}=e,d=t((({theme:e,ownerState:t})=>(0,n.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!t.disableGutters&&{paddingLeft:e.spacing(2),paddingRight:e.spacing(2),[e.breakpoints.up("sm")]:{paddingLeft:e.spacing(3),paddingRight:e.spacing(3)}})),(({theme:e,ownerState:t})=>t.fixed&&Object.keys(e.breakpoints.values).reduce(((t,a)=>{const r=a,n=e.breakpoints.values[r];return 0!==n&&(t[e.breakpoints.up(r)]={maxWidth:`${n}${e.breakpoints.unit}`}),t}),{})),(({theme:e,ownerState:t})=>(0,n.Z)({},"xs"===t.maxWidth&&{[e.breakpoints.up("xs")]:{maxWidth:Math.max(e.breakpoints.values.xs,444)}},t.maxWidth&&"xs"!==t.maxWidth&&{[e.breakpoints.up(t.maxWidth)]:{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`}}))),u=o.forwardRef((function(e,t){const o=a(e),{className:u,component:p="div",disableGutters:b=!1,fixed:f=!1,maxWidth:v="lg"}=o,x=(0,r.Z)(o,h),E=(0,n.Z)({},o,{component:p,disableGutters:b,fixed:f,maxWidth:v}),Z=((e,t)=>{const{classes:a,fixed:r,disableGutters:n,maxWidth:o}=e,l={root:["root",o&&`maxWidth${(0,i.Z)(String(o))}`,r&&"fixed",n&&"disableGutters"]};return(0,c.Z)(l,(e=>(0,s.Z)(t,e)),a)})(E,m);return(0,g.jsx)(d,(0,n.Z)({as:p,ownerState:E,className:(0,l.Z)(Z.root,u),ref:t},x))}));return u}({createStyledComponent:(0,x.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[`maxWidth${(0,v.Z)(String(a.maxWidth))}`],a.fixed&&t.fixed,a.disableGutters&&t.disableGutters]}}),useThemeProps:e=>(0,E.Z)({props:e,name:"MuiContainer"})}),k=Z}}]);
//# sourceMappingURL=9790.449e12e5.chunk.js.map