"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[3904],{21308:function(e,t,r){var n=r(68079),a=(r(96902),r(4782)),i=r(27664),s=r(51632),o=r(88636),l=r(91188),c=r(29938),d=(0,l.ZL)()({rulerLabel:{fontSize:"0.8rem",fontWeight:500,lineHeight:1.6,letterSpacing:"0.0075em"}});function u(e,t,r,a){if(e.flipped){var i=[a,r];r=i[0],a=i[1]}var s=e.bpToXY(r,t),o=e.bpToXY(a,t),l=Math.abs(a-r)/e.bpPerRadian>Math.PI?"1":"0";return["M"].concat((0,n.Z)(s),["A",t,t,"0",l,"1"],(0,n.Z)(o)).join(" ")}var h=(0,a.observer)((function(e){var t=e.model,r=e.slice,a=e.region,s=(0,o.Z)(),l=t.radiusPx+1,d=r.endRadians,u=r.startRadians,h=(0,i.polarToCartesian)(l,u),m=(0,i.polarToCartesian)(l,d),f=(d-u)*l,g=d-u>Math.PI?"1":"0",p=(d+u)/2,v="[".concat(Number(a.regions.length).toLocaleString(),"]");return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(x,{text:v,view:t,maxWidthPx:f,radians:p,radiusPx:l,title:"".concat(v," more regions"),color:s.palette.text.primary}),(0,c.jsx)("path",{d:["M"].concat((0,n.Z)(h),["A",l,l,"0",g,"1"],(0,n.Z)(m)).join(" "),stroke:s.palette.text.secondary,strokeWidth:2,strokeDasharray:"2,2",fill:"none"})]})})),x=(0,a.observer)((function(e){var t=e.view,r=e.text,n=e.maxWidthPx,a=e.radians,s=e.radiusPx,o=e.title,l=e.color,u=d().classes,h=(0,i.polarToCartesian)(s+5,a);return r?6.5*r.length<n?(0,c.jsxs)("text",{x:0,y:0,className:u.rulerLabel,textAnchor:"middle",dominantBaseline:"baseline",transform:"translate(".concat(h,") rotate(").concat((0,i.radToDeg)(a)+90,")"),style:{fill:l},children:[r,(0,c.jsx)("title",{children:o||r})]}):n>4?(0,i.radToDeg)(a+t.offsetRadians-Math.PI/2)>=180?(0,c.jsxs)("text",{x:0,y:0,className:u.rulerLabel,textAnchor:"start",dominantBaseline:"middle",transform:"translate(".concat(h,") rotate(").concat((0,i.radToDeg)(a),")"),style:{fill:l},children:[r,(0,c.jsx)("title",{children:o||r})]}):(0,c.jsxs)("text",{x:0,y:0,className:u.rulerLabel,textAnchor:"end",dominantBaseline:"middle",transform:"translate(".concat(h,") rotate(").concat((0,i.radToDeg)(a)+180,")"),style:{fill:l},children:[r,(0,c.jsx)("title",{children:o||r})]}):null:null})),m=(0,a.observer)((function(e){var t,r=e.model,n=e.slice,a=e.region,l=(0,o.Z)(),d=r.radiusPx,h=n.endRadians,m=n.startRadians,f=(h+m)/2,g=(h-m)*d,p=(0,i.getSession)(r).assemblyManager.get(a.assemblyName);if(p&&(t=p.getRefNameColor(a.refName)),t)try{t=(0,s.makeContrasting)(t,l.palette.background.paper)}catch(v){t=l.palette.text.primary}else t=l.palette.text.primary;return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)(x,{text:a.refName,view:r,maxWidthPx:g,radians:f,radiusPx:d,color:t}),(0,c.jsx)("path",{d:u(n,d+1,a.start,a.end),stroke:t,strokeWidth:2,fill:"none"})]})}));t.Z=(0,a.observer)((function(e){var t=e.model,r=e.slice;return r.region.elided?(0,c.jsx)(h,{model:t,region:r.region,slice:r},(0,i.assembleLocString)(r.region.regions[0])):(0,c.jsx)(m,{region:r.region,model:t,slice:r},(0,i.assembleLocString)(r.region))}))},93904:function(e,t,r){r.r(t),r.d(t,{renderToSvg:function(){return v}});var n=r(32723),a=r(33028),i=r(34795),s=r(96902),o=r(93751),l=r(30908),c=r(75717),d=r(27664),u=r(17867),h=r(88636),x=r(55707),m=r.n(x),f=r(29938);function g(e){var t=e.width,r=e.height,n=e.shift,a=(0,h.Z)();return(0,f.jsx)("rect",{width:t+2*n,height:r,fill:m()(a.palette.background.default).hex()})}var p=r(21308);function v(e,t){return w.apply(this,arguments)}function w(){return w=(0,i.Z)((0,n.Z)().mark((function e(t,r){var h,x,m,v,w,b,j,y,k,Z,T,P,S,N,L,M;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.when)((function(){return t.initialized}));case 2:return x=r.themeName,m=void 0===x?"default":x,v=r.Wrapper,w=void 0===v?function(e){var t=e.children;return(0,f.jsx)(f.Fragment,{children:t})}:v,b=(0,d.getSession)(t),j=null===(h=b.allThemes)||void 0===h?void 0:h.call(b)[m],y=t.width,k=t.tracks,Z=t.height,T=50,e.next=9,Promise.all(k.map(function(){var e=(0,i.Z)((0,n.Z)().mark((function e(t){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.displays[0],e.next=3,(0,c.when)((function(){return void 0===i.ready||i.ready}));case 3:return e.t0=t,e.next=6,i.renderSvg((0,a.Z)((0,a.Z)({},r),{},{theme:j}));case 6:return e.t1=e.sent,e.abrupt("return",{track:e.t0,result:e.t1});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:return P=e.sent,S=t.staticSlices,N=t.offsetRadians,L=t.centerXY,M=(0,d.radToDeg)(N),e.abrupt("return",(0,l.renderToStaticMarkup)((0,f.jsx)(o.Z,{theme:(0,u.createJBrowseTheme)(j),children:(0,f.jsx)(w,{children:(0,f.jsxs)("svg",{width:y,height:Z,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:[0,0,y+2*T,Z].toString(),children:[(0,f.jsx)(g,{width:y,height:Z,shift:T}),(0,f.jsxs)("g",{transform:"translate(".concat(L,") rotate(").concat(M,")"),children:[S.map((function(e,r){return(0,f.jsx)(p.Z,{model:t,slice:e},r)})),P.map((function(e,t){var r=e.result;return(0,f.jsx)(s.Fragment,{children:r},t)}))]})]})})})));case 13:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}}}]);
//# sourceMappingURL=3904.4c74fdcd.chunk.js.map