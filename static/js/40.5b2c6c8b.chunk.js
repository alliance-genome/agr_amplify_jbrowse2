(this["webpackJsonp@jbrowse/web"]=this["webpackJsonp@jbrowse/web"]||[]).push([[40,71],{1772:function(e,t,a){"use strict";a.r(t);var r=a(1),n=a.n(r),c=a(84),o=a(1646),l=a(958),i=a(876),s=a(12),m=a(82),u=a(29),d=a(80),p=a.n(d),f=a(83),b=a(289),v=a(51),E=a(1684),g=a(1634),y=a(1687),h=a(1642),w=a(1639),j=a(118),O=a(287),k=Object(v.a)((function(e){return{importFormContainer:{padding:e.spacing(4)},formPaper:{maxWidth:600,margin:"0 auto",padding:12,marginBottom:10}}})),x=Object(c.observer)((function(e){var t=e.model,a=k(),c=Object(f.getSession)(t),o=c.assemblyNames,l=c.assemblyManager,i=Object(r.useState)([o[0],o[0]]),d=Object(u.a)(i,2),v=d[0],x=d[1],C=Object(r.useState)(),N=Object(u.a)(C,2),A=N[0],S=N[1],P=Object(r.useState)(2),B=Object(u.a)(P,1)[0],F=Object(r.useState)(),T=Object(u.a)(F,2),L=T[0],M=T[1],H=o.length?v.map((function(e){var t;return null===(t=l.get(e))||void 0===t?void 0:t.error})).filter((function(e){return!!e})).join(", "):"No configured assemblies";function V(){return V=Object(m.a)(p.a.mark((function e(){var a,r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,Object(f.isSessionWithAddTracks)(c)){e.next=3;break}return e.abrupt("return");case 3:return e.t0=t,e.next=6,Promise.all(v.map(function(){var e=Object(m.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.waitForAssembly(t);case 2:if(a=e.sent){e.next=5;break}throw new Error("Assembly ".concat(t," failed to load"));case 5:return e.abrupt("return",{type:"LinearGenomeView",bpPerPx:1,offsetPx:0,hideHeader:!0,displayedRegions:a.regions});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 6:e.t1=e.sent,e.t0.setViews.call(e.t0,e.t1),t.views.forEach((function(e){return e.setWidth(t.width)})),A&&(a="uri"in A?A.uri.slice(A.uri.lastIndexOf("/")+1):"MyTrack",r="".concat(a,"-").concat(Date.now()),c.addTrackConf({trackId:r,name:a,assemblyNames:v,type:"SyntenyTrack",adapter:{type:"PAFAdapter",pafLocation:A,assemblyNames:v}}),t.toggleTrack(r)),e.next=16;break;case 12:e.prev=12,e.t2=e.catch(0),console.error(e.t2),M(e.t2);case 16:case"end":return e.stop()}}),e,null,[[0,12]])}))),V.apply(this,arguments)}var I=L||H;return n.a.createElement(E.a,{className:a.importFormContainer},I?n.a.createElement(O.default,{error:I}):null,n.a.createElement(g.a,{className:a.formPaper},n.a.createElement(y.a,{container:!0,item:!0,justifyContent:"center",spacing:4,alignItems:"center"},n.a.createElement(y.a,{item:!0},n.a.createElement(h.a,null,"Select assemblies for synteny view"),Object(s.a)(new Array(B)).map((function(e,t){return n.a.createElement(b.a,{key:"row_".concat(t,"_").concat(v[t]),selected:v[t],onChange:function(e){var a=v.slice(0);a[t]=e,x(a)},session:c})}))))),n.a.createElement(g.a,{className:a.formPaper},n.a.createElement(y.a,{container:!0,justifyContent:"center"},n.a.createElement(h.a,{style:{textAlign:"center"}},n.a.createElement("b",null,"Optional"),": Add a PAF"," ",n.a.createElement("a",{href:"https://github.com/lh3/miniasm/blob/master/PAF.md"},"(pairwise mapping format)")," ","file for the linear synteny view. Note that the first assembly should be the left column of the PAF and the second assembly should be the right column. PAF-like files from MashMap (.out) are also allowed"),n.a.createElement(y.a,{item:!0},n.a.createElement(j.FileSelector,{name:"URL",description:"",location:A,setLocation:function(e){return S(e)}})))),n.a.createElement(y.a,{container:!0,justifyContent:"center"},n.a.createElement(y.a,{item:!0},n.a.createElement(w.a,{disabled:!!H,onClick:function(){return V.apply(this,arguments)},variant:"contained",color:"primary"},"Open"))))})),C=x,N=Object(c.observer)((function(e){var t=e.model;return n.a.createElement(o.a,{onClick:function(){t.toggleCurves()},title:"Toggle drawing straight or curved synteny lines"},t.drawCurves?n.a.createElement(i.b,{color:"secondary"}):n.a.createElement(i.a,{color:"secondary"}))})),A=Object(c.observer)((function(e){var t=e.model;return t.initialized?n.a.createElement(l.default,{model:t,ExtraButtons:n.a.createElement(N,{model:t})}):n.a.createElement(C,{model:t})}));t.default=A},958:function(e,t,a){"use strict";a.r(t);var r=a(29),n=a(1),c=a.n(n),o=a(84),l=a(79),i=a(51),s=a(85),m=a(118),u=a(1646),d=a(1642),p=a(132),f=a(458),b=a.n(f),v=a(459),E=a.n(v),g=a(350),y=a.n(g),h=Object(i.a)((function(){return{headerBar:{gridArea:"1/1/auto/span 2",display:"flex"},spacer:{flexGrow:1},bp:{display:"flex",alignItems:"center",marginLeft:10},searchContainer:{marginLeft:5}}})),w=Object(o.observer)((function(e){var t=e.model;return c.a.createElement(u.a,{onClick:t.toggleLinkViews,title:"Toggle linked scrolls and behavior across views"},t.linkViews?c.a.createElement(E.a,{color:"secondary"}):c.a.createElement(b.a,{color:"secondary"}))})),j=Object(o.observer)((function(e){var t=e.model;return c.a.createElement(u.a,{onClick:t.squareView,title:"Square view (make both the same zoom level)"},c.a.createElement(y.a,{color:"secondary"}))})),O=Object(o.observer)((function(e){var t=e.model,a=e.ExtraButtons,r=h(),n=t.views.some((function(e){return!e.hideHeader}));return c.a.createElement("div",{className:r.headerBar},c.a.createElement(w,{model:t}),c.a.createElement(j,{model:t}),a,n?null:t.views.map((function(e){return c.a.createElement("div",{key:e.id,className:r.searchContainer},c.a.createElement(p.c,{model:e,showHelp:!1}))})),t.views.map((function(e){return c.a.createElement(d.a,{key:e.id,variant:"body2",color:"textSecondary",className:r.bp},Math.round(e.coarseTotalBp).toLocaleString("en-US")," bp")})),c.a.createElement("div",{className:r.spacer}))})),k=Object(i.a)((function(){return{container:{display:"grid"},overlay:{zIndex:100,gridArea:"1/1"},content:{gridArea:"1/1",position:"relative"},grid:{display:"grid"},relative:{position:"relative"}}})),x=Object(o.observer)((function(e){var t=e.model,a=k();return c.a.createElement(c.a.Fragment,null,t.tracks.map((function(e){var n=Object(r.a)(e.displays,1)[0],o=n.RenderingComponent,i=Object(l.getConf)(e,"trackId");return o?c.a.createElement("div",{className:a.overlay,key:i,style:{height:t.middleComparativeHeight,overflow:"hidden"}},c.a.createElement(o,{model:n})):null})))})),C=Object(o.observer)((function(e){var t=e.model,a=e.ExtraButtons,r=k(),n=t.views,o=Object(s.getEnv)(t).pluginManager.getViewType(n[0].type).ReactComponent;return c.a.createElement("div",null,c.a.createElement(O,{ExtraButtons:a,model:t}),c.a.createElement("div",{className:r.container},c.a.createElement(o,{model:n[0]}),c.a.createElement("div",{className:r.grid},c.a.createElement(x,{model:t})),c.a.createElement(m.ResizeHandle,{onDrag:function(e){return t.setMiddleComparativeHeight(t.middleComparativeHeight+e)},style:{height:4,background:"#ccc"}}),c.a.createElement(o,{model:n[1]})))})),N=Object(o.observer)((function(e){var t=e.model,a=e.ExtraButtons,r=k(),n=t.views,o=Object(s.getEnv)(t).pluginManager;return c.a.createElement("div",null,c.a.createElement(O,{model:t,ExtraButtons:a}),c.a.createElement("div",{className:r.container},c.a.createElement("div",{className:r.content},c.a.createElement("div",{className:r.relative},n.map((function(e){var t=o.getViewType(e.type).ReactComponent;return c.a.createElement(t,{key:e.id,model:e})}))),c.a.createElement(x,{model:t}))))})),A=Object(o.observer)((function(e){return e.model.tracks.some((function(e){return e.displays.some((function(e){return Object(l.getConf)(e,"middle")}))}))?c.a.createElement(C,e):c.a.createElement(N,e)}));t.default=A}}]);
//# sourceMappingURL=40.5b2c6c8b.chunk.js.map