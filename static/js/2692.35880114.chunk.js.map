{"version":3,"file":"static/js/2692.35880114.chunk.js","mappings":"iVAiBMA,GAAYC,EAAAA,EAAAA,IAAW,SAAAC,GAAK,MAAK,CACrCC,YAAa,CACXC,SAAU,WACVC,MAAOH,EAAMI,QAAQ,GACrBC,IAAKL,EAAMI,QAAQ,GACnBE,MAAON,EAAMO,QAAQC,KAAK,UAIf,SAASC,EAAT,GAMX,IALFC,EAKC,EALDA,OACAC,EAIC,EAJDA,YAKMC,EAAUd,IAChB,GAAwBe,EAAAA,EAAAA,YAAxB,eAAOC,EAAP,KAAaC,EAAb,KACA,GAA0BF,EAAAA,EAAAA,YAA1B,eAAOG,EAAP,KAAcC,EAAd,KACMC,GAAUC,EAAAA,EAAAA,YAAWT,GACnBU,EAAeF,EAAfE,WACFC,GAAOC,EAAAA,EAAAA,gBAAeZ,IAE5Ba,EAAAA,EAAAA,YAAU,WACR,IAAMC,EAAU,IAAIC,gBACZC,EAAWF,EAAXE,OACJC,GAAY,EAmBhB,OAlBC,iBAAC,sGAEQC,GAAgBN,EAAAA,EAAAA,gBAAeZ,EAAQ,WAF/C,SAGuBU,EAAWS,KAAKnB,EAAOoB,QAAS,cAAe,CAClEF,cAAAA,EACAF,OAAAA,IALJ,OAGQK,EAHR,OAOOJ,GACHZ,EAAQgB,GARZ,gDAWOJ,IACHK,QAAQhB,MAAR,MACAC,EAAS,EAAD,KAbZ,wDAAD,GAkBM,WACLO,EAAQS,QACRN,GAAY,KAEb,CAACjB,EAAQU,IAEZ,IAAIc,GAAYZ,EAAAA,EAAAA,gBAAeZ,EAAQ,QACA,4BAAnCY,EAAAA,EAAAA,gBAAeZ,EAAQ,UACzBwB,EAAY,qBACZhB,EAAQiB,WAAWC,SAAQ,SAAAC,GACrBA,EAASC,WAAa5B,EAAO6B,gBAC/BL,EAAS,+BAA0BZ,EAAAA,EAAAA,gBAAee,EAAU,QAAnD,UAKf,IAAMG,EACY,kBAAT1B,EACH,CACE2B,OAAO,QAAD,OAAU3B,EACb4B,QAAQ,KAAM,QACdA,QAAQ,KAAM,QAFX,WAIR5B,GAAQ,GACd,OACE,UAAC,IAAD,CAAQ6B,MAAI,EAACC,QAASjC,EAAtB,WACE,UAAC,IAAD,WACGuB,GACD,SAAC,IAAD,CACEW,UAAWjC,EAAQX,YACnB6C,QAAS,kBAAMnC,KAFjB,UAIE,SAAC,IAAD,UAGJ,UAAC,IAAD,YACE,SAAC,EAAAoC,SAAD,CAAUC,MAAM,gBAAhB,UACE,SAAC,EAAAC,WAAD,CACEC,WAAY7B,EACZ8B,KAAM,CAAC,WAAY,UAAW,gBAGxB,OAATrC,GACC,SAAC,EAAAiC,SAAD,CAAUC,MAAM,YAAhB,SACGhC,GACC,SAAC,IAAD,CAAYV,MAAM,QAAlB,mBAA8BU,KAC3BF,GAGH,SAAC,EAAAmC,WAAD,CAAYC,WAAYV,IAFxB,yBAKF","sources":["../../../packages/core/ui/AboutDialog.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogTitle,\n  IconButton,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close'\nimport { readConfObject } from '../configuration'\nimport { getSession } from '../util'\nimport { BaseCard, Attributes } from '../BaseFeatureWidget/BaseFeatureDetail'\nimport { AnyConfigurationModel } from '../configuration/configurationSchema'\n\ntype FileInfo = Record<string, unknown> | string\n\nconst useStyles = makeStyles(theme => ({\n  closeButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500],\n  },\n}))\n\nexport default function AboutDialog({\n  config,\n  handleClose,\n}: {\n  config: AnyConfigurationModel\n  handleClose: () => void\n}) {\n  const classes = useStyles()\n  const [info, setInfo] = useState<FileInfo>()\n  const [error, setError] = useState<unknown>()\n  const session = getSession(config)\n  const { rpcManager } = session\n  const conf = readConfObject(config)\n\n  useEffect(() => {\n    const aborter = new AbortController()\n    const { signal } = aborter\n    let cancelled = false\n    ;(async () => {\n      try {\n        const adapterConfig = readConfObject(config, 'adapter')\n        const result = await rpcManager.call(config.trackId, 'CoreGetInfo', {\n          adapterConfig,\n          signal,\n        })\n        if (!cancelled) {\n          setInfo(result as FileInfo)\n        }\n      } catch (e) {\n        if (!cancelled) {\n          console.error(e)\n          setError(e)\n        }\n      }\n    })()\n\n    return () => {\n      aborter.abort()\n      cancelled = true\n    }\n  }, [config, rpcManager])\n\n  let trackName = readConfObject(config, 'name')\n  if (readConfObject(config, 'type') === 'ReferenceSequenceTrack') {\n    trackName = 'Reference Sequence'\n    session.assemblies.forEach(assembly => {\n      if (assembly.sequence === config.configuration) {\n        trackName = `Reference Sequence (${readConfObject(assembly, 'name')})`\n      }\n    })\n  }\n\n  const details =\n    typeof info === 'string'\n      ? {\n          header: `<pre>${info\n            .replace(/</g, '&lt;')\n            .replace(/>/g, '&gt;')}</pre>`,\n        }\n      : info || {}\n  return (\n    <Dialog open onClose={handleClose}>\n      <DialogTitle>\n        {trackName}\n        <IconButton\n          className={classes.closeButton}\n          onClick={() => handleClose()}\n        >\n          <CloseIcon />\n        </IconButton>\n      </DialogTitle>\n      <DialogContent>\n        <BaseCard title=\"Configuration\">\n          <Attributes\n            attributes={conf}\n            omit={['displays', 'baseUri', 'refNames']}\n          />\n        </BaseCard>\n        {info !== null ? (\n          <BaseCard title=\"File info\">\n            {error ? (\n              <Typography color=\"error\">{`${error}`}</Typography>\n            ) : !info ? (\n              'Loading file data...'\n            ) : (\n              <Attributes attributes={details} />\n            )}\n          </BaseCard>\n        ) : null}\n      </DialogContent>\n    </Dialog>\n  )\n}\n"],"names":["useStyles","makeStyles","theme","closeButton","position","right","spacing","top","color","palette","grey","AboutDialog","config","handleClose","classes","useState","info","setInfo","error","setError","session","getSession","rpcManager","conf","readConfObject","useEffect","aborter","AbortController","signal","cancelled","adapterConfig","call","trackId","result","console","abort","trackName","assemblies","forEach","assembly","sequence","configuration","details","header","replace","open","onClose","className","onClick","BaseCard","title","Attributes","attributes","omit"],"sourceRoot":""}