{"version":3,"file":"static/js/7722.3c0cc0f3.chunk.js","mappings":"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KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,KAAO,WAAW,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","sources":["../../../packages/core/rpc/remoteAbortSignals.ts","../../../packages/core/ui/AssemblySelector.tsx","../../../packages/core/ui/CascadingMenu.tsx","../../../packages/core/ui/EditableTypography.tsx","../../../packages/core/ui/ErrorMessage.tsx","../../../packages/core/ui/FactoryResetDialog.tsx","../../../packages/core/ui/FileSelector/FileSelector.tsx","../../../packages/core/ui/FileSelector/index.ts","../../../packages/core/ui/Menu.tsx","../../../packages/core/ui/ResizeHandle.tsx","../../../packages/core/ui/theme.ts","../../../packages/core/ui/Logo.tsx","../../../packages/core/ui/App.tsx","../../../packages/core/ui/ReturnToImportFormDialog.tsx","../../../packages/core/ui/PrerenderedCanvas.tsx","../../../packages/core/ui/Tooltip.tsx","../../../packages/core/ui/SanitizedHTML.tsx","../../../packages/core/util/aborting.ts","../../../packages/core/util/offscreenCanvasPonyfill.tsx","../../../packages/core/util/offscreenCanvasUtils.tsx","../../../packages/core/util/types/index.ts","../../../packages/core/util/when.ts","../../../packages/core/PluginManager.ts","../../../packages/core/PluginLoader.ts","../../../plugins/data-management/src/index.ts","corePlugins.ts","rpc.worker.ts","workerPolyfill.js","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/compat get default export","../webpack/runtime/create fake namespace object","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/global","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/node module decorator","../webpack/runtime/runtimeId","../webpack/runtime/publicPath","../webpack/runtime/importScripts chunk loading","../webpack/runtime/nonce","../webpack/runtime/startup chunk dependencies","../webpack/startup"],"sourcesContent":["/* ---------------- for the RPC client ----------------- */\n\nlet abortSignalCounter = 0\nexport type RemoteAbortSignal = { abortSignalId: number }\nconst abortSignalIds: WeakMap<AbortSignal, number> = new WeakMap() // map of abortsignal => numerical ID\n\n/**\n * assign an ID to the given abort signal and return a plain object representation\n * @param signal - the signal to serialize\n * @param callfunc - function used to call\n *  a remote method, will be called like callfunc('signalAbort', signalId)\n */\nexport function serializeAbortSignal(\n  signal: AbortSignal,\n  callfunc: (name: string, abortSignalId: number) => void,\n): RemoteAbortSignal {\n  let abortSignalId = abortSignalIds.get(signal)\n  if (!abortSignalId) {\n    abortSignalCounter += 1\n    abortSignalIds.set(signal, abortSignalCounter)\n    abortSignalId = abortSignalCounter\n    signal.addEventListener('abort', () => {\n      const signalId = abortSignalIds.get(signal)\n      if (signalId !== undefined) {\n        callfunc('signalAbort', signalId)\n      }\n    })\n  }\n  return { abortSignalId }\n}\n\n/* ---------------- for the RPC server ----------------- */\n\n/**\n * test whether a given object\n * @param thing - the thing to test\n * @returns true if the thing is a remote abort signal\n */\nexport function isRemoteAbortSignal(\n  thing: unknown,\n): thing is RemoteAbortSignal {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'abortSignalId' in thing &&\n    // @ts-ignore\n    typeof thing.abortSignalId === 'number'\n  )\n}\n\n// the server side keeps a set of surrogate abort controllers that can be\n// aborted based on ID\nconst surrogateAbortControllers: Map<number, AbortController> = new Map() // numerical ID => surrogate abort controller\n\n/**\n * deserialize the result of serializeAbortSignal into an AbortSignal\n *\n * @param signal -\n * @returns an abort signal that corresponds to the given ID\n */\nexport function deserializeAbortSignal({\n  abortSignalId,\n}: RemoteAbortSignal): AbortSignal {\n  let surrogateAbortController = surrogateAbortControllers.get(abortSignalId)\n  if (!surrogateAbortController) {\n    surrogateAbortController = new AbortController()\n    surrogateAbortControllers.set(abortSignalId, surrogateAbortController)\n  }\n  return surrogateAbortController.signal\n}\n\n/**\n * fire an abort signal from a remote abort signal ID\n *\n * @param abortSignalId -\n */\nexport function remoteAbort(props: { signalId: number }) {\n  const { signalId: abortSignalId } = props\n  const surrogateAbortController = surrogateAbortControllers.get(abortSignalId)\n\n  if (surrogateAbortController) {\n    surrogateAbortController.abort()\n  }\n}\n\nexport function remoteAbortRpcHandler() {\n  return {\n    signalAbort: remoteAbort,\n  }\n}\n","import React, { useState, useEffect } from 'react'\nimport { TextField, MenuItem, InputProps as IIP } from '@mui/material'\nimport { observer } from 'mobx-react'\nimport { makeStyles } from 'tss-react/mui'\n\n// locals\nimport { getConf } from '../configuration'\nimport { useLocalStorage, AbstractSessionModel } from '../util'\n\nconst useStyles = makeStyles()({\n  importFormEntry: {\n    minWidth: 180,\n  },\n})\n\nconst AssemblySelector = observer(\n  ({\n    session,\n    onChange,\n    selected,\n    InputProps,\n    extra = 0,\n  }: {\n    session: AbstractSessionModel\n    onChange: (arg: string) => void\n    selected?: string\n    InputProps?: IIP\n    extra?: unknown\n  }) => {\n    const { classes } = useStyles()\n    const { assemblyNames, assemblyManager } = session\n\n    // constructs a localstorage key based on host/path/config to help\n    // remember. non-config assists usage with e.g. embedded apps\n    const config = new URLSearchParams(window.location.search).get('config')\n    const [lastSelected, setLastSelected] =\n      typeof jest === 'undefined'\n        ? useLocalStorage(\n            `lastAssembly-${[\n              window.location.host + window.location.pathname,\n              config,\n              extra,\n            ].join('-')}`,\n            selected,\n          )\n        : useState(selected)\n\n    const selection = assemblyNames.includes(lastSelected || '')\n      ? lastSelected\n      : selected\n\n    useEffect(() => {\n      if (selection && selection !== selected) {\n        onChange(selection)\n      }\n    }, [selection, onChange, selected])\n\n    const error = assemblyNames.length ? '' : 'No configured assemblies'\n    return (\n      <TextField\n        select\n        label=\"Assembly\"\n        variant=\"outlined\"\n        helperText={error || 'Select assembly to view'}\n        value={selection || ''}\n        inputProps={{ 'data-testid': 'assembly-selector' }}\n        onChange={event => setLastSelected(event.target.value)}\n        error={!!error}\n        InputProps={InputProps}\n        disabled={!!error}\n        className={classes.importFormEntry}\n      >\n        {assemblyNames.map(name => {\n          const assembly = assemblyManager.get(name)\n          const displayName = assembly ? getConf(assembly, 'displayName') : ''\n          return (\n            <MenuItem key={name} value={name}>\n              {displayName || name}\n            </MenuItem>\n          )\n        })}\n      </TextField>\n    )\n  },\n)\n\nexport default AssemblySelector\n","import React, { useContext, useMemo, useCallback } from 'react'\nimport {\n  Divider,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader,\n  Menu,\n  MenuItem,\n  PopoverOrigin,\n} from '@mui/material'\nimport { MenuItem as JBMenuItem, MenuItemEndDecoration } from './Menu'\nimport {\n  bindHover,\n  bindFocus,\n  bindMenu,\n  usePopupState,\n  PopupState,\n} from 'material-ui-popup-state/hooks'\nimport HoverMenu from 'material-ui-popup-state/HoverMenu'\nimport ChevronRight from '@mui/icons-material/ChevronRight'\n\nconst CascadingContext = React.createContext({\n  parentPopupState: null,\n  rootPopupState: null,\n} as { parentPopupState: PopupState | null; rootPopupState: PopupState | null })\n\nfunction CascadingMenuItem({\n  onClick,\n  ...props\n}: {\n  onClick?: Function\n  disabled?: boolean\n  children: React.ReactNode\n}) {\n  const { rootPopupState } = useContext(CascadingContext)\n  if (!rootPopupState) {\n    throw new Error('must be used inside a CascadingMenu')\n  }\n  const handleClick = useCallback(\n    (event: React.MouseEvent) => {\n      rootPopupState.close()\n      onClick?.(event)\n    },\n    [rootPopupState, onClick],\n  )\n\n  return <MenuItem {...props} onClick={handleClick} />\n}\n\nfunction CascadingSubmenu({\n  title,\n  inset,\n  popupId,\n  ...props\n}: {\n  children: React.ReactNode\n  title: string\n  onMenuItemClick: Function\n  menuItems: JBMenuItem[]\n  inset: boolean\n  popupId: string\n}) {\n  const { parentPopupState } = React.useContext(CascadingContext)\n  const popupState = usePopupState({\n    popupId,\n    variant: 'popover',\n    parentPopupState,\n  })\n  return (\n    <>\n      <MenuItem {...bindHover(popupState)} {...bindFocus(popupState)}>\n        <ListItemText primary={title} inset={inset} />\n        <ChevronRight />\n      </MenuItem>\n      <CascadingSubmenuHover\n        {...props}\n        anchorOrigin={{ vertical: 'top', horizontal: 'right' }}\n        transformOrigin={{ vertical: 'top', horizontal: 'left' }}\n        popupState={popupState}\n      />\n    </>\n  )\n}\n\nfunction CascadingSubmenuHover({\n  popupState,\n  onMenuItemClick,\n  menuItems,\n  classes,\n  ...props\n}: {\n  classes?: Record<string, string>\n  popupState: PopupState\n  anchorOrigin: PopoverOrigin\n  transformOrigin: PopoverOrigin\n  onMenuItemClick: Function\n  menuItems: JBMenuItem[]\n}) {\n  const { rootPopupState } = useContext(CascadingContext)\n  const context = useMemo(\n    () => ({\n      rootPopupState: rootPopupState || popupState,\n      parentPopupState: popupState,\n    }),\n    [rootPopupState, popupState],\n  )\n\n  return (\n    <CascadingContext.Provider value={context}>\n      <HoverMenu {...props} {...bindMenu(popupState)} />\n    </CascadingContext.Provider>\n  )\n}\n\nfunction CascadingMenu({\n  popupState,\n  onMenuItemClick,\n  menuItems,\n  ...props\n}: {\n  popupState: PopupState\n  onMenuItemClick: Function\n  menuItems: JBMenuItem[]\n}) {\n  const { rootPopupState } = React.useContext(CascadingContext)\n  const context = React.useMemo(\n    () => ({\n      rootPopupState: rootPopupState || popupState,\n      parentPopupState: popupState,\n    }),\n    [rootPopupState, popupState],\n  )\n\n  return (\n    <CascadingContext.Provider value={context}>\n      <Menu {...props} {...bindMenu(popupState)} />\n    </CascadingContext.Provider>\n  )\n}\n\nfunction EndDecoration({ item }: { item: JBMenuItem }) {\n  if ('subMenu' in item) {\n    return <MenuItemEndDecoration type=\"subMenu\" />\n  } else if (item.type === 'checkbox' || item.type === 'radio') {\n    return (\n      <MenuItemEndDecoration\n        type={item.type}\n        checked={item.checked}\n        disabled={item.disabled}\n      />\n    )\n  }\n  return null\n}\n\nfunction CascadingMenuList({\n  onMenuItemClick,\n  menuItems,\n  ...props\n}: {\n  menuItems: JBMenuItem[]\n  onMenuItemClick: Function\n}) {\n  function handleClick(callback: Function) {\n    return (event: React.MouseEvent<HTMLLIElement, MouseEvent>) => {\n      onMenuItemClick(event, callback)\n    }\n  }\n\n  const hasIcon = menuItems.some(\n    menuItem => 'icon' in menuItem && menuItem.icon,\n  )\n  return (\n    <>\n      {menuItems.map((item, idx) => {\n        return 'subMenu' in item ? (\n          <CascadingSubmenu\n            key={`subMenu-${item.label}-${idx}`}\n            popupId={`subMenu-${item.label}`}\n            title={item.label}\n            inset={hasIcon}\n            onMenuItemClick={onMenuItemClick}\n            menuItems={item.subMenu}\n          >\n            <CascadingMenuList\n              {...props}\n              onMenuItemClick={onMenuItemClick}\n              menuItems={item.subMenu}\n            />\n          </CascadingSubmenu>\n        ) : item.type === 'divider' ? (\n          <Divider key={`divider-${idx}`} component=\"li\" />\n        ) : item.type === 'subHeader' ? (\n          <ListSubheader key={`subHeader-${item.label}-${idx}`}>\n            {item.label}\n          </ListSubheader>\n        ) : (\n          <CascadingMenuItem\n            key={`${item.label}-${idx}`}\n            onClick={'onClick' in item ? handleClick(item.onClick) : undefined}\n            disabled={Boolean(item.disabled)}\n          >\n            {item.icon ? (\n              <ListItemIcon>\n                <item.icon />\n              </ListItemIcon>\n            ) : null}{' '}\n            <ListItemText\n              primary={item.label}\n              secondary={item.subLabel}\n              inset={hasIcon && !item.icon}\n            />\n            <div style={{ flexGrow: 1, minWidth: 10 }} />\n            <EndDecoration item={item} />\n          </CascadingMenuItem>\n        )\n      })}\n    </>\n  )\n}\n\nfunction CascadingMenuChildren(props: {\n  onMenuItemClick: Function\n  menuItems: JBMenuItem[]\n  popupState: PopupState\n}) {\n  return (\n    <CascadingMenu {...props}>\n      <CascadingMenuList {...props} />\n    </CascadingMenu>\n  )\n}\n\nexport default CascadingMenuChildren\n","import React, { useEffect, useState } from 'react'\nimport { InputBase, Typography, TypographyProps, useTheme } from '@mui/material'\nimport { makeStyles } from 'tss-react/mui'\n\ntype Variant = TypographyProps['variant']\n\ntype EditableTypographyClassKey =\n  | 'input'\n  | 'inputBase'\n  | 'inputRoot'\n  | 'inputFocused'\n\nconst useStyles = makeStyles()(theme => ({\n  input: {},\n  inputBase: {},\n  typography: {\n    top: 6,\n    left: 2,\n    position: 'absolute',\n    whiteSpace: 'nowrap',\n    visibility: 'hidden',\n  },\n  inputRoot: {\n    padding: theme.spacing(0.5),\n  },\n  inputFocused: {\n    borderStyle: 'solid',\n    borderWidth: 2,\n  },\n}))\n\ninterface Props {\n  value: string\n  setValue: (value: string) => void\n  variant: Variant\n  classes?: Partial<Record<EditableTypographyClassKey, string>>\n}\n\n// using forwardRef so that MUI Tooltip can wrap this component\nconst EditableTypography = React.forwardRef<HTMLDivElement, Props>(\n  (props, ref) => {\n    const { value, setValue, variant, ...other } = props\n    const [editedValue, setEditedValue] = useState<string>()\n    const [sizerNode, setSizerNode] = useState<HTMLSpanElement | null>(null)\n    const [inputNode, setInputNode] = useState<HTMLInputElement | null>(null)\n    const [blur, setBlur] = useState(false)\n\n    useEffect(() => {\n      if (blur) {\n        inputNode?.blur()\n        setBlur(false)\n      }\n    }, [blur, inputNode])\n\n    // possibly tss-react does not understand the passing of props to\n    // useStyles, but it appears to work\n    // @ts-ignore\n    const { classes } = useStyles(props, { props })\n    const theme = useTheme()\n\n    const clientWidth = sizerNode?.clientWidth\n    const width = clientWidth || 0\n\n    const val = editedValue === undefined ? value : editedValue\n\n    return (\n      <div {...other} ref={ref}>\n        <div style={{ position: 'relative' }}>\n          <Typography\n            ref={(node: HTMLSpanElement) => setSizerNode(node)}\n            component=\"span\"\n            variant={variant}\n            className={classes.typography}\n          >\n            {val}\n          </Typography>\n        </div>\n        <InputBase\n          inputRef={node => setInputNode(node)}\n          className={classes.inputBase}\n          inputProps={{\n            style: {\n              width,\n              ...(variant && variant !== 'inherit'\n                ? theme.typography[variant]\n                : {}),\n            },\n          }}\n          classes={{\n            input: classes.input,\n            root: classes.inputRoot,\n            focused: classes.inputFocused,\n          }}\n          value={val}\n          onChange={event => setEditedValue(event.target.value)}\n          onKeyDown={event => {\n            if (event.key === 'Enter') {\n              inputNode?.blur()\n            } else if (event.key === 'Escape') {\n              setEditedValue(undefined)\n              setBlur(true)\n            }\n          }}\n          onBlur={() => {\n            setValue(editedValue || '')\n            setEditedValue(undefined)\n          }}\n        />\n      </div>\n    )\n  },\n)\n\nexport default EditableTypography\n","import React from 'react'\n\nconst ErrorMessage = ({ error }: { error: unknown }) => {\n  let snapshotError = ''\n  let str = `${error}`\n  const findStr = 'is not assignable'\n  const idx = str.indexOf(findStr)\n  if (idx !== -1) {\n    const trim = str.slice(0, idx + findStr.length)\n    // best effort to make a better error message than the default\n    // mobx-state-tree\n\n    // case 1. element has a path\n    const match = trim.match(\n      /.*at path \"(.*)\" snapshot `(.*)` is not assignable/m,\n    )\n    if (match) {\n      str = `Failed to load element at ${match[1]}...Failed element had snapshot`\n      snapshotError = match[2]\n    }\n\n    // case 2. element has no path\n    const match2 = trim.match(/.*snapshot `(.*)` is not assignable/)\n    if (match2) {\n      str = `Failed to load element...Failed element had snapshot`\n      snapshotError = match2[1]\n    }\n  }\n  return (\n    <div\n      style={{\n        padding: 4,\n        margin: 4,\n        overflow: 'auto',\n        maxHeight: 200,\n        background: '#f88',\n        border: '1px solid black',\n      }}\n    >\n      {str.slice(0, 10000)}\n      {snapshotError ? (\n        <pre\n          style={{\n            background: 'lightgrey',\n            border: '1px solid black',\n            margin: 20,\n          }}\n        >\n          {JSON.stringify(JSON.parse(snapshotError), null, 2)}\n        </pre>\n      ) : null}\n    </div>\n  )\n}\n\nexport default ErrorMessage\n","import Button from '@mui/material/Button'\nimport Dialog from '@mui/material/Dialog'\nimport DialogTitle from '@mui/material/DialogTitle'\nimport DialogContent from '@mui/material/DialogContent'\nimport DialogContentText from '@mui/material/DialogContentText'\nimport DialogActions from '@mui/material/DialogActions'\nimport React from 'react'\n\nexport default ({\n  onClose,\n  open,\n  onFactoryReset,\n}: {\n  onClose: Function\n  open: boolean\n  onFactoryReset: Function\n}) => {\n  function handleDialogClose(action?: string) {\n    if (action === 'reset') {\n      onFactoryReset()\n    }\n    onClose()\n  }\n\n  return (\n    <Dialog open={open} onClose={() => handleDialogClose()}>\n      <DialogTitle id=\"alert-dialog-title\">Reset</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">\n          Are you sure you want to reset? This will restore the default\n          configuration.\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={() => handleDialogClose()} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={() => handleDialogClose('reset')}\n          color=\"primary\"\n          variant=\"contained\"\n        >\n          OK\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n","import React, { useState } from 'react'\nimport { observer } from 'mobx-react'\nimport {\n  Box,\n  FormHelperText,\n  InputLabel,\n  Menu,\n  MenuItem,\n  Tooltip,\n  ToggleButtonGroup,\n  ToggleButton,\n  ToggleButtonProps,\n} from '@mui/material'\n\n// locals\nimport {\n  FileLocation,\n  UriLocation,\n  AbstractRootModel,\n  isUriLocation,\n  isAppRootModel,\n} from '../../util/types'\nimport LocalFileChooser from './LocalFileChooser'\nimport UrlChooser from './UrlChooser'\n\n// icons\nimport ArrowDropDownIcon from '@mui/icons-material/ArrowDropDown'\n\nfunction ToggleButtonWithTooltip(props: ToggleButtonProps) {\n  const { title, children, ...other } = props\n  return (\n    <Tooltip title={title || ''}>\n      <ToggleButton {...other}>{children}</ToggleButton>\n    </Tooltip>\n  )\n}\n\nfunction shorten(str: string, len: number) {\n  if (typeof str === 'string' && str.length > len) {\n    return `${str.substring(0, len)}…`\n  }\n  return str\n}\n\nconst FileSelector = observer(\n  (props: {\n    location?: FileLocation\n    setLocation: (param: FileLocation) => void\n    setName?: (str: string) => void\n    name?: string\n    description?: string\n    rootModel?: AbstractRootModel\n  }) => {\n    const { location, name, description, rootModel, setLocation } = props\n    const fileOrUrl = !location || isUriLocation(location) ? 'url' : 'file'\n    const [toggleButtonValue, setToggleButtonValue] = useState(\n      location && 'internetAccountId' in location && location.internetAccountId\n        ? location.internetAccountId\n        : fileOrUrl,\n    )\n    const accts = isAppRootModel(rootModel)\n      ? rootModel.internetAccounts.slice()\n      : []\n    const numShown = 2\n    const [shownAccts, setShownAccts] = useState(accts.slice(0, numShown))\n    const [hiddenAccts, setHiddenAccts] = useState(accts.slice(numShown))\n    const [anchorEl, setAnchorEl] = useState<HTMLElement | null>(null)\n\n    const selectedAcct = accts.find(\n      ia => ia.internetAccountId === toggleButtonValue,\n    )\n\n    const setLocationWithAccount = (location: UriLocation) => {\n      setLocation({\n        ...location,\n        internetAccountId: selectedAcct\n          ? selectedAcct.internetAccountId\n          : undefined,\n      })\n    }\n\n    // if you swap account selection after inputting url\n    if (\n      location &&\n      selectedAcct &&\n      isUriLocation(location) &&\n      location.internetAccountId !== selectedAcct.internetAccountId\n    ) {\n      setLocationWithAccount(location)\n    }\n\n    let locationInput = (\n      <UrlChooser\n        {...props}\n        setLocation={setLocationWithAccount}\n        label={selectedAcct?.selectorLabel}\n      />\n    )\n    if (toggleButtonValue === 'file') {\n      locationInput = <LocalFileChooser {...props} />\n    }\n    if (selectedAcct?.SelectorComponent) {\n      const { SelectorComponent } = selectedAcct\n      locationInput = (\n        <SelectorComponent {...props} setLocation={setLocationWithAccount} />\n      )\n    }\n\n    return (\n      <>\n        <Box display=\"flex\">\n          <InputLabel shrink>{name}</InputLabel>\n        </Box>\n        <Box display=\"flex\" flexDirection=\"row\">\n          <Box>\n            <ToggleButtonGroup\n              value={toggleButtonValue}\n              exclusive\n              onChange={(_event, newState) => {\n                if (newState) {\n                  setToggleButtonValue(newState)\n                }\n                if (isUriLocation(location)) {\n                  setLocationWithAccount(location)\n                }\n              }}\n              aria-label=\"file, url, or account picker\"\n            >\n              {new URLSearchParams(window.location.search).get(\n                'adminKey',\n              ) ? null : (\n                <ToggleButton value=\"file\" aria-label=\"local file\">\n                  File\n                </ToggleButton>\n              )}\n              <ToggleButton value=\"url\" aria-label=\"url\">\n                URL\n              </ToggleButton>\n              {shownAccts.map(({ internetAccountId, toggleContents, name }) => (\n                <ToggleButtonWithTooltip\n                  key={internetAccountId}\n                  value={internetAccountId}\n                  aria-label={name}\n                  title={name}\n                >\n                  {typeof toggleContents === 'string'\n                    ? shorten(toggleContents, 5)\n                    : toggleContents || shorten(name, 5)}\n                </ToggleButtonWithTooltip>\n              ))}\n              {hiddenAccts.length ? (\n                // @ts-ignore\n                <ToggleButton\n                  onClick={event => setAnchorEl(event.target as HTMLElement)}\n                  selected={false}\n                >\n                  More\n                  <ArrowDropDownIcon />\n                </ToggleButton>\n              ) : null}\n            </ToggleButtonGroup>\n\n            <Menu\n              open={Boolean(anchorEl)}\n              anchorEl={anchorEl}\n              onClose={() => setAnchorEl(null)}\n              anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'center',\n              }}\n              transformOrigin={{\n                vertical: 'top',\n                horizontal: 'center',\n              }}\n            >\n              {hiddenAccts?.map((acct, idx) => (\n                <MenuItem\n                  key={acct.internetAccountId}\n                  value={acct.internetAccountId}\n                  onClick={() => {\n                    const prev = shownAccts[shownAccts.length - 1]\n                    setShownAccts([\n                      ...shownAccts.slice(0, shownAccts.length - 1),\n                      acct,\n                    ])\n                    setHiddenAccts([\n                      prev,\n                      ...hiddenAccts.slice(0, idx),\n                      ...hiddenAccts.slice(idx + 1),\n                    ])\n                    setToggleButtonValue(acct.internetAccountId)\n                    setAnchorEl(null)\n                  }}\n                >\n                  {acct.name}\n                </MenuItem>\n              ))}\n            </Menu>\n          </Box>\n        </Box>\n        {locationInput}\n        <FormHelperText>{description}</FormHelperText>\n      </>\n    )\n  },\n)\n\nexport default FileSelector\n","import FileSelector from './FileSelector'\n\nexport default FileSelector\n","import React, { useEffect, useRef, useState } from 'react'\nimport {\n  Divider,\n  Grow,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader,\n  MenuProps as MUIMenuProps,\n  MenuItem as MUIMenuItem,\n  MenuItemProps,\n  MenuList,\n  Paper,\n  Popover,\n  PopoverProps,\n  SvgIconProps,\n} from '@mui/material'\nimport { makeStyles } from 'tss-react/mui'\n// icons\nimport ArrowRightIcon from '@mui/icons-material/ArrowRight'\nimport CheckBoxIcon from '@mui/icons-material/CheckBox'\nimport CheckBoxOutlineBlankIcon from '@mui/icons-material/CheckBoxOutlineBlank'\nimport RadioButtonCheckedIcon from '@mui/icons-material/RadioButtonChecked'\nimport RadioButtonUncheckedIcon from '@mui/icons-material/RadioButtonUnchecked'\n\n// other\nimport { findLastIndex } from '../util'\n\nconst useStyles = makeStyles()({\n  paper: {\n    position: 'fixed',\n    overflowY: 'auto',\n    overflowX: 'hidden',\n    // So we see the popover when it's empty.\n    minWidth: 16,\n    minHeight: 16,\n    maxWidth: 'calc(100% - 32px)',\n    maxHeight: 'calc(100% - 32px)',\n    top: 0,\n    left: 0,\n    // We disable the focus ring for mouse, touch and keyboard users.\n    outline: 0,\n  },\n  menuItemEndDecoration: {\n    padding: 0,\n    margin: 0,\n    height: 16,\n  },\n})\n\ninterface MenuItemEndDecorationSubMenuProps {\n  type: 'subMenu'\n}\n\ninterface MenuItemEndDecorationSelectorProps {\n  type: 'checkbox' | 'radio'\n  checked: boolean\n  disabled?: boolean\n}\n\ntype MenuItemEndDecorationProps =\n  | MenuItemEndDecorationSubMenuProps\n  | MenuItemEndDecorationSelectorProps\n\nexport function MenuItemEndDecoration(props: MenuItemEndDecorationProps) {\n  const { classes } = useStyles()\n  const { type } = props\n  let checked\n  let disabled\n  if ('checked' in props) {\n    ;({ checked, disabled } = props)\n  }\n  let icon\n  if (type === 'subMenu') {\n    icon = <ArrowRightIcon color=\"action\" />\n  } else if (type === 'checkbox') {\n    if (checked) {\n      const color = disabled ? 'inherit' : 'secondary'\n      icon = <CheckBoxIcon color={color} />\n    } else {\n      icon = <CheckBoxOutlineBlankIcon color=\"action\" />\n    }\n  } else if (type === 'radio') {\n    if (checked) {\n      const color = disabled ? 'inherit' : 'secondary'\n      icon = <RadioButtonCheckedIcon color={color} />\n    } else {\n      icon = <RadioButtonUncheckedIcon color=\"action\" />\n    }\n  }\n  return <div className={classes.menuItemEndDecoration}>{icon}</div>\n}\n\nexport interface MenuDivider {\n  priority?: number\n  type: 'divider'\n}\n\nexport interface MenuSubHeader {\n  type: 'subHeader'\n  priority?: number\n  label: string\n}\n\nexport interface BaseMenuItem {\n  label: string\n  priority?: number\n  subLabel?: string\n  icon?: React.ComponentType<SvgIconProps>\n  disabled?: boolean\n}\n\nexport interface NormalMenuItem extends BaseMenuItem {\n  type?: 'normal'\n  onClick: Function\n}\n\nexport interface CheckboxMenuItem extends BaseMenuItem {\n  type: 'checkbox'\n  checked: boolean\n  onClick: Function\n}\n\nexport interface RadioMenuItem extends BaseMenuItem {\n  type: 'radio'\n  checked: boolean\n  onClick: Function\n}\n\nexport interface SubMenuItem extends BaseMenuItem {\n  type?: 'subMenu'\n  subMenu: MenuItem[]\n}\n\nexport type MenuItem =\n  | MenuDivider\n  | MenuSubHeader\n  | NormalMenuItem\n  | CheckboxMenuItem\n  | RadioMenuItem\n  | SubMenuItem\n\ntype AnchorElProp = MUIMenuProps['anchorEl']\ntype OpenProp = MUIMenuProps['open']\ntype OnCloseProp = MUIMenuProps['onClose']\n\ninterface MenuPageProps {\n  menuItems: MenuItem[]\n  onMenuItemClick: (\n    event: React.MouseEvent<HTMLLIElement, MouseEvent>,\n    callback: Function,\n  ) => void\n  anchorEl?: AnchorElProp\n  open: OpenProp\n  onClose: OnCloseProp\n  top?: boolean\n}\n\ntype MenuItemStyleProp = MenuItemProps['style']\n\nfunction findNextValidIdx(menuItems: MenuItem[], currentIdx: number) {\n  const idx = menuItems\n    .slice(currentIdx + 1)\n    .findIndex(\n      menuItem =>\n        menuItem.type !== 'divider' &&\n        menuItem.type !== 'subHeader' &&\n        !menuItem.disabled,\n    )\n  if (idx === -1) {\n    return idx\n  }\n  return currentIdx + 1 + idx\n}\n\nfunction findPreviousValidIdx(menuItems: MenuItem[], currentIdx: number) {\n  return findLastIndex(\n    menuItems.slice(0, currentIdx),\n    menuItem =>\n      menuItem.type !== 'divider' &&\n      menuItem.type !== 'subHeader' &&\n      !menuItem.disabled,\n  )\n}\n\nconst MenuPage = React.forwardRef<HTMLDivElement, MenuPageProps>(\n  (props, ref) => {\n    const [subMenuAnchorEl, setSubMenuAnchorEl] = useState<HTMLElement>()\n    const [openSubMenuIdx, setOpenSubMenuIdx] = useState<number>()\n    const [isSubMenuOpen, setIsSubMenuOpen] = useState(false)\n    const [selectedMenuItemIdx, setSelectedMenuItemIdx] = useState<number>()\n    const [position, setPosition] = useState<{\n      top?: number\n      left?: number\n    }>()\n    const paperRef = useRef<HTMLDivElement | null>(null)\n    const { classes } = useStyles()\n\n    const {\n      menuItems,\n      onMenuItemClick,\n      open,\n      onClose,\n      anchorEl,\n      top = false,\n    } = props\n\n    useEffect(() => {\n      if (!open) {\n        setSubMenuAnchorEl(undefined)\n        setOpenSubMenuIdx(undefined)\n      }\n    }, [open])\n\n    useEffect(() => {\n      const shouldSubMenuBeOpen = open && Boolean(subMenuAnchorEl)\n      let timer: ReturnType<typeof setTimeout>\n      if (shouldSubMenuBeOpen && !isSubMenuOpen) {\n        timer = setTimeout(() => {\n          setIsSubMenuOpen(true)\n        }, 300)\n      } else if (!shouldSubMenuBeOpen && isSubMenuOpen) {\n        timer = setTimeout(() => {\n          setIsSubMenuOpen(false)\n        }, 300)\n      }\n      return () => {\n        clearTimeout(timer)\n      }\n    }, [isSubMenuOpen, open, subMenuAnchorEl])\n\n    useEffect(() => {\n      if (anchorEl) {\n        const rect = (anchorEl as HTMLElement).getBoundingClientRect()\n        if (position) {\n          if (\n            rect.top !== position.top ||\n            rect.left + rect.width !== position.left\n          ) {\n            setPosition({ top: rect.top, left: rect.left + rect.width })\n          }\n        } else {\n          setPosition({ top: rect.top, left: rect.left + rect.width })\n        }\n      } else if (!position) {\n        setPosition({})\n      }\n    }, [position, anchorEl])\n\n    const hasIcon = menuItems.some(\n      menuItem => 'icon' in menuItem && menuItem.icon,\n    )\n    const menuItemStyle: MenuItemStyleProp = {}\n\n    function handleClick(callback: Function) {\n      return (event: React.MouseEvent<HTMLLIElement, MouseEvent>) => {\n        onMenuItemClick(event, callback)\n      }\n    }\n\n    const ListContents = (\n      <>\n        <MenuList autoFocusItem={open && !isSubMenuOpen} dense>\n          {menuItems\n            .sort((a, b) => (b.priority || 0) - (a.priority || 0))\n            .map((menuItem, idx) => {\n              if (menuItem.type === 'divider') {\n                return <Divider key={`divider-${idx}`} component=\"li\" />\n              }\n              if (menuItem.type === 'subHeader') {\n                return (\n                  <ListSubheader key={`subHeader-${menuItem.label}-${idx}`}>\n                    {menuItem.label}\n                  </ListSubheader>\n                )\n              }\n              let icon = null\n              let endDecoration = null\n              if (menuItem.icon) {\n                const Icon = menuItem.icon\n                icon = (\n                  <ListItemIcon>\n                    <Icon />\n                  </ListItemIcon>\n                )\n              }\n              if ('subMenu' in menuItem) {\n                endDecoration = <MenuItemEndDecoration type=\"subMenu\" />\n              } else if (\n                menuItem.type === 'checkbox' ||\n                menuItem.type === 'radio'\n              ) {\n                endDecoration = (\n                  <MenuItemEndDecoration\n                    type={menuItem.type}\n                    checked={menuItem.checked}\n                    disabled={menuItem.disabled}\n                  />\n                )\n              }\n              const onClick =\n                'onClick' in menuItem\n                  ? handleClick(menuItem.onClick)\n                  : undefined\n              return (\n                <MUIMenuItem\n                  key={menuItem.label}\n                  style={menuItemStyle}\n                  selected={idx === selectedMenuItemIdx}\n                  onClick={onClick}\n                  onMouseMove={e => {\n                    if (e.currentTarget !== document.activeElement) {\n                      e.currentTarget.focus()\n                      setSelectedMenuItemIdx(idx)\n                    }\n                    if ('subMenu' in menuItem) {\n                      if (openSubMenuIdx !== idx) {\n                        setSubMenuAnchorEl(e.currentTarget)\n                        setOpenSubMenuIdx(idx)\n                      }\n                    } else {\n                      setSubMenuAnchorEl(undefined)\n                      setOpenSubMenuIdx(undefined)\n                    }\n                  }}\n                  onKeyDown={e => {\n                    if (e.key === 'ArrowLeft' || e.key === 'Escape') {\n                      onClose && onClose(e, 'escapeKeyDown')\n                    } else if (e.key === 'ArrowUp') {\n                      setSelectedMenuItemIdx(\n                        findPreviousValidIdx(menuItems, idx),\n                      )\n                    } else if (e.key === 'ArrowDown') {\n                      const a = findNextValidIdx(menuItems, idx)\n                      setSelectedMenuItemIdx(a)\n                    } else if ('subMenu' in menuItem) {\n                      if (e.key === 'ArrowRight' || e.key === 'Enter') {\n                        setSubMenuAnchorEl(e.currentTarget)\n                        setOpenSubMenuIdx(idx)\n                        setIsSubMenuOpen(true)\n                      }\n                    }\n                  }}\n                  disabled={Boolean(menuItem.disabled)}\n                >\n                  {icon}\n                  <ListItemText\n                    primary={menuItem.label}\n                    secondary={menuItem.subLabel}\n                    inset={hasIcon && !menuItem.icon}\n                  />\n                  {endDecoration}\n                </MUIMenuItem>\n              )\n            })}\n        </MenuList>\n        {menuItems.map((menuItem, idx) => {\n          let subMenu = null\n          if ('subMenu' in menuItem) {\n            subMenu = (\n              <MenuPage\n                key={menuItem.label}\n                anchorEl={subMenuAnchorEl}\n                open={isSubMenuOpen && openSubMenuIdx === idx}\n                onClose={() => {\n                  setIsSubMenuOpen(false)\n                  setSubMenuAnchorEl(undefined)\n                }}\n                onMenuItemClick={onMenuItemClick}\n                menuItems={menuItem.subMenu}\n              />\n            )\n          }\n          return subMenu\n        })}\n      </>\n    )\n\n    return top ? (\n      ListContents\n    ) : (\n      <Grow in={open} style={{ transformOrigin: `0 0 0` }} ref={ref}>\n        <Paper\n          elevation={8}\n          ref={paperRef}\n          className={classes.paper}\n          style={{ ...position }}\n        >\n          {ListContents}\n        </Paper>\n      </Grow>\n    )\n  },\n)\n\ninterface MenuProps extends PopoverProps {\n  menuItems: MenuItem[]\n  onMenuItemClick: (\n    event: React.MouseEvent<HTMLLIElement, MouseEvent>,\n    callback: Function,\n  ) => void\n}\n\nfunction Menu(props: MenuProps) {\n  const { open, onClose, menuItems, onMenuItemClick, ...other } = props\n\n  return (\n    <Popover\n      transitionDuration={0}\n      open={open}\n      onClose={onClose}\n      BackdropProps={{ invisible: true }}\n      {...other}\n    >\n      <MenuPage\n        open={open}\n        onClose={onClose}\n        menuItems={menuItems}\n        onMenuItemClick={onMenuItemClick}\n        top\n      />\n    </Popover>\n  )\n}\n\nexport default Menu\n","import React, { useEffect, useState, useRef } from 'react'\nimport { makeStyles } from 'tss-react/mui'\n\nconst useStyles = makeStyles()({\n  horizontalHandle: {\n    cursor: 'row-resize',\n    width: '100%',\n  },\n  verticalHandle: {\n    cursor: 'col-resize',\n    height: '100%',\n  },\n  flexbox_verticalHandle: {\n    cursor: 'col-resize',\n    alignSelf: 'stretch', // the height: 100% is actually unable to function inside flexbox\n  },\n  flexbox_horizontalHandle: {\n    cursor: 'row-resize',\n    alignSelf: 'stretch', // similar to above\n  },\n})\n\nfunction ResizeHandle({\n  onDrag,\n  vertical = false,\n  flexbox = false,\n  className: originalClassName,\n  ...props\n}: {\n  onDrag: (arg: number) => number\n  vertical?: boolean\n  flexbox?: boolean\n  className?: string\n  [props: string]: unknown\n}) {\n  const [mouseDragging, setMouseDragging] = useState(false)\n  const prevPos = useRef(0)\n  const { classes, cx } = useStyles()\n\n  useEffect(() => {\n    function mouseMove(event: MouseEvent) {\n      event.preventDefault()\n      const pos = vertical ? event.clientX : event.clientY\n      const distance = pos - prevPos.current\n      if (distance) {\n        onDrag(distance)\n        prevPos.current = pos\n      }\n    }\n\n    function mouseUp() {\n      setMouseDragging(false)\n    }\n    if (mouseDragging) {\n      window.addEventListener('mousemove', mouseMove, true)\n      window.addEventListener('mouseup', mouseUp, true)\n      return () => {\n        window.removeEventListener('mousemove', mouseMove, true)\n        window.removeEventListener('mouseup', mouseUp, true)\n      }\n    }\n    return () => {}\n  }, [mouseDragging, onDrag, vertical])\n\n  let className\n  if (flexbox) {\n    if (vertical) {\n      className = classes.flexbox_verticalHandle\n    } else {\n      className = classes.flexbox_horizontalHandle\n    }\n  } else if (vertical) {\n    className = classes.verticalHandle\n  } else {\n    className = classes.horizontalHandle\n  }\n\n  return (\n    <div\n      data-resizer=\"true\"\n      onMouseDown={event => {\n        event.preventDefault()\n        prevPos.current = vertical ? event.clientX : event.clientY\n        setMouseDragging(true)\n      }}\n      role=\"presentation\"\n      className={cx(className, originalClassName)}\n      {...props}\n    />\n  )\n}\n\nexport default ResizeHandle\n","import { blue, green, red, amber } from '@mui/material/colors'\nimport { createTheme, ThemeOptions } from '@mui/material/styles'\nimport type {\n  PaletteAugmentColorOptions,\n  PaletteOptions,\n} from '@mui/material/styles/createPalette'\nimport deepmerge from 'deepmerge'\n\ndeclare module '@mui/material/styles/createPalette' {\n  interface Palette {\n    tertiary: Palette['primary']\n    quaternary: Palette['primary']\n    bases: {\n      A: Palette['primary']\n      C: Palette['primary']\n      G: Palette['primary']\n      T: Palette['primary']\n    }\n  }\n  interface PaletteOptions {\n    tertiary?: PaletteOptions['primary']\n    quaternary?: PaletteOptions['primary']\n    bases?: {\n      A?: PaletteOptions['primary']\n      C?: PaletteOptions['primary']\n      G?: PaletteOptions['primary']\n      T?: PaletteOptions['primary']\n    }\n  }\n}\n\nconst midnight = '#0D233F'\nconst grape = '#721E63'\nconst forest = '#135560'\nconst mandarin = '#FFB11D'\n\nconst refTheme = createTheme()\n\nexport const jbrowseDefaultPalette = {\n  // type: 'dark',\n  primary: { main: midnight },\n  secondary: { main: grape },\n  tertiary: refTheme.palette.augmentColor({ color: { main: forest } }),\n  quaternary: refTheme.palette.augmentColor({ color: { main: mandarin } }),\n  stopCodon: '#e22',\n  startCodon: '#3e3',\n  bases: {\n    A: refTheme.palette.augmentColor({ color: green }),\n    C: refTheme.palette.augmentColor({ color: blue }),\n    G: refTheme.palette.augmentColor({ color: amber }),\n    T: refTheme.palette.augmentColor({ color: red }),\n  },\n}\n\nexport function createJBrowseDefaultProps(/* palette: PaletteOptions = {} */) {\n  return {\n    components: {\n      MuiButton: {\n        defaultProps: {\n          size: 'small' as const,\n        },\n      },\n      MuiAccordion: {\n        defaultProps: {\n          disableGutters: true,\n          TransitionProps: { timeout: 150 },\n        },\n      },\n      MuiFilledInput: {\n        defaultProps: {\n          margin: 'dense' as const,\n        },\n      },\n      MuiFormControl: {\n        defaultProps: {\n          margin: 'dense' as const,\n          size: 'small' as const,\n        },\n      },\n      MuiFormHelperText: {\n        defaultProps: {\n          margin: 'dense' as const,\n        },\n      },\n\n      MuiIconButton: {\n        defaultProps: {\n          size: 'small' as const,\n        },\n      },\n      MuiInputBase: {\n        defaultProps: {\n          margin: 'dense' as const,\n        },\n      },\n      MuiAutocomplete: {\n        defaultProps: {\n          size: 'small' as const,\n        },\n      },\n      MuiInputLabel: {\n        defaultProps: {\n          margin: 'dense' as const,\n        },\n      },\n      MuiToolbar: {\n        defaultProps: {\n          variant: 'dense' as const,\n        },\n      },\n      MuiListItem: {\n        defaultProps: {\n          dense: true,\n        },\n      },\n      MuiOutlinedInput: {\n        defaultProps: {\n          margin: 'dense' as const,\n        },\n      },\n      MuiFab: {\n        defaultProps: {\n          size: 'small' as const,\n        },\n      },\n      MuiTable: {\n        defaultProps: {\n          size: 'small' as const,\n        },\n      },\n      MuiMenuList: {\n        defaultProps: {\n          dense: true,\n        },\n      },\n      MuiMenuItem: {\n        defaultProps: {\n          dense: true,\n        },\n      },\n\n      MuiTextField: {\n        defaultProps: {\n          margin: 'dense' as const,\n          variant: 'standard' as const,\n        },\n      },\n    },\n  }\n}\n\nexport function createJBrowseDefaultOverrides(palette: PaletteOptions = {}) {\n  const generatedPalette = deepmerge(jbrowseDefaultPalette, palette)\n  return {\n    components: {\n      MuiIconButton: {\n        styleOverrides: {\n          colorSecondary: {\n            color: generatedPalette.tertiary.main,\n          },\n        },\n      },\n      MuiButton: {\n        styleOverrides: {\n          textSecondary: {\n            color: generatedPalette.tertiary.main,\n          },\n        },\n      },\n      MuiFab: {\n        styleOverrides: {\n          secondary: {\n            backgroundColor: generatedPalette.quaternary.main,\n          },\n        },\n      },\n      MuiLink: {\n        styleOverrides: {\n          root: {\n            color: generatedPalette.tertiary.main,\n          },\n        },\n      },\n\n      MuiAccordionSummary: {\n        styleOverrides: {\n          root: {\n            backgroundColor: generatedPalette.tertiary.main,\n          },\n          content: {\n            color: generatedPalette.tertiary.contrastText,\n          },\n        },\n      },\n    },\n  }\n}\n\nexport function createJBrowseBaseTheme(palette?: PaletteOptions): ThemeOptions {\n  return {\n    palette: jbrowseDefaultPalette,\n    typography: { fontSize: 12 },\n    spacing: 4,\n    ...deepmerge(\n      createJBrowseDefaultProps(),\n      createJBrowseDefaultOverrides(palette),\n    ),\n  }\n}\n\nexport function createJBrowseTheme(theme?: ThemeOptions) {\n  if (theme?.palette?.tertiary) {\n    theme = deepmerge(theme, {\n      palette: {\n        tertiary: refTheme.palette.augmentColor(\n          'color' in theme.palette.tertiary\n            ? (theme.palette.tertiary as PaletteAugmentColorOptions)\n            : { color: theme.palette.tertiary },\n        ),\n      },\n    })\n  }\n  if (theme?.palette?.quaternary) {\n    theme = deepmerge(theme, {\n      palette: {\n        quaternary: refTheme.palette.augmentColor(\n          'color' in theme.palette.quaternary\n            ? (theme.palette.quaternary as PaletteAugmentColorOptions)\n            : { color: theme.palette.quaternary },\n        ),\n      },\n    })\n  }\n\n  return createTheme(\n    deepmerge(createJBrowseBaseTheme(theme?.palette), theme || {}),\n  )\n}\n","import React from 'react'\n\ntype LogoVariant = 'color' | 'black' | 'white'\n\ninterface LogoProps {\n  variant?: LogoVariant\n}\n\nfunction getColors(variant?: LogoVariant) {\n  if (variant === 'black') {\n    return {\n      midnight: '#808080',\n      forrest: '#666666',\n      grape: '#4d4d4d',\n      mandarin: '#333333',\n      gray: '#1a1a1a',\n    }\n  }\n  if (variant === 'white') {\n    return {\n      midnight: '#ffffff',\n      forrest: '#e6e6e6',\n      grape: '#cccccc',\n      mandarin: '#b3b3b3',\n      gray: '#999999',\n    }\n  }\n  return {\n    midnight: '#0d233f',\n    forrest: '#135560',\n    grape: '#721e63',\n    mandarin: '#ffb11d',\n    gray: '#dadada',\n  }\n}\n\nexport function Logomark({ variant }: LogoProps) {\n  return (\n    <svg viewBox=\"0 0 175 175\">\n      <Icon variant={variant} />\n    </svg>\n  )\n}\n\nexport function LogoFull({ variant }: LogoProps) {\n  return (\n    <svg viewBox=\"0 0 641 175\">\n      <Text variant={variant} />\n      <Icon variant={variant} />\n    </svg>\n  )\n}\n\nfunction Icon({ variant }: LogoProps) {\n  const colors = getColors(variant)\n  return (\n    <>\n      <path\n        style={{ fill: colors.midnight }}\n        d=\"M120.5,57.5c.168,0,.333.012.5.013V40.506c-.167,0-.333-.006-.5-.006a98.325,98.325,0,0,0-77.4,37.565q-2.664,3.378-5.023,6.994l14.206,9.327Q54.043,91.709,56,89.179A81.363,81.363,0,0,1,120.5,57.5Z\"\n      />\n      <path\n        style={{ fill: colors.forrest }}\n        d=\"M148.668,86.223c.308.133.6.283.908.42l6.746-15.618c-.153-.067-.3-.143-.454-.21a81.36,81.36,0,0,0-71.777,3.5q-2.8,1.544-5.469,3.309l9.249,14.054A63.93,63.93,0,0,1,148.668,86.223Z\"\n      />\n      <path\n        style={{ fill: colors.grape }}\n        d=\"M170.894,109.37A63.929,63.929,0,0,0,113.4,88.861l2.336,15.474a48.456,48.456,0,0,1,44.322,15.42c.111.125.214.255.324.381l11.16-10C171.323,109.879,171.118,109.62,170.894,109.37Z\"\n      />\n      <path\n        style={{ fill: colors.mandarin }}\n        d=\"M150.921,150.314c.04.163.07.326.107.489l16.509-4.058c-.039-.163-.067-.326-.107-.489A48.457,48.457,0,0,0,135.575,111.8l-5.515,15.591A32.466,32.466,0,0,1,150.921,150.314Z\"\n      />\n      <path\n        style={{ fill: colors.gray }}\n        d=\"M134.1,138.129l-9.779,13.213a32.486,32.486,0,0,1,7.823,14.463l15.147.852c.012-.166.032-.331.041-.5A32.464,32.464,0,0,0,134.1,138.129Z\"\n      />\n    </>\n  )\n}\n\nfunction Text({ variant }: LogoProps) {\n  const colors = getColors(variant)\n  return (\n    <g\n      aria-label=\"JBrowse\"\n      transform=\"translate(213.084 144.241)\"\n      style={{ fill: colors.midnight }}\n    >\n      <path d=\"m 26.355,-71.505 v 54.075 2.835 q 0,6.825 -0.42,10.185 -0.735,5.67 -2.835,9.135 -3.255,5.355 -8.505,8.4 -4.83,2.73 -11.55,3.57 L 1.47,11.76 Q 7.35,10.185 9.24,4.2 10.605,-0.105 10.605,-9.975 v -5.565 -55.965 q 1.785,0 4.62,0.315 2.835,0.21 3.255,0.21 1.785,0 2.94,-0.105 4.515,-0.42 4.935,-0.42 z\" />\n      <path d=\"m 60.68836,-65.415 v 24.78 h 3.255 q 2.94,0 4.935,-0.525 2.1,-0.525 3.885,-2.1 2.31,-1.995 3.36,-4.83 1.155,-2.835 1.155,-6.09 0,-5.565 -2.94,-8.61 -2.94,-3.045 -8.295,-3.045 -2.52,0 -5.355,0.42 z m 0,30.87 V -6.09 h 5.25 q 4.725,0 8.505,-3.675 3.885,-3.78 3.885,-10.08 0,-8.19 -4.62,-11.655 -4.095,-3.045 -13.02,-3.045 z M 44.93836,0 v -71.505 h 27.09 q 9.135,0 14.385,3.255 6.51,3.99 6.51,12.6 0,7.035 -5.25,11.655 -4.62,4.095 -11.97,5.145 v 0.945 q 7.56,0.735 12.285,3.99 6.615,4.62 6.615,13.335 0,10.185 -7.98,15.75 -6.93,4.83 -17.43,4.83 z\" />\n      <path d=\"M 109.44281,0.525 V -50.4 q 1.785,0.21 3.99,0.42 2.31,0.105 3.255,0.105 2.31,0 4.2,-0.21 1.89,-0.21 3.045,-0.315 v 13.02 q 1.89,-6.51 5.46,-9.87 4.41,-4.095 11.655,-4.095 -0.315,2.73 -0.42,6.825 -0.105,3.99 -0.105,7.455 l -0.945,0.84 q -0.945,-0.735 -2.415,-1.05 -1.47,-0.315 -2.94,-0.315 -3.57,0 -6.195,1.89 -2.52,1.785 -3.465,5.04 -0.42,1.155 -0.525,3.15 -0.105,1.89 -0.105,4.515 v 4.515 19.005 q -1.785,-0.21 -2.625,-0.21 -3.675,-0.315 -4.62,-0.315 -2.31,0 -4.2,0.21 -1.89,0.21 -3.045,0.315 z\" />\n      <path d=\"m 173.77337,1.47 q -11.655,0 -18.585,-6.825 -6.93,-6.825 -6.93,-18.48 0,-12.6 6.72,-20.055 6.825,-7.455 18.9,-7.455 11.97,0 18.9,6.72 6.93,6.72 6.93,18.48 0,12.285 -6.72,19.74 -7.14,7.875 -19.215,7.875 z m 0.735,-48.09 q -5.88,0 -8.505,6.51 -2.205,5.565 -2.205,15.96 0,8.19 1.47,12.915 2.415,7.98 8.505,7.98 5.565,0 8.19,-7.875 2.205,-6.51 2.205,-16.695 0,-8.505 -2.1,-13.23 -2.52,-5.565 -7.56,-5.565 z\" />\n      <path d=\"m 222.03563,-50.4 10.5,36.015 q 3.675,-11.235 5.67,-17.85 2.415,-8.085 5.04,-18.165 1.05,0.105 3.045,0.315 2.1,0.21 2.835,0.21 1.995,0 3.15,-0.105 1.26,-0.21 2.73,-0.42 l 10.71,36.015 q 5.88,-17.43 10.71,-36.015 l 4.2,0.315 4.095,-0.315 q -5.145,13.125 -9.135,24.57 -5.04,14.28 -8.505,26.355 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.205,-0.105 -1.89,0 -3.36,0.21 -1.365,0.21 -2.31,0.315 l -10.605,-34.755 q -4.41,13.65 -6.72,21.105 -2.31,7.35 -4.095,13.65 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.31,-0.105 -1.995,0 -3.465,0.21 -1.365,0.21 -2.31,0.315 -3.78,-12.81 -5.04,-17.01 -2.205,-7.245 -5.46,-17.01 -2.835,-8.4 -5.88,-16.905 1.575,0 4.305,0.315 2.73,0.21 3.36,0.21 1.47,0 4.305,-0.21 2.835,-0.315 3.465,-0.315 z\" />\n      <path d=\"m 292.84172,-12.81 h 2.625 q 1.47,4.095 4.62,6.51 3.15,2.415 7.35,2.415 2.94,0 5.46,-1.785 2.625,-1.89 2.625,-4.62 0,-3.885 -6.195,-6.615 -10.395,-4.62 -11.655,-5.46 -6.405,-4.515 -6.405,-12.285 0,-7.77 5.25,-12.18 5.25,-4.515 12.81,-4.515 3.99,0 8.085,1.365 4.095,1.26 7.14,3.57 l -2.52,9.24 h -2.94 q -0.63,-3.57 -3.57,-6.195 -2.835,-2.625 -6.405,-2.625 -3.15,0 -5.46,1.575 -2.31,1.47 -2.31,4.515 0,3.885 6.405,6.51 10.185,4.095 11.865,5.25 6.405,4.41 6.405,12.81 0,7.455 -5.46,12.18 -5.355,4.62 -14.805,4.62 -8.19,0 -14.49,-4.305 z\" />\n      <path d=\"m 349.61228,-29.925 h 15.54 q 0,-6.51 -1.05,-10.395 -1.68,-6.3 -5.88,-6.3 -5.04,0 -7.14,6.195 -1.47,4.305 -1.47,10.5 z m 30.03,5.04 h -30.03 q 0,9.135 3.045,13.86 3.57,5.67 11.55,5.67 3.255,0 6.405,-1.26 3.15,-1.26 5.88,-3.465 l 1.26,0.945 -2.31,5.88 q -6.72,4.725 -15.015,4.725 -12.915,0 -19.635,-7.245 -6.72,-7.245 -6.72,-20.37 0,-11.235 6.405,-18.165 6.51,-7.035 17.64,-7.035 11.655,0 16.905,7.56 4.62,6.615 4.62,18.9 z\" />\n    </g>\n  )\n}\n","import React, { useState, Suspense } from 'react'\nimport {\n  AppBar,\n  Button,\n  Fab,\n  FormControl,\n  MenuItem,\n  Paper,\n  Select,\n  Toolbar,\n  Tooltip,\n  Typography,\n} from '@mui/material'\nimport { makeStyles } from 'tss-react/mui'\nimport LaunchIcon from '@mui/icons-material/Launch'\nimport { ErrorBoundary } from 'react-error-boundary'\nimport { observer } from 'mobx-react'\nimport { getEnv } from 'mobx-state-tree'\n\n// locals\nimport { readConfObject, AnyConfigurationModel } from '../configuration'\nimport {\n  AbstractViewModel,\n  NotificationLevel,\n  SessionWithDrawerWidgets,\n  SnackAction,\n} from '../util'\n\n// ui elements\nimport DrawerWidget from './DrawerWidget'\nimport DropDownMenu from './DropDownMenu'\nimport ErrorMessage from './ErrorMessage'\nimport LoadingEllipses from './LoadingEllipses'\nimport EditableTypography from './EditableTypography'\nimport Snackbar from './Snackbar'\nimport ViewContainer from './ViewContainer'\nimport { LogoFull } from './Logo'\nimport { MenuItem as JBMenuItem } from './Menu'\n\nconst useStyles = makeStyles()(theme => ({\n  root: {\n    fontFamily: 'Roboto',\n    display: 'grid',\n    height: '100vh',\n    width: '100%',\n  },\n  fabLeft: {\n    zIndex: 10000,\n    position: 'fixed',\n    bottom: theme.spacing(2),\n    left: theme.spacing(2),\n  },\n  fabRight: {\n    zIndex: 10000,\n    position: 'fixed',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  },\n  menuBarAndComponents: {\n    gridColumn: 'main',\n    display: 'grid',\n    gridTemplateRows: '[menubar] min-content [components] auto',\n    height: '100vh',\n  },\n  menuBar: {\n    gridRow: 'menubar',\n  },\n  components: {\n    overflowY: 'auto',\n    gridRow: 'components',\n  },\n  appBar: {\n    flexGrow: 1,\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  inputBase: {\n    color: theme.palette.primary.contrastText,\n  },\n  inputRoot: {\n    '&:hover': {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  inputFocused: {\n    borderColor: theme.palette.secondary.main,\n    backgroundColor: theme.palette.primary.light,\n  },\n\n  selectPaper: {\n    padding: theme.spacing(4),\n  },\n}))\n\nconst Logo = observer(\n  ({ session }: { session: { configuration: AnyConfigurationModel } }) => {\n    const { configuration } = session\n    const logoPath = readConfObject(configuration, 'logoPath')\n    if (!logoPath?.uri) {\n      return <LogoFull variant=\"white\" />\n    } else {\n      return <img src={logoPath.uri} alt=\"Custom logo\" />\n    }\n  },\n)\n\ntype SnackbarMessage = [string, NotificationLevel, SnackAction]\n\ntype AppSession = SessionWithDrawerWidgets & {\n  savedSessionNames: string[]\n  menus: { label: string; menuItems: JBMenuItem[] }[]\n  renameCurrentSession: (arg: string) => void\n  snackbarMessages: SnackbarMessage[]\n  popSnackbarMessage: () => unknown\n}\n\nconst AppToolbar = observer(\n  ({\n    session,\n    HeaderButtons = <div />,\n  }: {\n    HeaderButtons?: React.ReactElement\n    session: AppSession\n  }) => {\n    const { classes } = useStyles()\n    const { savedSessionNames, name, menus } = session\n\n    function handleNameChange(newName: string) {\n      if (savedSessionNames?.includes(newName)) {\n        session.notify(\n          `Cannot rename session to \"${newName}\", a saved session with that name already exists`,\n          'warning',\n        )\n      } else {\n        session.renameCurrentSession(newName)\n      }\n    }\n    return (\n      <Toolbar>\n        {menus.map(menu => (\n          <DropDownMenu\n            key={menu.label}\n            menuTitle={menu.label}\n            menuItems={menu.menuItems}\n            session={session}\n          />\n        ))}\n        <div className={classes.grow} />\n        <Tooltip title=\"Rename Session\" arrow>\n          <EditableTypography\n            value={name}\n            setValue={handleNameChange}\n            variant=\"body1\"\n            classes={{\n              inputBase: classes.inputBase,\n              inputRoot: classes.inputRoot,\n              inputFocused: classes.inputFocused,\n            }}\n          />\n        </Tooltip>\n        {HeaderButtons}\n        <div className={classes.grow} />\n        <div style={{ width: 150, maxHeight: 48 }}>\n          <Logo session={session} />\n        </div>\n      </Toolbar>\n    )\n  },\n)\n\nconst ViewLauncher = observer(({ session }: { session: AppSession }) => {\n  const { classes } = useStyles()\n  const { pluginManager } = getEnv(session)\n  const viewTypes = pluginManager.getElementTypeRecord('view').all()\n  const [value, setValue] = useState(viewTypes[0]?.name)\n  return (\n    <Paper className={classes.selectPaper}>\n      <Typography>Select a view to launch</Typography>\n      <FormControl style={{ margin: 2 }}>\n        <Select value={value} onChange={event => setValue(event.target.value)}>\n          {viewTypes.map(({ name }: { name: string }) => (\n            <MenuItem key={name} value={name}>\n              {name}\n            </MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n      <FormControl style={{ margin: 2 }}>\n        <Button\n          onClick={() => session.addView(value, {})}\n          variant=\"contained\"\n          color=\"primary\"\n        >\n          Launch view\n        </Button>\n      </FormControl>\n    </Paper>\n  )\n})\n\nconst ViewPanel = observer(\n  ({ view, session }: { view: AbstractViewModel; session: AppSession }) => {\n    const { pluginManager } = getEnv(session)\n    const viewType = pluginManager.getViewType(view.type)\n    if (!viewType) {\n      throw new Error(`unknown view type ${view.type}`)\n    }\n    const { ReactComponent } = viewType\n    return (\n      <ViewContainer\n        view={view}\n        onClose={() => session.removeView(view)}\n        onMinimize={() => view.setMinimized(!view.minimized)}\n      >\n        {!view.minimized ? (\n          <ErrorBoundary\n            FallbackComponent={({ error }) => <ErrorMessage error={error} />}\n          >\n            <Suspense fallback={<LoadingEllipses />}>\n              <ReactComponent\n                model={view}\n                session={session}\n                getTrackType={pluginManager.getTrackType}\n              />\n            </Suspense>\n          </ErrorBoundary>\n        ) : (\n          false\n        )}\n      </ViewContainer>\n    )\n  },\n)\n\nconst App = observer(\n  (props: {\n    HeaderButtons?: React.ReactElement\n    session: SessionWithDrawerWidgets & {\n      savedSessionNames: string[]\n      menus: { label: string; menuItems: JBMenuItem[] }[]\n      renameCurrentSession: (arg: string) => void\n      snackbarMessages: SnackbarMessage[]\n      popSnackbarMessage: () => unknown\n    }\n  }) => {\n    const { session } = props\n    const { classes } = useStyles()\n\n    const {\n      minimized,\n      visibleWidget,\n      drawerWidth,\n      activeWidgets,\n      views,\n      drawerPosition,\n    } = session\n\n    const drawerVisible = visibleWidget && !minimized\n\n    let grid\n    if (drawerPosition === 'right') {\n      grid = [\n        `[main] 1fr`,\n        drawerVisible ? `[drawer] ${drawerWidth}px` : undefined,\n      ]\n    } else if (drawerPosition === 'left') {\n      grid = [\n        drawerVisible ? `[drawer] ${drawerWidth}px` : undefined,\n        `[main] 1fr`,\n      ]\n    }\n    return (\n      <div\n        className={classes.root}\n        style={{\n          gridTemplateColumns: grid?.filter(f => !!f).join(' '),\n        }}\n      >\n        {drawerVisible && drawerPosition === 'left' ? (\n          <DrawerWidget session={session} />\n        ) : null}\n\n        {session.DialogComponent ? (\n          <Suspense fallback={<div />}>\n            <session.DialogComponent {...session.DialogProps} />\n          </Suspense>\n        ) : null}\n        <div className={classes.menuBarAndComponents}>\n          <div className={classes.menuBar}>\n            <AppBar className={classes.appBar} position=\"static\">\n              <AppToolbar {...props} />\n            </AppBar>\n          </div>\n          <div className={classes.components}>\n            {views.length ? (\n              views.map(view => (\n                <ViewPanel\n                  key={`view-${view.id}`}\n                  view={view}\n                  session={session}\n                />\n              ))\n            ) : (\n              <ViewLauncher {...props} />\n            )}\n\n            {/* blank space at the bottom of screen allows scroll */}\n            <div style={{ height: 300 }} />\n          </div>\n        </div>\n\n        {activeWidgets.size > 0 && minimized ? (\n          <Tooltip title=\"Open drawer widget\">\n            <Fab\n              className={\n                drawerPosition === 'right' ? classes.fabRight : classes.fabLeft\n              }\n              color=\"primary\"\n              data-testid=\"drawer-maximize\"\n              onClick={() => session.showWidgetDrawer()}\n            >\n              <LaunchIcon />\n            </Fab>\n          </Tooltip>\n        ) : null}\n\n        {drawerVisible && drawerPosition === 'right' ? (\n          <DrawerWidget session={session} />\n        ) : null}\n\n        <Snackbar session={session} />\n      </div>\n    )\n  },\n)\n\nexport default App\n","import React from 'react'\nimport { observer } from 'mobx-react'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Divider,\n  IconButton,\n  Typography,\n} from '@mui/material'\nimport { makeStyles } from 'tss-react/mui'\nimport CloseIcon from '@mui/icons-material/Close'\n\nconst useStyles = makeStyles()(theme => ({\n  closeButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500],\n  },\n}))\n\nfunction ReturnToImportFormDialog({\n  model,\n  handleClose,\n}: {\n  model: { clearView: Function }\n  handleClose: () => void\n}) {\n  const { classes } = useStyles()\n  return (\n    <Dialog maxWidth=\"xl\" open onClose={handleClose}>\n      <DialogTitle>\n        Reference sequence\n        {handleClose ? (\n          <IconButton\n            className={classes.closeButton}\n            onClick={() => handleClose()}\n            size=\"large\"\n          >\n            <CloseIcon />\n          </IconButton>\n        ) : null}\n      </DialogTitle>\n      <Divider />\n\n      <DialogContent>\n        <Typography>\n          Are you sure you want to return to the import form? This will lose\n          your current view\n        </Typography>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={() => {\n            model.clearView()\n            handleClose()\n          }}\n          variant=\"contained\"\n          color=\"primary\"\n          autoFocus\n        >\n          OK\n        </Button>\n        <Button\n          onClick={() => handleClose()}\n          color=\"secondary\"\n          variant=\"contained\"\n        >\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default observer(ReturnToImportFormDialog)\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport ReactPropTypes from 'prop-types'\nimport React, { useState, useRef, useEffect } from 'react'\nimport { drawImageOntoCanvasContext } from '../util/offscreenCanvasPonyfill'\n\nfunction PrerenderedCanvas(props: {\n  width: number\n  height: number\n  highResolutionScaling: number\n  style: any\n  imageData: any\n  showSoftClip?: boolean\n  blockKey?: string\n}) {\n  const {\n    width,\n    height,\n    highResolutionScaling,\n    style,\n    imageData,\n    blockKey,\n    showSoftClip,\n  } = props\n  const [done, setDone] = useState(false)\n\n  const featureCanvas = useRef<HTMLCanvasElement>(null)\n\n  useEffect(() => {\n    if (!imageData) {\n      return\n    }\n    const canvas = featureCanvas.current\n    if (!canvas) {\n      return\n    }\n    const context = canvas.getContext('2d')\n    if (!context) {\n      return\n    }\n    drawImageOntoCanvasContext(imageData, context)\n    setDone(true)\n  }, [imageData])\n\n  const softClipString = showSoftClip ? '_softclipped' : ''\n  const blockKeyStr = blockKey ? '_' + blockKey : ''\n  const testId = `prerendered_canvas${softClipString}${blockKeyStr}${\n    done ? '_done' : ''\n  }`\n  return (\n    <canvas\n      data-testid={testId}\n      ref={featureCanvas}\n      width={width * highResolutionScaling}\n      height={height * highResolutionScaling}\n      style={{ width, height, ...style }}\n    />\n  )\n}\n\nPrerenderedCanvas.propTypes = {\n  height: ReactPropTypes.number.isRequired,\n  width: ReactPropTypes.number.isRequired,\n  highResolutionScaling: ReactPropTypes.number,\n  style: ReactPropTypes.objectOf(ReactPropTypes.any),\n  imageData: ReactPropTypes.any,\n  // config: ReactPropTypes.objectOf(ReactPropTypes.any),\n}\nPrerenderedCanvas.defaultProps = {\n  imageData: undefined,\n  highResolutionScaling: 1,\n  style: {},\n  // config: {},\n}\n\nexport default PrerenderedCanvas\n","import React, { useEffect, useState } from 'react'\nimport { makeStyles } from 'tss-react/mui'\nimport { observer } from 'mobx-react'\nimport { Feature } from '../util/simpleFeature'\nimport { readConfObject, AnyConfigurationModel } from '../configuration'\n\nconst useStyles = makeStyles()({\n  hoverLabel: {\n    border: '1px solid black',\n    position: 'absolute',\n    background: '#fffa',\n    pointerEvents: 'none',\n    zIndex: 10000,\n  },\n})\n\nconst Tooltip = ({\n  offsetX,\n  offsetY,\n  configuration,\n  feature,\n  timeout = 300,\n}: {\n  offsetX: number\n  offsetY: number\n  configuration: AnyConfigurationModel\n  feature?: Feature\n  timeout?: number\n}) => {\n  const { classes } = useStyles()\n  const [shown, setShown] = useState(false)\n  useEffect(() => {\n    // only show the loading message after short timeout to prevent excessive\n    // flickering\n    const handle = setTimeout(() => setShown(true), timeout)\n    return () => clearTimeout(handle)\n  })\n  if (feature && shown) {\n    const text = readConfObject(configuration, 'mouseover', { feature })\n    return (\n      <div\n        className={classes.hoverLabel}\n        style={{ left: offsetX, top: offsetY }}\n      >\n        {text}\n      </div>\n    )\n  }\n  return null\n}\n\nexport default observer(Tooltip)\n","import React from 'react'\nimport escapeHTML from 'escape-html'\nimport dompurify from 'dompurify'\n\n// source https://github.com/sindresorhus/html-tags/blob/master/html-tags.json\n// with some random uncommon ones removed. note: we just use this to run the content\n// through dompurify without escaping if we see an htmlTag from this list\n// otherwise we escape angle brackets and things prematurely because it might be\n// something like <TRA> in VCF. Ref #657\nconst htmlTags = [\n  'a',\n  'b',\n  'br',\n  'code',\n  'div',\n  'em',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'i',\n  'img',\n  'li',\n  'p',\n  'pre',\n  'span',\n  'small',\n  'strong',\n  'table',\n  'tbody',\n  'td',\n  'tfoot',\n  'th',\n  'thead',\n  'tr',\n  'u',\n  'ul',\n]\n\nlet added = false\n\n// adapted from is-html\n// https://github.com/sindresorhus/is-html/blob/master/index.js\nconst full = new RegExp(htmlTags.map(tag => `<${tag}\\\\b[^>]*>`).join('|'), 'i')\nexport function isHTML(str: string) {\n  return full.test(str)\n}\n\nexport default function SanitizedHTML({ html }: { html: string }) {\n  const value = isHTML(html) ? html : escapeHTML(html)\n  if (!added) {\n    added = true\n    // see https://github.com/cure53/DOMPurify/issues/317\n    // only have to add this once, and can't do it globally because dompurify\n    // not yet initialized at global scope\n    dompurify.addHook(\n      'afterSanitizeAttributes',\n      (node: {\n        tagName: string\n        setAttribute: (arg0: string, arg1: string) => void\n      }) => {\n        if (node.tagName === 'A') {\n          node.setAttribute('rel', 'noopener noreferrer')\n          node.setAttribute('target', '_blank')\n        }\n      },\n    )\n  }\n\n  return (\n    <div\n      // eslint-disable-next-line react/no-danger\n      dangerouslySetInnerHTML={{\n        __html: dompurify.sanitize(value),\n      }}\n    />\n  )\n}\n","import { Observable, fromEvent } from 'rxjs'\n\nclass AbortError extends Error {\n  public code: string | undefined\n}\n\n/**\n * properly check if the given AbortSignal is aborted.\n * per the standard, if the signal reads as aborted,\n * this function throws either a DOMException AbortError, or a regular error\n * with a `code` attribute set to `ERR_ABORTED`.\n *\n * for convenience, passing `undefined` is a no-op\n *\n * @param signal -\n * @returns nothing\n */\nexport function checkAbortSignal(signal?: AbortSignal): void {\n  if (!signal) {\n    return\n  }\n\n  if (!(signal instanceof AbortSignal)) {\n    throw new TypeError('must pass an AbortSignal')\n  }\n\n  if (signal.aborted) {\n    throw makeAbortError()\n  }\n}\n\nfunction timeout(ms: number) {\n  return new Promise(resolve => setTimeout(resolve, ms))\n}\n/**\n * Skips to the next tick, then runs `checkAbortSignal`.\n * Await this to inside an otherwise synchronous loop to\n * provide a place to break when an abort signal is received.\n */\nexport async function abortBreakPoint(signal?: AbortSignal) {\n  // it was observed that an actual timeout is needed to get the aborting (wrap\n  // hicrenderer in a try catch, console.error the error, and rethrow the error\n  // to see). using await Promise.resolve() did not appear to allow aborting to\n  // occur\n  await timeout(1)\n  checkAbortSignal(signal)\n}\n\nexport function makeAbortError() {\n  if (typeof DOMException !== 'undefined') {\n    return new DOMException('aborted', 'AbortError')\n  }\n  const e = new AbortError('aborted')\n  e.code = 'ERR_ABORTED'\n  return e\n}\n\nexport function observeAbortSignal(signal?: AbortSignal): Observable<Event> {\n  if (!signal) {\n    return Observable.create()\n  }\n  return fromEvent(signal, 'abort')\n}\n\n/**\n * check if the given exception was caused by an operation being intentionally aborted\n * @param exception -\n */\nexport function isAbortException(exception: unknown): boolean {\n  return (\n    exception instanceof Error &&\n    // DOMException\n    (exception.name === 'AbortError' ||\n      // standard-ish non-DOM abort exception\n      (exception as AbortError).code === 'ERR_ABORTED' ||\n      // message contains aborted for bubbling through RPC\n      // things we have seen that we want to catch here\n      // Error: aborted\n      // AbortError: aborted\n      // AbortError: The user aborted a request.\n      !!exception.message.match(/\\b(aborted|AbortError)\\b/i))\n  )\n}\n","// This file is a ponyfill for the HTML5 OffscreenCanvas API.\n\nimport isNode from 'detect-node'\n\nimport { CanvasSequence } from 'canvas-sequencer'\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype AbstractCanvas = any\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype AbstractImageBitmap = any\n\nexport let createCanvas: (width: number, height: number) => AbstractCanvas\nexport let createImageBitmap: (\n  canvas: AbstractCanvas,\n) => Promise<AbstractImageBitmap>\n\n/** the JS class (constructor) for offscreen-generated image bitmap data */\nexport let ImageBitmapType: Function\n\nexport function drawImageOntoCanvasContext(\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  imageData: any,\n  context: CanvasRenderingContext2D,\n) {\n  if (imageData.serializedCommands) {\n    const seq = new CanvasSequence(imageData.serializedCommands)\n    seq.execute(context)\n  } else {\n    context.drawImage(imageData as CanvasImageSource, 0, 0)\n  }\n}\n\nconst weHave = {\n  realOffscreenCanvas: typeof OffscreenCanvas === 'function',\n  node: isNode,\n}\n\nif (weHave.realOffscreenCanvas) {\n  createCanvas = (width, height) => new OffscreenCanvas(width, height)\n  // eslint-disable-next-line no-restricted-globals\n  createImageBitmap = window.createImageBitmap || self.createImageBitmap\n  // eslint-disable-next-line no-restricted-globals\n  ImageBitmapType = window.ImageBitmap || self.ImageBitmap\n} else if (weHave.node) {\n  // use node-canvas if we are running in node (i.e. automated tests)\n  createCanvas = (...args) => {\n    // @ts-ignore\n    // eslint-disable-next-line no-undef\n    return nodeCreateCanvas(...args)\n  }\n  createImageBitmap = async (canvas, ...otherargs) => {\n    if (otherargs.length) {\n      throw new Error(\n        'only one-argument uses of createImageBitmap are supported by the node offscreencanvas ponyfill',\n      )\n    }\n    const dataUri = canvas.toDataURL()\n    // @ts-ignore\n    // eslint-disable-next-line no-undef\n    const img = new nodeImage()\n    return new Promise((resolve, reject) => {\n      img.onload = () => resolve(img)\n      img.onerror = reject\n      img.src = dataUri\n    })\n  }\n} else {\n  createCanvas = (width: number, height: number) => {\n    const context = new CanvasSequence()\n    return {\n      width,\n      height,\n      getContext() {\n        return context\n      },\n    }\n  }\n  createImageBitmap = async canvas => {\n    const ctx = canvas.getContext('2d')\n    return {\n      height: canvas.height,\n      width: canvas.width,\n      serializedCommands: ctx.toJSON(),\n      containsNoTransferables: true,\n    }\n  }\n  ImageBitmapType = String\n}\n","import React from 'react'\nimport { CanvasSequence } from 'canvas-sequencer'\n\n// locals\nimport { createCanvas, createImageBitmap } from './offscreenCanvasPonyfill'\nimport { blobToDataURL } from './index'\n\nexport type RenderReturn = Record<string, unknown>\n\nexport async function renderToAbstractCanvas(\n  width: number,\n  height: number,\n  opts: {\n    exportSVG?: { rasterizeLayers?: boolean }\n    highResolutionScaling: number\n  },\n  cb: (\n    ctx: CanvasRenderingContext2D,\n  ) => Promise<RenderReturn | void> | RenderReturn | void,\n) {\n  const { exportSVG, highResolutionScaling: scaling = 1 } = opts\n\n  if (exportSVG) {\n    if (!exportSVG.rasterizeLayers) {\n      const fakeCtx = new CanvasSequence()\n      const result = await cb(fakeCtx)\n      return {\n        ...result,\n        canvasRecordedData: fakeCtx.toJSON(),\n      }\n    } else {\n      const scale = 4\n      const canvas = createCanvas(Math.ceil(width * scale), height * scale)\n      const ctx = canvas.getContext('2d')\n      if (!ctx) {\n        throw new Error('2d canvas rendering not supported on this platform')\n      }\n      ctx.scale(scale, scale)\n      const result = await cb(ctx)\n\n      // two methods needed for converting canvas to PNG, one for webworker\n      // offscreen canvas, one for main thread\n      return {\n        ...result,\n        reactElement: (\n          <image\n            width={width}\n            height={height}\n            xlinkHref={\n              'convertToBlob' in canvas\n                ? await blobToDataURL(\n                    await canvas.convertToBlob({\n                      type: 'image/png',\n                    }),\n                  )\n                : canvas.toDataURL()\n            }\n          />\n        ),\n      }\n    }\n  } else {\n    const canvas = createCanvas(Math.ceil(width * scaling), height * scaling)\n    const ctx = canvas.getContext('2d')\n    if (!ctx) {\n      throw new Error('2d canvas rendering not supported on this platform')\n    }\n    ctx.scale(scaling, scaling)\n    const result = await cb(ctx)\n    return { ...result, imageData: await createImageBitmap(canvas) }\n  }\n}\n","import React from 'react'\nimport {\n  isStateTreeNode,\n  Instance,\n  SnapshotIn,\n  IAnyStateTreeNode,\n  IStateTreeNode,\n  IType,\n} from 'mobx-state-tree'\nimport { AnyConfigurationModel } from '../../configuration/configurationSchema'\n\nimport assemblyManager from '../../assemblyManager'\nimport TextSearchManager from '../../TextSearch/TextSearchManager'\nimport { MenuItem } from '../../ui'\nimport {\n  NoAssemblyRegion as MUNoAssemblyRegion,\n  Region as MUIRegion,\n  LocalPathLocation as MULocalPathLocation,\n  UriLocation as MUUriLocation,\n  BlobLocation as MUBlobLocation,\n} from './mst'\nimport RpcManager from '../../rpc/RpcManager'\nimport { Feature } from '../simpleFeature'\nimport { BaseInternetAccountModel } from '../../pluggableElementTypes/models'\n\nexport * from './util'\n\n/** abstract type for a model that contains multiple views */\nexport interface AbstractViewContainer\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  extends IStateTreeNode<IType<any, unknown, any>> {\n  views: AbstractViewModel[]\n  removeView(view: AbstractViewModel): void\n  addView(\n    typeName: string,\n    initialState?: Record<string, unknown>,\n  ): AbstractViewModel\n}\nexport function isViewContainer(\n  thing: unknown,\n): thing is AbstractViewContainer {\n  return (\n    isStateTreeNode(thing) &&\n    'removeView' in thing &&\n    'addView' in thing &&\n    'views' in thing\n  )\n}\n\nexport type NotificationLevel = 'error' | 'info' | 'warning' | 'success'\nexport interface SnackAction {\n  name: string\n  onClick: () => void\n}\n\nexport type AssemblyManager = Instance<ReturnType<typeof assemblyManager>>\nexport type { TextSearchManager }\nexport interface BasePlugin {\n  version?: string\n  name: string\n  url?: string\n}\n\nexport interface JBrowsePlugin {\n  name: string\n  authors: string[]\n  description: string\n  location: string\n  url?: string\n  umdUrl?: string\n  esmUrl?: string\n  cjsUrl?: string\n  license: string\n  image?: string\n}\n\nexport type DialogComponentType =\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  | React.LazyExoticComponent<React.FC<any>>\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  | React.FC<any>\n\n/** minimum interface that all session state models must implement */\nexport interface AbstractSessionModel extends AbstractViewContainer {\n  drawerPosition?: string\n  setSelection(feature: Feature): void\n  clearSelection(): void\n  configuration: AnyConfigurationModel\n  rpcManager: RpcManager\n  assemblyNames: string[]\n  assemblies: AnyConfigurationModel[]\n  selection?: unknown\n  duplicateCurrentSession?(): void\n  notify(message: string, level?: NotificationLevel, action?: SnackAction): void\n  assemblyManager: AssemblyManager\n  version: string\n  getTrackActionMenuItems?: Function\n  addAssembly?: Function\n  removeAssembly?: Function\n  textSearchManager?: TextSearchManager\n  connections: AnyConfigurationModel[]\n  deleteConnection?: Function\n  sessionConnections?: AnyConfigurationModel[]\n  connectionInstances?: {\n    name: string\n    connectionId: string\n    tracks: AnyConfigurationModel[]\n  }[]\n  makeConnection?: Function\n  adminMode?: boolean\n  showWidget?: Function\n  addWidget?: Function\n\n  DialogComponent?: DialogComponentType\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  DialogProps: any\n  queueDialog<T extends DialogComponentType>(\n    callback: (doneCallback: () => void) => [T, React.ComponentProps<T>],\n  ): void\n  name: string\n  id?: string\n  tracks: AnyConfigurationModel[]\n}\nexport function isSessionModel(thing: unknown): thing is AbstractSessionModel {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'rpcManager' in thing &&\n    'configuration' in thing\n  )\n}\n\n/** abstract interface for a session allows editing configurations */\nexport interface SessionWithConfigEditing extends AbstractSessionModel {\n  editConfiguration(configuration: AnyConfigurationModel): void\n}\nexport function isSessionModelWithConfigEditing(\n  thing: unknown,\n): thing is SessionWithConfigEditing {\n  return isSessionModel(thing) && 'editConfiguration' in thing\n}\n\n/** abstract interface for a session allows adding tracks */\nexport interface SessionWithConfigEditing extends AbstractSessionModel {\n  addTrackConf(\n    configuration: AnyConfigurationModel | SnapshotIn<AnyConfigurationModel>,\n  ): void\n}\nexport function isSessionWithAddTracks(\n  thing: unknown,\n): thing is SessionWithConfigEditing {\n  return (\n    // @ts-ignore\n    isSessionModel(thing) && 'addTrackConf' in thing && !thing.disableAddTracks\n  )\n}\n\nexport interface Widget {\n  type: string\n  id: string\n}\n\n/** abstract interface for a session that manages widgets */\nexport interface SessionWithWidgets extends AbstractSessionModel {\n  minimized: boolean\n  visibleWidget?: Widget\n  widgets: Map<string, Widget>\n  activeWidgets: Map<string, Widget>\n  addWidget(\n    typeName: string,\n    id: string,\n    initialState?: Record<string, unknown>,\n    configuration?: { type: string },\n  ): Widget\n  showWidget(widget: unknown): void\n  hideWidget(widget: unknown): void\n}\n\n/* only some sessions with widgets use a drawer widget */\nexport interface SessionWithDrawerWidgets extends SessionWithWidgets {\n  drawerWidth: number\n  resizeDrawer(arg: number): number\n  minimizeWidgetDrawer(): void\n  showWidgetDrawer: () => void\n  drawerPosition: string\n  setDrawerPosition(arg: string): void\n}\n\nexport function isSessionModelWithWidgets(\n  thing: unknown,\n): thing is SessionWithWidgets {\n  return isSessionModel(thing) && 'widgets' in thing\n}\n\ninterface SessionWithConnections {\n  addConnectionConf: (arg: AnyConfigurationModel) => void\n}\n\nexport function isSessionModelWithConnections(\n  thing: unknown,\n): thing is SessionWithConnections {\n  return isSessionModel(thing) && 'addConnectionConf' in thing\n}\n\nexport interface SessionWithSessionPlugins extends AbstractSessionModel {\n  sessionPlugins: JBrowsePlugin[]\n  addSessionPlugin: Function\n  removeSessionPlugin: Function\n}\nexport function isSessionWithSessionPlugins(\n  thing: unknown,\n): thing is SessionWithSessionPlugins {\n  return isSessionModel(thing) && 'sessionPlugins' in thing\n}\n\n/** abstract interface for a session that manages a global selection */\nexport interface SelectionContainer extends AbstractSessionModel {\n  selection?: unknown\n  setSelection(thing: unknown): void\n}\nexport function isSelectionContainer(\n  thing: unknown,\n): thing is SelectionContainer {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'selection' in thing &&\n    'setSelection' in thing\n  )\n}\n\n/** minimum interface that all view state models must implement */\nexport interface AbstractViewModel {\n  id: string\n  type: string\n  width: number\n  minimized: boolean\n  setWidth(width: number): void\n  setMinimized(flag: boolean): void\n  displayName: string | undefined\n  setDisplayName: (arg: string) => void\n  menuItems: () => MenuItem[]\n}\nexport function isViewModel(thing: unknown): thing is AbstractViewModel {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'width' in thing &&\n    'setWidth' in thing\n  )\n}\n\nexport interface AbstractTrackModel {\n  displays: AbstractDisplayModel[]\n}\n\nexport function isTrackModel(thing: unknown): thing is AbstractTrackModel {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'configuration' in thing &&\n    // @ts-ignore\n    thing.configuration.trackId\n  )\n}\n\nexport interface AbstractDisplayModel {\n  id: string\n  parentTrack: AbstractTrackModel\n  renderDelay: number\n  rendererType: any // eslint-disable-line @typescript-eslint/no-explicit-any\n  cannotBeRenderedReason?: string\n}\nexport function isDisplayModel(thing: unknown): thing is AbstractDisplayModel {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'configuration' in thing &&\n    // @ts-ignore\n    thing.configuration.displayId\n  )\n}\n\nexport interface TrackViewModel extends AbstractViewModel {\n  showTrack(trackId: string): void\n  hideTrack(trackId: string): void\n}\nexport function isTrackViewModel(thing: unknown): thing is TrackViewModel {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'showTrack' in thing &&\n    'hideTrack' in thing\n  )\n}\n\n/** minimum interface for the root MST model of a JBrowse app */\nexport interface AbstractRootModel {\n  jbrowse: IAnyStateTreeNode\n  session?: AbstractSessionModel\n  setDefaultSession?(): void\n  adminMode?: boolean\n  error?: unknown\n}\n\n/** root model with more included for the heavier JBrowse web and desktop app */\nexport interface AppRootModel extends AbstractRootModel {\n  isAssemblyEditing: boolean\n  isDefaultSessionEditing: boolean\n  setAssemblyEditing: (arg: boolean) => boolean\n  setDefaultSessionEditing: (arg: boolean) => boolean\n  internetAccounts: BaseInternetAccountModel[]\n  findAppropriateInternetAccount(\n    location: UriLocation,\n  ): BaseInternetAccountModel | undefined\n}\n\nexport function isAppRootModel(thing: unknown): thing is AppRootModel {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'isAssemblyEditing' in thing &&\n    'findAppropriateInternetAccount' in thing\n  )\n}\n\nexport interface RootModelWithInternetAccounts extends AbstractRootModel {\n  internetAccounts: BaseInternetAccountModel[]\n  findAppropriateInternetAccount(\n    location: UriLocation,\n  ): BaseInternetAccountModel | undefined\n}\n\nexport function isRootModelWithInternetAccounts(\n  thing: unknown,\n): thing is RootModelWithInternetAccounts {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'internetAccounts' in thing &&\n    'findAppropriateInternetAccount' in thing\n  )\n}\n\n/** a root model that manages global menus */\nexport interface AbstractMenuManager {\n  appendMenu(menuName: string): void\n  insertMenu(menuName: string, position: number): number\n  insertInMenu(menuName: string, menuItem: MenuItem, position: number): number\n  appendToMenu(menuName: string, menuItem: MenuItem): number\n  appendToSubMenu(menuPath: string[], menuItem: MenuItem): number\n  insertInSubMenu(\n    menuPath: string[],\n    menuItem: MenuItem,\n    position: number,\n  ): number\n}\nexport function isAbstractMenuManager(\n  thing: unknown,\n): thing is AbstractMenuManager {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'appendMenu' in thing &&\n    'appendToSubMenu' in thing\n  )\n}\n\n// Empty interfaces required by mobx-state-tree\n// See https://mobx-state-tree.js.org/tips/typescript#using-a-mst-type-at-design-time\n/* eslint-disable @typescript-eslint/no-empty-interface */\n\nexport interface NoAssemblyRegion\n  extends SnapshotIn<typeof MUNoAssemblyRegion> {}\n\nexport interface Region extends SnapshotIn<typeof MUIRegion> {}\n\nexport interface AugmentedRegion extends Region {\n  originalRefName?: string\n}\n\nexport interface LocalPathLocation\n  extends SnapshotIn<typeof MULocalPathLocation> {}\n\nexport interface UriLocation extends SnapshotIn<typeof MUUriLocation> {}\n\nexport function isUriLocation(location: unknown): location is UriLocation {\n  return typeof location === 'object' && location !== null && 'uri' in location\n}\nexport class AuthNeededError extends Error {\n  constructor(public message: string, public url: string) {\n    super(message)\n    this.name = 'AuthNeededError'\n\n    Object.setPrototypeOf(this, AuthNeededError.prototype)\n  }\n}\n\nexport class RetryError extends Error {\n  constructor(public message: string, public internetAccountId: string) {\n    super(message)\n    this.name = 'RetryError'\n  }\n}\n\nexport function isAuthNeededException(\n  exception: unknown,\n): exception is AuthNeededError {\n  return (\n    exception instanceof Error &&\n    // DOMException\n    (exception.name === 'AuthNeededError' ||\n      (exception as AuthNeededError).url !== undefined)\n  )\n}\n\nexport function isRetryException(exception: Error): boolean {\n  return (\n    // DOMException\n    exception.name === 'RetryError' ||\n    (exception as RetryError).internetAccountId !== undefined\n  )\n}\n\nexport interface BlobLocation extends SnapshotIn<typeof MUBlobLocation> {}\n\nexport type FileLocation = LocalPathLocation | UriLocation | BlobLocation\n\n// These types are slightly different than the MST models representing a\n// location because a blob cannot be stored in a MST, so this is the\n// pre-processed file location\nexport type PreUriLocation = { uri: string }\nexport type PreLocalPathLocation = { localPath: string }\nexport type PreBlobLocation = { blob: File }\nexport type PreFileLocation =\n  | PreUriLocation\n  | PreLocalPathLocation\n  | PreBlobLocation\n","import { when as mobxWhen, IWhenOptions } from 'mobx'\nimport { makeAbortError } from './aborting'\n\ninterface WhenOpts extends IWhenOptions {\n  signal?: AbortSignal\n}\n\n/**\n * Wrapper for mobx `when` that adds timeout and aborting support.\n */\nexport function when(\n  getter: () => boolean,\n  { timeout, signal, name }: WhenOpts = {},\n) {\n  return new Promise((resolve, reject) => {\n    let finished = false\n\n    const whenPromise = mobxWhen(getter)\n\n    // set up timeout\n    let timeoutId: ReturnType<typeof setTimeout> | undefined\n    let finishTimeout = () => {}\n    if (timeout) {\n      timeoutId = setTimeout(() => {\n        if (!finished) {\n          finished = true\n          whenPromise.cancel()\n          reject(new Error(`timed out waiting for ${name || 'whenPresent'}`))\n        }\n      }, timeout)\n      finishTimeout = () => timeoutId && clearTimeout(timeoutId)\n    }\n\n    // set up aborting\n    if (signal) {\n      signal.addEventListener('abort', () => {\n        if (!finished) {\n          finished = true\n\n          // mobx when supports a cancel method\n          whenPromise.cancel()\n          finishTimeout()\n\n          reject(makeAbortError())\n        }\n      })\n    }\n\n    whenPromise\n      .then(() => {\n        if (!finished) {\n          finished = true\n          finishTimeout()\n\n          resolve(true)\n        }\n      })\n      .catch(err => {\n        if (!finished) {\n          finished = true\n          finishTimeout()\n\n          reject(err)\n        }\n      })\n  })\n}\n\n/**\n * Wrapper for mobx `when` that makes a promise for the return value\n * of the given function at the point in time when it becomes not\n * undefined and not null.\n */\nexport async function whenPresent<FUNCTION extends () => unknown>(\n  getter: FUNCTION,\n  opts: WhenOpts = {},\n): Promise<NonNullable<ReturnType<FUNCTION>>> {\n  await when(() => {\n    const val = getter()\n    return val !== undefined && val !== null\n  }, opts)\n\n  return getter() as NonNullable<ReturnType<FUNCTION>>\n}\n","import {\n  isModelType,\n  isType,\n  types,\n  IAnyType,\n  IAnyModelType,\n} from 'mobx-state-tree'\n\n// Pluggable elements\nimport PluggableElementBase from './pluggableElementTypes/PluggableElementBase'\nimport RendererType from './pluggableElementTypes/renderers/RendererType'\nimport AdapterType from './pluggableElementTypes/AdapterType'\nimport TrackType from './pluggableElementTypes/TrackType'\nimport DisplayType from './pluggableElementTypes/DisplayType'\nimport ViewType from './pluggableElementTypes/ViewType'\nimport WidgetType from './pluggableElementTypes/WidgetType'\nimport ConnectionType from './pluggableElementTypes/ConnectionType'\nimport RpcMethodType from './pluggableElementTypes/RpcMethodType'\nimport InternetAccountType from './pluggableElementTypes/InternetAccountType'\nimport TextSearchAdapterType from './pluggableElementTypes/TextSearchAdapterType'\nimport AddTrackWorkflowType from './pluggableElementTypes/AddTrackWorkflowType'\n\nimport {\n  ConfigurationSchema,\n  isBareConfigurationSchemaType,\n} from './configuration'\n\nimport Plugin from './Plugin'\nimport ReExports from './ReExports'\n\nimport {\n  PluggableElementType,\n  PluggableElementMember,\n} from './pluggableElementTypes'\nimport { AbstractRootModel } from './util'\nimport CorePlugin from './CorePlugin'\nimport createJexlInstance from './util/jexl'\nimport { PluginDefinition } from './PluginLoader'\n\n/** little helper class that keeps groups of callbacks that are\nthen run in a specified order by group */\nclass PhasedScheduler<PhaseName extends string> {\n  phaseCallbacks = new Map<PhaseName, Function[]>()\n\n  phaseOrder: PhaseName[] = []\n\n  constructor(...phaseOrder: PhaseName[]) {\n    this.phaseOrder = phaseOrder\n  }\n\n  add(phase: PhaseName, callback: Function) {\n    if (!this.phaseOrder.includes(phase)) {\n      throw new Error(`unknown phase ${phase}`)\n    }\n    let phaseCallbacks = this.phaseCallbacks.get(phase)\n    if (!phaseCallbacks) {\n      phaseCallbacks = []\n      this.phaseCallbacks.set(phase, phaseCallbacks)\n    }\n    phaseCallbacks.push(callback)\n  }\n\n  run() {\n    this.phaseOrder.forEach(phaseName => {\n      this.phaseCallbacks.get(phaseName)?.forEach(callback => callback())\n    })\n  }\n}\n\ntype PluggableElementTypeGroup =\n  | 'renderer'\n  | 'adapter'\n  | 'display'\n  | 'track'\n  | 'connection'\n  | 'view'\n  | 'widget'\n  | 'rpc method'\n  | 'internet account'\n  | 'text search adapter'\n  | 'add track workflow'\n\n/** internal class that holds the info for a certain element type */\nclass TypeRecord<ElementClass extends PluggableElementBase> {\n  registeredTypes: { [name: string]: ElementClass } = {}\n\n  constructor(\n    public typeName: string,\n    public baseClass: // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    | { new (...args: any[]): ElementClass }\n      // covers abstract class case\n      | (Function & {\n          prototype: ElementClass\n        }),\n  ) {}\n\n  add(name: string, t: ElementClass) {\n    this.registeredTypes[name] = t\n  }\n\n  has(name: string) {\n    return name in this.registeredTypes\n  }\n\n  get(name: string) {\n    if (!this.has(name)) {\n      throw new Error(\n        `${this.typeName} '${name}' not found, perhaps its plugin is not loaded or its plugin has not added it.`,\n      )\n    }\n    return this.registeredTypes[name]\n  }\n\n  all() {\n    return Object.values(this.registeredTypes)\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype AnyFunction = (...args: any) => any\n\n/**\n * free-form string-to-unknown mapping of metadata related to the instance\n * of this plugin. `isCore` is typically set to `Boolean(true)` if the plugin was\n * loaded as part of the \"core\" set of plugins for this application.\n * Can also use this metadata to stash other things about why the plugin is\n * loaded, such as where it came from, what plugin depends on it, etc.\n */\nexport type PluginMetadata = Record<string, unknown>\n\nexport interface PluginLoadRecord {\n  metadata?: PluginMetadata\n  plugin: Plugin\n}\nexport interface RuntimePluginLoadRecord extends PluginLoadRecord {\n  definition: PluginDefinition\n}\n\nexport default class PluginManager {\n  plugins: Plugin[] = []\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  jexl: any = createJexlInstance()\n\n  pluginMetadata: Record<string, PluginMetadata> = {}\n\n  runtimePluginDefinitions: PluginDefinition[] = []\n\n  elementCreationSchedule = new PhasedScheduler<PluggableElementTypeGroup>(\n    'renderer',\n    'adapter',\n    'text search adapter',\n    'display',\n    'track',\n    'connection',\n    'view',\n    'widget',\n    'rpc method',\n    'internet account',\n    'add track workflow',\n  ) as PhasedScheduler<PluggableElementTypeGroup> | undefined\n\n  rendererTypes = new TypeRecord('RendererType', RendererType)\n\n  adapterTypes = new TypeRecord('AdapterType', AdapterType)\n\n  textSearchAdapterTypes = new TypeRecord(\n    'TextSearchAdapterType',\n    TextSearchAdapterType,\n  )\n\n  trackTypes = new TypeRecord('TrackType', TrackType)\n\n  displayTypes = new TypeRecord('DisplayType', DisplayType)\n\n  connectionTypes = new TypeRecord('ConnectionType', ConnectionType)\n\n  viewTypes = new TypeRecord('ViewType', ViewType)\n\n  widgetTypes = new TypeRecord('WidgetType', WidgetType)\n\n  rpcMethods = new TypeRecord('RpcMethodType', RpcMethodType)\n\n  addTrackWidgets = new TypeRecord('AddTrackWorkflow', AddTrackWorkflowType)\n\n  internetAccountTypes = new TypeRecord(\n    'InternetAccountType',\n    InternetAccountType,\n  )\n\n  configured = false\n\n  rootModel?: AbstractRootModel\n\n  extensionPoints: Map<string, Function[]> = new Map()\n\n  constructor(initialPlugins: (Plugin | PluginLoadRecord)[] = []) {\n    // add the core plugin\n    this.addPlugin({ plugin: new CorePlugin(), metadata: { isCore: true } })\n\n    // add all the initial plugins\n    initialPlugins.forEach(plugin => {\n      this.addPlugin(plugin)\n    })\n  }\n\n  pluginConfigurationSchemas() {\n    const configurationSchemas: { [key: string]: unknown } = {}\n    this.plugins.forEach(plugin => {\n      if (plugin.configurationSchema) {\n        configurationSchemas[plugin.name] = plugin.configurationSchema\n      }\n    })\n    return configurationSchemas\n  }\n\n  addPlugin(load: Plugin | PluginLoadRecord | RuntimePluginLoadRecord) {\n    if (this.configured) {\n      throw new Error('JBrowse already configured, cannot add plugins')\n    }\n\n    // check for availability of 'install' and 'configure' as a proxy for being\n    // an 'instanceof Plugin'\n    const [plugin, metadata = {}] =\n      'install' in load && 'configure' in load\n        ? [load, {}]\n        : [load.plugin, load.metadata]\n\n    if (this.plugins.includes(plugin)) {\n      throw new Error('plugin already installed')\n    }\n\n    this.pluginMetadata[plugin.name] = metadata\n    if ('definition' in load) {\n      // @ts-ignore\n      this.runtimePluginDefinitions.push(load.definition as PluginDefinition)\n    }\n    plugin.install(this)\n    this.plugins.push(plugin)\n    return this\n  }\n\n  getPlugin(name: string) {\n    return this.plugins.find(p => p.name === name)\n  }\n\n  hasPlugin(name: string) {\n    return this.getPlugin(name) !== undefined\n  }\n\n  createPluggableElements() {\n    // run the creation callbacks for each element type in order.\n    // see elementCreationSchedule above for the creation order\n    if (this.elementCreationSchedule) {\n      this.elementCreationSchedule.run()\n      delete this.elementCreationSchedule\n    }\n    return this\n  }\n\n  setRootModel(rootModel: AbstractRootModel) {\n    this.rootModel = rootModel\n  }\n\n  configure() {\n    if (this.configured) {\n      throw new Error('already configured')\n    }\n\n    this.plugins.forEach(plugin => plugin.configure(this))\n\n    this.configured = true\n\n    return this\n  }\n\n  getElementTypeRecord(\n    groupName: PluggableElementTypeGroup,\n  ): TypeRecord<PluggableElementBase> {\n    switch (groupName) {\n      case 'adapter':\n        return this.adapterTypes\n      case 'text search adapter':\n        return this.textSearchAdapterTypes\n      case 'connection':\n        return this.connectionTypes\n      case 'widget':\n        return this.widgetTypes\n      case 'renderer':\n        return this.rendererTypes\n      case 'display':\n        return this.displayTypes\n      case 'track':\n        return this.trackTypes\n      case 'view':\n        return this.viewTypes\n      case 'rpc method':\n        return this.rpcMethods\n      case 'internet account':\n        return this.internetAccountTypes\n      case 'add track workflow':\n        return this.addTrackWidgets\n      default:\n        throw new Error(`invalid element type '${groupName}'`)\n    }\n  }\n\n  addElementType(\n    groupName: PluggableElementTypeGroup,\n    creationCallback: (pluginManager: PluginManager) => PluggableElementType,\n  ) {\n    if (typeof creationCallback !== 'function') {\n      throw new Error(\n        'must provide a callback function that returns the new type object',\n      )\n    }\n    const typeRecord = this.getElementTypeRecord(groupName)\n\n    this.elementCreationSchedule?.add(groupName, () => {\n      const newElement = creationCallback(this)\n      if (!newElement.name) {\n        throw new Error(`cannot add a ${groupName} with no name`)\n      }\n\n      if (typeRecord.has(newElement.name)) {\n        throw new Error(\n          `${groupName} ${newElement.name} already registered, cannot register it again`,\n        )\n      }\n\n      typeRecord.add(\n        newElement.name,\n        this.evaluateExtensionPoint(\n          'Core-extendPluggableElement',\n          newElement,\n        ) as PluggableElementType,\n      )\n    })\n\n    return this\n  }\n\n  getElementType(groupName: PluggableElementTypeGroup, typeName: string) {\n    return this.getElementTypeRecord(groupName).get(typeName)\n  }\n\n  getElementTypesInGroup(groupName: PluggableElementTypeGroup) {\n    return this.getElementTypeRecord(groupName).all()\n  }\n\n  getRpcElements() {\n    return this.getElementTypesInGroup('rpc method') as RpcMethodType[]\n  }\n\n  /** get a MST type for the union of all specified pluggable MST types */\n  pluggableMstType(\n    groupName: PluggableElementTypeGroup,\n    fieldName: PluggableElementMember,\n    fallback: IAnyType = types.maybe(types.null),\n  ) {\n    const pluggableTypes = this.getElementTypeRecord(groupName)\n      .all()\n      // @ts-ignore\n      .map(t => t[fieldName])\n      .filter(t => isType(t) && isModelType(t)) as IAnyType[]\n\n    // try to smooth over the case when no types are registered, mostly\n    // encountered in tests\n    if (pluggableTypes.length === 0) {\n      console.warn(\n        `No pluggable types found matching ('${groupName}','${fieldName}')`,\n      )\n      return fallback\n    }\n    return types.union(...pluggableTypes)\n  }\n\n  /** get a MST type for the union of all specified pluggable config schemas */\n  pluggableConfigSchemaType(\n    typeGroup: PluggableElementTypeGroup,\n    fieldName: PluggableElementMember = 'configSchema',\n  ) {\n    const pluggableTypes = this.getElementTypeRecord(typeGroup)\n      .all()\n      // @ts-ignore\n      .map(t => t[fieldName])\n      .filter(t => isBareConfigurationSchemaType(t)) as IAnyType[]\n\n    if (pluggableTypes.length === 0) {\n      pluggableTypes.push(ConfigurationSchema('Null', {}))\n    }\n    return types.union(...pluggableTypes) as IAnyModelType\n  }\n\n  jbrequireCache = new Map()\n\n  lib = ReExports\n\n  load = <FTYPE extends AnyFunction>(lib: FTYPE): ReturnType<FTYPE> => {\n    if (!this.jbrequireCache.has(lib)) {\n      this.jbrequireCache.set(lib, lib(this))\n    }\n    return this.jbrequireCache.get(lib)\n  }\n\n  /**\n   * Get the re-exported version of the given package name.\n   * Throws an error if the package is not re-exported by the plugin manager.\n   *\n   * @returns the library's default export\n   */\n  jbrequire = (\n    lib: keyof typeof ReExports | AnyFunction | { default: AnyFunction },\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ): any => {\n    if (typeof lib === 'string') {\n      const pack = this.lib[lib]\n      if (!pack) {\n        throw new TypeError(\n          `No jbrequire re-export defined for package '${lib}'. If this package must be shared between plugins, add it to ReExports.js. If it does not need to be shared, just import it normally.`,\n        )\n      }\n      return pack\n    }\n\n    if (typeof lib === 'function') {\n      return this.load(lib)\n    }\n\n    if (lib.default) {\n      return this.jbrequire(lib.default)\n    }\n\n    throw new TypeError(\n      'lib passed to jbrequire must be either a string or a function',\n    )\n  }\n\n  getRendererType(typeName: string): RendererType {\n    return this.rendererTypes.get(typeName)\n  }\n\n  getRendererTypes(): RendererType[] {\n    return this.rendererTypes.all()\n  }\n\n  getAdapterType(typeName: string): AdapterType {\n    return this.adapterTypes.get(typeName)\n  }\n\n  getTextSearchAdapterType(typeName: string): TextSearchAdapterType {\n    return this.textSearchAdapterTypes.get(typeName)\n  }\n\n  getTrackType(typeName: string): TrackType {\n    return this.trackTypes.get(typeName)\n  }\n\n  getDisplayType(typeName: string): DisplayType {\n    return this.displayTypes.get(typeName)\n  }\n\n  getViewType(typeName: string): ViewType {\n    return this.viewTypes.get(typeName)\n  }\n\n  getAddTrackWorkflow(typeName: string): AddTrackWorkflowType {\n    return this.addTrackWidgets.get(typeName)\n  }\n\n  getWidgetType(typeName: string): WidgetType {\n    return this.widgetTypes.get(typeName)\n  }\n\n  getConnectionType(typeName: string): ConnectionType {\n    return this.connectionTypes.get(typeName)\n  }\n\n  getRpcMethodType(methodName: string): RpcMethodType {\n    return this.rpcMethods.get(methodName)\n  }\n\n  getInternetAccountType(name: string): InternetAccountType {\n    return this.internetAccountTypes.get(name)\n  }\n\n  addRendererType(cb: (pm: PluginManager) => RendererType) {\n    return this.addElementType('renderer', cb)\n  }\n\n  addAdapterType(cb: (pm: PluginManager) => AdapterType) {\n    return this.addElementType('adapter', cb)\n  }\n\n  addTextSearchAdapterType(cb: (pm: PluginManager) => TextSearchAdapterType) {\n    return this.addElementType('text search adapter', cb)\n  }\n\n  addTrackType(cb: (pm: PluginManager) => TrackType) {\n    // Goes through the already-created displays and registers the ones that\n    // specify this track type\n    const callback = () => {\n      const track = cb(this)\n      const displays = this.getElementTypesInGroup('display') as DisplayType[]\n      displays.forEach(display => {\n        // track may have already added the displayType in its cb\n        if (\n          display.trackType === track.name &&\n          !track.displayTypes.includes(display)\n        ) {\n          track.addDisplayType(display)\n        }\n      })\n      return track\n    }\n    return this.addElementType('track', callback)\n  }\n\n  addDisplayType(cb: (pluginManager: PluginManager) => DisplayType) {\n    return this.addElementType('display', cb)\n  }\n\n  addViewType(cb: (pluginManager: PluginManager) => ViewType) {\n    const callback = () => {\n      const newView = cb(this)\n      const displays = this.getElementTypesInGroup('display') as DisplayType[]\n      displays.forEach(display => {\n        // view may have already added the displayType in its callback\n        // see ViewType for description of extendedName\n        if (\n          (display.viewType === newView.name ||\n            display.viewType === newView.extendedName) &&\n          !newView.displayTypes.includes(display)\n        ) {\n          newView.addDisplayType(display)\n        }\n      })\n      return newView\n    }\n    return this.addElementType('view', callback)\n  }\n\n  addWidgetType(cb: (pm: PluginManager) => WidgetType) {\n    return this.addElementType('widget', cb)\n  }\n\n  addConnectionType(cb: (pm: PluginManager) => ConnectionType) {\n    return this.addElementType('connection', cb)\n  }\n\n  addRpcMethod(cb: (pm: PluginManager) => RpcMethodType) {\n    return this.addElementType('rpc method', cb)\n  }\n\n  addInternetAccountType(cb: (pm: PluginManager) => InternetAccountType) {\n    return this.addElementType('internet account', cb)\n  }\n\n  addAddTrackWorkflowType(cb: (pm: PluginManager) => AddTrackWorkflowType) {\n    return this.addElementType('add track workflow', cb)\n  }\n\n  addToExtensionPoint<T>(\n    extensionPointName: string,\n    callback: (extendee: T, props: Record<string, unknown>) => T,\n  ) {\n    let callbacks = this.extensionPoints.get(extensionPointName)\n    if (!callbacks) {\n      callbacks = []\n      this.extensionPoints.set(extensionPointName, callbacks)\n    }\n    callbacks.push(callback)\n  }\n\n  evaluateExtensionPoint(\n    extensionPointName: string,\n    extendee: unknown,\n    props?: Record<string, unknown>,\n  ) {\n    const callbacks = this.extensionPoints.get(extensionPointName)\n    let accumulator = extendee\n    if (callbacks) {\n      for (const callback of callbacks) {\n        try {\n          accumulator = callback(accumulator, props)\n        } catch (error) {\n          console.error(error)\n        }\n      }\n    }\n    return accumulator\n  }\n\n  async evaluateAsyncExtensionPoint(\n    extensionPointName: string,\n    extendee: unknown,\n    props?: Record<string, unknown>,\n  ) {\n    const callbacks = this.extensionPoints.get(extensionPointName)\n    let accumulator = extendee\n    if (callbacks) {\n      for (const callback of callbacks) {\n        try {\n          accumulator = await callback(accumulator, props)\n        } catch (error) {\n          console.error(error)\n        }\n      }\n    }\n    return accumulator\n  }\n}\n","import domLoadScript from 'load-script2'\n\nimport { PluginConstructor } from './Plugin'\nimport ReExports from './ReExports'\nimport { isElectron } from './util'\n\nexport interface UMDLocPluginDefinition {\n  umdLoc: { uri: string; baseUri?: string }\n  name: string\n}\nexport interface UMDUrlPluginDefinition {\n  umdUrl: string\n  name: string\n}\n\nexport interface LegacyUMDPluginDefinition {\n  url: string\n  name: string\n}\n\ntype UMDPluginDefinition = UMDLocPluginDefinition | UMDUrlPluginDefinition\n\nexport function isUMDPluginDefinition(\n  def: PluginDefinition,\n): def is UMDPluginDefinition | LegacyUMDPluginDefinition {\n  return (\n    ((def as UMDUrlPluginDefinition).umdUrl !== undefined ||\n      (def as LegacyUMDPluginDefinition).url !== undefined ||\n      (def as UMDLocPluginDefinition).umdLoc !== undefined) &&\n    (def as LegacyUMDPluginDefinition | UMDPluginDefinition).name !== undefined\n  )\n}\n\nexport interface ESMLocPluginDefinition {\n  esmLoc: { uri: string; baseUri?: string }\n}\nexport interface ESMUrlPluginDefinition {\n  esmUrl: string\n}\n\nexport type ESMPluginDefinition =\n  | ESMLocPluginDefinition\n  | ESMUrlPluginDefinition\n\nexport function isESMPluginDefinition(\n  def: PluginDefinition,\n): def is ESMPluginDefinition {\n  return (\n    (def as ESMUrlPluginDefinition).esmUrl !== undefined ||\n    (def as ESMLocPluginDefinition).esmLoc !== undefined\n  )\n}\n\nexport interface CJSPluginDefinition {\n  cjsUrl: string\n}\n\nexport function isCJSPluginDefinition(\n  def: PluginDefinition,\n): def is CJSPluginDefinition {\n  return (def as CJSPluginDefinition).cjsUrl !== undefined\n}\n\nexport interface PluginDefinition\n  extends Partial<UMDUrlPluginDefinition>,\n    Partial<UMDLocPluginDefinition>,\n    Partial<LegacyUMDPluginDefinition>,\n    Partial<ESMLocPluginDefinition>,\n    Partial<ESMUrlPluginDefinition>,\n    Partial<CJSPluginDefinition> {}\n\nexport interface PluginRecord {\n  plugin: PluginConstructor\n  definition: PluginDefinition\n}\n\nexport interface LoadedPlugin {\n  default: PluginConstructor\n}\n\nexport function getWindowPath(windowHref: string) {\n  return window.location.href + windowHref\n}\n\nfunction getGlobalObject(): Window {\n  // Based on window-or-global\n  // https://github.com/purposeindustries/window-or-global/blob/322abc71de0010c9e5d9d0729df40959e1ef8775/lib/index.js\n  return (\n    // eslint-disable-next-line no-restricted-globals\n    (typeof self === 'object' && self.self === self && self) ||\n    (typeof global === 'object' && global.global === global && global) ||\n    // @ts-ignore\n    this\n  )\n}\n\nfunction isInWebWorker(globalObject: ReturnType<typeof getGlobalObject>) {\n  return Boolean('WorkerGlobalScope' in globalObject)\n}\n\nexport default class PluginLoader {\n  definitions: PluginDefinition[] = []\n\n  fetchESM?: (url: string) => Promise<unknown>\n  fetchCJS?: (url: string) => Promise<LoadedPlugin>\n\n  constructor(\n    defs: PluginDefinition[] = [],\n    args?: {\n      fetchESM?: (url: string) => Promise<unknown>\n      fetchCJS?: (url: string) => Promise<LoadedPlugin>\n    },\n  ) {\n    this.fetchESM = args?.fetchESM\n    this.fetchCJS = args?.fetchCJS\n    this.definitions = JSON.parse(JSON.stringify(defs))\n  }\n\n  async loadScript(scriptUrl: string): Promise<void> {\n    const globalObject = getGlobalObject()\n    if (!isInWebWorker(globalObject)) {\n      return domLoadScript(scriptUrl)\n    }\n\n    // @ts-ignore\n    if (globalObject?.importScripts) {\n      // @ts-ignore\n      await globalObject.importScripts(scriptUrl)\n      return\n    }\n    throw new Error(\n      'cannot figure out how to load external JS scripts in this environment',\n    )\n  }\n\n  async loadCJSPlugin(def: CJSPluginDefinition, windowHref: string) {\n    const parsedUrl = new URL(def.cjsUrl, windowHref)\n    if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {\n      throw new Error(\n        `Cannot load plugins using protocol \"${parsedUrl.protocol}\"`,\n      )\n    }\n    if (!this.fetchCJS) {\n      throw new Error('No fetchCJS callback provided')\n    }\n\n    return this.fetchCJS(parsedUrl.href)\n  }\n\n  async loadESMPlugin(def: ESMPluginDefinition, windowHref: string) {\n    const parsedUrl =\n      'esmUrl' in def\n        ? new URL(def.esmUrl, windowHref)\n        : new URL(def.esmLoc.uri, def.esmLoc.baseUri)\n\n    if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {\n      throw new Error(\n        `cannot load plugins using protocol \"${parsedUrl.protocol}\"`,\n      )\n    }\n    const plugin = (await this.fetchESM?.(parsedUrl.href)) as\n      | LoadedPlugin\n      | undefined\n\n    if (!plugin) {\n      throw new Error(`Could not load ESM plugin: ${parsedUrl}`)\n    }\n    return plugin\n  }\n\n  async loadUMDPlugin(\n    def: UMDPluginDefinition | LegacyUMDPluginDefinition,\n    windowHref: string,\n  ) {\n    const parsedUrl =\n      'url' in def\n        ? new URL(def.url, windowHref)\n        : 'umdUrl' in def\n        ? new URL(def.umdUrl, windowHref)\n        : new URL(def.umdLoc.uri, def.umdLoc.baseUri)\n\n    if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {\n      throw new Error(\n        `cannot load plugins using protocol \"${parsedUrl.protocol}\"`,\n      )\n    }\n    await this.loadScript(parsedUrl.href)\n    const moduleName = def.name\n    const umdName = `JBrowsePlugin${moduleName}`\n    const globalObject = getGlobalObject()\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const plugin = (globalObject as any)[umdName] as\n      | { default: PluginConstructor }\n      | undefined\n    if (!plugin) {\n      throw new Error(\n        `Failed to load UMD bundle for ${moduleName}, ${globalObject.constructor.name}.${umdName} is undefined`,\n      )\n    }\n    return plugin\n  }\n\n  async loadPlugin(def: PluginDefinition, windowHref: string) {\n    let plugin: LoadedPlugin\n    if (isElectron && isCJSPluginDefinition(def)) {\n      plugin = await this.loadCJSPlugin(def, windowHref)\n    } else if (isESMPluginDefinition(def)) {\n      plugin = await this.loadESMPlugin(def, windowHref)\n    } else if (isUMDPluginDefinition(def)) {\n      plugin = await this.loadUMDPlugin(def, windowHref)\n    } else if (!isElectron && isCJSPluginDefinition(def)) {\n      throw new Error(\n        `CommonJS plugin found, but not in a NodeJS environment: ${JSON.stringify(\n          def,\n        )}`,\n      )\n    } else {\n      throw new Error(`Could not determine plugin type: ${JSON.stringify(def)}`)\n    }\n    return plugin.default\n  }\n\n  installGlobalReExports(target: WindowOrWorkerGlobalScope) {\n    // @ts-ignore\n    target.JBrowseExports = Object.fromEntries(\n      Object.entries(ReExports).map(([moduleName, module]) => {\n        return [moduleName, module]\n      }),\n    )\n  }\n\n  async load(windowHref = '') {\n    return Promise.all(\n      this.definitions.map(async definition => ({\n        plugin: await this.loadPlugin(definition, windowHref),\n        definition,\n      })),\n    )\n  }\n}\n","import { lazy } from 'react'\nimport ConnectionType from '@jbrowse/core/pluggableElementTypes/ConnectionType'\nimport WidgetType from '@jbrowse/core/pluggableElementTypes/WidgetType'\nimport Plugin from '@jbrowse/core/Plugin'\nimport PluginManager from '@jbrowse/core/PluginManager'\nimport {\n  configSchema as ucscConfigSchema,\n  modelFactory as ucscModelFactory,\n} from './ucsc-trackhub'\nimport {\n  stateModelFactory as AddTrackStateModelFactory,\n  configSchema as AddTrackConfigSchema,\n} from './AddTrackWidget'\nimport { AddTrackModel } from './AddTrackWidget/model'\nimport {\n  stateModel as AddConnectionStateModel,\n  configSchema as AddConnectionConfigSchema,\n} from './AddConnectionWidget'\nimport {\n  stateModelFactory as HierarchicalTrackSelectorStateModelFactory,\n  configSchema as HierarchicalTrackSelectorConfigSchema,\n  HierarchicalTrackSelectorModel,\n} from './HierarchicalTrackSelectorWidget'\nimport {\n  stateModelFactory as PluginStoreStateModelFactory,\n  configSchema as PluginStoreConfigSchema,\n} from './PluginStoreWidget'\n\nconst SetDefaultSession = lazy(() => import('./SetDefaultSession'))\n\nconst AssemblyManager = lazy(() => import('./AssemblyManager'))\n\nexport default class extends Plugin {\n  name = 'DataManagementPlugin'\n\n  exports = {\n    AssemblyManager,\n    SetDefaultSession,\n  }\n\n  install(pluginManager: PluginManager) {\n    pluginManager.addConnectionType(\n      () =>\n        new ConnectionType({\n          name: 'UCSCTrackHubConnection',\n          configSchema: ucscConfigSchema,\n          stateModel: ucscModelFactory(pluginManager),\n          displayName: 'UCSC Track Hub',\n          description: 'A track or assembly hub in the Track Hub format',\n          url: '//genome.ucsc.edu/goldenPath/help/hgTrackHubHelp.html#Intro',\n        }),\n    )\n\n    pluginManager.addWidgetType(() => {\n      return new WidgetType({\n        name: 'HierarchicalTrackSelectorWidget',\n        heading: 'Available tracks',\n        configSchema: HierarchicalTrackSelectorConfigSchema,\n        stateModel: HierarchicalTrackSelectorStateModelFactory(pluginManager),\n        ReactComponent: lazy(\n          () =>\n            import(\n              './HierarchicalTrackSelectorWidget/components/HierarchicalTrackSelector'\n            ),\n        ),\n      })\n    })\n\n    pluginManager.addWidgetType(() => {\n      return new WidgetType({\n        name: 'AddTrackWidget',\n        heading: 'Add a track',\n        configSchema: AddTrackConfigSchema,\n        stateModel: AddTrackStateModelFactory(pluginManager),\n        ReactComponent: lazy(\n          () => import('./AddTrackWidget/components/AddTrackWidget'),\n        ),\n      })\n    })\n\n    pluginManager.addWidgetType(() => {\n      return new WidgetType({\n        name: 'AddConnectionWidget',\n        heading: 'Add a connection',\n        configSchema: AddConnectionConfigSchema,\n        stateModel: AddConnectionStateModel,\n        ReactComponent: lazy(\n          () => import('./AddConnectionWidget/components/AddConnectionWidget'),\n        ),\n      })\n    })\n\n    pluginManager.addWidgetType(() => {\n      return new WidgetType({\n        name: 'PluginStoreWidget',\n        heading: 'Plugin store',\n        configSchema: PluginStoreConfigSchema,\n        stateModel: PluginStoreStateModelFactory(pluginManager),\n        ReactComponent: lazy(\n          () => import('./PluginStoreWidget/components/PluginStoreWidget'),\n        ),\n      })\n    })\n  }\n\n  configure(_pluginManager: PluginManager) {}\n}\n\nexport { AssemblyManager, SetDefaultSession }\nexport type { HierarchicalTrackSelectorModel, AddTrackModel }\n","import Alignments from '@jbrowse/plugin-alignments'\nimport Authentication from '@jbrowse/plugin-authentication'\nimport Bed from '@jbrowse/plugin-bed'\nimport BreakpointSplitView from '@jbrowse/plugin-breakpoint-split-view'\nimport CircularView from '@jbrowse/plugin-circular-view'\nimport Config from '@jbrowse/plugin-config'\nimport ComparativeAdapters from '@jbrowse/plugin-comparative-adapters'\nimport DataManagement from '@jbrowse/plugin-data-management'\nimport DotplotView from '@jbrowse/plugin-dotplot-view'\nimport GtfPlugin from '@jbrowse/plugin-gtf'\nimport Gff3 from '@jbrowse/plugin-gff3'\nimport LegacyJBrowse from '@jbrowse/plugin-legacy-jbrowse'\nimport LinearGenomeView from '@jbrowse/plugin-linear-genome-view'\nimport LinearComparativeView from '@jbrowse/plugin-linear-comparative-view'\nimport Lollipop from '@jbrowse/plugin-lollipop'\nimport Arc from '@jbrowse/plugin-arc'\nimport Menus from '@jbrowse/plugin-menus'\nimport RDF from '@jbrowse/plugin-rdf'\nimport Sequence from '@jbrowse/plugin-sequence'\nimport SVG from '@jbrowse/plugin-svg'\nimport TrackHubRegistry from '@jbrowse/plugin-trackhub-registry'\nimport Variants from '@jbrowse/plugin-variants'\nimport Wiggle from '@jbrowse/plugin-wiggle'\nimport GCContent from '@jbrowse/plugin-gccontent'\nimport SpreadsheetViewPlugin from '@jbrowse/plugin-spreadsheet-view'\nimport SvInspectorPlugin from '@jbrowse/plugin-sv-inspector'\nimport HicPlugin from '@jbrowse/plugin-hic'\nimport TrixPlugin from '@jbrowse/plugin-trix'\nimport GridBookmarkPlugin from '@jbrowse/plugin-grid-bookmark'\n\nconst corePlugins = [\n  SVG,\n  LinearGenomeView,\n  Alignments,\n  Authentication,\n  Bed,\n  CircularView,\n  Config,\n  DataManagement,\n  DotplotView,\n  GtfPlugin,\n  Gff3,\n  LegacyJBrowse,\n  LinearComparativeView,\n  Lollipop,\n  Arc,\n  Menus,\n  RDF,\n  Sequence,\n  TrackHubRegistry,\n  Variants,\n  Wiggle,\n  GCContent,\n  SpreadsheetViewPlugin,\n  SvInspectorPlugin,\n  BreakpointSplitView,\n  HicPlugin,\n  TrixPlugin,\n  GridBookmarkPlugin,\n  ComparativeAdapters,\n]\n\nexport default corePlugins\n","/* eslint-disable no-restricted-globals */\nimport './workerPolyfill'\n\n// @ts-ignore\nimport RpcServer from 'librpc-web-mod'\nimport { enableStaticRendering } from 'mobx-react'\n\nimport PluginManager from '@jbrowse/core/PluginManager'\nimport { remoteAbortRpcHandler } from '@jbrowse/core/rpc/remoteAbortSignals'\nimport PluginLoader, { PluginDefinition } from '@jbrowse/core/PluginLoader'\nimport { serializeError } from 'serialize-error'\n\n// locals\nimport corePlugins from './corePlugins'\n\n// static rendering is used for \"SSR\" style rendering which is done on the\n// worker\nenableStaticRendering(true)\n\ninterface WorkerConfiguration {\n  plugins: PluginDefinition[]\n  windowHref: string\n}\n\n// waits for a message from the main thread containing our configuration, which\n// must be sent on boot\nfunction receiveConfiguration() {\n  const configurationP: Promise<WorkerConfiguration> = new Promise(resolve => {\n    function listener(event: MessageEvent) {\n      if (event.data.message === 'config') {\n        resolve(event.data.config as WorkerConfiguration)\n        removeEventListener('message', listener)\n      }\n    }\n    self.addEventListener('message', listener)\n  })\n  postMessage({ message: 'readyForConfig' })\n  return configurationP\n}\n\nasync function getPluginManager() {\n  // Load runtime plugins\n  const config = await receiveConfiguration()\n  const pluginLoader = new PluginLoader(config.plugins, {\n    fetchESM: url => import(/* webpackIgnore:true */ url),\n  })\n  pluginLoader.installGlobalReExports(self)\n  const runtimePlugins = await pluginLoader.load(config.windowHref)\n  const plugins = [...corePlugins.map(p => ({ plugin: p })), ...runtimePlugins]\n  const pluginManager = new PluginManager(plugins.map(P => new P.plugin()))\n  pluginManager.createPluggableElements()\n  pluginManager.configure()\n\n  return pluginManager\n}\n\ninterface WrappedFuncArgs {\n  rpcDriverClassName: string\n  channel: string\n  [key: string]: unknown\n}\n\ntype RpcFunc = (args: unknown, rpcDriverClassName: string) => unknown\n\nfunction wrapForRpc(func: RpcFunc) {\n  return (args: WrappedFuncArgs) => {\n    const { channel, rpcDriverClassName } = args\n    return func(\n      {\n        ...args,\n        statusCallback: (message: string) => {\n          // @ts-ignore\n          self.rpcServer.emit(channel, message)\n        },\n      },\n      rpcDriverClassName,\n    )\n  }\n}\n\ngetPluginManager()\n  .then(pluginManager => {\n    const rpcConfig = Object.fromEntries(\n      pluginManager\n        .getRpcElements()\n        .map(entry => [entry.name, wrapForRpc(entry.execute.bind(entry))]),\n    )\n\n    // @ts-ignore\n    self.rpcServer = new RpcServer.Server({\n      ...rpcConfig,\n      ...remoteAbortRpcHandler(),\n      ping: () => {\n        // the ping method is required by the worker driver for checking the\n        // health of the worker\n      },\n    })\n    postMessage({ message: 'ready' })\n  })\n  .catch(error => {\n    postMessage({ message: 'error', error: serializeError(error) })\n  })\n\nexport default () => {\n  /* do nothing */\n}\n","/* eslint-disable no-restricted-globals */\n\n// this is a little polyfill for running in workers that\n// contains just enough stubbing to make webpack style-loader\n// think that it is actually inserting styles into the DOM\n\nself.window = {\n  addEventListener() {},\n  fetch: self.fetch.bind(self),\n  location: self.location,\n  Date: self.Date,\n  requestIdleCallback: cb => cb(),\n  cancelIdleCallback: () => {},\n  requestAnimationFrame: cb => cb(),\n  cancelAnimationFrame: () => {},\n  navigator: {},\n}\nself.document = {\n  createTextNode() {},\n  querySelector() {\n    return { appendChild() {} }\n  },\n  documentElement: {},\n  querySelectorAll: () => [],\n  createElement() {\n    return {\n      style: {},\n      setAttribute() {},\n      removeAttribute() {},\n      appendChild() {},\n    }\n  },\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = function() {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [1947,341,6623], function() { return __webpack_require__(25986); })\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + {\"3\":\"215b4a12\",\"144\":\"409f8dfb\",\"156\":\"c86837d9\",\"206\":\"a886fe0a\",\"298\":\"cf06cd85\",\"341\":\"22be1a55\",\"351\":\"c44e4d05\",\"373\":\"43e09cbb\",\"397\":\"3c681e3a\",\"477\":\"ef6d634b\",\"549\":\"e31c6590\",\"583\":\"37f3487d\",\"590\":\"29a2d5a7\",\"701\":\"e5f2369a\",\"730\":\"d646114e\",\"791\":\"96b6ec81\",\"806\":\"ed5a76e4\",\"816\":\"f794d8e1\",\"822\":\"e2363fce\",\"830\":\"cc1fc551\",\"869\":\"a2aac6db\",\"941\":\"609620c2\",\"1013\":\"f75dce54\",\"1094\":\"760d1a14\",\"1222\":\"2001a3e1\",\"1241\":\"9df3fabe\",\"1280\":\"64e0d965\",\"1288\":\"90f443bc\",\"1294\":\"1a600b1a\",\"1335\":\"303ebdf5\",\"1343\":\"bc2ca23e\",\"1406\":\"87c1e17b\",\"1502\":\"3c746cc5\",\"1522\":\"b9927878\",\"1531\":\"6fc83930\",\"1552\":\"3ec71106\",\"1658\":\"84ce3057\",\"1762\":\"d56c5b3f\",\"1776\":\"44a0e71e\",\"1826\":\"2e17f0a7\",\"1860\":\"6997095e\",\"1914\":\"34848680\",\"1916\":\"467a84bd\",\"1923\":\"dc3c090f\",\"1947\":\"cdd9cbea\",\"2018\":\"c4171ff4\",\"2094\":\"d721de28\",\"2108\":\"7f854ab6\",\"2142\":\"09f38597\",\"2172\":\"42c92214\",\"2210\":\"18bbe02f\",\"2213\":\"79a1cdc9\",\"2237\":\"5d29d02a\",\"2243\":\"2cd33572\",\"2287\":\"e65585ad\",\"2310\":\"657610fb\",\"2311\":\"23188eaa\",\"2392\":\"b767e35e\",\"2445\":\"c2bb4892\",\"2456\":\"f5ffcbd8\",\"2526\":\"276421f6\",\"2598\":\"f932f4ff\",\"2637\":\"7e736278\",\"2657\":\"ba0a452e\",\"2693\":\"25ec5b7b\",\"2717\":\"f9f694a1\",\"2720\":\"640a6385\",\"2741\":\"90cccd30\",\"2800\":\"7482089d\",\"2931\":\"e0af0970\",\"2939\":\"61036473\",\"3016\":\"de11a721\",\"3053\":\"440ae7a1\",\"3207\":\"e2ed01cc\",\"3241\":\"9e3166c4\",\"3315\":\"9cec7e5f\",\"3344\":\"eed7b53f\",\"3383\":\"9fe04ed0\",\"3401\":\"999fd325\",\"3417\":\"c30993f2\",\"3429\":\"b0b7f796\",\"3446\":\"723fedf0\",\"3472\":\"a4e39d67\",\"3499\":\"3225d936\",\"3515\":\"68d59ea7\",\"3635\":\"5dbb19ed\",\"3668\":\"6c41faf6\",\"3757\":\"9327c0cb\",\"3764\":\"39357b94\",\"3774\":\"bb59ba11\",\"3821\":\"0efd49de\",\"3914\":\"03ff6f2e\",\"3916\":\"162f38c2\",\"3975\":\"c870db10\",\"4021\":\"89340381\",\"4033\":\"06625d62\",\"4044\":\"83d5c3e1\",\"4055\":\"51571a06\",\"4106\":\"ddf90d00\",\"4170\":\"c9163cb2\",\"4222\":\"f49f66fc\",\"4288\":\"16cb5701\",\"4299\":\"5dd39561\",\"4336\":\"77bf83fd\",\"4362\":\"7cda3e6d\",\"4375\":\"618b343d\",\"4405\":\"f393c8de\",\"4631\":\"ae7ae5e9\",\"4681\":\"a31ec19c\",\"4758\":\"ea1853d2\",\"4782\":\"b028c043\",\"4916\":\"8cc03c84\",\"4928\":\"9e10e846\",\"4947\":\"59d4a77a\",\"5035\":\"36fe37ef\",\"5048\":\"18a51398\",\"5096\":\"8c7f5570\",\"5113\":\"8237550d\",\"5213\":\"f542fc61\",\"5240\":\"170f4edb\",\"5335\":\"2b6fef8a\",\"5393\":\"3a5ffd36\",\"5413\":\"4f40e43e\",\"5432\":\"d148e9de\",\"5477\":\"848140f9\",\"5518\":\"f69f5d8e\",\"5571\":\"c88d94fe\",\"5597\":\"e8961bca\",\"5707\":\"17b20c1a\",\"5729\":\"370e2909\",\"5898\":\"db7ea3e8\",\"5906\":\"c60269f1\",\"5944\":\"1a9c2057\",\"6073\":\"d4095bd1\",\"6110\":\"c30cd8ec\",\"6127\":\"4e3e84f9\",\"6157\":\"43ecd267\",\"6234\":\"310cc995\",\"6331\":\"cbee24b6\",\"6413\":\"30162650\",\"6443\":\"f599cae0\",\"6457\":\"ec0951e1\",\"6518\":\"5f0da7c3\",\"6525\":\"e111f059\",\"6528\":\"3cbd7bae\",\"6541\":\"0c5ef683\",\"6623\":\"f4dc1616\",\"6630\":\"de49a88a\",\"6716\":\"4e49b239\",\"6788\":\"125a6edf\",\"6809\":\"3bf29da5\",\"6813\":\"7e7c7305\",\"6817\":\"5de816ec\",\"6873\":\"82573b98\",\"6909\":\"7ab140fb\",\"6935\":\"e9643cc7\",\"6952\":\"4f7eeb86\",\"6959\":\"57b779be\",\"6980\":\"d4d5a006\",\"7068\":\"e4a3f71b\",\"7138\":\"e94c2b57\",\"7194\":\"d42531e4\",\"7204\":\"08a9854b\",\"7212\":\"79fe27b9\",\"7221\":\"aaaa4a8e\",\"7246\":\"d50f3878\",\"7252\":\"1dc19b6a\",\"7291\":\"31df8485\",\"7368\":\"68515622\",\"7445\":\"e81f9248\",\"7704\":\"cdef237b\",\"7726\":\"0462ab76\",\"7762\":\"299fcdea\",\"7776\":\"57cc131b\",\"7818\":\"d3b7ef55\",\"7819\":\"fcc11831\",\"7883\":\"763d1d43\",\"7903\":\"8c786ae8\",\"7911\":\"568afdcf\",\"8129\":\"d32a7846\",\"8158\":\"17d45aef\",\"8168\":\"d499deeb\",\"8229\":\"3b10cdba\",\"8247\":\"1cf5e683\",\"8269\":\"10c0221f\",\"8309\":\"faedc92a\",\"8347\":\"fe9ef917\",\"8356\":\"3078e1c4\",\"8495\":\"d5bb0200\",\"8538\":\"c4c7120c\",\"8552\":\"3b42e631\",\"8575\":\"4315d599\",\"8619\":\"a966cb9d\",\"8632\":\"aedec636\",\"8639\":\"4c52ab88\",\"8682\":\"2a2a4899\",\"8693\":\"3c2847db\",\"8761\":\"87d26375\",\"8787\":\"2cd42024\",\"8865\":\"9674b85b\",\"8870\":\"1b3d4cd6\",\"8948\":\"9e5ffceb\",\"9018\":\"25929466\",\"9116\":\"8a4f55fe\",\"9118\":\"64d51d91\",\"9121\":\"80a06bfb\",\"9132\":\"937399d6\",\"9147\":\"8bcd043b\",\"9184\":\"6365b8ad\",\"9199\":\"31fe518a\",\"9350\":\"bdb9a8bb\",\"9360\":\"0c70877c\",\"9403\":\"2c39f349\",\"9481\":\"70ba7359\",\"9528\":\"1ae7449e\",\"9565\":\"f6e963d0\",\"9589\":\"c2c51e84\",\"9605\":\"075f1805\",\"9636\":\"631b7a8d\",\"9662\":\"702351a1\",\"9735\":\"4f35c7e1\",\"9738\":\"92d1aa8f\",\"9740\":\"989d461d\",\"9742\":\"d25c6a43\",\"9869\":\"e48fb50c\",\"9982\":\"1c7a5e64\",\"9991\":\"c5ddb726\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 7722;","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl + \"../../\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t7722: 1\n};\n\n// importScripts chunk loading\nvar installChunk = function(data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = function(chunkId, promises) {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunk_jbrowse_web\"] = self[\"webpackChunk_jbrowse_web\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","__webpack_require__.nc = undefined;","var next = __webpack_require__.x;\n__webpack_require__.x = function() {\n\treturn Promise.all([1947,341,6623].map(__webpack_require__.e, __webpack_require__)).then(next);\n};","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["WeakMap","isRemoteAbortSignal","thing","abortSignalId","surrogateAbortControllers","Map","deserializeAbortSignal","surrogateAbortController","get","AbortController","set","signal","remoteAbort","props","signalId","abort","remoteAbortRpcHandler","signalAbort","useStyles","makeStyles","importFormEntry","minWidth","AssemblySelector","observer","session","onChange","selected","InputProps","extra","classes","assemblyNames","assemblyManager","config","URLSearchParams","window","location","search","jest","useLocalStorage","host","pathname","join","useState","lastSelected","setLastSelected","selection","includes","useEffect","error","length","select","label","variant","helperText","value","inputProps","event","target","disabled","className","map","name","assembly","displayName","getConf","CascadingContext","React","parentPopupState","rootPopupState","CascadingMenuItem","onClick","useContext","Error","handleClick","useCallback","close","CascadingSubmenu","title","inset","popupId","popupState","usePopupState","bindHover","bindFocus","primary","CascadingSubmenuHover","anchorOrigin","vertical","horizontal","transformOrigin","onMenuItemClick","menuItems","context","useMemo","Provider","bindMenu","CascadingMenu","EndDecoration","item","type","checked","CascadingMenuList","hasIcon","some","menuItem","icon","idx","subMenu","component","callback","undefined","Boolean","secondary","subLabel","style","flexGrow","theme","input","inputBase","typography","top","left","position","whiteSpace","visibility","inputRoot","padding","spacing","inputFocused","borderStyle","borderWidth","EditableTypography","ref","setValue","other","editedValue","setEditedValue","sizerNode","setSizerNode","inputNode","setInputNode","blur","setBlur","useTheme","width","clientWidth","val","node","inputRef","root","focused","onKeyDown","key","onBlur","snapshotError","str","findStr","indexOf","trim","slice","match","match2","margin","overflow","maxHeight","background","border","JSON","stringify","parse","onClose","open","onFactoryReset","handleDialogClose","action","id","color","ToggleButtonWithTooltip","children","Tooltip","ToggleButton","shorten","len","substring","description","rootModel","setLocation","fileOrUrl","isUriLocation","internetAccountId","toggleButtonValue","setToggleButtonValue","accts","isAppRootModel","internetAccounts","shownAccts","setShownAccts","hiddenAccts","setHiddenAccts","anchorEl","setAnchorEl","selectedAcct","find","ia","setLocationWithAccount","locationInput","UrlChooser","selectorLabel","LocalFileChooser","SelectorComponent","Box","display","InputLabel","shrink","flexDirection","ToggleButtonGroup","exclusive","_event","newState","toggleContents","ArrowDropDown","Menu","acct","MenuItem","prev","FormHelperText","paper","overflowY","overflowX","minHeight","maxWidth","outline","menuItemEndDecoration","height","MenuItemEndDecoration","MenuPage","subMenuAnchorEl","setSubMenuAnchorEl","openSubMenuIdx","setOpenSubMenuIdx","isSubMenuOpen","setIsSubMenuOpen","selectedMenuItemIdx","setSelectedMenuItemIdx","setPosition","paperRef","useRef","timer","shouldSubMenuBeOpen","setTimeout","clearTimeout","rect","getBoundingClientRect","menuItemStyle","ListContents","autoFocusItem","dense","sort","a","b","priority","endDecoration","Icon","onMouseMove","e","currentTarget","document","activeElement","focus","currentIdx","findLastIndex","findPreviousValidIdx","findIndex","findNextValidIdx","in","elevation","transitionDuration","BackdropProps","invisible","horizontalHandle","cursor","verticalHandle","flexbox_verticalHandle","alignSelf","flexbox_horizontalHandle","onDrag","flexbox","originalClassName","mouseDragging","setMouseDragging","prevPos","cx","mouseMove","preventDefault","pos","clientX","clientY","distance","current","mouseUp","addEventListener","removeEventListener","onMouseDown","role","refTheme","createTheme","jbrowseDefaultPalette","main","tertiary","palette","augmentColor","quaternary","stopCodon","startCodon","bases","A","green","C","blue","G","amber","T","red","createJBrowseDefaultProps","components","MuiButton","defaultProps","size","MuiAccordion","disableGutters","TransitionProps","timeout","MuiFilledInput","MuiFormControl","MuiFormHelperText","MuiIconButton","MuiInputBase","MuiAutocomplete","MuiInputLabel","MuiToolbar","MuiListItem","MuiOutlinedInput","MuiFab","MuiTable","MuiMenuList","MuiMenuItem","MuiTextField","createJBrowseDefaultOverrides","generatedPalette","deepmerge","styleOverrides","colorSecondary","textSecondary","backgroundColor","MuiLink","MuiAccordionSummary","content","contrastText","createJBrowseBaseTheme","fontSize","createJBrowseTheme","getColors","midnight","forrest","grape","mandarin","gray","Logomark","viewBox","LogoFull","Text","colors","fill","d","transform","fontFamily","fabLeft","zIndex","bottom","fabRight","right","menuBarAndComponents","gridColumn","gridTemplateRows","menuBar","gridRow","appBar","grow","light","borderColor","selectPaper","Logo","configuration","logoPath","readConfObject","uri","src","alt","AppToolbar","HeaderButtons","savedSessionNames","menus","Toolbar","menu","DropDownMenu","menuTitle","arrow","newName","notify","renameCurrentSession","ViewLauncher","viewTypes","getEnv","pluginManager","getElementTypeRecord","all","Paper","Typography","FormControl","Select","Button","addView","ViewPanel","view","viewType","getViewType","ReactComponent","ViewContainer","removeView","onMinimize","setMinimized","minimized","ErrorBoundary","FallbackComponent","ErrorMessage","Suspense","fallback","LoadingEllipses","model","getTrackType","grid","visibleWidget","drawerWidth","activeWidgets","views","drawerPosition","drawerVisible","gridTemplateColumns","filter","f","DrawerWidget","DialogComponent","DialogProps","AppBar","Fab","showWidgetDrawer","Launch","Snackbar","closeButton","grey","handleClose","Dialog","DialogTitle","IconButton","Close","Divider","DialogContent","DialogActions","clearView","autoFocus","PrerenderedCanvas","highResolutionScaling","imageData","blockKey","showSoftClip","done","setDone","featureCanvas","canvas","getContext","drawImageOntoCanvasContext","blockKeyStr","testId","hoverLabel","pointerEvents","offsetX","offsetY","feature","shown","setShown","handle","text","added","full","RegExp","tag","SanitizedHTML","html","test","escapeHTML","dompurify","tagName","setAttribute","dangerouslySetInnerHTML","__html","AbortError","code","checkAbortSignal","AbortSignal","TypeError","aborted","makeAbortError","ms","Promise","resolve","abortBreakPoint","DOMException","observeAbortSignal","fromEvent","Observable","isAbortException","exception","message","createCanvas","createImageBitmap","ImageBitmapType","serializedCommands","CanvasSequence","execute","drawImage","weHave","OffscreenCanvas","isNode","self","ImageBitmap","nodeCreateCanvas","dataUri","toDataURL","img","nodeImage","reject","onload","onerror","ctx","toJSON","containsNoTransferables","String","renderToAbstractCanvas","opts","cb","exportSVG","scaling","rasterizeLayers","fakeCtx","result","canvasRecordedData","scale","Math","ceil","blobToDataURL","convertToBlob","xlinkHref","reactElement","isViewContainer","isStateTreeNode","isSessionModel","isSessionModelWithConfigEditing","isSessionWithAddTracks","disableAddTracks","isSessionModelWithWidgets","isSessionModelWithConnections","isSessionWithSessionPlugins","isSelectionContainer","isViewModel","isTrackModel","trackId","isDisplayModel","displayId","isTrackViewModel","isRootModelWithInternetAccounts","isAbstractMenuManager","AuthNeededError","url","Object","setPrototypeOf","prototype","RetryError","isAuthNeededException","isRetryException","when","getter","timeoutId","finished","whenPromise","mobxWhen","finishTimeout","cancel","then","catch","err","whenPresent","PhasedScheduler","phaseCallbacks","phaseOrder","this","phase","push","forEach","phaseName","TypeRecord","typeName","baseClass","registeredTypes","t","has","values","PluginManager","initialPlugins","plugins","jexl","createJexlInstance","pluginMetadata","runtimePluginDefinitions","elementCreationSchedule","rendererTypes","RendererType","adapterTypes","AdapterType","textSearchAdapterTypes","TextSearchAdapterType","trackTypes","TrackType","displayTypes","DisplayType","connectionTypes","ConnectionType","ViewType","widgetTypes","WidgetType","rpcMethods","RpcMethodType","addTrackWidgets","AddTrackWorkflowType","internetAccountTypes","InternetAccountType","configured","extensionPoints","jbrequireCache","lib","ReExports","load","jbrequire","pack","default","addPlugin","plugin","CorePlugin","metadata","isCore","configurationSchemas","configurationSchema","definition","install","p","getPlugin","run","configure","groupName","creationCallback","typeRecord","add","newElement","evaluateExtensionPoint","getElementTypesInGroup","fieldName","types","pluggableTypes","isType","isModelType","console","warn","typeGroup","isBareConfigurationSchemaType","ConfigurationSchema","methodName","addElementType","track","trackType","addDisplayType","newView","extendedName","extensionPointName","callbacks","extendee","accumulator","isUMDPluginDefinition","def","umdUrl","umdLoc","isESMPluginDefinition","esmUrl","esmLoc","isCJSPluginDefinition","cjsUrl","getGlobalObject","global","isInWebWorker","globalObject","PluginLoader","defs","args","definitions","fetchESM","fetchCJS","scriptUrl","domLoadScript","importScripts","windowHref","parsedUrl","URL","protocol","href","baseUri","loadScript","moduleName","umdName","constructor","isElectron","loadCJSPlugin","loadESMPlugin","loadUMDPlugin","JBrowseExports","fromEntries","entries","loadPlugin","SetDefaultSession","lazy","AssemblyManager","exports","addConnectionType","configSchema","ucscConfigSchema","stateModel","ucscModelFactory","addWidgetType","heading","HierarchicalTrackSelectorConfigSchema","HierarchicalTrackSelectorStateModelFactory","AddTrackConfigSchema","AddTrackStateModelFactory","AddConnectionConfigSchema","AddConnectionStateModel","PluginStoreConfigSchema","PluginStoreStateModelFactory","_pluginManager","Plugin","SVG","LinearGenomeView","Alignments","Authentication","Bed","CircularView","Config","DataManagement","DotplotView","GtfPlugin","Gff3","LegacyJBrowse","LinearComparativeView","Lollipop","Arc","Menus","RDF","Sequence","TrackHubRegistry","Variants","Wiggle","GCContent","SpreadsheetViewPlugin","SvInspectorPlugin","BreakpointSplitView","HicPlugin","TrixPlugin","GridBookmarkPlugin","ComparativeAdapters","receiveConfiguration","configurationP","listener","data","postMessage","pluginLoader","import","installGlobalReExports","runtimePlugins","corePlugins","P","createPluggableElements","enableStaticRendering","getPluginManager","rpcConfig","getRpcElements","entry","func","bind","channel","rpcDriverClassName","statusCallback","rpcServer","emit","RpcServer","ping","serializeError","fetch","Date","requestIdleCallback","cancelIdleCallback","requestAnimationFrame","cancelAnimationFrame","navigator","createTextNode","querySelector","appendChild","documentElement","querySelectorAll","createElement","removeAttribute","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","loaded","__webpack_modules__","call","m","x","__webpack_exports__","O","deferred","chunkIds","fn","notFulfilled","Infinity","i","fulfilled","j","keys","every","splice","r","n","__esModule","leafPrototypes","getProto","getPrototypeOf","obj","__proto__","mode","ns","create","getOwnPropertyNames","o","defineProperty","enumerable","chunkId","reduce","promises","u","miniCssF","g","globalThis","Function","prop","hasOwnProperty","Symbol","toStringTag","nmd","paths","currentScript","scripts","getElementsByTagName","replace","installedChunks","chunkLoadingGlobal","parentChunkLoadingFunction","moreModules","runtime","pop","nc","next"],"sourceRoot":""}