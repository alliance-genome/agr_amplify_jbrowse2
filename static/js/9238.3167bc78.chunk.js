"use strict";(globalThis.webpackChunk_jbrowse_web=globalThis.webpackChunk_jbrowse_web||[]).push([[9238],{89238:(e,t,s)=>{s.d(t,{C:()=>Ms,j:()=>Zs});const i=BigInt(32);"getBigInt64"in DataView||(DataView.prototype.getBigInt64=function(e,t){return function(e,t,s){const r=Number(!!s),n=Number(!s);return BigInt(e.getInt32(t,s)*n+e.getInt32(t+4,s)*r)<<i|BigInt(e.getUint32(t,s)*r+e.getUint32(t+4,s)*n)}(this,e,t)}),"getBigUint64"in DataView||(DataView.prototype.getBigUint64=function(e,t){return function(e,t,s){const r=e.getUint32(t,s),n=e.getUint32(t+4,s),a=Number(!!s),o=Number(!s);return BigInt(r*o+n*a)<<i|BigInt(r*a+n*o)}(this,e,t)}),"setBigInt64"in DataView||(DataView.prototype.setBigInt64=function(e,t,s){!function(e,t,s,r){const n=Number(s>>i),a=Number(s&BigInt(4294967295));r?(e.setInt32(t+4,n,r),e.setUint32(t,a,r)):(e.setInt32(t,n,r),e.setUint32(t+4,a,r))}(this,e,t,s)}),"setBigUint64"in DataView||(DataView.prototype.setBigUint64=function(e,t,s){!function(e,t,s,r){const n=Number(s>>i),a=Number(s&BigInt(4294967295));r?(e.setUint32(t+4,n,r),e.setUint32(t,a,r)):(e.setUint32(t,n,r),e.setUint32(t+4,a,r))}(this,e,t,s)});var r=s(35451);class n{constructor(e,t){this.code="",this.scopes=[["vars"]],this.bitFields=[],this.tmpVariableCount=0,this.references=new Map,this.imports=[],this.reverseImports=new Map,this.useContextVariables=!1,this.importPath=e,this.useContextVariables=t}generateVariable(e){const t=[...this.scopes[this.scopes.length-1]];return e&&t.push(e),t.join(".")}generateOption(e){switch(typeof e){case"number":return e.toString();case"string":return this.generateVariable(e);case"function":return`${this.addImport(e)}.call(${this.generateVariable()}, vars)`}}generateError(e){this.pushCode(`throw new Error(${e});`)}generateTmpVariable(){return"$tmp"+this.tmpVariableCount++}pushCode(e){this.code+=e+"\n"}pushPath(e){e&&this.scopes[this.scopes.length-1].push(e)}popPath(e){e&&this.scopes[this.scopes.length-1].pop()}pushScope(e){this.scopes.push([e])}popScope(){this.scopes.pop()}addImport(e){if(!this.importPath)return`(${e})`;let t=this.reverseImports.get(e);return t||(t=this.imports.push(e)-1,this.reverseImports.set(e,t)),`${this.importPath}[${t}]`}addReference(e){this.references.has(e)||this.references.set(e,{resolved:!1,requested:!1})}markResolved(e){const t=this.references.get(e);t&&(t.resolved=!0)}markRequested(e){e.forEach((e=>{const t=this.references.get(e);t&&(t.requested=!0)}))}getUnresolvedReferences(){return Array.from(this.references).filter((([e,t])=>!t.resolved&&!t.requested)).map((([e,t])=>e))}}const a=new Map,o="___parser_",h={uint8:1,uint16le:2,uint16be:2,uint32le:4,uint32be:4,int8:1,int16le:2,int16be:2,int32le:4,int32be:4,int64be:8,int64le:8,uint64be:8,uint64le:8,floatle:4,floatbe:4,doublele:8,doublebe:8},l={uint8:"Uint8",uint16le:"Uint16",uint16be:"Uint16",uint32le:"Uint32",uint32be:"Uint32",int8:"Int8",int16le:"Int16",int16be:"Int16",int32le:"Int32",int32be:"Int32",int64be:"BigInt64",int64le:"BigInt64",uint64be:"BigUint64",uint64le:"BigUint64",floatle:"Float32",floatbe:"Float32",doublele:"Float64",doublebe:"Float64"},d={uint8:!1,uint16le:!0,uint16be:!1,uint32le:!0,uint32be:!1,int8:!1,int16le:!0,int16be:!1,int32le:!0,int32be:!1,int64be:!1,int64le:!0,uint64be:!1,uint64le:!0,floatle:!0,floatbe:!1,doublele:!0,doublebe:!1};class f{constructor(){this.varName="",this.type="",this.options={},this.endian="be",this.useContextVariables=!1}static start(){return new f}primitiveGenerateN(e,t){const s=l[e],i=d[e];t.pushCode(`${t.generateVariable(this.varName)} = dataView.get${s}(offset, ${i});`),t.pushCode(`offset += ${h[e]};`)}primitiveN(e,t,s){return this.setNextParser(e,t,s)}useThisEndian(e){return e+this.endian.toLowerCase()}uint8(e,t={}){return this.primitiveN("uint8",e,t)}uint16(e,t={}){return this.primitiveN(this.useThisEndian("uint16"),e,t)}uint16le(e,t={}){return this.primitiveN("uint16le",e,t)}uint16be(e,t={}){return this.primitiveN("uint16be",e,t)}uint32(e,t={}){return this.primitiveN(this.useThisEndian("uint32"),e,t)}uint32le(e,t={}){return this.primitiveN("uint32le",e,t)}uint32be(e,t={}){return this.primitiveN("uint32be",e,t)}int8(e,t={}){return this.primitiveN("int8",e,t)}int16(e,t={}){return this.primitiveN(this.useThisEndian("int16"),e,t)}int16le(e,t={}){return this.primitiveN("int16le",e,t)}int16be(e,t={}){return this.primitiveN("int16be",e,t)}int32(e,t={}){return this.primitiveN(this.useThisEndian("int32"),e,t)}int32le(e,t={}){return this.primitiveN("int32le",e,t)}int32be(e,t={}){return this.primitiveN("int32be",e,t)}bigIntVersionCheck(){if(!DataView.prototype.getBigInt64)throw new Error("BigInt64 is unsupported on this runtime")}int64(e,t={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("int64"),e,t)}int64be(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("int64be",e,t)}int64le(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("int64le",e,t)}uint64(e,t={}){return this.bigIntVersionCheck(),this.primitiveN(this.useThisEndian("uint64"),e,t)}uint64be(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("uint64be",e,t)}uint64le(e,t={}){return this.bigIntVersionCheck(),this.primitiveN("uint64le",e,t)}floatle(e,t={}){return this.primitiveN("floatle",e,t)}floatbe(e,t={}){return this.primitiveN("floatbe",e,t)}doublele(e,t={}){return this.primitiveN("doublele",e,t)}doublebe(e,t={}){return this.primitiveN("doublebe",e,t)}bitN(e,t,s){return s.length=e,this.setNextParser("bit",t,s)}bit1(e,t={}){return this.bitN(1,e,t)}bit2(e,t={}){return this.bitN(2,e,t)}bit3(e,t={}){return this.bitN(3,e,t)}bit4(e,t={}){return this.bitN(4,e,t)}bit5(e,t={}){return this.bitN(5,e,t)}bit6(e,t={}){return this.bitN(6,e,t)}bit7(e,t={}){return this.bitN(7,e,t)}bit8(e,t={}){return this.bitN(8,e,t)}bit9(e,t={}){return this.bitN(9,e,t)}bit10(e,t={}){return this.bitN(10,e,t)}bit11(e,t={}){return this.bitN(11,e,t)}bit12(e,t={}){return this.bitN(12,e,t)}bit13(e,t={}){return this.bitN(13,e,t)}bit14(e,t={}){return this.bitN(14,e,t)}bit15(e,t={}){return this.bitN(15,e,t)}bit16(e,t={}){return this.bitN(16,e,t)}bit17(e,t={}){return this.bitN(17,e,t)}bit18(e,t={}){return this.bitN(18,e,t)}bit19(e,t={}){return this.bitN(19,e,t)}bit20(e,t={}){return this.bitN(20,e,t)}bit21(e,t={}){return this.bitN(21,e,t)}bit22(e,t={}){return this.bitN(22,e,t)}bit23(e,t={}){return this.bitN(23,e,t)}bit24(e,t={}){return this.bitN(24,e,t)}bit25(e,t={}){return this.bitN(25,e,t)}bit26(e,t={}){return this.bitN(26,e,t)}bit27(e,t={}){return this.bitN(27,e,t)}bit28(e,t={}){return this.bitN(28,e,t)}bit29(e,t={}){return this.bitN(29,e,t)}bit30(e,t={}){return this.bitN(30,e,t)}bit31(e,t={}){return this.bitN(31,e,t)}bit32(e,t={}){return this.bitN(32,e,t)}namely(e){return a.set(e,this),this.alias=e,this}skip(e,t={}){return this.seek(e,t)}seek(e,t={}){if(t.assert)throw new Error("assert option on seek is not allowed.");return this.setNextParser("seek","",{length:e})}string(e,t){if(!t.zeroTerminated&&!t.length&&!t.greedy)throw new Error("One of length, zeroTerminated, or greedy must be defined for string.");if((t.zeroTerminated||t.length)&&t.greedy)throw new Error("greedy is mutually exclusive with length and zeroTerminated for string.");if(t.stripNull&&!t.length&&!t.greedy)throw new Error("length or greedy must be defined if stripNull is enabled.");return t.encoding=t.encoding||"utf8",this.setNextParser("string",e,t)}buffer(e,t){if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for buffer.");return this.setNextParser("buffer",e,t)}wrapped(e,t){if("object"!=typeof t&&"object"==typeof e&&(t=e,e=""),!t||!t.wrapper||!t.type)throw new Error("Both wrapper and type must be defined for wrapped.");if(!t.length&&!t.readUntil)throw new Error("length or readUntil must be defined for wrapped.");return this.setNextParser("wrapper",e,t)}array(e,t){if(!t.readUntil&&!t.length&&!t.lengthInBytes)throw new Error("One of readUntil, length and lengthInBytes must be defined for array.");if(!t.type)throw new Error("type is required for array.");if("string"==typeof t.type&&!a.has(t.type)&&!(t.type in h))throw new Error(`Array element type "${t.type}" is unkown.`);return this.setNextParser("array",e,t)}choice(e,t){if("object"!=typeof t&&"object"==typeof e&&(t=e,e=""),!t)throw new Error("tag and choices are are required for choice.");if(!t.tag)throw new Error("tag is requird for choice.");if(!t.choices)throw new Error("choices is required for choice.");for(const e in t.choices){const s=parseInt(e,10),i=t.choices[s];if(isNaN(s))throw new Error(`Choice key "${e}" is not a number.`);if("string"==typeof i&&!a.has(i)&&!(i in h))throw new Error(`Choice type "${i}" is unkown.`)}return this.setNextParser("choice",e,t)}nest(e,t){if("object"!=typeof t&&"object"==typeof e&&(t=e,e=""),!t||!t.type)throw new Error("type is required for nest.");if(!(t.type instanceof f||a.has(t.type)))throw new Error("type must be a known parser name or a Parser object.");if(!(t.type instanceof f||e))throw new Error("type must be a Parser object if the variable name is omitted.");return this.setNextParser("nest",e,t)}pointer(e,t){if(!t.offset)throw new Error("offset is required for pointer.");if(!t.type)throw new Error("type is required for pointer.");if("string"==typeof t.type&&!(t.type in h)&&!a.has(t.type))throw new Error(`Pointer type "${t.type}" is unkown.`);return this.setNextParser("pointer",e,t)}saveOffset(e,t={}){return this.setNextParser("saveOffset",e,t)}endianness(e){switch(e.toLowerCase()){case"little":this.endian="le";break;case"big":this.endian="be";break;default:throw new Error('endianness must be one of "little" or "big"')}return this}endianess(e){return this.endianness(e)}useContextVars(e=!0){return this.useContextVariables=e,this}create(e){if(!(e instanceof Function))throw new Error("Constructor must be a Function object.");return this.constructorFn=e,this}getContext(e){const t=new n(e,this.useContextVariables);return t.pushCode("var dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.alias?(this.addAliasedCode(t),t.pushCode(`return ${o+this.alias}(0).result;`)):this.addRawCode(t),t}getCode(){return this.getContext("imports").code}addRawCode(e){e.pushCode("var offset = 0;"),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("vars.$parent = null;"),e.pushCode("vars.$root = vars;"),this.generate(e),this.resolveReferences(e),e.pushCode("delete vars.$parent;"),e.pushCode("delete vars.$root;"),e.pushCode("return vars;")}addAliasedCode(e){return e.pushCode(`function ${o+this.alias}(offset, context) {`),e.pushCode(`var vars = ${this.constructorFn?"new constructorFn()":"{}"};`),e.pushCode("var ctx = Object.assign({$parent: null, $root: vars}, context || {});"),e.pushCode("vars = Object.assign(vars, ctx);"),this.generate(e),e.markResolved(this.alias),this.resolveReferences(e),e.pushCode("Object.keys(ctx).forEach(function (item) { delete vars[item]; });"),e.pushCode("return { offset: offset, result: vars };"),e.pushCode("}"),e}resolveReferences(e){const t=e.getUnresolvedReferences();e.markRequested(t),t.forEach((t=>{var s;null===(s=a.get(t))||void 0===s||s.addAliasedCode(e)}))}compile(){const e="imports",t=this.getContext(e);this.compiled=new Function(e,"TextDecoder",`return function (buffer, constructorFn) { ${t.code} };`)(t.imports,TextDecoder)}sizeOf(){let e=NaN;if(Object.keys(h).indexOf(this.type)>=0)e=h[this.type];else if("string"===this.type&&"number"==typeof this.options.length)e=this.options.length;else if("buffer"===this.type&&"number"==typeof this.options.length)e=this.options.length;else if("array"===this.type&&"number"==typeof this.options.length){let t=NaN;"string"==typeof this.options.type?t=h[this.options.type]:this.options.type instanceof f&&(t=this.options.type.sizeOf()),e=this.options.length*t}else"seek"===this.type?e=this.options.length:"nest"===this.type?e=this.options.type.sizeOf():this.type||(e=0);return this.next&&(e+=this.next.sizeOf()),e}parse(e){return this.compiled||this.compile(),this.compiled(e,this.constructorFn)}setNextParser(e,t,s){const i=new f;return i.type=e,i.varName=t,i.options=s,i.endian=this.endian,this.head?this.head.next=i:this.next=i,this.head=i,this}generate(e){if(this.type){switch(this.type){case"uint8":case"uint16le":case"uint16be":case"uint32le":case"uint32be":case"int8":case"int16le":case"int16be":case"int32le":case"int32be":case"int64be":case"int64le":case"uint64be":case"uint64le":case"floatle":case"floatbe":case"doublele":case"doublebe":this.primitiveGenerateN(this.type,e);break;case"bit":this.generateBit(e);break;case"string":this.generateString(e);break;case"buffer":this.generateBuffer(e);break;case"seek":this.generateSeek(e);break;case"nest":this.generateNest(e);break;case"array":this.generateArray(e);break;case"choice":this.generateChoice(e);break;case"pointer":this.generatePointer(e);break;case"saveOffset":this.generateSaveOffset(e);break;case"wrapper":this.generateWrapper(e)}"bit"!==this.type&&this.generateAssert(e)}const t=e.generateVariable(this.varName);return this.options.formatter&&"bit"!==this.type&&this.generateFormatter(e,t,this.options.formatter),this.generateNext(e)}generateAssert(e){if(!this.options.assert)return;const t=e.generateVariable(this.varName);switch(typeof this.options.assert){case"function":{const s=e.addImport(this.options.assert);e.pushCode(`if (!${s}.call(vars, ${t})) {`)}break;case"number":e.pushCode(`if (${this.options.assert} !== ${t}) {`);break;case"string":e.pushCode(`if (${JSON.stringify(this.options.assert)} !== ${t}) {`);break;default:throw new Error("assert option must be a string, number or a function.")}e.generateError(`"Assertion error: ${t} is " + ${JSON.stringify(this.options.assert.toString())}`),e.pushCode("}")}generateNext(e){return this.next&&(e=this.next.generate(e)),e}generateBit(e){const t=JSON.parse(JSON.stringify(this));if(t.options=this.options,t.generateAssert=this.generateAssert.bind(this),t.generateFormatter=this.generateFormatter.bind(this),t.varName=e.generateVariable(t.varName),e.bitFields.push(t),!this.next||this.next&&["bit","nest"].indexOf(this.next.type)<0){const t=e.generateTmpVariable();e.pushCode(`var ${t} = 0;`);const s=(t=0)=>{let s=0;for(let i=t;i<e.bitFields.length;i++){const t=e.bitFields[i].options.length;if(s+t>32)break;s+=t}return s},i=s=>(s<=8?(e.pushCode(`${t} = dataView.getUint8(offset);`),s=8):s<=16?(e.pushCode(`${t} = dataView.getUint16(offset);`),s=16):s<=24?(e.pushCode(`${t} = (dataView.getUint16(offset) << 8) | dataView.getUint8(offset + 2);`),s=24):(e.pushCode(`${t} = dataView.getUint32(offset);`),s=32),e.pushCode(`offset += ${s/8};`),s);let r=0;const n="be"===this.endian;let a=0,o=0;e.bitFields.forEach(((h,l)=>{let d=h.options.length;if(d>o){if(o){const s=-1>>>32-o;e.pushCode(`${h.varName} = (${t} & 0x${s.toString(16)}) << ${d-o};`),d-=o}r=0,o=a=i(s(l)-o)}const f=n?a-r-d:r,u=-1>>>32-d;e.pushCode(`${h.varName} ${d<h.options.length?"|=":"="} ${t} >> ${f} & 0x${u.toString(16)};`),32===h.options.length&&e.pushCode(`${h.varName} >>>= 0`),h.options.assert&&h.generateAssert(e),h.options.formatter&&h.generateFormatter(e,h.varName,h.options.formatter),r+=d,o-=d})),e.bitFields=[]}}generateSeek(e){const t=e.generateOption(this.options.length);e.pushCode(`offset += ${t};`)}generateString(e){const t=e.generateVariable(this.varName),s=e.generateTmpVariable(),i=this.options.encoding,r="hex"===i.toLowerCase(),n='b => b.toString(16).padStart(2, "0")';if(this.options.length&&this.options.zeroTerminated){const a=this.options.length;e.pushCode(`var ${s} = offset;`),e.pushCode(`while(dataView.getUint8(offset++) !== 0 && offset - ${s} < ${a});`);const o=`offset - ${s} < ${a} ? offset - 1 : offset`;e.pushCode(r?`${t} = Array.from(buffer.subarray(${s}, ${o}), ${n}).join('');`:`${t} = new TextDecoder('${i}').decode(buffer.subarray(${s}, ${o}));`)}else if(this.options.length){const s=e.generateOption(this.options.length);e.pushCode(r?`${t} = Array.from(buffer.subarray(offset, offset + ${s}), ${n}).join('');`:`${t} = new TextDecoder('${i}').decode(buffer.subarray(offset, offset + ${s}));`),e.pushCode(`offset += ${s};`)}else this.options.zeroTerminated?(e.pushCode(`var ${s} = offset;`),e.pushCode("while(dataView.getUint8(offset++) !== 0);"),e.pushCode(r?`${t} = Array.from(buffer.subarray(${s}, offset - 1), ${n}).join('');`:`${t} = new TextDecoder('${i}').decode(buffer.subarray(${s}, offset - 1));`)):this.options.greedy&&(e.pushCode(`var ${s} = offset;`),e.pushCode("while(buffer.length > offset++);"),e.pushCode(r?`${t} = Array.from(buffer.subarray(${s}, offset), ${n}).join('');`:`${t} = new TextDecoder('${i}').decode(buffer.subarray(${s}, offset));`));this.options.stripNull&&e.pushCode(`${t} = ${t}.replace(/\\x00+$/g, '')`)}generateBuffer(e){const t=e.generateVariable(this.varName);if("function"==typeof this.options.readUntil){const s=this.options.readUntil,i=e.generateTmpVariable(),r=e.generateTmpVariable();e.pushCode(`var ${i} = offset;`),e.pushCode(`var ${r} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${r} = dataView.getUint8(offset);`);const n=e.addImport(s);e.pushCode(`if (${n}.call(${e.generateVariable()}, ${r}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${t} = buffer.subarray(${i}, offset);`)}else if("eof"===this.options.readUntil)e.pushCode(`${t} = buffer.subarray(offset);`);else{const s=e.generateOption(this.options.length);e.pushCode(`${t} = buffer.subarray(offset, offset + ${s});`),e.pushCode(`offset += ${s};`)}this.options.clone&&e.pushCode(`${t} = buffer.constructor.from(${t});`)}generateArray(e){const t=e.generateOption(this.options.length),s=e.generateOption(this.options.lengthInBytes),i=this.options.type,r=e.generateTmpVariable(),n=e.generateVariable(this.varName),u=e.generateTmpVariable(),c=this.options.key,p="string"==typeof c;if(p?e.pushCode(`${n} = {};`):e.pushCode(`${n} = [];`),"function"==typeof this.options.readUntil?e.pushCode("do {"):"eof"===this.options.readUntil?e.pushCode(`for (var ${r} = 0; offset < buffer.length; ${r}++) {`):void 0!==s?e.pushCode(`for (var ${r} = offset + ${s}; offset < ${r}; ) {`):e.pushCode(`for (var ${r} = ${t}; ${r} > 0; ${r}--) {`),"string"==typeof i)if(a.get(i)){const n=e.generateTmpVariable();if(e.pushCode(`var ${n} = ${o+i}(offset, {`),e.useContextVariables){const i=e.generateVariable();e.pushCode(`$parent: ${i},`),e.pushCode(`$root: ${i}.$root,`),this.options.readUntil||void 0!==s||e.pushCode(`$index: ${t} - ${r},`)}e.pushCode("});"),e.pushCode(`var ${u} = ${n}.result; offset = ${n}.offset;`),i!==this.alias&&e.addReference(i)}else{const t=l[i],s=d[i];e.pushCode(`var ${u} = dataView.get${t}(offset, ${s});`),e.pushCode(`offset += ${h[i]};`)}else if(i instanceof f){e.pushCode(`var ${u} = {};`);const n=e.generateVariable();e.pushScope(u),e.useContextVariables&&(e.pushCode(`${u}.$parent = ${n};`),e.pushCode(`${u}.$root = ${n}.$root;`),this.options.readUntil||void 0!==s||e.pushCode(`${u}.$index = ${t} - ${r};`)),i.generate(e),e.useContextVariables&&(e.pushCode(`delete ${u}.$parent;`),e.pushCode(`delete ${u}.$root;`),e.pushCode(`delete ${u}.$index;`)),e.popScope()}if(p?e.pushCode(`${n}[${u}.${c}] = ${u};`):e.pushCode(`${n}.push(${u});`),e.pushCode("}"),"function"==typeof this.options.readUntil){const t=this.options.readUntil,s=e.addImport(t);e.pushCode(`while (!${s}.call(${e.generateVariable()}, ${u}, buffer.subarray(offset)));`)}}generateChoiceCase(e,t,s){if("string"==typeof s){const t=e.generateVariable(this.varName);if(a.has(s)){const i=e.generateTmpVariable();e.pushCode(`var ${i} = ${o+s}(offset, {`),e.useContextVariables&&(e.pushCode(`$parent: ${t}.$parent,`),e.pushCode(`$root: ${t}.$root,`)),e.pushCode("});"),e.pushCode(`${t} = ${i}.result; offset = ${i}.offset;`),s!==this.alias&&e.addReference(s)}else{const i=l[s],r=d[s];e.pushCode(`${t} = dataView.get${i}(offset, ${r});`),e.pushCode(`offset += ${h[s]}`)}}else s instanceof f&&(e.pushPath(t),s.generate(e),e.popPath(t))}generateChoice(e){const t=e.generateOption(this.options.tag),s=e.generateVariable(this.varName);if(this.varName&&(e.pushCode(`${s} = {};`),e.useContextVariables)){const t=e.generateVariable();e.pushCode(`${s}.$parent = ${t};`),e.pushCode(`${s}.$root = ${t}.$root;`)}e.pushCode(`switch(${t}) {`);for(const t in this.options.choices){const s=parseInt(t,10),i=this.options.choices[s];e.pushCode(`case ${s}:`),this.generateChoiceCase(e,this.varName,i),e.pushCode("break;")}e.pushCode("default:"),this.options.defaultChoice?this.generateChoiceCase(e,this.varName,this.options.defaultChoice):e.generateError(`"Met undefined tag value " + ${t} + " at choice"`),e.pushCode("}"),this.varName&&e.useContextVariables&&(e.pushCode(`delete ${s}.$parent;`),e.pushCode(`delete ${s}.$root;`))}generateNest(e){const t=e.generateVariable(this.varName);if(this.options.type instanceof f){if(this.varName&&(e.pushCode(`${t} = {};`),e.useContextVariables)){const s=e.generateVariable();e.pushCode(`${t}.$parent = ${s};`),e.pushCode(`${t}.$root = ${s}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),this.varName&&e.useContextVariables&&e.useContextVariables&&(e.pushCode(`delete ${t}.$parent;`),e.pushCode(`delete ${t}.$root;`))}else if(a.has(this.options.type)){const s=e.generateTmpVariable();if(e.pushCode(`var ${s} = ${o+this.options.type}(offset, {`),e.useContextVariables){const t=e.generateVariable();e.pushCode(`$parent: ${t},`),e.pushCode(`$root: ${t}.$root,`)}e.pushCode("});"),e.pushCode(`${t} = ${s}.result; offset = ${s}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}}generateWrapper(e){const t=e.generateVariable(this.varName),s=e.generateTmpVariable();if("function"==typeof this.options.readUntil){const t=this.options.readUntil,i=e.generateTmpVariable(),r=e.generateTmpVariable();e.pushCode(`var ${i} = offset;`),e.pushCode(`var ${r} = 0;`),e.pushCode("while (offset < buffer.length) {"),e.pushCode(`${r} = dataView.getUint8(offset);`);const n=e.addImport(t);e.pushCode(`if (${n}.call(${e.generateVariable()}, ${r}, buffer.subarray(offset))) break;`),e.pushCode("offset += 1;"),e.pushCode("}"),e.pushCode(`${s} = buffer.subarray(${i}, offset);`)}else if("eof"===this.options.readUntil)e.pushCode(`${s} = buffer.subarray(offset);`);else{const t=e.generateOption(this.options.length);e.pushCode(`${s} = buffer.subarray(offset, offset + ${t});`),e.pushCode(`offset += ${t};`)}this.options.clone&&e.pushCode(`${s} = buffer.constructor.from(${s});`);const i=e.generateTmpVariable(),r=e.generateTmpVariable(),n=e.generateTmpVariable(),h=e.addImport(this.options.wrapper);if(e.pushCode(`${s} = ${h}.call(this, ${s}).subarray(0);`),e.pushCode(`var ${i} = buffer;`),e.pushCode(`var ${r} = offset;`),e.pushCode(`var ${n} = dataView;`),e.pushCode(`buffer = ${s};`),e.pushCode("offset = 0;"),e.pushCode("dataView = new DataView(buffer.buffer, buffer.byteOffset, buffer.length);"),this.options.type instanceof f)this.varName&&e.pushCode(`${t} = {};`),e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName);else if(a.has(this.options.type)){const s=e.generateTmpVariable();e.pushCode(`var ${s} = ${o+this.options.type}(0);`),e.pushCode(`${t} = ${s}.result;`),this.options.type!==this.alias&&e.addReference(this.options.type)}e.pushCode(`buffer = ${i};`),e.pushCode(`dataView = ${n};`),e.pushCode(`offset = ${r};`)}generateFormatter(e,t,s){if("function"==typeof s){const i=e.addImport(s);e.pushCode(`${t} = ${i}.call(${e.generateVariable()}, ${t});`)}}generatePointer(e){const t=this.options.type,s=e.generateOption(this.options.offset),i=e.generateTmpVariable(),r=e.generateVariable(this.varName);if(e.pushCode(`var ${i} = offset;`),e.pushCode(`offset = ${s};`),this.options.type instanceof f){if(e.pushCode(`${r} = {};`),e.useContextVariables){const t=e.generateVariable();e.pushCode(`${r}.$parent = ${t};`),e.pushCode(`${r}.$root = ${t}.$root;`)}e.pushPath(this.varName),this.options.type.generate(e),e.popPath(this.varName),e.useContextVariables&&(e.pushCode(`delete ${r}.$parent;`),e.pushCode(`delete ${r}.$root;`))}else if(a.has(this.options.type)){const t=e.generateTmpVariable();if(e.pushCode(`var ${t} = ${o+this.options.type}(offset, {`),e.useContextVariables){const t=e.generateVariable();e.pushCode(`$parent: ${t},`),e.pushCode(`$root: ${t}.$root,`)}e.pushCode("});"),e.pushCode(`${r} = ${t}.result; offset = ${t}.offset;`),this.options.type!==this.alias&&e.addReference(this.options.type)}else if(Object.keys(h).indexOf(this.options.type)>=0){const s=l[t],i=d[t];e.pushCode(`${r} = dataView.get${s}(offset, ${i});`),e.pushCode(`offset += ${h[t]};`)}e.pushCode(`offset = ${i};`)}generateSaveOffset(e){const t=e.generateVariable(this.varName);e.pushCode(`${t} = offset`)}}var u=s(5742),c=s.n(u),p=s(16308),b=s.n(p);class g{constructor(e){this.ranges=e}get min(){return this.ranges[0].min}get max(){return this.ranges[this.ranges.length-1].max}contains(e){for(const t of this.ranges)if(t.min<=e&&t.max>=e)return!0;return!1}isContiguous(){return this.ranges.length>1}getRanges(){return this.ranges.map((e=>new g([{min:e.min,max:e.max}])))}toString(){return this.ranges.map((e=>`[${e.min}-${e.max}]`)).join(",")}union(e){const t=[...this.getRanges(),...e.getRanges()].sort(((e,t)=>e.min<t.min?-1:e.min>t.min?1:e.max<t.max?-1:t.max>e.max?1:0)),s=[];let i=t[0];for(let e=1;e<t.length;e+=1){const r=t[e];r.min>i.max+1?(s.push(i),i=r):r.max>i.max&&(i=new g([{min:i.min,max:r.max}]))}return s.push(i),1===s.length?s[0]:new g(s)}}function _(e){let t=e.length;for(;--t>=0;)e[t]=0}const m=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),w=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),y=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),v=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),k=new Array(576);_(k);const x=new Array(60);_(x);const C=new Array(512);_(C);const $=new Array(256);_($);const N=new Array(29);_(N);const z=new Array(30);function E(e,t,s,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=s,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}let S,A,O;function U(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}_(z);const B=e=>e<256?C[e]:C[256+(e>>>7)],T=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},R=(e,t,s)=>{e.bi_valid>16-s?(e.bi_buf|=t<<e.bi_valid&65535,T(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=s-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=s)},I=(e,t,s)=>{R(e,s[2*t],s[2*t+1])},V=(e,t)=>{let s=0;do{s|=1&e,e>>>=1,s<<=1}while(--t>0);return s>>>1},D=(e,t,s)=>{const i=new Array(16);let r,n,a=0;for(r=1;r<=15;r++)a=a+s[r-1]<<1,i[r]=a;for(n=0;n<=t;n++){let t=e[2*n+1];0!==t&&(e[2*n]=V(i[t]++,t))}},F=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},Z=e=>{e.bi_valid>8?T(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},P=(e,t,s,i)=>{const r=2*t,n=2*s;return e[r]<e[n]||e[r]===e[n]&&i[t]<=i[s]},L=(e,t,s)=>{const i=e.heap[s];let r=s<<1;for(;r<=e.heap_len&&(r<e.heap_len&&P(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!P(t,i,e.heap[r],e.depth));)e.heap[s]=e.heap[r],s=r,r<<=1;e.heap[s]=i},j=(e,t,s)=>{let i,r,n,a,o=0;if(0!==e.sym_next)do{i=255&e.pending_buf[e.sym_buf+o++],i+=(255&e.pending_buf[e.sym_buf+o++])<<8,r=e.pending_buf[e.sym_buf+o++],0===i?I(e,r,t):(n=$[r],I(e,n+256+1,t),a=m[n],0!==a&&(r-=N[n],R(e,r,a)),i--,n=B(i),I(e,n,s),a=w[n],0!==a&&(i-=z[n],R(e,i,a)))}while(o<e.sym_next);I(e,256,t)},M=(e,t)=>{const s=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,n=t.stat_desc.elems;let a,o,h,l=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<n;a++)0!==s[2*a]?(e.heap[++e.heap_len]=l=a,e.depth[a]=0):s[2*a+1]=0;for(;e.heap_len<2;)h=e.heap[++e.heap_len]=l<2?++l:0,s[2*h]=1,e.depth[h]=0,e.opt_len--,r&&(e.static_len-=i[2*h+1]);for(t.max_code=l,a=e.heap_len>>1;a>=1;a--)L(e,s,a);h=n;do{a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],L(e,s,1),o=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=o,s[2*h]=s[2*a]+s[2*o],e.depth[h]=(e.depth[a]>=e.depth[o]?e.depth[a]:e.depth[o])+1,s[2*a+1]=s[2*o+1]=h,e.heap[1]=h++,L(e,s,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const s=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,n=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,o=t.stat_desc.extra_base,h=t.stat_desc.max_length;let l,d,f,u,c,p,b=0;for(u=0;u<=15;u++)e.bl_count[u]=0;for(s[2*e.heap[e.heap_max]+1]=0,l=e.heap_max+1;l<573;l++)d=e.heap[l],u=s[2*s[2*d+1]+1]+1,u>h&&(u=h,b++),s[2*d+1]=u,d>i||(e.bl_count[u]++,c=0,d>=o&&(c=a[d-o]),p=s[2*d],e.opt_len+=p*(u+c),n&&(e.static_len+=p*(r[2*d+1]+c)));if(0!==b){do{for(u=h-1;0===e.bl_count[u];)u--;e.bl_count[u]--,e.bl_count[u+1]+=2,e.bl_count[h]--,b-=2}while(b>0);for(u=h;0!==u;u--)for(d=e.bl_count[u];0!==d;)f=e.heap[--l],f>i||(s[2*f+1]!==u&&(e.opt_len+=(u-s[2*f+1])*s[2*f],s[2*f+1]=u),d--)}})(e,t),D(s,l,e.bl_count)},H=(e,t,s)=>{let i,r,n=-1,a=t[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),t[2*(s+1)+1]=65535,i=0;i<=s;i++)r=a,a=t[2*(i+1)+1],++o<h&&r===a||(o<l?e.bl_tree[2*r]+=o:0!==r?(r!==n&&e.bl_tree[2*r]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,n=r,0===a?(h=138,l=3):r===a?(h=6,l=3):(h=7,l=4))},q=(e,t,s)=>{let i,r,n=-1,a=t[1],o=0,h=7,l=4;for(0===a&&(h=138,l=3),i=0;i<=s;i++)if(r=a,a=t[2*(i+1)+1],!(++o<h&&r===a)){if(o<l)do{I(e,r,e.bl_tree)}while(0!=--o);else 0!==r?(r!==n&&(I(e,r,e.bl_tree),o--),I(e,16,e.bl_tree),R(e,o-3,2)):o<=10?(I(e,17,e.bl_tree),R(e,o-3,3)):(I(e,18,e.bl_tree),R(e,o-11,7));o=0,n=r,0===a?(h=138,l=3):r===a?(h=6,l=3):(h=7,l=4)}};let K=!1;const W=(e,t,s,i)=>{R(e,0+(i?1:0),3),Z(e),T(e,s),T(e,~s),s&&e.pending_buf.set(e.window.subarray(t,t+s),e.pending),e.pending+=s};var Y={_tr_init:e=>{K||((()=>{let e,t,s,i,r;const n=new Array(16);for(s=0,i=0;i<28;i++)for(N[i]=s,e=0;e<1<<m[i];e++)$[s++]=i;for($[s-1]=i,r=0,i=0;i<16;i++)for(z[i]=r,e=0;e<1<<w[i];e++)C[r++]=i;for(r>>=7;i<30;i++)for(z[i]=r<<7,e=0;e<1<<w[i]-7;e++)C[256+r++]=i;for(t=0;t<=15;t++)n[t]=0;for(e=0;e<=143;)k[2*e+1]=8,e++,n[8]++;for(;e<=255;)k[2*e+1]=9,e++,n[9]++;for(;e<=279;)k[2*e+1]=7,e++,n[7]++;for(;e<=287;)k[2*e+1]=8,e++,n[8]++;for(D(k,287,n),e=0;e<30;e++)x[2*e+1]=5,x[2*e]=V(e,5);S=new E(k,m,257,286,15),A=new E(x,w,0,30,15),O=new E(new Array(0),y,0,19,7)})(),K=!0),e.l_desc=new U(e.dyn_ltree,S),e.d_desc=new U(e.dyn_dtree,A),e.bl_desc=new U(e.bl_tree,O),e.bi_buf=0,e.bi_valid=0,F(e)},_tr_stored_block:W,_tr_flush_block:(e,t,s,i)=>{let r,n,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,s=4093624447;for(t=0;t<=31;t++,s>>>=1)if(1&s&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),M(e,e.l_desc),M(e,e.d_desc),a=(e=>{let t;for(H(e,e.dyn_ltree,e.l_desc.max_code),H(e,e.dyn_dtree,e.d_desc.max_code),M(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*v[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),r=e.opt_len+3+7>>>3,n=e.static_len+3+7>>>3,n<=r&&(r=n)):r=n=s+5,s+4<=r&&-1!==t?W(e,t,s,i):4===e.strategy||n===r?(R(e,2+(i?1:0),3),j(e,k,x)):(R(e,4+(i?1:0),3),((e,t,s,i)=>{let r;for(R(e,t-257,5),R(e,s-1,5),R(e,i-4,4),r=0;r<i;r++)R(e,e.bl_tree[2*v[r]+1],3);q(e,e.dyn_ltree,t-1),q(e,e.dyn_dtree,s-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),j(e,e.dyn_ltree,e.dyn_dtree)),F(e),i&&Z(e)},_tr_tally:(e,t,s)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=s,0===t?e.dyn_ltree[2*s]++:(e.matches++,t--,e.dyn_ltree[2*($[s]+256+1)]++,e.dyn_dtree[2*B(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{R(e,2,3),I(e,256,k),(e=>{16===e.bi_valid?(T(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},G=(e,t,s,i)=>{let r=65535&e,n=e>>>16&65535,a=0;for(;0!==s;){a=s>2e3?2e3:s,s-=a;do{r=r+t[i++]|0,n=n+r|0}while(--a);r%=65521,n%=65521}return r|n<<16};const J=new Uint32Array((()=>{let e,t=[];for(var s=0;s<256;s++){e=s;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[s]=e}return t})());var X=(e,t,s,i)=>{const r=J,n=i+s;e^=-1;for(let s=i;s<n;s++)e=e>>>8^r[255&(e^t[s])];return~e},Q={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},ee={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:te,_tr_stored_block:se,_tr_flush_block:ie,_tr_tally:re,_tr_align:ne}=Y,{Z_NO_FLUSH:ae,Z_PARTIAL_FLUSH:oe,Z_FULL_FLUSH:he,Z_FINISH:le,Z_BLOCK:de,Z_OK:fe,Z_STREAM_END:ue,Z_STREAM_ERROR:ce,Z_DATA_ERROR:pe,Z_BUF_ERROR:be,Z_DEFAULT_COMPRESSION:ge,Z_FILTERED:_e,Z_HUFFMAN_ONLY:me,Z_RLE:we,Z_FIXED:ye,Z_DEFAULT_STRATEGY:ve,Z_UNKNOWN:ke,Z_DEFLATED:xe}=ee,Ce=258,$e=262,Ne=42,ze=113,Ee=666,Se=(e,t)=>(e.msg=Q[t],t),Ae=e=>2*e-(e>4?9:0),Oe=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Ue=e=>{let t,s,i,r=e.w_size;t=e.hash_size,i=t;do{s=e.head[--i],e.head[i]=s>=r?s-r:0}while(--t);t=r,i=t;do{s=e.prev[--i],e.prev[i]=s>=r?s-r:0}while(--t)};let Be=(e,t,s)=>(t<<e.hash_shift^s)&e.hash_mask;const Te=e=>{const t=e.state;let s=t.pending;s>e.avail_out&&(s=e.avail_out),0!==s&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+s),e.next_out),e.next_out+=s,t.pending_out+=s,e.total_out+=s,e.avail_out-=s,t.pending-=s,0===t.pending&&(t.pending_out=0))},Re=(e,t)=>{ie(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,Te(e.strm)},Ie=(e,t)=>{e.pending_buf[e.pending++]=t},Ve=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},De=(e,t,s,i)=>{let r=e.avail_in;return r>i&&(r=i),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),s),1===e.state.wrap?e.adler=G(e.adler,t,r,s):2===e.state.wrap&&(e.adler=X(e.adler,t,r,s)),e.next_in+=r,e.total_in+=r,r)},Fe=(e,t)=>{let s,i,r=e.max_chain_length,n=e.strstart,a=e.prev_length,o=e.nice_match;const h=e.strstart>e.w_size-$e?e.strstart-(e.w_size-$e):0,l=e.window,d=e.w_mask,f=e.prev,u=e.strstart+Ce;let c=l[n+a-1],p=l[n+a];e.prev_length>=e.good_match&&(r>>=2),o>e.lookahead&&(o=e.lookahead);do{if(s=t,l[s+a]===p&&l[s+a-1]===c&&l[s]===l[n]&&l[++s]===l[n+1]){n+=2,s++;do{}while(l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&l[++n]===l[++s]&&n<u);if(i=Ce-(u-n),n=u-Ce,i>a){if(e.match_start=t,a=i,i>=o)break;c=l[n+a-1],p=l[n+a]}}}while((t=f[t&d])>h&&0!=--r);return a<=e.lookahead?a:e.lookahead},Ze=e=>{const t=e.w_size;let s,i,r;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-$e)&&(e.window.set(e.window.subarray(t,t+t-i),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Ue(e),i+=t),0===e.strm.avail_in)break;if(s=De(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=s,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=Be(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=Be(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<$e&&0!==e.strm.avail_in)},Pe=(e,t)=>{let s,i,r,n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,o=e.strm.avail_in;do{if(s=65535,r=e.bi_valid+42>>3,e.strm.avail_out<r)break;if(r=e.strm.avail_out-r,i=e.strstart-e.block_start,s>i+e.strm.avail_in&&(s=i+e.strm.avail_in),s>r&&(s=r),s<n&&(0===s&&t!==le||t===ae||s!==i+e.strm.avail_in))break;a=t===le&&s===i+e.strm.avail_in?1:0,se(e,0,0,a),e.pending_buf[e.pending-4]=s,e.pending_buf[e.pending-3]=s>>8,e.pending_buf[e.pending-2]=~s,e.pending_buf[e.pending-1]=~s>>8,Te(e.strm),i&&(i>s&&(i=s),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,s-=i),s&&(De(e.strm,e.strm.output,e.strm.next_out,s),e.strm.next_out+=s,e.strm.avail_out-=s,e.strm.total_out+=s)}while(0===a);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?4:t!==ae&&t!==le&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(r=e.window_size-e.strstart,e.strm.avail_in>r&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,r+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),r>e.strm.avail_in&&(r=e.strm.avail_in),r&&(De(e.strm,e.window,e.strstart,r),e.strstart+=r,e.insert+=r>e.w_size-e.insert?e.w_size-e.insert:r),e.high_water<e.strstart&&(e.high_water=e.strstart),r=e.bi_valid+42>>3,r=e.pending_buf_size-r>65535?65535:e.pending_buf_size-r,n=r>e.w_size?e.w_size:r,i=e.strstart-e.block_start,(i>=n||(i||t===le)&&t!==ae&&0===e.strm.avail_in&&i<=r)&&(s=i>r?r:i,a=t===le&&0===e.strm.avail_in&&s===i?1:0,se(e,e.block_start,s,a),e.block_start+=s,Te(e.strm)),a?3:1)},Le=(e,t)=>{let s,i;for(;;){if(e.lookahead<$e){if(Ze(e),e.lookahead<$e&&t===ae)return 1;if(0===e.lookahead)break}if(s=0,e.lookahead>=3&&(e.ins_h=Be(e,e.ins_h,e.window[e.strstart+3-1]),s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==s&&e.strstart-s<=e.w_size-$e&&(e.match_length=Fe(e,s)),e.match_length>=3)if(i=re(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Be(e,e.ins_h,e.window[e.strstart+3-1]),s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Be(e,e.ins_h,e.window[e.strstart+1]);else i=re(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(Re(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===le?(Re(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Re(e,!1),0===e.strm.avail_out)?1:2},je=(e,t)=>{let s,i,r;for(;;){if(e.lookahead<$e){if(Ze(e),e.lookahead<$e&&t===ae)return 1;if(0===e.lookahead)break}if(s=0,e.lookahead>=3&&(e.ins_h=Be(e,e.ins_h,e.window[e.strstart+3-1]),s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==s&&e.prev_length<e.max_lazy_match&&e.strstart-s<=e.w_size-$e&&(e.match_length=Fe(e,s),e.match_length<=5&&(e.strategy===_e||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,i=re(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=Be(e,e.ins_h,e.window[e.strstart+3-1]),s=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(Re(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(i=re(e,0,e.window[e.strstart-1]),i&&Re(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=re(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===le?(Re(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Re(e,!1),0===e.strm.avail_out)?1:2};function Me(e,t,s,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=s,this.max_chain=i,this.func=r}const He=[new Me(0,0,0,0,Pe),new Me(4,4,8,4,Le),new Me(4,5,16,8,Le),new Me(4,6,32,32,Le),new Me(4,4,16,16,je),new Me(8,16,32,32,je),new Me(8,16,128,128,je),new Me(8,32,128,256,je),new Me(32,128,258,1024,je),new Me(32,258,258,4096,je)];function qe(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=xe,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Oe(this.dyn_ltree),Oe(this.dyn_dtree),Oe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Oe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Oe(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ke=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==Ne&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==ze&&t.status!==Ee?1:0},We=e=>{if(Ke(e))return Se(e,ce);e.total_in=e.total_out=0,e.data_type=ke;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?Ne:ze,e.adler=2===t.wrap?0:1,t.last_flush=-2,te(t),fe},Ye=e=>{const t=We(e);var s;return t===fe&&((s=e.state).window_size=2*s.w_size,Oe(s.head),s.max_lazy_match=He[s.level].max_lazy,s.good_match=He[s.level].good_length,s.nice_match=He[s.level].nice_length,s.max_chain_length=He[s.level].max_chain,s.strstart=0,s.block_start=0,s.lookahead=0,s.insert=0,s.match_length=s.prev_length=2,s.match_available=0,s.ins_h=0),t},Ge=(e,t,s,i,r,n)=>{if(!e)return ce;let a=1;if(t===ge&&(t=6),i<0?(a=0,i=-i):i>15&&(a=2,i-=16),r<1||r>9||s!==xe||i<8||i>15||t<0||t>9||n<0||n>ye||8===i&&1!==a)return Se(e,ce);8===i&&(i=9);const o=new qe;return e.state=o,o.strm=e,o.status=Ne,o.wrap=a,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=r+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<r+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=t,o.strategy=n,o.method=s,Ye(e)};var Je={deflateInit:(e,t)=>Ge(e,t,xe,15,8,ve),deflateInit2:Ge,deflateReset:Ye,deflateResetKeep:We,deflateSetHeader:(e,t)=>Ke(e)||2!==e.state.wrap?ce:(e.state.gzhead=t,fe),deflate:(e,t)=>{if(Ke(e)||t>de||t<0)return e?Se(e,ce):ce;const s=e.state;if(!e.output||0!==e.avail_in&&!e.input||s.status===Ee&&t!==le)return Se(e,0===e.avail_out?be:ce);const i=s.last_flush;if(s.last_flush=t,0!==s.pending){if(Te(e),0===e.avail_out)return s.last_flush=-1,fe}else if(0===e.avail_in&&Ae(t)<=Ae(i)&&t!==le)return Se(e,be);if(s.status===Ee&&0!==e.avail_in)return Se(e,be);if(s.status===Ne&&0===s.wrap&&(s.status=ze),s.status===Ne){let t=xe+(s.w_bits-8<<4)<<8,i=-1;if(i=s.strategy>=me||s.level<2?0:s.level<6?1:6===s.level?2:3,t|=i<<6,0!==s.strstart&&(t|=32),t+=31-t%31,Ve(s,t),0!==s.strstart&&(Ve(s,e.adler>>>16),Ve(s,65535&e.adler)),e.adler=1,s.status=ze,Te(e),0!==s.pending)return s.last_flush=-1,fe}if(57===s.status)if(e.adler=0,Ie(s,31),Ie(s,139),Ie(s,8),s.gzhead)Ie(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),Ie(s,255&s.gzhead.time),Ie(s,s.gzhead.time>>8&255),Ie(s,s.gzhead.time>>16&255),Ie(s,s.gzhead.time>>24&255),Ie(s,9===s.level?2:s.strategy>=me||s.level<2?4:0),Ie(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(Ie(s,255&s.gzhead.extra.length),Ie(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=X(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=69;else if(Ie(s,0),Ie(s,0),Ie(s,0),Ie(s,0),Ie(s,0),Ie(s,9===s.level?2:s.strategy>=me||s.level<2?4:0),Ie(s,3),s.status=ze,Te(e),0!==s.pending)return s.last_flush=-1,fe;if(69===s.status){if(s.gzhead.extra){let t=s.pending,i=(65535&s.gzhead.extra.length)-s.gzindex;for(;s.pending+i>s.pending_buf_size;){let r=s.pending_buf_size-s.pending;if(s.pending_buf.set(s.gzhead.extra.subarray(s.gzindex,s.gzindex+r),s.pending),s.pending=s.pending_buf_size,s.gzhead.hcrc&&s.pending>t&&(e.adler=X(e.adler,s.pending_buf,s.pending-t,t)),s.gzindex+=r,Te(e),0!==s.pending)return s.last_flush=-1,fe;t=0,i-=r}let r=new Uint8Array(s.gzhead.extra);s.pending_buf.set(r.subarray(s.gzindex,s.gzindex+i),s.pending),s.pending+=i,s.gzhead.hcrc&&s.pending>t&&(e.adler=X(e.adler,s.pending_buf,s.pending-t,t)),s.gzindex=0}s.status=73}if(73===s.status){if(s.gzhead.name){let t,i=s.pending;do{if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>i&&(e.adler=X(e.adler,s.pending_buf,s.pending-i,i)),Te(e),0!==s.pending)return s.last_flush=-1,fe;i=0}t=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,Ie(s,t)}while(0!==t);s.gzhead.hcrc&&s.pending>i&&(e.adler=X(e.adler,s.pending_buf,s.pending-i,i)),s.gzindex=0}s.status=91}if(91===s.status){if(s.gzhead.comment){let t,i=s.pending;do{if(s.pending===s.pending_buf_size){if(s.gzhead.hcrc&&s.pending>i&&(e.adler=X(e.adler,s.pending_buf,s.pending-i,i)),Te(e),0!==s.pending)return s.last_flush=-1,fe;i=0}t=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,Ie(s,t)}while(0!==t);s.gzhead.hcrc&&s.pending>i&&(e.adler=X(e.adler,s.pending_buf,s.pending-i,i))}s.status=103}if(103===s.status){if(s.gzhead.hcrc){if(s.pending+2>s.pending_buf_size&&(Te(e),0!==s.pending))return s.last_flush=-1,fe;Ie(s,255&e.adler),Ie(s,e.adler>>8&255),e.adler=0}if(s.status=ze,Te(e),0!==s.pending)return s.last_flush=-1,fe}if(0!==e.avail_in||0!==s.lookahead||t!==ae&&s.status!==Ee){let i=0===s.level?Pe(s,t):s.strategy===me?((e,t)=>{let s;for(;;){if(0===e.lookahead&&(Ze(e),0===e.lookahead)){if(t===ae)return 1;break}if(e.match_length=0,s=re(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,s&&(Re(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===le?(Re(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Re(e,!1),0===e.strm.avail_out)?1:2})(s,t):s.strategy===we?((e,t)=>{let s,i,r,n;const a=e.window;for(;;){if(e.lookahead<=Ce){if(Ze(e),e.lookahead<=Ce&&t===ae)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=e.strstart-1,i=a[r],i===a[++r]&&i===a[++r]&&i===a[++r])){n=e.strstart+Ce;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<n);e.match_length=Ce-(n-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(s=re(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(s=re(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),s&&(Re(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===le?(Re(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Re(e,!1),0===e.strm.avail_out)?1:2})(s,t):He[s.level].func(s,t);if(3!==i&&4!==i||(s.status=Ee),1===i||3===i)return 0===e.avail_out&&(s.last_flush=-1),fe;if(2===i&&(t===oe?ne(s):t!==de&&(se(s,0,0,!1),t===he&&(Oe(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),Te(e),0===e.avail_out))return s.last_flush=-1,fe}return t!==le?fe:s.wrap<=0?ue:(2===s.wrap?(Ie(s,255&e.adler),Ie(s,e.adler>>8&255),Ie(s,e.adler>>16&255),Ie(s,e.adler>>24&255),Ie(s,255&e.total_in),Ie(s,e.total_in>>8&255),Ie(s,e.total_in>>16&255),Ie(s,e.total_in>>24&255)):(Ve(s,e.adler>>>16),Ve(s,65535&e.adler)),Te(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?fe:ue)},deflateEnd:e=>{if(Ke(e))return ce;const t=e.state.status;return e.state=null,t===ze?Se(e,pe):fe},deflateSetDictionary:(e,t)=>{let s=t.length;if(Ke(e))return ce;const i=e.state,r=i.wrap;if(2===r||1===r&&i.status!==Ne||i.lookahead)return ce;if(1===r&&(e.adler=G(e.adler,t,s,0)),i.wrap=0,s>=i.w_size){0===r&&(Oe(i.head),i.strstart=0,i.block_start=0,i.insert=0);let e=new Uint8Array(i.w_size);e.set(t.subarray(s-i.w_size,s),0),t=e,s=i.w_size}const n=e.avail_in,a=e.next_in,o=e.input;for(e.avail_in=s,e.next_in=0,e.input=t,Ze(i);i.lookahead>=3;){let e=i.strstart,t=i.lookahead-2;do{i.ins_h=Be(i,i.ins_h,i.window[e+3-1]),i.prev[e&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=e,e++}while(--t);i.strstart=e,i.lookahead=2,Ze(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=a,e.input=o,e.avail_in=n,i.wrap=r,fe},deflateInfo:"pako deflate (from Nodeca project)"};const Xe=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Qe={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const s=t.shift();if(s){if("object"!=typeof s)throw new TypeError(s+"must be non-object");for(const t in s)Xe(s,t)&&(e[t]=s[t])}}return e},flattenChunks:e=>{let t=0;for(let s=0,i=e.length;s<i;s++)t+=e[s].length;const s=new Uint8Array(t);for(let t=0,i=0,r=e.length;t<r;t++){let r=e[t];s.set(r,i),i+=r.length}return s}};let et=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){et=!1}const tt=new Uint8Array(256);for(let e=0;e<256;e++)tt[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;tt[254]=tt[254]=1;var st={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,s,i,r,n,a=e.length,o=0;for(r=0;r<a;r++)s=e.charCodeAt(r),55296==(64512&s)&&r+1<a&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(s=65536+(s-55296<<10)+(i-56320),r++)),o+=s<128?1:s<2048?2:s<65536?3:4;for(t=new Uint8Array(o),n=0,r=0;n<o;r++)s=e.charCodeAt(r),55296==(64512&s)&&r+1<a&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(s=65536+(s-55296<<10)+(i-56320),r++)),s<128?t[n++]=s:s<2048?(t[n++]=192|s>>>6,t[n++]=128|63&s):s<65536?(t[n++]=224|s>>>12,t[n++]=128|s>>>6&63,t[n++]=128|63&s):(t[n++]=240|s>>>18,t[n++]=128|s>>>12&63,t[n++]=128|s>>>6&63,t[n++]=128|63&s);return t},buf2string:(e,t)=>{const s=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let i,r;const n=new Array(2*s);for(r=0,i=0;i<s;){let t=e[i++];if(t<128){n[r++]=t;continue}let a=tt[t];if(a>4)n[r++]=65533,i+=a-1;else{for(t&=2===a?31:3===a?15:7;a>1&&i<s;)t=t<<6|63&e[i++],a--;a>1?n[r++]=65533:t<65536?n[r++]=t:(t-=65536,n[r++]=55296|t>>10&1023,n[r++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&et)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let s="";for(let i=0;i<t;i++)s+=String.fromCharCode(e[i]);return s})(n,r)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let s=t-1;for(;s>=0&&128==(192&e[s]);)s--;return s<0||0===s?t:s+tt[e[s]]>t?s:t}},it=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const rt=Object.prototype.toString,{Z_NO_FLUSH:nt,Z_SYNC_FLUSH:at,Z_FULL_FLUSH:ot,Z_FINISH:ht,Z_OK:lt,Z_STREAM_END:dt,Z_DEFAULT_COMPRESSION:ft,Z_DEFAULT_STRATEGY:ut,Z_DEFLATED:ct}=ee;function pt(e){this.options=Qe.assign({level:ft,method:ct,chunkSize:16384,windowBits:15,memLevel:8,strategy:ut},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new it,this.strm.avail_out=0;let s=Je.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(s!==lt)throw new Error(Q[s]);if(t.header&&Je.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?st.string2buf(t.dictionary):"[object ArrayBuffer]"===rt.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,s=Je.deflateSetDictionary(this.strm,e),s!==lt)throw new Error(Q[s]);this._dict_set=!0}}function bt(e,t){const s=new pt(t);if(s.push(e,!0),s.err)throw s.msg||Q[s.err];return s.result}pt.prototype.push=function(e,t){const s=this.strm,i=this.options.chunkSize;let r,n;if(this.ended)return!1;for(n=t===~~t?t:!0===t?ht:nt,"string"==typeof e?s.input=st.string2buf(e):"[object ArrayBuffer]"===rt.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;;)if(0===s.avail_out&&(s.output=new Uint8Array(i),s.next_out=0,s.avail_out=i),(n===at||n===ot)&&s.avail_out<=6)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else{if(r=Je.deflate(s,n),r===dt)return s.next_out>0&&this.onData(s.output.subarray(0,s.next_out)),r=Je.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===lt;if(0!==s.avail_out){if(n>0&&s.next_out>0)this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;else if(0===s.avail_in)break}else this.onData(s.output)}return!0},pt.prototype.onData=function(e){this.chunks.push(e)},pt.prototype.onEnd=function(e){e===lt&&(this.result=Qe.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var gt={Deflate:pt,deflate:bt,deflateRaw:function(e,t){return(t=t||{}).raw=!0,bt(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,bt(e,t)},constants:ee};const _t=16209;var mt=function(e,t){let s,i,r,n,a,o,h,l,d,f,u,c,p,b,g,_,m,w,y,v,k,x,C,$;const N=e.state;s=e.next_in,C=e.input,i=s+(e.avail_in-5),r=e.next_out,$=e.output,n=r-(t-e.avail_out),a=r+(e.avail_out-257),o=N.dmax,h=N.wsize,l=N.whave,d=N.wnext,f=N.window,u=N.hold,c=N.bits,p=N.lencode,b=N.distcode,g=(1<<N.lenbits)-1,_=(1<<N.distbits)-1;e:do{c<15&&(u+=C[s++]<<c,c+=8,u+=C[s++]<<c,c+=8),m=p[u&g];t:for(;;){if(w=m>>>24,u>>>=w,c-=w,w=m>>>16&255,0===w)$[r++]=65535&m;else{if(!(16&w)){if(64&w){if(32&w){N.mode=16191;break e}e.msg="invalid literal/length code",N.mode=_t;break e}m=p[(65535&m)+(u&(1<<w)-1)];continue t}for(y=65535&m,w&=15,w&&(c<w&&(u+=C[s++]<<c,c+=8),y+=u&(1<<w)-1,u>>>=w,c-=w),c<15&&(u+=C[s++]<<c,c+=8,u+=C[s++]<<c,c+=8),m=b[u&_];;){if(w=m>>>24,u>>>=w,c-=w,w=m>>>16&255,16&w){if(v=65535&m,w&=15,c<w&&(u+=C[s++]<<c,c+=8,c<w&&(u+=C[s++]<<c,c+=8)),v+=u&(1<<w)-1,v>o){e.msg="invalid distance too far back",N.mode=_t;break e}if(u>>>=w,c-=w,w=r-n,v>w){if(w=v-w,w>l&&N.sane){e.msg="invalid distance too far back",N.mode=_t;break e}if(k=0,x=f,0===d){if(k+=h-w,w<y){y-=w;do{$[r++]=f[k++]}while(--w);k=r-v,x=$}}else if(d<w){if(k+=h+d-w,w-=d,w<y){y-=w;do{$[r++]=f[k++]}while(--w);if(k=0,d<y){w=d,y-=w;do{$[r++]=f[k++]}while(--w);k=r-v,x=$}}}else if(k+=d-w,w<y){y-=w;do{$[r++]=f[k++]}while(--w);k=r-v,x=$}for(;y>2;)$[r++]=x[k++],$[r++]=x[k++],$[r++]=x[k++],y-=3;y&&($[r++]=x[k++],y>1&&($[r++]=x[k++]))}else{k=r-v;do{$[r++]=$[k++],$[r++]=$[k++],$[r++]=$[k++],y-=3}while(y>2);y&&($[r++]=$[k++],y>1&&($[r++]=$[k++]))}break}if(64&w){e.msg="invalid distance code",N.mode=_t;break e}m=b[(65535&m)+(u&(1<<w)-1)]}}break}}while(s<i&&r<a);y=c>>3,s-=y,c-=y<<3,u&=(1<<c)-1,e.next_in=s,e.next_out=r,e.avail_in=s<i?i-s+5:5-(s-i),e.avail_out=r<a?a-r+257:257-(r-a),N.hold=u,N.bits=c};const wt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),yt=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),vt=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),kt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var xt=(e,t,s,i,r,n,a,o)=>{const h=o.bits;let l,d,f,u,c,p,b=0,g=0,_=0,m=0,w=0,y=0,v=0,k=0,x=0,C=0,$=null;const N=new Uint16Array(16),z=new Uint16Array(16);let E,S,A,O=null;for(b=0;b<=15;b++)N[b]=0;for(g=0;g<i;g++)N[t[s+g]]++;for(w=h,m=15;m>=1&&0===N[m];m--);if(w>m&&(w=m),0===m)return r[n++]=20971520,r[n++]=20971520,o.bits=1,0;for(_=1;_<m&&0===N[_];_++);for(w<_&&(w=_),k=1,b=1;b<=15;b++)if(k<<=1,k-=N[b],k<0)return-1;if(k>0&&(0===e||1!==m))return-1;for(z[1]=0,b=1;b<15;b++)z[b+1]=z[b]+N[b];for(g=0;g<i;g++)0!==t[s+g]&&(a[z[t[s+g]]++]=g);if(0===e?($=O=a,p=20):1===e?($=wt,O=yt,p=257):($=vt,O=kt,p=0),C=0,g=0,b=_,c=n,y=w,v=0,f=-1,x=1<<w,u=x-1,1===e&&x>852||2===e&&x>592)return 1;for(;;){E=b-v,a[g]+1<p?(S=0,A=a[g]):a[g]>=p?(S=O[a[g]-p],A=$[a[g]-p]):(S=96,A=0),l=1<<b-v,d=1<<y,_=d;do{d-=l,r[c+(C>>v)+d]=E<<24|S<<16|A}while(0!==d);for(l=1<<b-1;C&l;)l>>=1;if(0!==l?(C&=l-1,C+=l):C=0,g++,0==--N[b]){if(b===m)break;b=t[s+a[g]]}if(b>w&&(C&u)!==f){for(0===v&&(v=w),c+=_,y=b-v,k=1<<y;y+v<m&&(k-=N[y+v],!(k<=0));)y++,k<<=1;if(x+=1<<y,1===e&&x>852||2===e&&x>592)return 1;f=C&u,r[f]=w<<24|y<<16|c-n}}return 0!==C&&(r[c+C]=b-v<<24|64<<16),o.bits=w,0};const{Z_FINISH:Ct,Z_BLOCK:$t,Z_TREES:Nt,Z_OK:zt,Z_STREAM_END:Et,Z_NEED_DICT:St,Z_STREAM_ERROR:At,Z_DATA_ERROR:Ot,Z_MEM_ERROR:Ut,Z_BUF_ERROR:Bt,Z_DEFLATED:Tt}=ee,Rt=16180,It=16190,Vt=16191,Dt=16192,Ft=16194,Zt=16199,Pt=16200,Lt=16206,jt=16209,Mt=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Ht(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const qt=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Rt||t.mode>16211?1:0},Kt=e=>{if(qt(e))return At;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=Rt,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,zt},Wt=e=>{if(qt(e))return At;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Kt(e)},Yt=(e,t)=>{let s;if(qt(e))return At;const i=e.state;return t<0?(s=0,t=-t):(s=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?At:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=s,i.wbits=t,Wt(e))},Gt=(e,t)=>{if(!e)return At;const s=new Ht;e.state=s,s.strm=e,s.window=null,s.mode=Rt;const i=Yt(e,t);return i!==zt&&(e.state=null),i};let Jt,Xt,Qt=!0;const es=e=>{if(Qt){Jt=new Int32Array(512),Xt=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(xt(1,e.lens,0,288,Jt,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;xt(2,e.lens,0,32,Xt,0,e.work,{bits:5}),Qt=!1}e.lencode=Jt,e.lenbits=9,e.distcode=Xt,e.distbits=5},ts=(e,t,s,i)=>{let r;const n=e.state;return null===n.window&&(n.wsize=1<<n.wbits,n.wnext=0,n.whave=0,n.window=new Uint8Array(n.wsize)),i>=n.wsize?(n.window.set(t.subarray(s-n.wsize,s),0),n.wnext=0,n.whave=n.wsize):(r=n.wsize-n.wnext,r>i&&(r=i),n.window.set(t.subarray(s-i,s-i+r),n.wnext),(i-=r)?(n.window.set(t.subarray(s-i,s),0),n.wnext=i,n.whave=n.wsize):(n.wnext+=r,n.wnext===n.wsize&&(n.wnext=0),n.whave<n.wsize&&(n.whave+=r))),0};var ss={inflateReset:Wt,inflateReset2:Yt,inflateResetKeep:Kt,inflateInit:e=>Gt(e,15),inflateInit2:Gt,inflate:(e,t)=>{let s,i,r,n,a,o,h,l,d,f,u,c,p,b,g,_,m,w,y,v,k,x,C=0;const $=new Uint8Array(4);let N,z;const E=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(qt(e)||!e.output||!e.input&&0!==e.avail_in)return At;s=e.state,s.mode===Vt&&(s.mode=Dt),a=e.next_out,r=e.output,h=e.avail_out,n=e.next_in,i=e.input,o=e.avail_in,l=s.hold,d=s.bits,f=o,u=h,x=zt;e:for(;;)switch(s.mode){case Rt:if(0===s.wrap){s.mode=Dt;break}for(;d<16;){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}if(2&s.wrap&&35615===l){0===s.wbits&&(s.wbits=15),s.check=0,$[0]=255&l,$[1]=l>>>8&255,s.check=X(s.check,$,2,0),l=0,d=0,s.mode=16181;break}if(s.head&&(s.head.done=!1),!(1&s.wrap)||(((255&l)<<8)+(l>>8))%31){e.msg="incorrect header check",s.mode=jt;break}if((15&l)!==Tt){e.msg="unknown compression method",s.mode=jt;break}if(l>>>=4,d-=4,k=8+(15&l),0===s.wbits&&(s.wbits=k),k>15||k>s.wbits){e.msg="invalid window size",s.mode=jt;break}s.dmax=1<<s.wbits,s.flags=0,e.adler=s.check=1,s.mode=512&l?16189:Vt,l=0,d=0;break;case 16181:for(;d<16;){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}if(s.flags=l,(255&s.flags)!==Tt){e.msg="unknown compression method",s.mode=jt;break}if(57344&s.flags){e.msg="unknown header flags set",s.mode=jt;break}s.head&&(s.head.text=l>>8&1),512&s.flags&&4&s.wrap&&($[0]=255&l,$[1]=l>>>8&255,s.check=X(s.check,$,2,0)),l=0,d=0,s.mode=16182;case 16182:for(;d<32;){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}s.head&&(s.head.time=l),512&s.flags&&4&s.wrap&&($[0]=255&l,$[1]=l>>>8&255,$[2]=l>>>16&255,$[3]=l>>>24&255,s.check=X(s.check,$,4,0)),l=0,d=0,s.mode=16183;case 16183:for(;d<16;){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}s.head&&(s.head.xflags=255&l,s.head.os=l>>8),512&s.flags&&4&s.wrap&&($[0]=255&l,$[1]=l>>>8&255,s.check=X(s.check,$,2,0)),l=0,d=0,s.mode=16184;case 16184:if(1024&s.flags){for(;d<16;){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}s.length=l,s.head&&(s.head.extra_len=l),512&s.flags&&4&s.wrap&&($[0]=255&l,$[1]=l>>>8&255,s.check=X(s.check,$,2,0)),l=0,d=0}else s.head&&(s.head.extra=null);s.mode=16185;case 16185:if(1024&s.flags&&(c=s.length,c>o&&(c=o),c&&(s.head&&(k=s.head.extra_len-s.length,s.head.extra||(s.head.extra=new Uint8Array(s.head.extra_len)),s.head.extra.set(i.subarray(n,n+c),k)),512&s.flags&&4&s.wrap&&(s.check=X(s.check,i,c,n)),o-=c,n+=c,s.length-=c),s.length))break e;s.length=0,s.mode=16186;case 16186:if(2048&s.flags){if(0===o)break e;c=0;do{k=i[n+c++],s.head&&k&&s.length<65536&&(s.head.name+=String.fromCharCode(k))}while(k&&c<o);if(512&s.flags&&4&s.wrap&&(s.check=X(s.check,i,c,n)),o-=c,n+=c,k)break e}else s.head&&(s.head.name=null);s.length=0,s.mode=16187;case 16187:if(4096&s.flags){if(0===o)break e;c=0;do{k=i[n+c++],s.head&&k&&s.length<65536&&(s.head.comment+=String.fromCharCode(k))}while(k&&c<o);if(512&s.flags&&4&s.wrap&&(s.check=X(s.check,i,c,n)),o-=c,n+=c,k)break e}else s.head&&(s.head.comment=null);s.mode=16188;case 16188:if(512&s.flags){for(;d<16;){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}if(4&s.wrap&&l!==(65535&s.check)){e.msg="header crc mismatch",s.mode=jt;break}l=0,d=0}s.head&&(s.head.hcrc=s.flags>>9&1,s.head.done=!0),e.adler=s.check=0,s.mode=Vt;break;case 16189:for(;d<32;){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}e.adler=s.check=Mt(l),l=0,d=0,s.mode=It;case It:if(0===s.havedict)return e.next_out=a,e.avail_out=h,e.next_in=n,e.avail_in=o,s.hold=l,s.bits=d,St;e.adler=s.check=1,s.mode=Vt;case Vt:if(t===$t||t===Nt)break e;case Dt:if(s.last){l>>>=7&d,d-=7&d,s.mode=Lt;break}for(;d<3;){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}switch(s.last=1&l,l>>>=1,d-=1,3&l){case 0:s.mode=16193;break;case 1:if(es(s),s.mode=Zt,t===Nt){l>>>=2,d-=2;break e}break;case 2:s.mode=16196;break;case 3:e.msg="invalid block type",s.mode=jt}l>>>=2,d-=2;break;case 16193:for(l>>>=7&d,d-=7&d;d<32;){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}if((65535&l)!=(l>>>16^65535)){e.msg="invalid stored block lengths",s.mode=jt;break}if(s.length=65535&l,l=0,d=0,s.mode=Ft,t===Nt)break e;case Ft:s.mode=16195;case 16195:if(c=s.length,c){if(c>o&&(c=o),c>h&&(c=h),0===c)break e;r.set(i.subarray(n,n+c),a),o-=c,n+=c,h-=c,a+=c,s.length-=c;break}s.mode=Vt;break;case 16196:for(;d<14;){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}if(s.nlen=257+(31&l),l>>>=5,d-=5,s.ndist=1+(31&l),l>>>=5,d-=5,s.ncode=4+(15&l),l>>>=4,d-=4,s.nlen>286||s.ndist>30){e.msg="too many length or distance symbols",s.mode=jt;break}s.have=0,s.mode=16197;case 16197:for(;s.have<s.ncode;){for(;d<3;){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}s.lens[E[s.have++]]=7&l,l>>>=3,d-=3}for(;s.have<19;)s.lens[E[s.have++]]=0;if(s.lencode=s.lendyn,s.lenbits=7,N={bits:s.lenbits},x=xt(0,s.lens,0,19,s.lencode,0,s.work,N),s.lenbits=N.bits,x){e.msg="invalid code lengths set",s.mode=jt;break}s.have=0,s.mode=16198;case 16198:for(;s.have<s.nlen+s.ndist;){for(;C=s.lencode[l&(1<<s.lenbits)-1],g=C>>>24,_=C>>>16&255,m=65535&C,!(g<=d);){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}if(m<16)l>>>=g,d-=g,s.lens[s.have++]=m;else{if(16===m){for(z=g+2;d<z;){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}if(l>>>=g,d-=g,0===s.have){e.msg="invalid bit length repeat",s.mode=jt;break}k=s.lens[s.have-1],c=3+(3&l),l>>>=2,d-=2}else if(17===m){for(z=g+3;d<z;){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}l>>>=g,d-=g,k=0,c=3+(7&l),l>>>=3,d-=3}else{for(z=g+7;d<z;){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}l>>>=g,d-=g,k=0,c=11+(127&l),l>>>=7,d-=7}if(s.have+c>s.nlen+s.ndist){e.msg="invalid bit length repeat",s.mode=jt;break}for(;c--;)s.lens[s.have++]=k}}if(s.mode===jt)break;if(0===s.lens[256]){e.msg="invalid code -- missing end-of-block",s.mode=jt;break}if(s.lenbits=9,N={bits:s.lenbits},x=xt(1,s.lens,0,s.nlen,s.lencode,0,s.work,N),s.lenbits=N.bits,x){e.msg="invalid literal/lengths set",s.mode=jt;break}if(s.distbits=6,s.distcode=s.distdyn,N={bits:s.distbits},x=xt(2,s.lens,s.nlen,s.ndist,s.distcode,0,s.work,N),s.distbits=N.bits,x){e.msg="invalid distances set",s.mode=jt;break}if(s.mode=Zt,t===Nt)break e;case Zt:s.mode=Pt;case Pt:if(o>=6&&h>=258){e.next_out=a,e.avail_out=h,e.next_in=n,e.avail_in=o,s.hold=l,s.bits=d,mt(e,u),a=e.next_out,r=e.output,h=e.avail_out,n=e.next_in,i=e.input,o=e.avail_in,l=s.hold,d=s.bits,s.mode===Vt&&(s.back=-1);break}for(s.back=0;C=s.lencode[l&(1<<s.lenbits)-1],g=C>>>24,_=C>>>16&255,m=65535&C,!(g<=d);){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}if(_&&!(240&_)){for(w=g,y=_,v=m;C=s.lencode[v+((l&(1<<w+y)-1)>>w)],g=C>>>24,_=C>>>16&255,m=65535&C,!(w+g<=d);){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}l>>>=w,d-=w,s.back+=w}if(l>>>=g,d-=g,s.back+=g,s.length=m,0===_){s.mode=16205;break}if(32&_){s.back=-1,s.mode=Vt;break}if(64&_){e.msg="invalid literal/length code",s.mode=jt;break}s.extra=15&_,s.mode=16201;case 16201:if(s.extra){for(z=s.extra;d<z;){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}s.length+=l&(1<<s.extra)-1,l>>>=s.extra,d-=s.extra,s.back+=s.extra}s.was=s.length,s.mode=16202;case 16202:for(;C=s.distcode[l&(1<<s.distbits)-1],g=C>>>24,_=C>>>16&255,m=65535&C,!(g<=d);){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}if(!(240&_)){for(w=g,y=_,v=m;C=s.distcode[v+((l&(1<<w+y)-1)>>w)],g=C>>>24,_=C>>>16&255,m=65535&C,!(w+g<=d);){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}l>>>=w,d-=w,s.back+=w}if(l>>>=g,d-=g,s.back+=g,64&_){e.msg="invalid distance code",s.mode=jt;break}s.offset=m,s.extra=15&_,s.mode=16203;case 16203:if(s.extra){for(z=s.extra;d<z;){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}s.offset+=l&(1<<s.extra)-1,l>>>=s.extra,d-=s.extra,s.back+=s.extra}if(s.offset>s.dmax){e.msg="invalid distance too far back",s.mode=jt;break}s.mode=16204;case 16204:if(0===h)break e;if(c=u-h,s.offset>c){if(c=s.offset-c,c>s.whave&&s.sane){e.msg="invalid distance too far back",s.mode=jt;break}c>s.wnext?(c-=s.wnext,p=s.wsize-c):p=s.wnext-c,c>s.length&&(c=s.length),b=s.window}else b=r,p=a-s.offset,c=s.length;c>h&&(c=h),h-=c,s.length-=c;do{r[a++]=b[p++]}while(--c);0===s.length&&(s.mode=Pt);break;case 16205:if(0===h)break e;r[a++]=s.length,h--,s.mode=Pt;break;case Lt:if(s.wrap){for(;d<32;){if(0===o)break e;o--,l|=i[n++]<<d,d+=8}if(u-=h,e.total_out+=u,s.total+=u,4&s.wrap&&u&&(e.adler=s.check=s.flags?X(s.check,r,u,a-u):G(s.check,r,u,a-u)),u=h,4&s.wrap&&(s.flags?l:Mt(l))!==s.check){e.msg="incorrect data check",s.mode=jt;break}l=0,d=0}s.mode=16207;case 16207:if(s.wrap&&s.flags){for(;d<32;){if(0===o)break e;o--,l+=i[n++]<<d,d+=8}if(4&s.wrap&&l!==(4294967295&s.total)){e.msg="incorrect length check",s.mode=jt;break}l=0,d=0}s.mode=16208;case 16208:x=Et;break e;case jt:x=Ot;break e;case 16210:return Ut;default:return At}return e.next_out=a,e.avail_out=h,e.next_in=n,e.avail_in=o,s.hold=l,s.bits=d,(s.wsize||u!==e.avail_out&&s.mode<jt&&(s.mode<Lt||t!==Ct))&&ts(e,e.output,e.next_out,u-e.avail_out),f-=e.avail_in,u-=e.avail_out,e.total_in+=f,e.total_out+=u,s.total+=u,4&s.wrap&&u&&(e.adler=s.check=s.flags?X(s.check,r,u,e.next_out-u):G(s.check,r,u,e.next_out-u)),e.data_type=s.bits+(s.last?64:0)+(s.mode===Vt?128:0)+(s.mode===Zt||s.mode===Ft?256:0),(0===f&&0===u||t===Ct)&&x===zt&&(x=Bt),x},inflateEnd:e=>{if(qt(e))return At;let t=e.state;return t.window&&(t.window=null),e.state=null,zt},inflateGetHeader:(e,t)=>{if(qt(e))return At;const s=e.state;return 2&s.wrap?(s.head=t,t.done=!1,zt):At},inflateSetDictionary:(e,t)=>{const s=t.length;let i,r,n;return qt(e)?At:(i=e.state,0!==i.wrap&&i.mode!==It?At:i.mode===It&&(r=1,r=G(r,t,s,0),r!==i.check)?Ot:(n=ts(e,t,s,s),n?(i.mode=16210,Ut):(i.havedict=1,zt)))},inflateInfo:"pako inflate (from Nodeca project)"},is=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const rs=Object.prototype.toString,{Z_NO_FLUSH:ns,Z_FINISH:as,Z_OK:os,Z_STREAM_END:hs,Z_NEED_DICT:ls,Z_STREAM_ERROR:ds,Z_DATA_ERROR:fs,Z_MEM_ERROR:us}=ee;function cs(e){this.options=Qe.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new it,this.strm.avail_out=0;let s=ss.inflateInit2(this.strm,t.windowBits);if(s!==os)throw new Error(Q[s]);if(this.header=new is,ss.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=st.string2buf(t.dictionary):"[object ArrayBuffer]"===rs.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(s=ss.inflateSetDictionary(this.strm,t.dictionary),s!==os)))throw new Error(Q[s])}function ps(e,t){const s=new cs(t);if(s.push(e),s.err)throw s.msg||Q[s.err];return s.result}cs.prototype.push=function(e,t){const s=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let n,a,o;if(this.ended)return!1;for(a=t===~~t?t:!0===t?as:ns,"[object ArrayBuffer]"===rs.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;;){for(0===s.avail_out&&(s.output=new Uint8Array(i),s.next_out=0,s.avail_out=i),n=ss.inflate(s,a),n===ls&&r&&(n=ss.inflateSetDictionary(s,r),n===os?n=ss.inflate(s,a):n===fs&&(n=ls));s.avail_in>0&&n===hs&&s.state.wrap>0&&0!==e[s.next_in];)ss.inflateReset(s),n=ss.inflate(s,a);switch(n){case ds:case fs:case ls:case us:return this.onEnd(n),this.ended=!0,!1}if(o=s.avail_out,s.next_out&&(0===s.avail_out||n===hs))if("string"===this.options.to){let e=st.utf8border(s.output,s.next_out),t=s.next_out-e,r=st.buf2string(s.output,e);s.next_out=t,s.avail_out=i-t,t&&s.output.set(s.output.subarray(e,e+t),0),this.onData(r)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out));if(n!==os||0!==o){if(n===hs)return n=ss.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===s.avail_in)break}}return!0},cs.prototype.onData=function(e){this.chunks.push(e)},cs.prototype.onEnd=function(e){e===os&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Qe.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var bs={Inflate:cs,inflate:ps,inflateRaw:function(e,t){return(t=t||{}).raw=!0,ps(e,t)},ungzip:ps,constants:ee};const{Deflate:gs,deflate:_s,deflateRaw:ms,gzip:ws}=gt,{Inflate:ys,inflate:vs,inflateRaw:ks,ungzip:xs}=bs;var Cs=ks;class $s extends Error{constructor(e){super(e),this.code="ERR_ABORTED"}}function Ns(e){if(e&&e.aborted){if("undefined"==typeof DOMException){const e=new $s("aborted");throw e.code="ERR_ABORTED",e}throw new DOMException("aborted","AbortError")}}const zs=1,Es=2,Ss=3;function As(e,t,s,i){return e<i&&t>=s}class Os{constructor(e,t,s,i,n,a){if(this.bbi=e,this.refsByName=t,this.cirTreeOffset=s,this.isBigEndian=i,this.isCompressed=n,this.blockType=a,this.featureCache=new(c())({cache:new(b())({maxSize:1e3}),fill:async(e,t)=>{const s=Number(e.length),i=Number(e.offset),{buffer:n}=await this.bbi.read(r.Buffer.alloc(s),0,s,i,{signal:t});return n}}),!(s>=0))throw new Error("invalid cirTreeOffset!");const o=function(e){const t=e?"big":"little",s=(new f).endianess(t).uint32("chromId").uint32("start").uint32("end").uint32("validCnt").floatle("minScore").floatle("maxScore").floatle("sumData").floatle("sumSqData").saveOffset("offset"),i=(new f).endianess(t).uint8("isLeaf").skip(1).uint16("cnt").choice({tag:"isLeaf",choices:{1:(new f).endianess(t).array("blocksToFetch",{length:"cnt",type:(new f).endianess(t).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").uint64("blockSize").saveOffset("offset")}),0:(new f).array("recurOffsets",{length:"cnt",type:(new f).endianess(t).uint32("startChrom").uint32("startBase").uint32("endChrom").uint32("endBase").uint64("blockOffset").saveOffset("offset")})}}),r=(new f).endianess(t).uint32("chromId").int32("start").int32("end").string("rest",{zeroTerminated:!0}).saveOffset("offset");return{bigWigParser:(new f).endianess(t).skip(4).int32("blockStart").skip(4).uint32("itemStep").uint32("itemSpan").uint8("blockType").skip(1).uint16("itemCount").choice({tag:"blockType",choices:{[Ss]:(new f).array("items",{length:"itemCount",type:(new f).floatle("score")}),[Es]:(new f).array("items",{length:"itemCount",type:(new f).endianess(t).int32("start").floatle("score")}),[zs]:(new f).array("items",{length:"itemCount",type:(new f).endianess(t).int32("start").int32("end").floatle("score")})}}),bigBedParser:r,summaryParser:s,leafParser:i}}(i);this.leafParser=o.leafParser,this.bigBedParser=o.bigBedParser}async readWigData(e,t,s,i,n){try{const{refsByName:a,bbi:o,cirTreeOffset:h,isBigEndian:l}=this,d=a[e];void 0===d&&i.complete();const f={chrId:d,start:t,end:s};this.cirTreePromise||(this.cirTreePromise=o.read(r.Buffer.alloc(48),0,48,Number(h),n));const{buffer:u}=await this.cirTreePromise,c=l?u.readUInt32BE(4):u.readUInt32LE(4);let p=[],b=0;const _=(e,t,s)=>{try{const i=e.subarray(t),r=this.leafParser.parse(i);if(r.blocksToFetch&&(p=p.concat(r.blocksToFetch.filter((e=>m(e))).map((e=>({offset:e.blockOffset,length:e.blockSize}))))),r.recurOffsets){const e=r.recurOffsets.filter((e=>m(e))).map((e=>Number(e.blockOffset)));e.length>0&&y(e,s+1)}}catch(e){i.error(e)}},m=e=>{const{startChrom:i,startBase:r,endChrom:n,endBase:a}=e;return(i<d||i===d&&r<=s)&&(n>d||n===d&&a>=t)},w=async(e,t,s)=>{try{const r=t.max-t.min,a=t.min,o=await this.featureCache.get(`${r}_${a}`,{length:r,offset:a},null==n?void 0:n.signal);for(const r of e)t.contains(r)&&(_(o,r-a,s),b-=1,0===b&&this.readFeatures(i,p,{...n,request:f}).catch((e=>i.error(e))))}catch(e){i.error(e)}},y=(e,t)=>{try{b+=e.length;const s=4+32*Number(c);let i=new g([{min:e[0],max:e[0]+s}]);for(let t=1;t<e.length;t+=1){const r=new g([{min:e[t],max:e[t]+s}]);i=i.union(r)}i.getRanges().map((s=>w(e,s,t)))}catch(e){i.error(e)}};return y([Number(h)+48],1)}catch(e){i.error(e)}}parseSummaryBlock(e,t,s){const i=[];let r=t;const n=new DataView(e.buffer,e.byteOffset,e.length);for(;r<e.byteLength;){const e=n.getUint32(r,!0);r+=4;const t=n.getUint32(r,!0);r+=4;const a=n.getUint32(r,!0);r+=4;const o=n.getUint32(r,!0);r+=4;const h=n.getFloat32(r,!0);r+=4;const l=n.getFloat32(r,!0);r+=4;const d=n.getFloat32(r,!0);r+=4,r+=4,(!s||e===s.chrId&&As(t,a,s.start,s.end))&&i.push({start:t,end:a,maxScore:l,minScore:h,summary:!0,score:d/(o||1)})}return i}parseBigBedBlock(e,t,s,i){const r=[];let n=t;for(;n<e.byteLength;){const t=this.bigBedParser.parse(e.subarray(n));t.uniqueId=`bb-${s+n}`,r.push(t),n+=t.offset}return i?r.filter((e=>As(e.start,e.end,i.start,i.end))):r}parseBigWigBlock(e,t,s){const i=e.subarray(t),r=new DataView(i.buffer,i.byteOffset,i.length);let n=0;n+=4;const a=r.getInt32(n,!0);n+=8;const o=r.getUint32(n,!0);n+=4;const h=r.getUint32(n,!0);n+=4;const l=r.getUint8(n);n+=2;const d=r.getUint16(n,!0);n+=2;const f=new Array(d);switch(l){case 1:for(let e=0;e<d;e++){const t=r.getInt32(n,!0);n+=4;const s=r.getInt32(n,!0);n+=4;const i=r.getFloat32(n,!0);n+=4,f[e]={start:t,end:s,score:i}}break;case 2:for(let e=0;e<d;e++){const t=r.getInt32(n,!0);n+=4;const s=r.getFloat32(n,!0);n+=4,f[e]={score:s,start:t,end:t+h}}break;case 3:for(let e=0;e<d;e++){const t=r.getFloat32(n,!0);n+=4;const s=a+e*o;f[e]={score:t,start:s,end:s+h}}}return s?f.filter((e=>As(e.start,e.end,s.start,s.end))):f}async readFeatures(e,t,s={}){try{const{blockType:i,isCompressed:r}=this,{signal:n,request:a}=s,o=function(e){e.sort(((e,t)=>Number(e.offset)-Number(t.offset)));const t=[];let s,i;for(const r of e)s&&i&&Number(r.offset)-i<=2e3?(s.length=BigInt(Number(s.length)+Number(r.length)-i+Number(r.offset)),s.blocks.push(r)):t.push(s={blocks:[r],length:r.length,offset:r.offset}),i=Number(s.offset)+Number(s.length);return t}(t);Ns(n),await Promise.all(o.map((async t=>{Ns(n);const{length:s,offset:o}=t,h=await this.featureCache.get(`${s}_${o}`,t,n);for(const s of t.blocks){Ns(n);let o=Number(s.offset)-Number(t.offset),d=h;switch(r&&(l=h.subarray(o),d=Cs(l.subarray(2)),o=0),Ns(n),i){case"summary":e.next(this.parseSummaryBlock(d,o,a));break;case"bigwig":e.next(this.parseBigWigBlock(d,o,a));break;case"bigbed":e.next(this.parseBigBedBlock(d,o,256*Number(s.offset),a));break;default:console.warn(`Don't know what to do with ${i}`)}}var l}))),e.complete()}catch(t){e.error(t)}}}var Us=s(45834),Bs=s(89592),Ts=s(44728),Rs=s(82088);const Is=-2003829722,Vs=-2021002517;function Ds(e){const t=e?"big":"little",s=(new f).endianess(t).int32("magic").uint16("version").uint16("numZoomLevels").uint64("chromTreeOffset").uint64("unzoomedDataOffset").uint64("unzoomedIndexOffset").uint16("fieldCount").uint16("definedFieldCount").uint64("asOffset").uint64("totalSummaryOffset").uint32("uncompressBufSize").uint64("extHeaderOffset").array("zoomLevels",{length:"numZoomLevels",type:(new f).endianess(t).uint32("reductionLevel").uint32("reserved").uint64("dataOffset").uint64("indexOffset")}),i=(new f).endianess(t).uint64("basesCovered").doublele("scoreMin").doublele("scoreMax").doublele("scoreSum").doublele("scoreSumSquares");return{chromTreeParser:(new f).endianess(t).uint32("magic").uint32("blockSize").uint32("keySize").uint32("valSize").uint64("itemCount"),totalSummaryParser:i,headerParser:s,isLeafNode:(new f).endianess(t).uint8("isLeafNode").skip(1).uint16("cnt").saveOffset("offset")}}class Fs{getHeader(e){return this.headerP||(this.headerP=this._getHeader(e).catch((e=>{throw this.headerP=void 0,e}))),this.headerP}constructor(e){const{filehandle:t,renameRefSeqs:s=(e=>e),path:i,url:r}=e;if(this.renameRefSeqs=s,t)this.bbi=t;else if(r)this.bbi=new Us.Tx(r);else{if(!i)throw new Error("no file given");this.bbi=new Us.EY(i)}}async _getHeader(e){const t=await this._getMainHeader(e),s=await this._readChromTree(t,e);return{...t,...s}}async _getMainHeader(e,t=2e3){const{buffer:s}=await this.bbi.read(r.Buffer.alloc(t),0,t,0,e),i=this._isBigEndian(s),n=Ds(i),a=n.headerParser.parse(s),{magic:o,asOffset:h,totalSummaryOffset:l}=a;if(a.fileType=o===Vs?"bigbed":"bigwig",h>t||l>t)return this._getMainHeader(e,2*t);if(h){const e=Number(a.asOffset);a.autoSql=(d=s.subarray(e,s.indexOf(0,e)),(new TextDecoder).decode(d))}var d;if(a.totalSummaryOffset>t-40)return this._getMainHeader(e,2*t);if(a.totalSummaryOffset){const e=s.subarray(Number(a.totalSummaryOffset)),t=n.totalSummaryParser.parse(e);a.totalSummary={...t,basesCovered:Number(t.basesCovered)}}return{...a,isBigEndian:i}}_isBigEndian(e){let t=e.readInt32LE(0);if(t===Is||t===Vs)return!1;if(t=e.readInt32BE(0),t===Is||t===Vs)return!0;throw new Error("not a BigWig/BigBed file")}async _readChromTree(e,t){const s=e.isBigEndian,i=s?"big":"little",n=[],a={};let o=Number(e.unzoomedDataOffset);const h=Number(e.chromTreeOffset);for(;o%4!=0;)o+=1;const l=o-h,{buffer:d}=await this.bbi.read(r.Buffer.alloc(l),0,l,Number(h),t),u=Ds(s),{keySize:c}=u.chromTreeParser.parse(d),p=(new f).endianess(i).string("key",{stripNull:!0,length:c}).uint32("refId").uint32("refSize").saveOffset("offset"),b=(new f).endianess(i).skip(c).uint64("childOffset").saveOffset("offset"),g=async e=>{let t=e;if(t>=d.length)throw new Error("reading beyond end of buffer");const s=u.isLeafNode.parse(d.subarray(t)),{isLeafNode:i,cnt:r}=s;if(t+=s.offset,i)for(let e=0;e<r;e+=1){const e=p.parse(d.subarray(t));t+=e.offset;const{key:s,refId:i,refSize:r}=e,o={name:s,id:i,length:r};a[this.renameRefSeqs(s)]=i,n[i]=o}else{const e=[];for(let s=0;s<r;s+=1){const s=b.parse(d.subarray(t)),{childOffset:i}=s;t+=s.offset,e.push(g(Number(i)-Number(h)))}await Promise.all(e)}};return await g(32),{refsByName:a,refsByNumber:n}}async getUnzoomedView(e){const{unzoomedIndexOffset:t,refsByName:s,uncompressBufSize:i,isBigEndian:r,fileType:n}=await this.getHeader(e);return new Os(this.bbi,s,t,r,i>0,n)}async getFeatureStream(e,t,s,i){await this.getHeader(i);const r=this.renameRefSeqs(e);let n;const{basesPerSpan:a,scale:o}=i||{};return n=a?await this.getView(1/a,i):o?await this.getView(o,i):await this.getView(1,i),new Bs.c((e=>{n.readWigData(r,t,s,e,i)}))}async getFeatures(e,t,s,i){const r=await this.getFeatureStream(e,t,s,i);return(await(0,Ts._)(r.pipe((0,Rs.$)()))).flat()}}class Zs extends Fs{async getView(e,t){const{zoomLevels:s,refsByName:i,fileSize:r,isBigEndian:n,uncompressBufSize:a}=await this.getHeader(t),o=1/e;let h=s.length;r||(h-=1);for(let e=h;e>=0;e-=1){const t=s[e];if(t&&t.reductionLevel<=2*o){const e=Number(t.indexOffset);return new Os(this.bbi,i,e,n,a>0,"summary")}}return this.getUnzoomedView(t)}}var Ps=s(65273),Ls=s(69652),js=s(34796);class Ms extends Fs{constructor(){super(...arguments),this.readIndicesCache=new(c())({cache:new(b())({maxSize:1}),fill:(e,t)=>this._readIndices({...e,signal:t})})}readIndices(e={}){const{signal:t,...s}=e;return this.readIndicesCache.get(JSON.stringify(s),e,t)}async getView(e,t){return this.getUnzoomedView(t)}async _readIndices(e){const{extHeaderOffset:t,isBigEndian:s}=await this.getHeader(e),{buffer:i}=await this.bbi.read(r.Buffer.alloc(64),0,64,Number(t)),n=s?"big":"little",a=(new f).endianess(n).uint16("size").uint16("count").uint64("offset").parse(i),{count:o,offset:h}=a;if(0===o)return[];const l=20*o,{buffer:d}=await this.bbi.read(r.Buffer.alloc(l),0,l,Number(h)),u=(new f).endianess(n).int16("type").int16("fieldcount").uint64("offset").skip(4).int16("field"),c=[];for(let e=0;e<o;e+=1)c.push(u.parse(d.subarray(20*e)));return c}async searchExtraIndexBlocks(e,t={}){const{isBigEndian:s}=await this.getHeader(t),i=await this.readIndices(t);if(0===i.length)return[];const n=i.map((async i=>{const{offset:n,field:a}=i,{buffer:o}=await this.bbi.read(r.Buffer.alloc(32),0,32,Number(n),t),h=s?"big":"little",l=(new f).endianess(h).int32("magic").int32("blockSize").int32("keySize").int32("valSize").uint64("itemCount"),{blockSize:d,keySize:u,valSize:c}=l.parse(o),p=(new f).endianess(h).int8("nodeType").skip(1).int16("cnt").choice({tag:"nodeType",choices:{0:(new f).array("leafkeys",{length:"cnt",type:(new f).endianess(h).string("key",{length:u,stripNull:!0}).uint64("offset")}),1:(new f).array("keys",{length:"cnt",type:(new f).endianess(h).string("key",{length:u,stripNull:!0}).uint64("offset").uint32("length").uint32("reserved")})}}),b=async s=>{const i=Number(s),n=4+d*(u+c),{buffer:o}=await this.bbi.read(r.Buffer.alloc(n),0,n,i,t),h=p.parse(o);if(h.leafkeys){let t;for(let s=0;s<h.leafkeys.length;s+=1){const{key:i}=h.leafkeys[s];if(e.localeCompare(i)<0&&t)return b(t);t=h.leafkeys[s].offset}return b(t)}for(let t=0;t<h.keys.length;t+=1)if(h.keys[t].key===e)return{...h.keys[t],field:a}};return b(Number(n)+32)}));return(await Promise.all(n)).filter((e=>!!e))}async searchExtraIndex(e,t={}){const s=await this.searchExtraIndexBlocks(e,t);if(0===s.length)return[];const i=await this.getUnzoomedView(t),r=s.map((e=>new Bs.c((s=>{i.readFeatures(s,[e],t)})).pipe((0,Ls.T)(((e,t)=>e.concat(t))),(0,js.T)((t=>{for(const s of t)s.field=e.field;return t})))));return(await(0,Ts._)((0,Ps.h)(...r))).filter((t=>{var s;return(null===(s=t.rest)||void 0===s?void 0:s.split("\t")[(t.field||0)-3])===e}))}}},12401:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(53472),n=i(s(58607)),a=i(s(56086));class o{constructor({fill:e,cache:t}){if("function"!=typeof e)throw new TypeError("must pass a fill function");if("object"!=typeof t)throw new TypeError("must pass a cache object");if("function"!=typeof t.get||"function"!=typeof t.set||"function"!=typeof t.delete)throw new TypeError("cache must implement get(key), set(key, val), and and delete(key)");this.cache=t,this.fillCallback=e}static isAbortException(e){return"AbortError"===e.name||"ERR_ABORTED"===e.code||"AbortError: aborted"===e.message||"Error: aborted"===e.message}evict(e,t){this.cache.get(e)===t&&this.cache.delete(e)}fill(e,t,s,i){const r=new n.default,o=new a.default;o.addCallback(i);const h={aborter:r,promise:this.fillCallback(t,r.signal,(e=>{o.callback(e)})),settled:!1,statusReporter:o,get aborted(){return this.aborter.signal.aborted}};h.aborter.addSignal(s),h.aborter.signal.addEventListener("abort",(()=>{h.settled||this.evict(e,h)})),h.promise.then((()=>{h.settled=!0}),(()=>{h.settled=!0,this.evict(e,h)})).catch((e=>{throw console.error(e),e})),this.cache.set(e,h)}static checkSinglePromise(e,t){function s(){if(t&&t.aborted)throw Object.assign(new Error("aborted"),{code:"ERR_ABORTED"})}return e.then((e=>(s(),e)),(e=>{throw s(),e}))}has(e){return this.cache.has(e)}get(e,t,s,i){if(!s&&t instanceof r.AbortSignal)throw new TypeError("second get argument appears to be an AbortSignal, perhaps you meant to pass `null` for the fill data?");const n=this.cache.get(e);return n?n.aborted&&!n.settled?(this.evict(e,n),this.get(e,t,s,i)):n.settled?n.promise:(n.aborter.addSignal(s),n.statusReporter.addCallback(i),o.checkSinglePromise(n.promise,s)):(this.fill(e,t,s,i),o.checkSinglePromise(this.cache.get(e).promise,s))}delete(e){const t=this.cache.get(e);t&&(t.settled||t.aborter.abort(),this.cache.delete(e))}clear(){const e=this.cache.keys();let t=0;for(let s=e.next();!s.done;s=e.next())this.delete(s.value),t+=1;return t}}t.default=o},58607:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=s(53472);class r{}t.default=class{constructor(){this.signals=new Set,this.abortController=new i.AbortController}addSignal(e=new r){if(this.signal.aborted)throw new Error("cannot add a signal, already aborted!");this.signals.add(e),e.aborted?this.handleAborted(e):"function"==typeof e.addEventListener&&e.addEventListener("abort",(()=>{this.handleAborted(e)}))}handleAborted(e){this.signals.delete(e),0===this.signals.size&&this.abortController.abort()}get signal(){return this.abortController.signal}abort(){this.abortController.abort()}}},56086:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(){this.callbacks=new Set}addCallback(e=(()=>{})){this.callbacks.add(e),e(this.currentMessage)}callback(e){this.currentMessage=e,this.callbacks.forEach((t=>{t(e)}))}}},53472:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AbortSignal=t.AbortController=void 0;const i=s(16006);var r=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==s.g)return s.g;throw new Error("unable to locate global object")};let n=void 0===r().AbortController?i.AbortController:r().AbortController;t.AbortController=n;let a=void 0===r().AbortController?i.AbortSignal:r().AbortSignal;t.AbortSignal=a},5742:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=i(s(12401));t.default=r.default}}]);
//# sourceMappingURL=9238.3167bc78.chunk.js.map