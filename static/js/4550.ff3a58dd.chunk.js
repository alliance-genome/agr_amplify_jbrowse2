"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[4550],{10730:function(n,e,t){if(t.d(e,{Ac:function(){return i},N_:function(){return c}}),179==t.j)var o=t(31625);var r=t(1502);function i(n){return o.types.model({id:r.ElementId,name:o.types.string,margin:0}).volatile((function(){return{selection:void 0,hovered:void 0}})).views((function(n){return{get root(){return(0,o.getParent)(n)}}})).views((function(n){return{get jbrowse(){return n.root.jbrowse},get rpcManager(){return n.root.rpcManager},get configuration(){return this.jbrowse.configuration},get adminMode(){return n.root.adminMode},get textSearchManager(){return n.root.textSearchManager}}})).views((function(n){return{get assemblies(){return n.jbrowse.assemblies}}})).actions((function(n){return{setSelection:function(e){n.selection=e},clearSelection:function(){n.selection=void 0},setHovered:function(e){n.hovered=e}}}))}function c(n){return"id"in n&&"name"in n&&"root"in n}},74761:function(n,e,t){if(t.d(e,{C:function(){return s},n:function(){return u}}),179==t.j)var o=t(41361);if(179==t.j)var r=t(33028);var i=t(43800);if(179==t.j)var c=t(31625);var a=t(10730);function s(n){return c.types.model({connectionInstances:c.types.array(n.pluggableMstType("connection","stateModel"))}).views((function(n){return{get connections(){return n.jbrowse.connections}}})).actions((function(e){return{makeConnection:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=t.type;if(!c)throw new Error("track configuration has no `type` listed");var a=(0,i.readConfObject)(t,"name");if(!n.getConnectionType(c))throw new Error("unknown connection type ".concat(c));var s=e.connectionInstances.push((0,r.Z)((0,r.Z)({},o),{},{name:a,type:c,configuration:t}));return e.connectionInstances[s-1]},prepareToBreakConnection:function(n){var t=this,r=e,c=[],a={},s=(0,i.readConfObject)(n,"name"),u=e.connectionInstances.find((function(n){return n.name===s}));if(u){var l,f=(0,o.Z)(u.tracks);try{for(f.s();!(l=f.n()).done;){var d=l.value,g=r.getReferring(d);r.removeReferring(g,d,c,a)}}catch(p){f.e(p)}finally{f.f()}return[function(){c.forEach((function(n){return n()})),t.breakConnection(n)},a]}},breakConnection:function(n){var t=(0,i.readConfObject)(n,"name"),o=e.connectionInstances.find((function(n){return n.name===t}));if(!o)throw new Error("no connection found with name ".concat(t));e.connectionInstances.remove(o)},deleteConnection:function(n){return e.jbrowse.deleteConnectionConf(n)},addConnectionConf:function(n){return e.jbrowse.addConnectionConf(n)},clearConnections:function(){e.connectionInstances.clear()}}}))}function u(n){return(0,a.N_)(n)&&"connectionInstances"in n}},94550:function(n,e,t){t.r(e),t.d(e,{default:function(){return Z}});var o=t(96234),r=t(41867),i=t(78882),c=t(18801),a=t(16698),s=t(73290),u=t(23801),l=t(90872),f=t(47192),d=t(3762),g=t(93533),p=t(35421),m=t(80838),v=(0,d.observer)((function(n){var e=n.connectionType,t=n.model,o=n.session,i=e.configEditorComponent||g.wP;return(0,m.jsx)(r.Suspense,{fallback:(0,m.jsx)(p.LoadingEllipses,{}),children:(0,m.jsx)(i,{model:{target:t},session:o})})})),h=t(49133),C=t(68367),j=t(59231),b=t(84623),w=(0,d.observer)((function(n){var e=n.connectionTypeChoices,t=n.connectionType,o=n.setConnectionType,i=e[0];return(0,r.useEffect)((function(){t||o(i)}),[t,i,o]),(0,m.jsx)("form",{autoComplete:"off",children:t?(0,m.jsx)(h.Z,{value:t.name,label:"connectionType",helperText:t.description?(0,m.jsxs)(m.Fragment,{children:[t.description,t.url?(0,m.jsx)(C.Z,{href:t.url,rel:"noopener noreferrer",target:"_blank",children:(0,m.jsx)(b.Z,{})}):null]}):null,select:!0,fullWidth:!0,onChange:function(n){return o(e.find((function(e){return e.name===n.target.value})))},variant:"outlined",children:e.map((function(n){return(0,m.jsx)(j.Z,{value:n.name,children:n.displayName||n.name},n.name)}))}):null})})),y=t(74761),x=(0,f.ZL)()((function(n){return{root:{marginTop:n.spacing(1)},stepper:{backgroundColor:n.palette.background.default},button:{marginTop:n.spacing(1),marginRight:n.spacing(1)},actionsContainer:{marginBottom:n.spacing(2)}}})),k=["Select a Connection Type","Configure Connection"],Z=(0,d.observer)((function(n){var e=n.model,t=(0,r.useState)(),f=(0,o.Z)(t,2),d=f[0],g=f[1],p=(0,r.useState)(),h=(0,o.Z)(p,2),C=h[0],j=h[1],b=(0,r.useState)(0),Z=(0,o.Z)(b,2),T=Z[0],S=Z[1],E=x().classes,M=(0,l.getSession)(e),N=(0,l.getEnv)(M).pluginManager,I=(0,r.useMemo)((function(){return null===d||void 0===d?void 0:d.configSchema.create({connectionId:C},(0,l.getEnv)(e))}),[C,d,e]);return(0,m.jsx)("div",{className:E.root,children:(0,m.jsx)(i.Z,{className:E.stepper,activeStep:T,orientation:"vertical",children:k.map((function(n){return(0,m.jsxs)(c.Z,{children:[(0,m.jsx)(a.Z,{children:n}),(0,m.jsxs)(s.Z,{children:[0===T?(0,m.jsx)(w,{connectionTypeChoices:N.getConnectionElements(),connectionType:d,setConnectionType:function(n){g(n),n&&j("".concat(n.name,"-").concat(Date.now()))}}):d&&I?(0,m.jsx)(v,{connectionType:d,model:I,session:M}):null,(0,m.jsxs)("div",{className:E.actionsContainer,children:[(0,m.jsx)(u.Z,{disabled:0===T,onClick:function(){return S(T-1)},className:E.button,children:"Back"}),(0,m.jsx)(u.Z,{disabled:!(0===T&&d||1===T&&I),variant:"contained",color:"primary",onClick:function(){if(T===k.length-1){if(I&&(0,y.n)(M)){var n=M.addConnectionConf(I);M.makeConnection(n)}else M.notify("No config model to add");(0,l.isSessionModelWithWidgets)(M)&&M.hideWidget(e)}else S(T+1)},className:E.button,"data-testid":"addConnectionNext",children:T===k.length-1?"Connect":"Next"})]})]})]},n)}))})})}))}}]);
//# sourceMappingURL=4550.ff3a58dd.chunk.js.map