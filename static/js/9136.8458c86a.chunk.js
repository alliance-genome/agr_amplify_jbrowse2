"use strict";(self.webpackChunk_jbrowse_web=self.webpackChunk_jbrowse_web||[]).push([[9136],{81839:function(e,n,t){t.d(n,{UL:function(){return v},WK:function(){return x},i1:function(){return p},u_:function(){return m}});var r=t(96234),o=t(33028),i=(t(30969),t(53276)),s=t(90550),a=t(40909),l=t(81073),c=t(68554),d=t(94702),u=t(59594),h=t(37574),f=(0,i.ZL)()((function(){return{vtext:{gridColumn:"1/2",gridRow:"1/2",pointerEvents:"none",userSelect:"none"},htext:{gridColumn:"2/2",gridRow:"2/2",pointerEvents:"none",userSelect:"none"}}})),m=(0,s.observer)((function(e){var n=e.model,t=n.viewWidth,r=n.borderY,o=f().classes;return(0,h.jsx)("svg",{width:t,height:r,className:o.htext,children:(0,h.jsx)(x,{model:n})})})),x=(0,s.observer)((function(e){var n=e.model,t=n.viewWidth,i=n.borderX,s=n.borderY,f=n.hview,m=n.htextRotation,x=n.hticks,v=f.offsetPx,p=f.width,y=f.dynamicBlocks,j=f.bpPerPx,b=y.contentBlocks,g=(0,u.F$)(b,t,v),Z=(0,d.Z)(),w=(0,o.Z)((0,o.Z)({},(0,a.getSnapshot)(f)),{},{width:p,staticBlocks:f.staticBlocks}),k=x.map((function(e){var n;return[e,null===(n=(0,c.R)({refName:e.refName,coord:e.base,self:w}))||void 0===n?void 0:n.offsetPx]})).filter((function(e){return void 0!==e[1]})).map((function(e){return[e[0],e[1]-v]}));return(0,h.jsxs)(h.Fragment,{children:[b.filter((function(e){return!g.has(e.key)})).map((function(e){var n=e.offsetPx,t=Math.floor(n-f.offsetPx);return(0,h.jsx)("text",{transform:"rotate(".concat(m,",").concat(t,",").concat(0,")"),x:t,y:1,fill:Z.palette.text.primary,fontSize:11,dominantBaseline:"hanging",textAnchor:"end",children:e.refName},JSON.stringify(e))})),k.map((function(e){var n=(0,r.Z)(e,2),t=n[0],o=n[1];return(0,h.jsx)("line",{x1:o,x2:o,y1:0,y2:"major"===t.type?6:4,strokeWidth:1,stroke:Z.palette.grey[400]},"line-".concat(JSON.stringify(t)))})),k.filter((function(e){return"major"===e[0].type})).map((function(e){var n=(0,r.Z)(e,2),t=n[0],o=n[1];return o>10?(0,h.jsx)("text",{x:o-7,y:0,transform:"rotate(".concat(m,",").concat(o,",").concat(0,")"),fill:Z.palette.text.primary,fontSize:11,dominantBaseline:"middle",textAnchor:"end",children:(0,l.getTickDisplayStr)(t.base+1,j)},"text-".concat(JSON.stringify(t))):null})),(0,h.jsx)("text",{y:s-12,x:(t-i)/2,fill:Z.palette.text.primary,textAnchor:"middle",fontSize:11,dominantBaseline:"hanging",children:f.assemblyNames.join(",")})]})})),v=(0,s.observer)((function(e){var n=e.model,t=n.borderX,r=n.viewHeight,o=f().classes;return(0,h.jsx)("svg",{className:o.vtext,width:t,height:r,children:(0,h.jsx)(p,{model:n})})})),p=(0,s.observer)((function(e){var n=e.model,t=n.viewHeight,i=n.borderX,s=n.borderY,f=n.vview,m=n.vtextRotation,x=n.vticks,v=f.offsetPx,p=f.width,y=f.dynamicBlocks,j=f.bpPerPx,b=y.contentBlocks,g=(0,u.F$)(b,t,v),Z=(0,d.Z)(),w=(0,o.Z)((0,o.Z)({},(0,a.getSnapshot)(f)),{},{width:p,staticBlocks:f.staticBlocks}),k=x.map((function(e){var n;return[e,null===(n=(0,c.R)({refName:e.refName,coord:e.base,self:w}))||void 0===n?void 0:n.offsetPx]})).filter((function(e){return void 0!==e[1]})).map((function(e){return[e[0],e[1]-v]}));return(0,h.jsxs)(h.Fragment,{children:[b.filter((function(e){return!g.has(e.key)})).map((function(e){var n=e.offsetPx,r=i,o=Math.floor(t-n+v);return(0,h.jsx)("text",{transform:"rotate(".concat(m,",").concat(r,",").concat(n,")"),x:r,y:o,fill:Z.palette.text.primary,fontSize:11,textAnchor:"end",children:e.refName},JSON.stringify(e))})),k.map((function(e){var n=(0,r.Z)(e,2),o=n[0],s=n[1];return(0,h.jsx)("line",{y1:t-s,y2:t-s,x1:i,x2:i-("major"===o.type?6:4),strokeWidth:1,stroke:Z.palette.grey[400]},"line-".concat(JSON.stringify(o)))})),k.filter((function(e){return"major"===e[0].type})).map((function(e){var n=(0,r.Z)(e,2),o=n[0],s=n[1];return s>10?(0,h.jsx)("text",{y:t-s-3,x:i-7,textAnchor:"end",fill:Z.palette.text.primary,dominantBaseline:"hanging",fontSize:11,children:(0,l.getTickDisplayStr)(o.base+1,j)},"text-".concat(JSON.stringify(o))):null})),(0,h.jsx)("text",{y:(t-s)/2,x:12,fill:Z.palette.text.primary,transform:"rotate(-90,12,".concat((t-s)/2,")"),textAnchor:"middle",fontSize:11,children:f.assemblyNames.join(",")})]})}))},99136:function(e,n,t){t.r(n),t.d(n,{default:function(){return je}});var r=t(96234),o=t(30969),i=t(59767),s=t(90550),a=t(90689),l=t(53276),c=t(87321),d=t.n(c),u=t(87535),h=t(33275),f=t(97517),m=t(49884),x=t(33248),v=t(1059),p=t(3994),y=t(46672),j=t(33359),b=t(72097),g=t(81073),Z=t(22523),w=t.n(Z),k=t(37574);function S(e){var n=e.radioOption,t=e.assembly1,r=e.assembly2,o=e.fileLocation,i=e.bed1Location,s=e.bed2Location;if(".paf"===n)return{type:"PAFAdapter",pafLocation:o,queryAssembly:t,targetAssembly:r};if(".out"===n)return{type:"MashMapAdapter",outLocation:o,queryAssembly:t,targetAssembly:r};if(".delta"===n)return{type:"DeltaAdapter",deltaLocation:o,queryAssembly:t,targetAssembly:r};if(".chain"===n)return{type:"ChainAdapter",chainLocation:o,queryAssembly:t,targetAssembly:r};if(".anchors"===n)return{type:"MCScanAnchorsAdapter",mcscanAnchorsLocation:o,bed1Location:i,bed2Location:s,assemblyNames:[t,r]};if(".anchors.simple"===n)return{type:"MCScanSimpleAnchorsAdapter",mcscanSimpleAnchorsLocation:o,bed1Location:i,bed2Location:s,assemblyNames:[t,r]};throw new Error("Unknown type")}var C=(0,s.observer)((function(e){var n,t=e.assembly1,s=e.assembly2,a=e.setSessionTrackData,l=(0,o.useState)(),c=(0,r.Z)(l,2),d=c[0],u=c[1],h=(0,o.useState)(),v=(0,r.Z)(h,2),b=v[0],g=v[1],Z=(0,o.useState)(),C=(0,r.Z)(Z,2),P=C[0],L=C[1],M=(0,o.useState)(""),N=(0,r.Z)(M,2),A=N[0],B=N[1],z=(0,o.useState)(),T=(0,r.Z)(z,2),R=T[0],D=T[1],I=(n=P)?n.uri||n.localPath||n.name:void 0,E=A||(I?w().extname(function(e){return e.endsWith(".gz")?e.slice(0,-3):e}(I)):"");return(0,o.useEffect)((function(){try{if(P){var e=I?w().basename(I):"MyTrack",n="".concat(e,"-").concat(Date.now());D(void 0),a({trackId:n,name:e,assemblyNames:[s,t],type:"SyntenyTrack",adapter:S({radioOption:E,assembly1:t,assembly2:s,fileLocation:P,bed1Location:b,bed2Location:d})})}}catch(r){console.error(r),D(r)}}),[I,t,s,b,d,P,E,a]),(0,k.jsxs)(y.Z,{style:{padding:12},children:[R?(0,k.jsx)(i.ErrorMessage,{error:R}):null,(0,k.jsx)(j.Z,{style:{textAlign:"center"},children:"Add a .paf, .out (MashMap), .delta (Mummer), .chain, .anchors or .anchors.simple (MCScan) file to view in the dotplot. These file types can also be gzipped. The first assembly should be the query sequence (e.g. left column of the PAF) and the second assembly should be the target sequence (e.g. right column of the PAF)"}),(0,k.jsx)(f.Z,{value:E,onChange:function(e){return B(e.target.value)},children:(0,k.jsxs)(p.ZP,{container:!0,justifyContent:"center",children:[(0,k.jsx)(p.ZP,{item:!0,children:(0,k.jsx)(m.Z,{value:".paf",control:(0,k.jsx)(x.Z,{}),label:".paf"})}),(0,k.jsx)(p.ZP,{item:!0,children:(0,k.jsx)(m.Z,{value:".out",control:(0,k.jsx)(x.Z,{}),label:".out"})}),(0,k.jsx)(p.ZP,{item:!0,children:(0,k.jsx)(m.Z,{value:".delta",control:(0,k.jsx)(x.Z,{}),label:".delta"})}),(0,k.jsx)(p.ZP,{item:!0,children:(0,k.jsx)(m.Z,{value:".chain",control:(0,k.jsx)(x.Z,{}),label:".chain"})}),(0,k.jsx)(p.ZP,{item:!0,children:(0,k.jsx)(m.Z,{value:".anchors",control:(0,k.jsx)(x.Z,{}),label:".anchors"})}),(0,k.jsx)(p.ZP,{item:!0,children:(0,k.jsx)(m.Z,{value:".anchors.simple",control:(0,k.jsx)(x.Z,{}),label:".anchors.simple"})})]})}),(0,k.jsx)(p.ZP,{container:!0,justifyContent:"center",children:(0,k.jsx)(p.ZP,{item:!0,children:".anchors"===A||".anchors.simple"===A?(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{style:{margin:20},children:["Open the ",A," and .bed files for both genome assemblies from the MCScan (Python version) pipeline"," ",(0,k.jsx)("a",{href:"https://github.com/tanghaibao/jcvi/wiki/MCscan-(Python-version)",children:"(more info)"})]}),(0,k.jsxs)("div",{style:{display:"flex"},children:[(0,k.jsx)("div",{children:(0,k.jsx)(i.FileSelector,{name:".anchors file",description:"",location:P,setLocation:function(e){return L(e)}})}),(0,k.jsx)("div",{children:(0,k.jsx)(i.FileSelector,{name:"genome 1 .bed (left column of anchors file)",description:"",location:b,setLocation:function(e){return g(e)}})}),(0,k.jsx)("div",{children:(0,k.jsx)(i.FileSelector,{name:"genome 2 .bed (right column of anchors file)",description:"",location:d,setLocation:function(e){return u(e)}})})]})]}):(0,k.jsx)(i.FileSelector,{name:A?A+" location":"",description:"",location:P,setLocation:function(e){return L(e)}})})})]})})),P=t(68079),L=t(70983),M=t(2689),N=t(97891),A=t(9077),B=t(22417);var z=(0,s.observer)((function(e){var n,t=e.model,s=e.assembly1,a=e.assembly2,l=e.setShowTrackId,c=(0,g.getSession)(t),d=c.tracks,u=c.sessionTracks,h=[].concat((0,P.Z)(d),(0,P.Z)(u||[])).filter((function(e){return function(e,n,t){var r=(0,A.readConfObject)(e,"assemblyNames");return r.includes(n)&&r.includes(t)&&e.type.includes("Synteny")}(e,a,s)})),f=(null===(n=h[0])||void 0===n?void 0:n.trackId)||"",m=(0,o.useState)(f),x=(0,r.Z)(m,2),v=x[0],p=x[1];return(0,o.useEffect)((function(){p(f)}),[f]),(0,o.useEffect)((function(){l(v)}),[v,l]),(0,k.jsxs)(y.Z,{style:{padding:12},children:[(0,k.jsx)(j.Z,{paragraph:!0,children:'Select a track from the select box below, the track will be shown when you hit "Launch".'}),(0,k.jsxs)(j.Z,{paragraph:!0,children:["Note: there is a track selector ",(0,k.jsx)("i",{children:"inside"})," the DotplotView, which can turn on one or more SyntenyTracks (more than one can be displayed at once). Look for the track selector icon ",(0,k.jsx)(B.GD,{})]}),h.length?(0,k.jsx)(L.Z,{value:v,onChange:function(e){return p(e.target.value)},children:h.map((function(e){return(0,k.jsx)(M.Z,{value:e.trackId,children:(0,N.getTrackName)(e,c)},e.trackId)}))}):(0,k.jsx)(i.ErrorMessage,{error:"No synteny tracks found for ".concat(s,",").concat(a)})]})})),T=(0,l.ZL)()((function(e){return{importFormContainer:{padding:e.spacing(4),margin:"0 auto"},assemblySelector:{width:"75%",margin:"0 auto"}}}));function R(e){var n=e.setSessionTrackData,t=e.setShowTrackId,i=e.sessionTrackData,s=e.assembly1,a=e.assembly2,l=e.model,c=(0,o.useState)("none"),d=(0,r.Z)(c,2),v=d[0],p=d[1];return(0,o.useEffect)((function(){"none"===v&&(n(void 0),t(void 0))}),[v,n,t]),(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)(u.Z,{children:[(0,k.jsx)(h.Z,{id:"group-label",children:"(Optional) Select or add a synteny track"}),(0,k.jsxs)(f.Z,{row:!0,value:v,onChange:function(e){return p(e.target.value)},"aria-labelledby":"group-label",children:[(0,k.jsx)(m.Z,{value:"none",control:(0,k.jsx)(x.Z,{}),label:"None"}),(0,k.jsx)(m.Z,{value:"tracklist",control:(0,k.jsx)(x.Z,{}),label:"Existing track"}),(0,k.jsx)(m.Z,{value:"custom",control:(0,k.jsx)(x.Z,{}),label:"New track"})]})]}),"custom"===v?(0,k.jsx)(C,{setSessionTrackData:n,sessionTrackData:i,assembly2:a,assembly1:s}):null,"tracklist"===v?(0,k.jsx)(z,{model:l,assembly1:s,assembly2:a,setShowTrackId:t}):null]})}var D=(0,s.observer)((function(e){var n=e.model,t=T().classes,s=(0,g.getSession)(n),l=s.assemblyNames,c=(0,o.useState)(l[0]||""),d=(0,r.Z)(c,2),h=d[0],f=d[1],m=(0,o.useState)(l[0]||""),x=(0,r.Z)(m,2),Z=x[0],w=x[1],S=(0,o.useState)(),C=(0,r.Z)(S,2),P=C[0],L=C[1],M=(0,o.useState)(),N=(0,r.Z)(M,2),A=N[0],B=N[1],z=(0,o.useState)(),D=(0,r.Z)(z,2),I=D[0],E=D[1];var F=P||n.error;return(0,k.jsxs)(v.Z,{className:t.importFormContainer,children:[F?(0,k.jsx)(i.ErrorMessage,{error:F}):null,(0,k.jsx)(p.ZP,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",className:t.assemblySelector,children:(0,k.jsxs)(p.ZP,{item:!0,children:[(0,k.jsxs)(y.Z,{style:{padding:12},children:[(0,k.jsx)(j.Z,{style:{textAlign:"center"},children:"Select assemblies for dotplot view"}),(0,k.jsxs)(p.ZP,{container:!0,spacing:1,justifyContent:"center",alignItems:"center",children:[(0,k.jsx)(p.ZP,{item:!0,children:(0,k.jsx)(i.AssemblySelector,{selected:Z,onChange:function(e){return w(e)},session:s})}),(0,k.jsx)(p.ZP,{item:!0,children:(0,k.jsx)(i.AssemblySelector,{selected:h,onChange:function(e){return f(e)},session:s})}),(0,k.jsx)(p.ZP,{item:!0,children:(0,k.jsx)(u.Z,{children:(0,k.jsx)(b.Z,{onClick:function(){try{if(!(0,g.isSessionWithAddTracks)(s))return;L(void 0),n.setError(void 0),(0,a.transaction)((function(){A?(s.addTrackConf(A),n.toggleTrack(A.trackId)):I&&n.showTrack(I),n.setViews([{bpPerPx:.1,offsetPx:0},{bpPerPx:.1,offsetPx:0}]),n.setAssemblyNames(h,Z)}))}catch(e){console.error(e),L(e)}},variant:"contained",color:"primary",children:"Launch"})})})]})]}),(0,k.jsx)(R,{setShowTrackId:E,assembly2:h,assembly1:Z,setSessionTrackData:B,sessionTrackData:A,model:n})]})})]})})),I=t(76149),E=(0,o.lazy)((function(){return Promise.all([t.e(6962),t.e(9563),t.e(6349)]).then(t.bind(t,36271))})),F=(0,s.observer)((function(e){var n=e.model.tracks.filter((function(e){var n;return null===(n=e.displays[0].warnings)||void 0===n?void 0:n.length})),t=(0,o.useState)(!1),i=(0,r.Z)(t,2),s=i[0],a=i[1];return n.length?(0,k.jsxs)(I.Z,{severity:"warning",children:["Warnings during render"," ",(0,k.jsx)(b.Z,{onClick:function(){return a(!0)},children:"More info"}),s?(0,k.jsx)(E,{trackWarnings:n,handleClose:function(){return a(!1)}}):null]}):null})),O=t(94551),H=t(97475),W=t(73007),V=t(45055),q=t(5713),J=t(16888),X=t(74424),Y=(0,l.ZL)()({dpad:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",margin:0,position:"absolute",right:50,zIndex:1e3,top:50},icon:{padding:0,margin:0}}),_=(0,s.observer)((function(e){var n=e.model,t=Y().classes;return(0,k.jsxs)(y.Z,{className:t.dpad,elevation:6,children:[(0,k.jsx)("div",{}),(0,k.jsx)(O.Z,{className:t.icon,onClick:function(){return n.vview.scroll(100)},children:(0,k.jsx)(W.Z,{})}),(0,k.jsx)("div",{}),(0,k.jsx)(O.Z,{className:t.icon,onClick:function(){return n.hview.scroll(-100)},children:(0,k.jsx)(V.Z,{})}),(0,k.jsx)("div",{}),(0,k.jsx)(O.Z,{className:t.icon,onClick:function(){return n.hview.scroll(100)},children:(0,k.jsx)(q.Z,{})}),(0,k.jsx)("div",{}),(0,k.jsx)(O.Z,{className:t.icon,onClick:function(){return n.vview.scroll(-100)},children:(0,k.jsx)(H.Z,{})}),(0,k.jsx)("div",{}),(0,k.jsx)(O.Z,{className:t.icon,onClick:function(){n.hview.zoomIn(),n.vview.zoomIn()},children:(0,k.jsx)(J.Z,{})}),(0,k.jsx)("div",{}),(0,k.jsx)(O.Z,{className:t.icon,onClick:function(){n.hview.zoomOut(),n.vview.zoomOut()},children:(0,k.jsx)(X.Z,{})})]})})),G=t(67619),U=t(37973),K=t(33028),$=t(95088);function Q(e){return(0,k.jsx)($.Z,(0,K.Z)((0,K.Z)({},e),{},{children:(0,k.jsx)("path",{fill:"currentColor",d:"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"})}))}function ee(e){return(0,k.jsx)($.Z,(0,K.Z)((0,K.Z)({},e),{},{children:(0,k.jsx)("path",{fill:"currentColor",d:"M10.07,14.27C10.57,14.03 11.16,14.25 11.4,14.75L13.7,19.74L15.5,18.89L13.19,13.91C12.95,13.41 13.17,12.81 13.67,12.58L13.95,12.5L16.25,12.05L8,5.12V15.9L9.82,14.43L10.07,14.27M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19A1,1 0 0,1 6,18V3A1,1 0 0,1 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z"})}))}var ne=(0,s.observer)((function(e){var n=e.model;return(0,k.jsxs)("div",{children:[(0,k.jsx)(O.Z,{onClick:n.zoomOutButton,children:(0,k.jsx)(X.Z,{})}),(0,k.jsx)(O.Z,{onClick:n.zoomInButton,children:(0,k.jsx)(J.Z,{})}),(0,k.jsx)(O.Z,{onClick:function(){return n.activateTrackSelector()},title:"Open track selector",children:(0,k.jsx)(B.GD,{})}),(0,k.jsx)(G.Z,{menuItems:[{onClick:function(){return n.squareView()},label:"Square view - same base pairs per pixel"},{onClick:function(){return n.squareViewProportional()},label:"Rectanglularize view - same total bp"},{onClick:function(){return n.showAllRegions()},label:"Show all regions"},{onClick:function(){return n.setDrawCigar(!n.drawCigar)},type:"checkbox",label:"Draw CIGAR",checked:n.drawCigar},{onClick:function(){return n.setShowPanButtons(!n.showPanButtons)},label:"Show pan buttons",type:"checkbox",checked:n.showPanButtons},{label:"Click and drag mode",subMenu:[{onClick:function(){return n.setCursorMode("move")},label:"Pan by default, select region when ctrl key is held",icon:Q,type:"radio",checked:"move"===n.cursorMode},{onClick:function(){return n.setCursorMode("crosshair")},label:"Select region by default, pan when ctrl key is held",icon:ee,type:"radio",checked:"crosshair"===n.cursorMode}]},{label:"Wheel scroll mode",subMenu:[{onClick:function(){return n.setWheelMode("pan")},label:"Pans view",type:"radio",checked:"pan"===n.wheelMode},{onClick:function(){return n.setWheelMode("zoom")},label:"Zooms view",type:"radio",checked:"zoom"===n.wheelMode},{onClick:function(){return n.setWheelMode("none")},label:"Disable",type:"radio",checked:"none"===n.wheelMode}]}],children:(0,k.jsx)(U.Z,{})})]})})),te=(0,l.ZL)()({bp:{display:"flex",alignItems:"center",marginLeft:10},spacer:{flexGrow:1},headerBar:{display:"flex",position:"relative"}}),re=(0,s.observer)((function(e){var n=e.model,t=e.selection,r=te().classes,o=n.hview,i=n.vview,s=n.showPanButtons;return(0,k.jsxs)("div",{className:r.headerBar,children:[(0,k.jsx)(ne,{model:n}),(0,k.jsxs)(j.Z,{className:r.bp,variant:"body2",color:"textSecondary",children:["x: ",o.assemblyNames.join(",")," ",(0,g.getBpDisplayStr)(o.currBp),(0,k.jsx)("br",{}),"y: ",i.assemblyNames.join(",")," ",(0,g.getBpDisplayStr)(i.currBp)]}),t?(0,k.jsxs)(j.Z,{className:r.bp,variant:"body2",color:"textSecondary",children:["width:".concat((0,g.getBpDisplayStr)(o.bpPerPx*t.width))," ",(0,k.jsx)("br",{}),"height:".concat((0,g.getBpDisplayStr)(i.bpPerPx*t.height))]}):null,(0,k.jsx)("div",{className:r.spacer}),(0,k.jsx)(F,{model:n}),s?(0,k.jsx)(_,{model:n}):null]})})),oe=t(3754),ie=t(81839),se=t(59594),ae=t(74262),le=t(46622),ce=t(72779);var de=(0,l.ZL)()((function(e){return{tooltip:{position:"absolute",pointerEvents:"none",backgroundColor:(0,ae.Fq)(e.palette.grey[700],.9),borderRadius:e.shape.borderRadius,color:e.palette.common.white,fontFamily:e.typography.fontFamily,padding:"4px 8px",fontSize:e.typography.pxToRem(12),lineHeight:"".concat((n=1.4,Math.round(1e5*n)/1e5),"em"),maxWidth:300,wordWrap:"break-word"}};var n})),ue={left:0,top:0,width:0,height:0},he=(0,s.observer)((function(e){var n,t=e.model,i=e.mouserect,s=e.mouserectClient,a=e.xdistance,l=e.ydistance,c=de().classes,d=t.hview,u=t.vview,h=t.viewHeight,f=(0,o.useState)(null),m=(0,r.Z)(f,2),x=m[0],v=m[1],p=(null===(n=(0,o.useRef)(null).current)||void 0===n?void 0:n.getBoundingClientRect())||ue,y=p.height+12,j=(0,o.useMemo)((function(){return{getBoundingClientRect:function(){var e=6+((null===s||void 0===s?void 0:s[0])||0)-(a<0?y:0),n=6+((null===s||void 0===s?void 0:s[1])||0)-(l<0?y:0);return{top:n,left:e,bottom:n,right:e,width:0,height:0,x:e,y:n,toJSON:function(){}}}}}),[s,a,l,y]),b=(0,ce.D)(j,x,{placement:a<0?"left":"right"}),g=b.styles,Z=b.attributes;return(0,k.jsx)(k.Fragment,{children:i?(0,k.jsx)(le.h,{children:(0,k.jsxs)("div",(0,K.Z)((0,K.Z)({ref:v,className:c.tooltip,style:(0,K.Z)((0,K.Z)({},g.popper),{},{zIndex:1e5})},Z.popper),{},{children:["x - ".concat((0,se.c4)(i[0],d)),(0,k.jsx)("br",{}),"y - ".concat((0,se.c4)(h-i[1],u)),(0,k.jsx)("br",{})]}))}):null})})),fe=(0,s.observer)((function(e){var n=e.model,t=e.mousedown,i=e.mousedownClient,s=e.xdistance,a=e.ydistance,l=de().classes,c=n.hview,d=n.vview,u=n.viewHeight,h=(0,o.useState)(null),f=(0,r.Z)(h,2),m=f[0],x=f[1],v=(0,o.useMemo)((function(){return{getBoundingClientRect:function(){var e=((null===i||void 0===i?void 0:i[0])||0)-0,n=((null===i||void 0===i?void 0:i[1])||0)-0;return{top:n,left:e,bottom:n,right:e,width:0,height:0,x:e,y:n,toJSON:function(){}}}}}),[i,s,a]),p=(0,ce.D)(v,m,{placement:s<0?"right":"left"}),y=p.styles,j=p.attributes;return(0,k.jsx)(k.Fragment,{children:t&&Math.abs(s)>3&&Math.abs(a)>3?(0,k.jsx)(le.h,{children:(0,k.jsxs)("div",(0,K.Z)((0,K.Z)({ref:x,className:l.tooltip,style:(0,K.Z)((0,K.Z)({},y.popper),{},{zIndex:1e5})},j.popper),{},{children:["x - ".concat((0,se.c4)(t[0],c)),(0,k.jsx)("br",{}),"y - ".concat((0,se.c4)(u-t[1],d)),(0,k.jsx)("br",{})]}))}):null})})),me={left:0,top:0,width:0,height:0},xe=(0,l.ZL)()((function(e){return{spacer:{gridColumn:"1/2",gridRow:"2/2"},root:{position:"relative",marginBottom:e.spacing(1),overflow:"hidden"},container:{display:"grid",padding:5,position:"relative"},overlay:{pointerEvents:"none",overflow:"hidden",display:"flex",width:"100%",gridRow:"1/2",gridColumn:"2/2",zIndex:100,"& path":{cursor:"crosshair",fill:"none"}},content:{position:"relative",gridColumn:"2/2",gridRow:"1/2"},resizeHandle:{height:4,background:"#ccc",boxSizing:"border-box",borderTop:"1px solid #fafafa"}}}));function ve(e,n){return e&&[e[0]-n.left,e[1]-n.top]}var pe=(0,s.observer)((function(e){var n=e.model,t=xe().classes;return(0,k.jsx)("div",{className:t.overlay,children:n.tracks.map((function(e){var n=(0,r.Z)(e.displays,1)[0],t=n.RenderingComponent;return t?(0,k.jsx)(t,{model:n},e.configuration.trackId):null}))})})),ye=(0,s.observer)((function(e){var n,t,s=e.model,l=xe().classes,c=(0,o.useState)(),u=(0,r.Z)(c,2),h=u[0],f=u[1],m=(0,o.useState)(),x=(0,r.Z)(m,2),v=x[0],p=x[1],y=(0,o.useState)(!1),j=(0,r.Z)(y,2),b=j[0],g=j[1],Z=(0,o.useState)(),w=(0,r.Z)(Z,2),S=w[0],C=w[1],P=(0,o.useRef)(null),L=(0,o.useRef)(null),M=(0,o.useRef)(0),N=(0,o.useRef)(0),A=(0,o.useRef)(!1),B=(0,o.useState)(!1),z=(0,r.Z)(B,2),T=z[0],R=z[1],D=(null===(n=P.current)||void 0===n?void 0:n.getBoundingClientRect())||me,I=(null===(t=P.current)||void 0===t?void 0:t.getBoundingClientRect())||me,E=ve(v,D),F=ve(h,D),O=ve(S,D),H=S||h,W=O||F,V=E&&W?W[0]-E[0]:0,q=E&&W?W[1]-E[1]:0,J=s.hview,X=s.vview,Y=s.wheelMode,_=s.cursorMode,G="move"===_&&!T||"crosshair"===_&&T,U="move"===_&&T||"crosshair"===_&&!T;return(0,o.useEffect)((function(){function e(e){var n=d()(e);e.preventDefault(),M.current+=n.pixelX,N.current-=n.pixelY,A.current||(A.current=!0,window.requestAnimationFrame((function(){(0,a.transaction)((function(){if("pan"===Y)J.scroll(M.current/3),X.scroll(N.current/10);else if("zoom"===Y&&Math.abs(N.current)>2*Math.abs(M.current)&&F){var e=N.current<0?1.1:.9;J.zoomTo(J.bpPerPx*e,F[0]),X.zoomTo(X.bpPerPx*e,I.height-F[1])}})),A.current=!1,M.current=0,N.current=0})))}if(P.current){var n=P.current;return n.addEventListener("wheel",e),function(){return n.removeEventListener("wheel",e)}}return function(){}}),[J,X,Y,F,I.height]),(0,o.useEffect)((function(){function e(e){f([e.clientX,e.clientY]),h&&v&&G&&!S&&(J.scroll(-e.clientX+h[0]),X.scroll(e.clientY-h[1]))}return window.addEventListener("mousemove",e),function(){return window.removeEventListener("mousemove",e)}}),[G,h,v,_,T,S,J,X]),(0,o.useEffect)((function(){function e(e){Math.abs(V)>3&&Math.abs(q)>3&&U?C([e.clientX,e.clientY]):p(void 0)}return E&&!O?(window.addEventListener("mouseup",e,!0),function(){return window.removeEventListener("mouseup",e,!0)}):function(){}}),[U,E,F,O,V,q,T,_]),(0,k.jsxs)("div",{children:[(0,k.jsx)(re,{model:s,selection:U&&E&&W?{width:Math.abs(V),height:Math.abs(q)}:void 0}),(0,k.jsxs)("div",{ref:L,className:l.root,onMouseLeave:function(){return g(!1)},onMouseEnter:function(){return g(!0)},children:[(0,k.jsxs)("div",{className:l.container,children:[(0,k.jsx)(ie.UL,{model:s}),(0,k.jsx)(ie.u_,{model:s}),(0,k.jsxs)("div",{ref:P,className:l.content,children:[b&&U?(0,k.jsx)(he,{model:s,mouserect:W,mouserectClient:H,xdistance:V,ydistance:q}):null,U?(0,k.jsx)(fe,{model:s,mousedown:E,mousedownClient:v,xdistance:V,ydistance:q}):null,(0,k.jsx)("div",{style:{cursor:T?"pointer":_},onMouseDown:function(e){if(0===e.button){var n=e.clientX,t=e.clientY;p([n,t]),f([n,t]),R(e.ctrlKey)}},children:(0,k.jsx)(oe.Z,{model:s,children:U&&E&&W?(0,k.jsx)("rect",{fill:"rgba(255,0,0,0.3)",x:Math.min(W[0],E[0]),y:Math.min(W[1],E[1]),width:Math.abs(V),height:Math.abs(q)}):null})}),(0,k.jsx)("div",{className:l.spacer})]}),(0,k.jsx)(pe,{model:s}),(0,k.jsx)(i.Menu,{open:Boolean(O),onMenuItemClick:function(e,n){n(),C(void 0),p(void 0)},onClose:function(){C(void 0),p(void 0)},anchorReference:"anchorPosition",anchorPosition:S?{top:S[1]+50,left:S[0]+50}:void 0,style:{zIndex:1e4},menuItems:[{label:"Zoom in",onClick:function(){E&&O&&s.zoomIn(E,O)}},{label:"Open linear synteny view",onClick:function(){E&&O&&s.onDotplotView(E,O)}}]})]}),(0,k.jsx)(i.ResizeHandle,{onDrag:function(e){return s.setHeight(s.height+e)},className:l.resizeHandle})]})]})})),je=(0,s.observer)((function(e){var n=e.model,t=n.initialized,r=n.loading,o=n.error;return!t&&!r||o?(0,k.jsx)(D,{model:n}):r?(0,k.jsx)(i.LoadingEllipses,{variant:"h6"}):(0,k.jsx)(ye,{model:n})}))},3754:function(e,n,t){t.d(n,{B:function(){return s},Z:function(){return a}});t(30969);var r=t(90550),o=t(94702),i=t(37574),s=(0,r.observer)((function(e){var n=e.model,t=e.children,r=n.viewWidth,s=n.viewHeight,a=n.hview,l=n.vview,c=a.dynamicBlocks.contentBlocks,d=l.dynamicBlocks.contentBlocks;if(!c.length||!d.length)return null;var u=a.displayedRegionsTotalPx-a.offsetPx,h=l.displayedRegionsTotalPx-l.offsetPx,f=c[0].offsetPx-a.offsetPx,m=d[0].offsetPx-l.offsetPx,x=(0,o.Z)(),v=x.palette.divider,p=Math.max(f,0),y=Math.max(s-h,0),j=Math.min(u-f,r),b=Math.min(s-m-y,s),g=1/0,Z=1/0;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("rect",{x:p,y:y,width:j,height:b,fill:x.palette.background.default}),(0,i.jsxs)("g",{children:[c.map((function(e){var n=e.offsetPx-a.offsetPx,t=Math.floor(n)!==Math.floor(g);return t&&(g=n),t?(0,i.jsx)("line",{x1:n,y1:0,x2:n,y2:s,stroke:v},JSON.stringify(e)):null})),d.map((function(e){var n=s-(e.offsetPx-l.offsetPx),t=Math.floor(n)!==Math.floor(Z);return t&&(Z=n),t?(0,i.jsx)("line",{x1:0,y1:n,x2:r,y2:n,stroke:v},JSON.stringify(e)):null})),(0,i.jsx)("line",{x1:u,y1:0,x2:u,y2:s,stroke:v}),(0,i.jsx)("line",{x1:0,y1:s-h,x2:r,y2:s-h,stroke:v})]}),t]})}));function a(e){var n=e.model,t=e.children,r=n.viewWidth,o=n.viewHeight;return(0,i.jsx)("svg",{width:r,height:o,style:{background:"rgba(0,0,0,0.12)"},children:(0,i.jsx)(s,{model:n,children:t})})}},73007:function(e,n,t){var r=t(71600);n.Z=void 0;var o=r(t(48035)),i=t(37574),s=(0,o.default)((0,i.jsx)("path",{d:"m7 14 5-5 5 5z"}),"ArrowDropUp");n.Z=s},45055:function(e,n,t){var r=t(71600);n.Z=void 0;var o=r(t(48035)),i=t(37574),s=(0,o.default)((0,i.jsx)("path",{d:"m14 7-5 5 5 5V7z"}),"ArrowLeft");n.Z=s}}]);
//# sourceMappingURL=9136.8458c86a.chunk.js.map