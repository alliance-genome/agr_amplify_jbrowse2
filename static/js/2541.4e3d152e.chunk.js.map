{"version":3,"file":"static/js/2541.4e3d152e.chunk.js","mappings":"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","sources":["../../../packages/core/BaseFeatureWidget/BaseFeatureDetail.tsx","../../../packages/core/rpc/remoteAbortSignals.ts","../../../packages/core/ui/AssemblySelector.tsx","../../../packages/core/ui/EditableTypography.tsx","../../../packages/core/ui/ErrorMessage.tsx","../../../packages/core/ui/FactoryResetDialog.tsx","../../../packages/core/ui/FileSelector/FileSelector.tsx","../../../packages/core/ui/FileSelector/index.ts","../../../packages/core/ui/Menu.tsx","../../../packages/core/ui/ResizeHandle.tsx","../../../packages/core/ui/SanitizedHTML.tsx","../../../packages/core/ui/theme.ts","../../../packages/core/ui/Logo.tsx","../../../packages/core/ui/App.tsx","../../../packages/core/ui/ReturnToImportFormDialog.tsx","../../../packages/core/ui/PrerenderedCanvas.tsx","../../../packages/core/ui/Tooltip.tsx","../../../packages/core/util/aborting.ts","../../../packages/core/util/offscreenCanvas/Canvas2DContextShim/context.ts","../../../packages/core/util/offscreenCanvas/CanvasShim.ts","../../../packages/core/util/offscreenCanvas/ponyfill.ts","../../../packages/core/util/offscreenCanvas/types.ts","../../../packages/core/util/offscreenCanvas/index.tsx","../../../packages/core/util/types/index.ts","../../../packages/core/util/when.ts","../../../packages/core/PluginManager.ts","../../../packages/core/PluginLoader.ts","rpc.worker.ts","../../../plugins/data-management/src/index.ts","corePlugins.ts","workerPolyfill.js","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/compat get default export","../webpack/runtime/create fake namespace object","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/global","../webpack/runtime/harmony module decorator","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/runtime/node module decorator","../webpack/runtime/publicPath","../webpack/runtime/importScripts chunk loading","../webpack/runtime/startup chunk dependencies","../webpack/startup"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\nimport React, { useState } from 'react'\nimport { ErrorBoundary } from 'react-error-boundary'\nimport {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  Typography,\n  Divider,\n  Tooltip,\n  makeStyles,\n} from '@material-ui/core'\nimport ExpandMore from '@material-ui/icons/ExpandMore'\nimport { DataGrid } from '@mui/x-data-grid'\nimport { observer } from 'mobx-react'\nimport clsx from 'clsx'\nimport isObject from 'is-object'\nimport { IAnyStateTreeNode } from 'mobx-state-tree'\n\n// locals\nimport { getConf } from '../configuration'\nimport { measureText, getSession } from '../util'\nimport SanitizedHTML from '../ui/SanitizedHTML'\nimport SequenceFeatureDetails from './SequenceFeatureDetails'\nimport { BaseCardProps, BaseProps } from './types'\nimport { SimpleFeatureSerialized } from '../util/simpleFeature'\nimport { ellipses } from './util'\n\nconst MAX_FIELD_NAME_WIDTH = 170\n\n// these are always omitted as too detailed\nconst globalOmit = [\n  'length',\n  'position',\n  'subfeatures',\n  'uniqueId',\n  'exonFrames',\n  'parentId',\n  'thickStart',\n  'thickEnd',\n]\n\n// coreDetails are omitted in some circumstances\nconst coreDetails = [\n  'name',\n  'start',\n  'end',\n  'strand',\n  'refName',\n  'description',\n  'type',\n]\n\nexport const useStyles = makeStyles(theme => ({\n  expansionPanelDetails: {\n    display: 'block',\n    padding: theme.spacing(1),\n  },\n  expandIcon: {\n    color: '#FFFFFF',\n  },\n  field: {\n    display: 'flex',\n    flexWrap: 'wrap',\n  },\n  fieldDescription: {\n    '&:hover': {\n      background: 'yellow',\n    },\n  },\n  fieldName: {\n    wordBreak: 'break-all',\n    minWidth: '90px',\n    borderBottom: '1px solid #0003',\n    background: theme.palette.grey[200],\n    marginRight: theme.spacing(1),\n    padding: theme.spacing(0.5),\n  },\n  fieldValue: {\n    wordBreak: 'break-word',\n    maxHeight: 300,\n    padding: theme.spacing(0.5),\n    overflow: 'auto',\n  },\n  fieldSubvalue: {\n    wordBreak: 'break-word',\n    maxHeight: 300,\n    padding: theme.spacing(0.5),\n    background: theme.palette.grey[100],\n    border: `1px solid ${theme.palette.grey[300]}`,\n    boxSizing: 'border-box',\n    overflow: 'auto',\n  },\n}))\n\nexport function BaseCard({\n  children,\n  title,\n  defaultExpanded = true,\n}: BaseCardProps) {\n  const classes = useStyles()\n  const [expanded, setExpanded] = useState(defaultExpanded)\n  return (\n    <Accordion\n      expanded={expanded}\n      onChange={() => setExpanded(s => !s)}\n      TransitionProps={{ unmountOnExit: true }}\n    >\n      <AccordionSummary\n        expandIcon={<ExpandMore className={classes.expandIcon} />}\n      >\n        <Typography variant=\"button\"> {title}</Typography>\n      </AccordionSummary>\n      <AccordionDetails className={classes.expansionPanelDetails}>\n        {children}\n      </AccordionDetails>\n    </Accordion>\n  )\n}\n\nexport const FieldName = ({\n  description,\n  name,\n  prefix = [],\n  width,\n}: {\n  description?: React.ReactNode\n  name: string\n  prefix?: string[]\n  width?: number\n}) => {\n  const classes = useStyles()\n  const val = [...prefix, name].join('.')\n  return description ? (\n    <Tooltip title={description} placement=\"left\">\n      <div className={clsx(classes.fieldDescription, classes.fieldName)}>\n        {val}\n      </div>\n    </Tooltip>\n  ) : (\n    <div className={classes.fieldName} style={{ width: width }}>\n      {val}\n    </div>\n  )\n}\n\nexport const BasicValue = ({ value }: { value: string | React.ReactNode }) => {\n  const classes = useStyles()\n  return (\n    <div className={classes.fieldValue}>\n      {React.isValidElement(value) ? (\n        value\n      ) : (\n        <SanitizedHTML\n          html={isObject(value) ? JSON.stringify(value) : String(value)}\n        />\n      )}\n    </div>\n  )\n}\n\nexport const SimpleValue = ({\n  name,\n  value,\n  description,\n  prefix,\n  width,\n}: {\n  description?: React.ReactNode\n  name: string\n  value: any\n  prefix?: string[]\n  width?: number\n}) => {\n  const classes = useStyles()\n  return value !== null && value !== undefined ? (\n    <div className={classes.field}>\n      <FieldName\n        prefix={prefix}\n        description={description}\n        name={name}\n        width={width}\n      />\n      <BasicValue value={value} />\n    </div>\n  ) : null\n}\n\nconst ArrayValue = ({\n  name,\n  value,\n  description,\n  prefix = [],\n}: {\n  description?: React.ReactNode\n  name: string\n  value: any[]\n  prefix?: string[]\n}) => {\n  const classes = useStyles()\n  return (\n    <>\n      {value.length === 1 ? (\n        isObject(value[0]) ? (\n          <Attributes attributes={value[0]} prefix={[...prefix, name]} />\n        ) : (\n          <div className={classes.field}>\n            <FieldName prefix={prefix} description={description} name={name} />\n            <BasicValue value={value[0]} />\n          </div>\n        )\n      ) : value.every(val => isObject(val)) ? (\n        value.map((val, i) => (\n          <Attributes\n            key={JSON.stringify(val) + '-' + i}\n            attributes={val}\n            prefix={[...prefix, name + '-' + i]}\n          />\n        ))\n      ) : (\n        <div className={classes.field}>\n          <FieldName prefix={prefix} description={description} name={name} />\n          {value.map((val, i) => (\n            <div\n              key={JSON.stringify(val) + '-' + i}\n              className={classes.fieldSubvalue}\n            >\n              <BasicValue value={val} />\n            </div>\n          ))}\n        </div>\n      )}\n    </>\n  )\n}\n\nfunction CoreDetails(props: BaseProps) {\n  const { feature } = props\n  const { refName, start, end, strand } = feature as SimpleFeatureSerialized & {\n    start: number\n    end: number\n    strand: number\n    refName: string\n  }\n  const strandMap: Record<string, string> = {\n    '-1': '-',\n    '0': '',\n    '1': '+',\n  }\n  const strandStr = strandMap[strand as number] ? `(${strandMap[strand]})` : ''\n  const displayStart = (start + 1).toLocaleString('en-US')\n  const displayEnd = end.toLocaleString('en-US')\n  const displayRef = refName ? `${refName}:` : ''\n  const displayedDetails: Record<string, any> = {\n    ...feature,\n    length: (end - start).toLocaleString('en-US'),\n    position: `${displayRef}${displayStart}..${displayEnd} ${strandStr}`,\n  }\n\n  const coreRenderedDetails = [\n    'Position',\n    'Description',\n    'Name',\n    'Length',\n    'Type',\n  ]\n  return (\n    <>\n      {coreRenderedDetails\n        .map(key => [key, displayedDetails[key.toLowerCase()]])\n        .filter(([, value]) => value !== null && value !== undefined)\n        .map(([key, value]) => (\n          <SimpleValue key={key} name={key} value={value} />\n        ))}\n    </>\n  )\n}\n\nexport const BaseCoreDetails = (props: BaseProps) => {\n  return (\n    <BaseCard {...props} title=\"Primary data\">\n      <CoreDetails {...props} />\n    </BaseCard>\n  )\n}\n\ninterface AttributeProps {\n  attributes: Record<string, any>\n  omit?: string[]\n  formatter?: (val: unknown, key: string) => React.ReactElement\n  descriptions?: Record<string, React.ReactNode>\n  prefix?: string[]\n}\n\nconst DataGridDetails = ({\n  value,\n  prefix,\n  name,\n}: {\n  name: string\n  prefix?: string[]\n  value: Record<string, any>\n}) => {\n  const keys = Object.keys(value[0]).sort()\n  const unionKeys = new Set(keys)\n  value.forEach((val: any) => Object.keys(val).forEach(k => unionKeys.add(k)))\n  if (unionKeys.size < keys.length + 5) {\n    // avoids key 'id' from being used in row data\n    const rows = Object.entries(value).map(([k, val]) => {\n      const { id, ...rest } = val\n      return {\n        id: k, // used by material UI\n        identifier: id, // renamed from id to identifier\n        ...rest,\n      }\n    })\n\n    // avoids key 'id' from being used in column names, and tries\n    // to make it at the start of the colNames array\n    let colNames\n    if (unionKeys.has('id')) {\n      unionKeys.delete('id')\n      colNames = ['identifier', ...unionKeys]\n    } else {\n      colNames = [...unionKeys]\n    }\n\n    const columns = colNames.map(val => ({\n      field: val,\n      width: Math.max(\n        ...rows.map(row => {\n          const result = String(row[val])\n          return Math.min(Math.max(measureText(result, 14) + 50, 80), 1000)\n        }),\n      ),\n    }))\n\n    // disableSelection on click helps avoid\n    // https://github.com/mui-org/material-ui-x/issues/1197\n    return (\n      <>\n        <FieldName prefix={prefix} name={name} />\n        <div\n          style={{\n            height:\n              Math.min(rows.length, 100) * 20 +\n              50 +\n              (rows.length < 100 ? 0 : 50),\n            width: '100%',\n          }}\n        >\n          <DataGrid\n            disableSelectionOnClick\n            rowHeight={20}\n            headerHeight={25}\n            rows={rows}\n            rowsPerPageOptions={[]}\n            hideFooterRowCount\n            hideFooterSelectedRowCount\n            columns={columns}\n            hideFooter={rows.length < 100}\n          />\n        </div>\n      </>\n    )\n  }\n  return null\n}\n\n// arr = ['a','b'], obj = {a:{b:'hello}}, returns hello (with special addition to grab description also)\nfunction accessNested(arr: string[], obj: Record<string, any> = {}) {\n  arr.forEach(elt => {\n    if (obj) {\n      obj = obj[elt]\n    }\n  })\n  return typeof obj === 'string'\n    ? obj\n    : typeof obj?.Description === 'string'\n    ? obj.Description\n    : undefined\n}\n\nfunction generateMaxWidth(array: any, prefix: any) {\n  // @ts-ignore\n  const arr = []\n  array.forEach((key: any, value: any) => {\n    const val = [...prefix, key[0]].join('.')\n    arr.push(measureText(val, 12))\n  })\n\n  // @ts-ignore\n  return Math.ceil(Math.max(...arr)) + 10\n}\n\nexport const Attributes: React.FunctionComponent<AttributeProps> = props => {\n  const {\n    attributes,\n    omit = [],\n    descriptions,\n    formatter = val => val,\n    prefix = [],\n  } = props\n  const omits = [...omit, ...globalOmit]\n\n  const maxLabelWidth = generateMaxWidth(\n    Object.entries(attributes).filter(\n      ([k, v]) => v !== undefined && !omits.includes(k),\n    ),\n    prefix,\n  )\n\n  const labelWidth =\n    maxLabelWidth <= MAX_FIELD_NAME_WIDTH ? maxLabelWidth : MAX_FIELD_NAME_WIDTH\n\n  return (\n    <>\n      {Object.entries(attributes)\n        .filter(([k, v]) => v !== undefined && !omits.includes(k))\n        .map(([key, value]) => {\n          if (\n            Array.isArray(value) &&\n            value.length > 2 &&\n            value.every(val => isObject(val))\n          ) {\n            return (\n              <DataGridDetails\n                key={key}\n                prefix={prefix}\n                name={key}\n                value={value}\n              />\n            )\n          }\n\n          const description = accessNested([...prefix, key], descriptions)\n          if (Array.isArray(value)) {\n            return (\n              <ArrayValue\n                key={key}\n                name={key}\n                value={value}\n                description={description}\n                prefix={prefix}\n              />\n            )\n          }\n\n          if (isObject(value)) {\n            return (\n              <Attributes\n                omit={omits}\n                key={key}\n                attributes={value}\n                descriptions={descriptions}\n                prefix={[...prefix, key]}\n              />\n            )\n          }\n\n          return (\n            <SimpleValue\n              key={key}\n              name={key}\n              value={formatter(value, key)}\n              description={description}\n              prefix={prefix}\n              width={labelWidth}\n            />\n          )\n        })}\n    </>\n  )\n}\n\nexport const BaseAttributes = (props: BaseProps) => {\n  const { feature } = props\n  return (\n    <BaseCard {...props} title=\"Attributes\">\n      <Attributes {...props} attributes={feature} />\n    </BaseCard>\n  )\n}\n\nexport interface BaseInputProps extends BaseCardProps {\n  omit?: string[]\n  model: any\n  descriptions?: Record<string, React.ReactNode>\n  formatter?: (val: unknown, key: string) => React.ReactElement\n}\n\nfunction isEmpty(obj: Record<string, unknown>) {\n  return Object.keys(obj).length === 0\n}\n\nexport const FeatureDetails = (props: {\n  model: IAnyStateTreeNode\n  feature: SimpleFeatureSerialized & { name?: string; id?: string }\n  depth?: number\n  omit?: string[]\n  formatter?: (val: unknown, key: string) => React.ReactElement\n}) => {\n  const { omit = [], model, feature, depth = 0 } = props\n  const { name = '', id = '', type = '', subfeatures } = feature\n  const session = getSession(model)\n  const defaultSeqTypes = ['mRNA', 'transcript']\n  const sequenceTypes =\n    getConf(session, ['featureDetails', 'sequenceTypes']) || defaultSeqTypes\n\n  return (\n    <BaseCard title={[ellipses(name || id), type].filter(f => !!f).join(' - ')}>\n      <Typography>Core details</Typography>\n      <CoreDetails {...props} />\n      <Divider />\n      <Typography>Attributes</Typography>\n      <Attributes\n        attributes={feature}\n        {...props}\n        omit={[...omit, ...coreDetails]}\n      />\n\n      {sequenceTypes.includes(feature.type) ? (\n        <ErrorBoundary\n          FallbackComponent={({ error }) => (\n            <Typography color=\"error\">\n              Failed to fetch sequence for feature: {`${error}`}\n            </Typography>\n          )}\n        >\n          <SequenceFeatureDetails {...props} />\n        </ErrorBoundary>\n      ) : null}\n\n      {subfeatures?.length ? (\n        <BaseCard\n          title=\"Subfeatures\"\n          defaultExpanded={!sequenceTypes.includes(feature.type)}\n        >\n          {subfeatures.map((sub: any) => (\n            <FeatureDetails\n              key={JSON.stringify(sub)}\n              feature={sub}\n              model={model}\n              depth={depth + 1}\n            />\n          ))}\n        </BaseCard>\n      ) : null}\n    </BaseCard>\n  )\n}\n\nconst BaseFeatureDetails = observer((props: BaseInputProps) => {\n  const { model } = props\n  const { featureData } = model\n\n  if (!featureData) {\n    return null\n  }\n  const feature = JSON.parse(JSON.stringify(featureData))\n\n  if (isEmpty(feature)) {\n    return null\n  }\n  return <FeatureDetails model={model} feature={feature} />\n})\n\nexport default BaseFeatureDetails\n","/* ---------------- for the RPC client ----------------- */\n\nlet abortSignalCounter = 0\nexport type RemoteAbortSignal = { abortSignalId: number }\nconst abortSignalIds: WeakMap<AbortSignal, number> = new WeakMap() // map of abortsignal => numerical ID\n\n/**\n * assign an ID to the given abort signal and return a plain object representation\n * @param signal - the signal to serialize\n * @param callfunc - function used to call\n *  a remote method, will be called like callfunc('signalAbort', signalId)\n */\nexport function serializeAbortSignal(\n  signal: AbortSignal,\n  callfunc: (name: string, abortSignalId: number) => void,\n): RemoteAbortSignal {\n  let abortSignalId = abortSignalIds.get(signal)\n  if (!abortSignalId) {\n    abortSignalCounter += 1\n    abortSignalIds.set(signal, abortSignalCounter)\n    abortSignalId = abortSignalCounter\n    signal.addEventListener('abort', () => {\n      const signalId = abortSignalIds.get(signal)\n      if (signalId !== undefined) {\n        callfunc('signalAbort', signalId)\n      }\n    })\n  }\n  return { abortSignalId }\n}\n\n/* ---------------- for the RPC server ----------------- */\n\n/**\n * test whether a given object\n * @param thing - the thing to test\n * @returns true if the thing is a remote abort signal\n */\nexport function isRemoteAbortSignal(\n  thing: unknown,\n): thing is RemoteAbortSignal {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'abortSignalId' in thing &&\n    // @ts-ignore\n    typeof thing.abortSignalId === 'number'\n  )\n}\n\n// the server side keeps a set of surrogate abort controllers that can be\n// aborted based on ID\nconst surrogateAbortControllers: Map<number, AbortController> = new Map() // numerical ID => surrogate abort controller\n\n/**\n * deserialize the result of serializeAbortSignal into an AbortSignal\n *\n * @param signal -\n * @returns an abort signal that corresponds to the given ID\n */\nexport function deserializeAbortSignal({\n  abortSignalId,\n}: RemoteAbortSignal): AbortSignal {\n  let surrogateAbortController = surrogateAbortControllers.get(abortSignalId)\n  if (!surrogateAbortController) {\n    surrogateAbortController = new AbortController()\n    surrogateAbortControllers.set(abortSignalId, surrogateAbortController)\n  }\n  return surrogateAbortController.signal\n}\n\n/**\n * fire an abort signal from a remote abort signal ID\n *\n * @param abortSignalId -\n */\nexport function remoteAbort(props: { signalId: number }) {\n  const { signalId: abortSignalId } = props\n  const surrogateAbortController = surrogateAbortControllers.get(abortSignalId)\n\n  if (surrogateAbortController) {\n    surrogateAbortController.abort()\n  }\n}\n\nexport function remoteAbortRpcHandler() {\n  return {\n    signalAbort: remoteAbort,\n  }\n}\n","import React, { useState, useEffect } from 'react'\nimport { observer } from 'mobx-react'\nimport { getConf } from '../configuration'\nimport {\n  makeStyles,\n  TextField,\n  MenuItem,\n  InputProps as IIP,\n} from '@material-ui/core'\nimport { AbstractSessionModel } from '../util'\nconst useStyles = makeStyles(() => ({\n  importFormEntry: {\n    minWidth: 180,\n  },\n}))\n\n// Hook from https://usehooks.com/useLocalStorage/\nfunction useLocalStorage<T>(key: string, initialValue: T) {\n  const [storedValue, setStoredValue] = useState<T>(() => {\n    if (typeof window === 'undefined') {\n      return initialValue\n    }\n    try {\n      const item = window.localStorage.getItem(key)\n      return item ? JSON.parse(item) : initialValue\n    } catch (error) {\n      console.error(error)\n      return initialValue\n    }\n  })\n  const setValue = (value: T | ((val: T) => T)) => {\n    try {\n      const valueToStore =\n        value instanceof Function ? value(storedValue) : value\n      setStoredValue(valueToStore)\n      if (typeof window !== 'undefined') {\n        window.localStorage.setItem(key, JSON.stringify(valueToStore))\n      }\n    } catch (error) {\n      console.error(error)\n    }\n  }\n  return [storedValue, setValue] as const\n}\n\nconst AssemblySelector = observer(\n  ({\n    session,\n    onChange,\n    selected,\n    InputProps,\n    extra = 0,\n  }: {\n    session: AbstractSessionModel\n    onChange: (arg: string) => void\n    selected: string | undefined\n    InputProps?: IIP\n    extra?: unknown\n  }) => {\n    const classes = useStyles()\n    const { assemblyNames, assemblyManager } = session\n\n    // constructs a localstorage key based on host/path/config to help\n    // remember. non-config assists usage with e.g. embedded apps\n    const config = new URLSearchParams(window.location.search).get('config')\n    const [lastSelected, setLastSelected] = useLocalStorage(\n      `lastAssembly-${[\n        window.location.host + window.location.pathname,\n        config,\n        extra,\n      ].join('-')}`,\n      selected,\n    )\n\n    const selection = assemblyNames.includes(lastSelected || '')\n      ? lastSelected\n      : selected\n\n    useEffect(() => {\n      if (selection && selection !== selected) {\n        onChange(selection)\n      }\n    }, [selection, onChange, selected])\n\n    const error = assemblyNames.length ? '' : 'No configured assemblies'\n    return (\n      <TextField\n        select\n        label=\"Assembly\"\n        variant=\"outlined\"\n        helperText={error || 'Select assembly to view'}\n        value={error ? '' : selection}\n        inputProps={{ 'data-testid': 'assembly-selector' }}\n        onChange={event => setLastSelected(event.target.value)}\n        error={!!error}\n        InputProps={InputProps}\n        disabled={!!error}\n        className={classes.importFormEntry}\n      >\n        {assemblyNames.map(name => {\n          const assembly = assemblyManager.get(name)\n          const displayName = assembly ? getConf(assembly, 'displayName') : ''\n          return (\n            <MenuItem key={name} value={name}>\n              {displayName || name}\n            </MenuItem>\n          )\n        })}\n      </TextField>\n    )\n  },\n)\n\nexport default AssemblySelector\n","import InputBase from '@material-ui/core/InputBase'\nimport Typography, { TypographyProps } from '@material-ui/core/Typography'\nimport { makeStyles, useTheme } from '@material-ui/core/styles'\nimport React, { useEffect, useState } from 'react'\n\ntype Variant = TypographyProps['variant']\n\ntype EditableTypographyClassKey =\n  | 'input'\n  | 'inputBase'\n  | 'inputRoot'\n  | 'inputFocused'\n\nconst useStyles = makeStyles(theme => ({\n  input: {},\n  inputBase: {},\n  typography: {\n    top: 6,\n    left: 2,\n    position: 'absolute',\n    whiteSpace: 'nowrap',\n    visibility: 'hidden',\n  },\n  inputRoot: {\n    padding: theme.spacing(0.5),\n  },\n  inputFocused: {\n    borderStyle: 'solid',\n    borderRadius: theme.shape.borderRadius,\n    borderWidth: 2,\n  },\n}))\n\ninterface EditableTypographyPropTypes {\n  value: string\n  setValue: (value: string) => void\n  variant: Variant\n  classes?: Partial<Record<EditableTypographyClassKey, string>>\n}\n\n// using forwardRef so that MUI Tooltip can wrap this component\nconst EditableTypography = React.forwardRef(\n  (props: EditableTypographyPropTypes, ref: React.Ref<HTMLDivElement>) => {\n    const { value, setValue, variant, ...other } = props\n    const [editedValue, setEditedValue] = useState<string | undefined>()\n    const [width, setWidth] = useState(0)\n    const [sizerNode, setSizerNode] = useState<HTMLSpanElement | null>(null)\n    const [inputNode, setInputNode] = useState<HTMLInputElement | null>(null)\n    const [blur, setBlur] = useState(false)\n\n    useEffect(() => {\n      if (blur) {\n        inputNode && inputNode.blur()\n        setBlur(false)\n      }\n    }, [blur, inputNode])\n\n    const classes = useStyles(props)\n    const theme = useTheme()\n\n    const clientWidth = sizerNode && sizerNode.clientWidth\n    if (clientWidth && clientWidth !== width) {\n      setWidth(clientWidth)\n    }\n\n    const sizerRef = (node: HTMLSpanElement) => {\n      setSizerNode(node)\n    }\n\n    const inputRef = (node: HTMLInputElement) => {\n      setInputNode(node)\n    }\n\n    function handleBlur() {\n      if (editedValue && editedValue !== value) {\n        setValue(editedValue)\n      }\n      setEditedValue(undefined)\n    }\n\n    function handleKeyDown(event: React.KeyboardEvent<HTMLInputElement>) {\n      if (event.key === 'Enter') {\n        inputNode && inputNode.blur()\n      } else if (event.key === 'Escape') {\n        setEditedValue(undefined)\n        setBlur(true)\n      }\n    }\n\n    function handleChange(event: React.ChangeEvent<HTMLInputElement>) {\n      setEditedValue(event.target.value)\n    }\n\n    return (\n      <div {...other} ref={ref}>\n        <div style={{ position: 'relative' }}>\n          <Typography\n            ref={sizerRef}\n            component=\"span\"\n            variant={variant}\n            className={classes.typography}\n          >\n            {editedValue === undefined ? value : editedValue}\n          </Typography>\n        </div>\n        <InputBase\n          inputRef={inputRef}\n          className={classes.inputBase}\n          inputProps={{\n            style: {\n              width,\n              ...(variant && variant !== 'inherit' && variant !== 'srOnly'\n                ? theme.typography[variant]\n                : {}),\n            },\n          }}\n          classes={{\n            input: classes.input,\n            root: classes.inputRoot,\n            focused: classes.inputFocused,\n          }}\n          value={editedValue === undefined ? value : editedValue}\n          onChange={handleChange}\n          onKeyDown={handleKeyDown}\n          onBlur={handleBlur}\n        />\n      </div>\n    )\n  },\n)\n\nexport default EditableTypography\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core'\n\nconst useStyles = makeStyles(theme => ({\n  message: {\n    border: '1px solid black',\n    background: '#f88',\n    overflow: 'auto',\n    maxHeight: 200,\n    margin: theme.spacing(1),\n    padding: theme.spacing(1),\n  },\n\n  errorBox: {\n    background: 'lightgrey',\n    border: '1px solid black',\n    margin: 20,\n  },\n}))\nconst ErrorMessage = ({ error }: { error: unknown }) => {\n  const classes = useStyles()\n\n  let snapshotError = ''\n  let str = `${error}`\n  const findStr = 'is not assignable'\n  const idx = str.indexOf(findStr)\n  if (idx !== -1) {\n    const trim = str.slice(0, idx + findStr.length)\n    // best effort to make a better error message than the default\n    // mobx-state-tree\n\n    // case 1. element has a path\n    const match = trim.match(\n      /.*at path \"(.*)\" snapshot `(.*)` is not assignable/m,\n    )\n    if (match) {\n      str = `Failed to load element at ${match[1]}...Failed element had snapshot`\n      snapshotError = match[2]\n    }\n\n    // case 2. element has no path\n    const match2 = trim.match(/.*snapshot `(.*)` is not assignable/)\n    if (match2) {\n      str = `Failed to load element...Failed element had snapshot`\n      snapshotError = match2[1]\n    }\n  }\n  return (\n    <div className={classes.message}>\n      {str.slice(0, 10000)}\n      {snapshotError ? (\n        <pre className={classes.errorBox}>\n          {JSON.stringify(JSON.parse(snapshotError), null, 2)}\n        </pre>\n      ) : null}\n    </div>\n  )\n}\n\nexport default ErrorMessage\n","import Button from '@material-ui/core/Button'\nimport Dialog from '@material-ui/core/Dialog'\nimport DialogTitle from '@material-ui/core/DialogTitle'\nimport DialogContent from '@material-ui/core/DialogContent'\nimport DialogContentText from '@material-ui/core/DialogContentText'\nimport DialogActions from '@material-ui/core/DialogActions'\nimport React from 'react'\n\nexport default ({\n  onClose,\n  open,\n  onFactoryReset,\n}: {\n  onClose: Function\n  open: boolean\n  onFactoryReset: Function\n}) => {\n  function handleDialogClose(action?: string) {\n    if (action === 'reset') {\n      onFactoryReset()\n    }\n    onClose()\n  }\n\n  return (\n    <Dialog open={open} onClose={() => handleDialogClose()}>\n      <DialogTitle id=\"alert-dialog-title\">Reset</DialogTitle>\n      <DialogContent>\n        <DialogContentText id=\"alert-dialog-description\">\n          Are you sure you want to reset? This will restore the default\n          configuration.\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={() => handleDialogClose()} color=\"primary\">\n          Cancel\n        </Button>\n        <Button\n          onClick={() => handleDialogClose('reset')}\n          color=\"primary\"\n          variant=\"contained\"\n        >\n          OK\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n","import React, { useState } from 'react'\nimport {\n  Box,\n  FormHelperText,\n  InputLabel,\n  MenuItem,\n  Tooltip,\n  Menu,\n} from '@material-ui/core'\n\nimport {\n  ToggleButtonGroup,\n  ToggleButton,\n  ToggleButtonProps,\n} from '@material-ui/lab'\nimport { observer } from 'mobx-react'\nimport {\n  FileLocation,\n  UriLocation,\n  isUriLocation,\n  AbstractRootModel,\n  isAppRootModel,\n} from '../../util/types'\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown'\nimport LocalFileChooser from './LocalFileChooser'\nimport UrlChooser from './UrlChooser'\n\nfunction ToggleButtonWithTooltip(props: ToggleButtonProps) {\n  const { title, children, ...other } = props\n  return (\n    <Tooltip title={title || ''}>\n      <ToggleButton {...other}>{children}</ToggleButton>\n    </Tooltip>\n  )\n}\n\nfunction shorten(str: string, len: number) {\n  if (typeof str === 'string' && str.length > len) {\n    return `${str.substring(0, len)}…`\n  }\n  return str\n}\n\nconst FileSelector = observer(\n  (props: {\n    location?: FileLocation\n    setLocation: (param: FileLocation) => void\n    setName?: (str: string) => void\n    name?: string\n    description?: string\n    rootModel?: AbstractRootModel\n  }) => {\n    const { location, name, description, rootModel, setLocation } = props\n    const fileOrUrl = !location || isUriLocation(location) ? 'url' : 'file'\n    const [toggleButtonValue, setToggleButtonValue] = useState(\n      location && 'internetAccountId' in location && location.internetAccountId\n        ? location.internetAccountId\n        : fileOrUrl,\n    )\n    const accts = isAppRootModel(rootModel)\n      ? rootModel.internetAccounts.slice()\n      : []\n    const numShown = 2\n    const [shownAccts, setShownAccts] = useState(accts.slice(0, numShown))\n    const [hiddenAccts, setHiddenAccts] = useState(accts.slice(numShown))\n    const [anchorEl, setAnchorEl] = useState<HTMLElement | null>(null)\n\n    const selectedAcct = accts.find(\n      ia => ia.internetAccountId === toggleButtonValue,\n    )\n\n    const setLocationWithAccount = (location: UriLocation) => {\n      setLocation({\n        ...location,\n        internetAccountId: selectedAcct\n          ? selectedAcct.internetAccountId\n          : undefined,\n      })\n    }\n\n    // if you swap account selection after inputting url\n    if (\n      location &&\n      selectedAcct &&\n      isUriLocation(location) &&\n      location.internetAccountId !== selectedAcct.internetAccountId\n    ) {\n      setLocationWithAccount(location)\n    }\n\n    let locationInput = (\n      <UrlChooser\n        {...props}\n        setLocation={setLocationWithAccount}\n        label={selectedAcct?.selectorLabel}\n      />\n    )\n    if (toggleButtonValue === 'file') {\n      locationInput = <LocalFileChooser {...props} />\n    }\n    if (selectedAcct?.SelectorComponent) {\n      const { SelectorComponent } = selectedAcct\n      locationInput = (\n        <SelectorComponent {...props} setLocation={setLocationWithAccount} />\n      )\n    }\n\n    return (\n      <>\n        <Box display=\"flex\">\n          <InputLabel shrink>{name}</InputLabel>\n        </Box>\n        <Box display=\"flex\" flexDirection=\"row\">\n          <Box>\n            <ToggleButtonGroup\n              value={toggleButtonValue}\n              exclusive\n              onChange={(_event, newState) => {\n                if (newState) {\n                  setToggleButtonValue(newState)\n                }\n                if (isUriLocation(location)) {\n                  setLocationWithAccount(location)\n                }\n              }}\n              aria-label=\"file, url, or account picker\"\n            >\n              {new URLSearchParams(window.location.search).get(\n                'adminKey',\n              ) ? null : (\n                <ToggleButton value=\"file\" aria-label=\"local file\">\n                  File\n                </ToggleButton>\n              )}\n              <ToggleButton value=\"url\" aria-label=\"url\">\n                URL\n              </ToggleButton>\n              {shownAccts.map(({ internetAccountId, toggleContents, name }) => (\n                <ToggleButtonWithTooltip\n                  key={internetAccountId}\n                  value={internetAccountId}\n                  aria-label={name}\n                  title={name}\n                >\n                  {typeof toggleContents === 'string'\n                    ? shorten(toggleContents, 5)\n                    : toggleContents || shorten(name, 5)}\n                </ToggleButtonWithTooltip>\n              ))}\n              {hiddenAccts.length ? (\n                <ToggleButton\n                  onClick={event => setAnchorEl(event.target as HTMLElement)}\n                  selected={false}\n                >\n                  More\n                  <ArrowDropDownIcon />\n                </ToggleButton>\n              ) : null}\n            </ToggleButtonGroup>\n\n            <Menu\n              open={Boolean(anchorEl)}\n              anchorEl={anchorEl}\n              onClose={() => setAnchorEl(null)}\n              getContentAnchorEl={null}\n              anchorOrigin={{\n                vertical: 'bottom',\n                horizontal: 'center',\n              }}\n              transformOrigin={{\n                vertical: 'top',\n                horizontal: 'center',\n              }}\n            >\n              {hiddenAccts?.map((acct, idx) => (\n                <MenuItem\n                  key={acct.internetAccountId}\n                  value={acct.internetAccountId}\n                  onClick={() => {\n                    const prev = shownAccts[shownAccts.length - 1]\n                    setShownAccts([\n                      ...shownAccts.slice(0, shownAccts.length - 1),\n                      acct,\n                    ])\n                    setHiddenAccts([\n                      prev,\n                      ...hiddenAccts.slice(0, idx),\n                      ...hiddenAccts.slice(idx + 1),\n                    ])\n                    setToggleButtonValue(acct.internetAccountId)\n                    setAnchorEl(null)\n                  }}\n                >\n                  {acct.name}\n                </MenuItem>\n              ))}\n            </Menu>\n          </Box>\n        </Box>\n        {locationInput}\n        <FormHelperText>{description}</FormHelperText>\n      </>\n    )\n  },\n)\n\nexport default FileSelector\n","import FileSelector from './FileSelector'\n\nexport default FileSelector\n","import React, { useEffect, useRef, useState } from 'react'\nimport {\n  Divider,\n  Grow,\n  ListItemIcon,\n  ListItemText,\n  ListSubheader,\n  MenuProps as MUIMenuProps,\n  MenuItem as MUIMenuItem,\n  MenuItemProps,\n  MenuList,\n  Paper,\n  Popover,\n  PopoverProps,\n  SvgIconProps,\n  makeStyles,\n} from '@material-ui/core'\n// icons\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight'\nimport CheckBoxIcon from '@material-ui/icons/CheckBox'\nimport CheckBoxOutlineBlankIcon from '@material-ui/icons/CheckBoxOutlineBlank'\nimport RadioButtonCheckedIcon from '@material-ui/icons/RadioButtonChecked'\nimport RadioButtonUncheckedIcon from '@material-ui/icons/RadioButtonUnchecked'\n\n// other\nimport { findLastIndex } from '../util'\n\nconst useStyles = makeStyles({\n  paper: {\n    position: 'fixed',\n    overflowY: 'auto',\n    overflowX: 'hidden',\n    // So we see the popover when it's empty.\n    minWidth: 16,\n    minHeight: 16,\n    maxWidth: 'calc(100% - 32px)',\n    maxHeight: 'calc(100% - 32px)',\n    top: 0,\n    left: 0,\n    // We disable the focus ring for mouse, touch and keyboard users.\n    outline: 0,\n  },\n  menuItemEndDecoration: {\n    position: 'absolute',\n    right: 16,\n    top: '50%',\n    transform: 'translateY(-50%)',\n    padding: 2,\n    marginRight: -12,\n    display: 'inline-flex',\n  },\n})\n\ninterface MenuItemEndDecorationSubMenuProps {\n  type: 'subMenu'\n}\n\ninterface MenuItemEndDecorationSelectorProps {\n  type: 'checkbox' | 'radio'\n  checked: boolean\n  disabled?: boolean\n}\n\ntype MenuItemEndDecorationProps =\n  | MenuItemEndDecorationSubMenuProps\n  | MenuItemEndDecorationSelectorProps\n\nfunction MenuItemEndDecoration(props: MenuItemEndDecorationProps) {\n  const classes = useStyles()\n  const { type } = props\n  let checked\n  let disabled\n  if ('checked' in props) {\n    ;({ checked, disabled } = props)\n  }\n  let icon\n  if (type === 'subMenu') {\n    icon = <ArrowRightIcon color=\"action\" />\n  } else if (type === 'checkbox') {\n    if (checked) {\n      const color = disabled ? 'inherit' : 'secondary'\n      icon = <CheckBoxIcon color={color} />\n    } else {\n      icon = <CheckBoxOutlineBlankIcon color=\"action\" />\n    }\n  } else if (type === 'radio') {\n    if (checked) {\n      const color = disabled ? 'inherit' : 'secondary'\n      icon = <RadioButtonCheckedIcon color={color} />\n    } else {\n      icon = <RadioButtonUncheckedIcon color=\"action\" />\n    }\n  }\n  return <div className={classes.menuItemEndDecoration}>{icon}</div>\n}\n\nexport interface MenuDivider {\n  priority?: number\n  type: 'divider'\n}\n\nexport interface MenuSubHeader {\n  type: 'subHeader'\n  priority?: number\n  label: string\n}\n\nexport interface BaseMenuItem {\n  label: string\n  priority?: number\n  subLabel?: string\n  icon?: React.ComponentType<SvgIconProps>\n  disabled?: boolean\n}\n\nexport interface NormalMenuItem extends BaseMenuItem {\n  type?: 'normal'\n  onClick: Function\n}\n\nexport interface CheckboxMenuItem extends BaseMenuItem {\n  type: 'checkbox'\n  checked: boolean\n  onClick: Function\n}\n\nexport interface RadioMenuItem extends BaseMenuItem {\n  type: 'radio'\n  checked: boolean\n  onClick: Function\n}\n\nexport interface SubMenuItem extends BaseMenuItem {\n  type?: 'subMenu'\n  subMenu: MenuItem[]\n}\n\nexport type MenuItem =\n  | MenuDivider\n  | MenuSubHeader\n  | NormalMenuItem\n  | CheckboxMenuItem\n  | RadioMenuItem\n  | SubMenuItem\n\ntype AnchorElProp = MUIMenuProps['anchorEl']\ntype OpenProp = MUIMenuProps['open']\ntype OnCloseProp = MUIMenuProps['onClose']\n\ninterface MenuPageProps {\n  menuItems: MenuItem[]\n  onMenuItemClick: (\n    event: React.MouseEvent<HTMLLIElement, MouseEvent>,\n    callback: Function,\n  ) => void\n  anchorEl?: AnchorElProp\n  open: OpenProp\n  onClose: OnCloseProp\n  top?: boolean\n}\n\ntype MenuItemStyleProp = MenuItemProps['style']\n\nfunction findNextValidIdx(menuItems: MenuItem[], currentIdx: number) {\n  const idx = menuItems\n    .slice(currentIdx + 1)\n    .findIndex(\n      menuItem =>\n        menuItem.type !== 'divider' &&\n        menuItem.type !== 'subHeader' &&\n        !menuItem.disabled,\n    )\n  if (idx === -1) {\n    return idx\n  }\n  return currentIdx + 1 + idx\n}\n\nfunction findPreviousValidIdx(menuItems: MenuItem[], currentIdx: number) {\n  return findLastIndex(\n    menuItems.slice(0, currentIdx),\n    menuItem =>\n      menuItem.type !== 'divider' &&\n      menuItem.type !== 'subHeader' &&\n      !menuItem.disabled,\n  )\n}\n\nconst MenuPage = React.forwardRef((props: MenuPageProps, ref) => {\n  const [subMenuAnchorEl, setSubMenuAnchorEl] = useState<HTMLElement>()\n  const [openSubMenuIdx, setOpenSubMenuIdx] = useState<number>()\n  const [isSubMenuOpen, setIsSubMenuOpen] = useState(false)\n  const [selectedMenuItemIdx, setSelectedMenuItemIdx] = useState<number>()\n  const [position, setPosition] = useState<{\n    top?: number\n    left?: number\n  }>()\n  const paperRef = useRef<HTMLDivElement>()\n  const classes = useStyles()\n\n  const {\n    menuItems,\n    onMenuItemClick,\n    open,\n    onClose,\n    anchorEl,\n    top = false,\n  } = props\n\n  useEffect(() => {\n    if (!open) {\n      setSubMenuAnchorEl(undefined)\n      setOpenSubMenuIdx(undefined)\n    }\n  }, [open])\n\n  useEffect(() => {\n    const shouldSubMenuBeOpen = open && Boolean(subMenuAnchorEl)\n    let timer: ReturnType<typeof setTimeout>\n    if (shouldSubMenuBeOpen && !isSubMenuOpen) {\n      timer = setTimeout(() => {\n        setIsSubMenuOpen(true)\n      }, 300)\n    } else if (!shouldSubMenuBeOpen && isSubMenuOpen) {\n      timer = setTimeout(() => {\n        setIsSubMenuOpen(false)\n      }, 300)\n    }\n    return () => {\n      clearTimeout(timer)\n    }\n  }, [isSubMenuOpen, open, subMenuAnchorEl])\n\n  useEffect(() => {\n    if (anchorEl) {\n      const rect = (anchorEl as HTMLElement).getBoundingClientRect()\n      if (position) {\n        if (\n          rect.top !== position.top ||\n          rect.left + rect.width !== position.left\n        ) {\n          setPosition({ top: rect.top, left: rect.left + rect.width })\n        }\n      } else {\n        setPosition({ top: rect.top, left: rect.left + rect.width })\n      }\n    } else if (!position) {\n      setPosition({})\n    }\n  }, [position, anchorEl])\n\n  const hasEndDecoration = menuItems.some(\n    menuItem =>\n      'subMenu' in menuItem ||\n      menuItem.type === 'checkbox' ||\n      menuItem.type === 'radio',\n  )\n  const hasIcon = menuItems.some(\n    menuItem => 'icon' in menuItem && menuItem.icon,\n  )\n  const menuItemStyle: MenuItemStyleProp = {}\n  if (hasEndDecoration) {\n    menuItemStyle.paddingRight = 48\n  }\n\n  function handleClick(callback: Function) {\n    return (event: React.MouseEvent<HTMLLIElement, MouseEvent>) => {\n      onMenuItemClick(event, callback)\n    }\n  }\n\n  const ListContents = (\n    <>\n      <MenuList autoFocusItem={open && !isSubMenuOpen}>\n        {menuItems\n          .sort((a, b) => (b.priority || 0) - (a.priority || 0))\n          .map((menuItem, idx) => {\n            if (menuItem.type === 'divider') {\n              return <Divider key={`divider-${idx}`} component=\"li\" />\n            }\n            if (menuItem.type === 'subHeader') {\n              return (\n                <ListSubheader key={`subHeader-${menuItem.label}-${idx}`}>\n                  {menuItem.label}\n                </ListSubheader>\n              )\n            }\n            let icon = null\n            let endDecoration = null\n            if (menuItem.icon) {\n              const Icon = menuItem.icon\n              icon = (\n                <ListItemIcon>\n                  <Icon />\n                </ListItemIcon>\n              )\n            }\n            if ('subMenu' in menuItem) {\n              endDecoration = <MenuItemEndDecoration type=\"subMenu\" />\n            } else if (\n              menuItem.type === 'checkbox' ||\n              menuItem.type === 'radio'\n            ) {\n              endDecoration = (\n                <MenuItemEndDecoration\n                  type={menuItem.type}\n                  checked={menuItem.checked}\n                  disabled={menuItem.disabled}\n                />\n              )\n            }\n            const onClick =\n              'onClick' in menuItem ? handleClick(menuItem.onClick) : undefined\n            return (\n              <MUIMenuItem\n                key={menuItem.label}\n                style={menuItemStyle}\n                selected={idx === selectedMenuItemIdx}\n                onClick={onClick}\n                onMouseMove={e => {\n                  if (e.currentTarget !== document.activeElement) {\n                    e.currentTarget.focus()\n                    setSelectedMenuItemIdx(idx)\n                  }\n                  if ('subMenu' in menuItem) {\n                    if (openSubMenuIdx !== idx) {\n                      setSubMenuAnchorEl(e.currentTarget)\n                      setOpenSubMenuIdx(idx)\n                    }\n                  } else {\n                    setSubMenuAnchorEl(undefined)\n                    setOpenSubMenuIdx(undefined)\n                  }\n                }}\n                onKeyDown={e => {\n                  if (e.key === 'ArrowLeft' || e.key === 'Escape') {\n                    onClose && onClose(e, 'escapeKeyDown')\n                  } else if (e.key === 'ArrowUp') {\n                    setSelectedMenuItemIdx(findPreviousValidIdx(menuItems, idx))\n                  } else if (e.key === 'ArrowDown') {\n                    const a = findNextValidIdx(menuItems, idx)\n                    setSelectedMenuItemIdx(a)\n                  } else if ('subMenu' in menuItem) {\n                    if (e.key === 'ArrowRight' || e.key === 'Enter') {\n                      setSubMenuAnchorEl(e.currentTarget)\n                      setOpenSubMenuIdx(idx)\n                      setIsSubMenuOpen(true)\n                    }\n                  }\n                }}\n                disabled={Boolean(menuItem.disabled)}\n              >\n                {icon}\n                <ListItemText\n                  primary={menuItem.label}\n                  secondary={menuItem.subLabel}\n                  inset={hasIcon && !menuItem.icon}\n                />\n                {endDecoration}\n              </MUIMenuItem>\n            )\n          })}\n      </MenuList>\n      {menuItems.map((menuItem, idx) => {\n        let subMenu = null\n        if ('subMenu' in menuItem) {\n          subMenu = (\n            <MenuPage\n              key={menuItem.label}\n              anchorEl={subMenuAnchorEl}\n              open={isSubMenuOpen && openSubMenuIdx === idx}\n              onClose={() => {\n                setIsSubMenuOpen(false)\n                setSubMenuAnchorEl(undefined)\n              }}\n              onMenuItemClick={onMenuItemClick}\n              menuItems={menuItem.subMenu}\n            />\n          )\n        }\n        return subMenu\n      })}\n    </>\n  )\n\n  if (top) {\n    return ListContents\n  }\n\n  return (\n    <Grow in={open} style={{ transformOrigin: `0 0 0` }} ref={ref}>\n      <Paper\n        elevation={8}\n        ref={paperRef}\n        className={classes.paper}\n        style={{ ...position }}\n      >\n        {ListContents}\n      </Paper>\n    </Grow>\n  )\n})\n\ninterface MenuProps extends PopoverProps {\n  menuItems: MenuItem[]\n  onMenuItemClick: (\n    event: React.MouseEvent<HTMLLIElement, MouseEvent>,\n    callback: Function,\n  ) => void\n}\n\nfunction Menu(props: MenuProps) {\n  const { open, onClose, menuItems, onMenuItemClick, ...other } = props\n\n  return (\n    <Popover\n      transitionDuration={0}\n      open={open}\n      onClose={onClose}\n      BackdropProps={{ invisible: true }}\n      {...other}\n    >\n      <MenuPage\n        open={open}\n        onClose={onClose}\n        menuItems={menuItems}\n        onMenuItemClick={onMenuItemClick}\n        top\n      />\n    </Popover>\n  )\n}\n\nexport default Menu\n","import React, { useEffect, useState, useRef } from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport clsx from 'clsx'\n\nconst useStyles = makeStyles({\n  horizontalHandle: {\n    cursor: 'row-resize',\n    width: '100%',\n  },\n  verticalHandle: {\n    cursor: 'col-resize',\n    height: '100%',\n  },\n  flexbox_verticalHandle: {\n    cursor: 'col-resize',\n    alignSelf: 'stretch', // the height: 100% is actually unable to function inside flexbox\n  },\n  flexbox_horizontalHandle: {\n    cursor: 'row-resize',\n    alignSelf: 'stretch', // similar to above\n  },\n})\n\nfunction ResizeHandle({\n  onDrag,\n  vertical = false,\n  flexbox = false,\n  className: originalClassName,\n  ...props\n}: {\n  onDrag: (arg: number) => number\n  vertical?: boolean\n  flexbox?: boolean\n  className?: string\n  [props: string]: unknown\n}) {\n  const [mouseDragging, setMouseDragging] = useState(false)\n  const prevPos = useRef(0)\n  const classes = useStyles()\n\n  useEffect(() => {\n    function mouseMove(event: MouseEvent) {\n      event.preventDefault()\n      const pos = vertical ? event.clientX : event.clientY\n      const distance = pos - prevPos.current\n      if (distance) {\n        onDrag(distance)\n        prevPos.current = pos\n      }\n    }\n\n    function mouseUp() {\n      setMouseDragging(false)\n    }\n    if (mouseDragging) {\n      window.addEventListener('mousemove', mouseMove, true)\n      window.addEventListener('mouseup', mouseUp, true)\n      return () => {\n        window.removeEventListener('mousemove', mouseMove, true)\n        window.removeEventListener('mouseup', mouseUp, true)\n      }\n    }\n    return () => {}\n  }, [mouseDragging, onDrag, vertical])\n\n  let className\n  if (flexbox) {\n    if (vertical) {\n      className = classes.flexbox_verticalHandle\n    } else {\n      className = classes.flexbox_horizontalHandle\n    }\n  } else if (vertical) {\n    className = classes.verticalHandle\n  } else {\n    className = classes.horizontalHandle\n  }\n\n  return (\n    <div\n      data-resizer=\"true\"\n      onMouseDown={event => {\n        event.preventDefault()\n        prevPos.current = vertical ? event.clientX : event.clientY\n        setMouseDragging(true)\n      }}\n      role=\"presentation\"\n      className={clsx(className, originalClassName)}\n      {...props}\n    />\n  )\n}\n\nexport default ResizeHandle\n","import React from 'react'\nimport escapeHTML from 'escape-html'\nimport dompurify from 'dompurify'\n\n// source https://github.com/sindresorhus/html-tags/blob/master/html-tags.json\n// with some random uncommon ones removed. note: we just use this to run the content\n// through dompurify without escaping if we see an htmlTag from this list\n// otherwise we escape angle brackets and things prematurely because it might be\n// something like <TRA> in VCF. Ref #657\nconst htmlTags = [\n  'a',\n  'b',\n  'br',\n  'code',\n  'div',\n  'em',\n  'h1',\n  'h2',\n  'h3',\n  'h4',\n  'h5',\n  'h6',\n  'i',\n  'img',\n  'li',\n  'p',\n  'pre',\n  'span',\n  'small',\n  'strong',\n  'table',\n  'tbody',\n  'td',\n  'tfoot',\n  'th',\n  'thead',\n  'tr',\n  'u',\n  'ul',\n]\n\n// adapted from is-html https://github.com/sindresorhus/is-html/blob/master/index.js\nconst full = new RegExp(htmlTags.map(tag => `<${tag}\\\\b[^>]*>`).join('|'), 'i')\nexport function isHTML(str: string) {\n  return full.test(str)\n}\n\nexport default function SanitizedHTML({ html }: { html: string }) {\n  const value = isHTML(html) ? html : escapeHTML(html)\n\n  // eslint-disable-next-line react/no-danger\n  return <div dangerouslySetInnerHTML={{ __html: dompurify.sanitize(value) }} />\n}\n","import { blue, green, red, amber } from '@material-ui/core/colors'\nimport { ThemeOptions, createTheme } from '@material-ui/core/styles'\nimport { PaletteOptions } from '@material-ui/core/styles/createPalette'\nimport deepmerge from 'deepmerge'\n\n// use this if we ever want to add some top-level thing to the theme\n// declare module '@material-ui/core/styles/createMuiTheme' {\n//   interface Theme {\n//     status: {\n//       topLevelThing: string\n//     }\n//   }\n//   interface ThemeOptions {\n//     status?: {\n//       topLevelThing?: string\n//     }\n//   }\n// }\n\ndeclare module '@material-ui/core/styles/createPalette' {\n  interface Palette {\n    tertiary: Palette['primary']\n    quaternary: Palette['primary']\n    bases: {\n      A: Palette['primary']\n      C: Palette['primary']\n      G: Palette['primary']\n      T: Palette['primary']\n    }\n  }\n  interface PaletteOptions {\n    tertiary?: PaletteOptions['primary']\n    quaternary?: PaletteOptions['primary']\n    bases?: {\n      A?: PaletteOptions['primary']\n      C?: PaletteOptions['primary']\n      G?: PaletteOptions['primary']\n      T?: PaletteOptions['primary']\n    }\n  }\n}\n\nconst midnight = '#0D233F'\nconst grape = '#721E63'\nconst forest = '#135560'\nconst mandarin = '#FFB11D'\n\nconst refTheme = createTheme()\n\nexport const jbrowseDefaultPalette = {\n  // type: 'dark',\n  primary: { main: midnight },\n  secondary: { main: grape },\n  tertiary: refTheme.palette.augmentColor({ main: forest }),\n  quaternary: refTheme.palette.augmentColor({ main: mandarin }),\n  stopCodon: '#e22',\n  startCodon: '#3e3',\n  bases: {\n    A: refTheme.palette.augmentColor(green),\n    C: refTheme.palette.augmentColor(blue),\n    G: refTheme.palette.augmentColor(amber),\n    T: refTheme.palette.augmentColor(red),\n  },\n}\n\nexport function createJBrowseDefaultProps(/* palette: PaletteOptions = {} */) {\n  return {\n    MuiButton: {\n      size: 'small' as const,\n    },\n    MuiFilledInput: {\n      margin: 'dense' as const,\n    },\n    MuiFormControl: {\n      margin: 'dense' as const,\n    },\n    MuiFormHelperText: {\n      margin: 'dense' as const,\n    },\n    MuiIconButton: {\n      size: 'small' as const,\n    },\n    MuiInputBase: {\n      margin: 'dense' as const,\n    },\n    MuiList: {\n      dense: true,\n    },\n    MuiListItem: {\n      dense: true,\n    },\n    MuiOutlinedInput: {\n      margin: 'dense' as const,\n    },\n    MuiFab: {\n      size: 'small' as const,\n    },\n    MuiTable: {\n      size: 'small' as const,\n    },\n    MuiTextField: {\n      margin: 'dense' as const,\n      size: 'small' as const,\n    },\n    MuiToolbar: {\n      variant: 'dense' as const,\n    },\n    MuiSvgIcon: {\n      fontSize: 'small' as const,\n    },\n    MuiToggleButtonGroup: {\n      size: 'small' as const,\n    },\n    MuiCheckbox: {\n      size: 'small' as const,\n    },\n    MuiLink: {\n      underline: 'always' as const,\n    },\n  }\n}\n\nexport function createJBrowseDefaultOverrides(palette: PaletteOptions = {}) {\n  const generatedPalette = deepmerge(jbrowseDefaultPalette, palette)\n  return {\n    MuiIconButton: {\n      colorSecondary: {\n        color: generatedPalette.tertiary.main,\n      },\n    },\n    MuiButton: {\n      textSecondary: {\n        color: generatedPalette.tertiary.main,\n      },\n    },\n    MuiFab: {\n      secondary: {\n        backgroundColor: generatedPalette.quaternary.main,\n      },\n    },\n    MuiLink: {\n      root: {\n        color: generatedPalette.tertiary.main,\n      },\n    },\n    MuiAccordion: {\n      root: {\n        // avoid extra padding around accordion element\n        margin: 0,\n        '&$expanded': {\n          margin: 0,\n        },\n      },\n    },\n    MuiAccordionSummary: {\n      root: {\n        // !important needed to combat the MuiButton being applied to\n        // accordions in mui4.12.2 having a background:'transparent' that\n        // otherwise overrides this other\n        backgroundColor: generatedPalette.tertiary.main + ' !important',\n\n        // width:100% added in 4.12.2 also\n        width: '100%',\n        '&$expanded': {\n          // overrides the subclass e.g. .MuiAccordionSummary-root-311.MuiAccordionSummary-expanded-312\n          minHeight: 0,\n          color: generatedPalette.tertiary.contrastText,\n          backgroundColor: generatedPalette.tertiary.main,\n        },\n        minHeight: 0,\n      },\n      content: {\n        '&$expanded': {\n          margin: '8px 8px',\n        },\n        margin: '8px 8px',\n        color: generatedPalette.tertiary.contrastText,\n      },\n    },\n    // makes menus more compact\n    MuiMenuItem: {\n      root: {\n        paddingTop: 3,\n        paddingBottom: 3,\n      },\n    },\n\n    // the below two are linked to make menus more compact\n    MuiListItemIcon: {\n      root: {\n        minWidth: 32,\n      },\n    },\n    MuiListItemText: {\n      inset: {\n        paddingLeft: 32,\n      },\n    },\n  }\n}\n\nexport const jbrowseBaseTheme: ThemeOptions = {\n  palette: jbrowseDefaultPalette,\n  typography: { fontSize: 12 },\n  spacing: 4,\n  props: createJBrowseDefaultProps(),\n  overrides: createJBrowseDefaultOverrides(),\n}\n\nexport function createJBrowseTheme(theme?: ThemeOptions) {\n  if (!theme) {\n    return createTheme(jbrowseBaseTheme)\n  }\n  if (theme.palette?.tertiary) {\n    theme = {\n      ...theme,\n      palette: {\n        ...theme.palette,\n        tertiary: refTheme.palette.augmentColor(theme.palette.tertiary),\n      },\n    }\n  }\n  if (theme.palette?.quaternary) {\n    theme = {\n      ...theme,\n      palette: {\n        ...theme.palette,\n        quaternary: refTheme.palette.augmentColor(theme.palette.quaternary),\n      },\n    }\n  }\n  theme = {\n    ...theme,\n    props: deepmerge(createJBrowseDefaultProps(), theme.props || {}),\n    overrides: deepmerge(\n      createJBrowseDefaultOverrides(theme.palette),\n      theme.overrides || {},\n    ),\n  }\n  return createTheme(deepmerge(jbrowseBaseTheme, theme))\n}\n","import React from 'react'\n\ntype LogoVariant = 'color' | 'black' | 'white'\n\ninterface LogoProps {\n  variant?: LogoVariant\n}\n\nfunction getColors(variant?: LogoVariant) {\n  if (variant === 'black') {\n    return {\n      midnight: '#808080',\n      forrest: '#666666',\n      grape: '#4d4d4d',\n      mandarin: '#333333',\n      gray: '#1a1a1a',\n    }\n  }\n  if (variant === 'white') {\n    return {\n      midnight: '#ffffff',\n      forrest: '#e6e6e6',\n      grape: '#cccccc',\n      mandarin: '#b3b3b3',\n      gray: '#999999',\n    }\n  }\n  return {\n    midnight: '#0d233f',\n    forrest: '#135560',\n    grape: '#721e63',\n    mandarin: '#ffb11d',\n    gray: '#dadada',\n  }\n}\n\nexport function Logomark({ variant }: LogoProps) {\n  return (\n    <svg viewBox=\"0 0 175 175\">\n      <Icon variant={variant} />\n    </svg>\n  )\n}\n\nexport function LogoFull({ variant }: LogoProps) {\n  return (\n    <svg viewBox=\"0 0 641 175\">\n      <Text variant={variant} />\n      <Icon variant={variant} />\n    </svg>\n  )\n}\n\nfunction Icon({ variant }: LogoProps) {\n  const colors = getColors(variant)\n  return (\n    <>\n      <path\n        style={{ fill: colors.midnight }}\n        d=\"M120.5,57.5c.168,0,.333.012.5.013V40.506c-.167,0-.333-.006-.5-.006a98.325,98.325,0,0,0-77.4,37.565q-2.664,3.378-5.023,6.994l14.206,9.327Q54.043,91.709,56,89.179A81.363,81.363,0,0,1,120.5,57.5Z\"\n      />\n      <path\n        style={{ fill: colors.forrest }}\n        d=\"M148.668,86.223c.308.133.6.283.908.42l6.746-15.618c-.153-.067-.3-.143-.454-.21a81.36,81.36,0,0,0-71.777,3.5q-2.8,1.544-5.469,3.309l9.249,14.054A63.93,63.93,0,0,1,148.668,86.223Z\"\n      />\n      <path\n        style={{ fill: colors.grape }}\n        d=\"M170.894,109.37A63.929,63.929,0,0,0,113.4,88.861l2.336,15.474a48.456,48.456,0,0,1,44.322,15.42c.111.125.214.255.324.381l11.16-10C171.323,109.879,171.118,109.62,170.894,109.37Z\"\n      />\n      <path\n        style={{ fill: colors.mandarin }}\n        d=\"M150.921,150.314c.04.163.07.326.107.489l16.509-4.058c-.039-.163-.067-.326-.107-.489A48.457,48.457,0,0,0,135.575,111.8l-5.515,15.591A32.466,32.466,0,0,1,150.921,150.314Z\"\n      />\n      <path\n        style={{ fill: colors.gray }}\n        d=\"M134.1,138.129l-9.779,13.213a32.486,32.486,0,0,1,7.823,14.463l15.147.852c.012-.166.032-.331.041-.5A32.464,32.464,0,0,0,134.1,138.129Z\"\n      />\n    </>\n  )\n}\n\nfunction Text({ variant }: LogoProps) {\n  const colors = getColors(variant)\n  return (\n    <g\n      aria-label=\"JBrowse\"\n      transform=\"translate(213.084 144.241)\"\n      style={{ fill: colors.midnight }}\n    >\n      <path d=\"m 26.355,-71.505 v 54.075 2.835 q 0,6.825 -0.42,10.185 -0.735,5.67 -2.835,9.135 -3.255,5.355 -8.505,8.4 -4.83,2.73 -11.55,3.57 L 1.47,11.76 Q 7.35,10.185 9.24,4.2 10.605,-0.105 10.605,-9.975 v -5.565 -55.965 q 1.785,0 4.62,0.315 2.835,0.21 3.255,0.21 1.785,0 2.94,-0.105 4.515,-0.42 4.935,-0.42 z\" />\n      <path d=\"m 60.68836,-65.415 v 24.78 h 3.255 q 2.94,0 4.935,-0.525 2.1,-0.525 3.885,-2.1 2.31,-1.995 3.36,-4.83 1.155,-2.835 1.155,-6.09 0,-5.565 -2.94,-8.61 -2.94,-3.045 -8.295,-3.045 -2.52,0 -5.355,0.42 z m 0,30.87 V -6.09 h 5.25 q 4.725,0 8.505,-3.675 3.885,-3.78 3.885,-10.08 0,-8.19 -4.62,-11.655 -4.095,-3.045 -13.02,-3.045 z M 44.93836,0 v -71.505 h 27.09 q 9.135,0 14.385,3.255 6.51,3.99 6.51,12.6 0,7.035 -5.25,11.655 -4.62,4.095 -11.97,5.145 v 0.945 q 7.56,0.735 12.285,3.99 6.615,4.62 6.615,13.335 0,10.185 -7.98,15.75 -6.93,4.83 -17.43,4.83 z\" />\n      <path d=\"M 109.44281,0.525 V -50.4 q 1.785,0.21 3.99,0.42 2.31,0.105 3.255,0.105 2.31,0 4.2,-0.21 1.89,-0.21 3.045,-0.315 v 13.02 q 1.89,-6.51 5.46,-9.87 4.41,-4.095 11.655,-4.095 -0.315,2.73 -0.42,6.825 -0.105,3.99 -0.105,7.455 l -0.945,0.84 q -0.945,-0.735 -2.415,-1.05 -1.47,-0.315 -2.94,-0.315 -3.57,0 -6.195,1.89 -2.52,1.785 -3.465,5.04 -0.42,1.155 -0.525,3.15 -0.105,1.89 -0.105,4.515 v 4.515 19.005 q -1.785,-0.21 -2.625,-0.21 -3.675,-0.315 -4.62,-0.315 -2.31,0 -4.2,0.21 -1.89,0.21 -3.045,0.315 z\" />\n      <path d=\"m 173.77337,1.47 q -11.655,0 -18.585,-6.825 -6.93,-6.825 -6.93,-18.48 0,-12.6 6.72,-20.055 6.825,-7.455 18.9,-7.455 11.97,0 18.9,6.72 6.93,6.72 6.93,18.48 0,12.285 -6.72,19.74 -7.14,7.875 -19.215,7.875 z m 0.735,-48.09 q -5.88,0 -8.505,6.51 -2.205,5.565 -2.205,15.96 0,8.19 1.47,12.915 2.415,7.98 8.505,7.98 5.565,0 8.19,-7.875 2.205,-6.51 2.205,-16.695 0,-8.505 -2.1,-13.23 -2.52,-5.565 -7.56,-5.565 z\" />\n      <path d=\"m 222.03563,-50.4 10.5,36.015 q 3.675,-11.235 5.67,-17.85 2.415,-8.085 5.04,-18.165 1.05,0.105 3.045,0.315 2.1,0.21 2.835,0.21 1.995,0 3.15,-0.105 1.26,-0.21 2.73,-0.42 l 10.71,36.015 q 5.88,-17.43 10.71,-36.015 l 4.2,0.315 4.095,-0.315 q -5.145,13.125 -9.135,24.57 -5.04,14.28 -8.505,26.355 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.205,-0.105 -1.89,0 -3.36,0.21 -1.365,0.21 -2.31,0.315 l -10.605,-34.755 q -4.41,13.65 -6.72,21.105 -2.31,7.35 -4.095,13.65 -1.89,-0.21 -3.36,-0.42 -1.365,-0.105 -2.31,-0.105 -1.995,0 -3.465,0.21 -1.365,0.21 -2.31,0.315 -3.78,-12.81 -5.04,-17.01 -2.205,-7.245 -5.46,-17.01 -2.835,-8.4 -5.88,-16.905 1.575,0 4.305,0.315 2.73,0.21 3.36,0.21 1.47,0 4.305,-0.21 2.835,-0.315 3.465,-0.315 z\" />\n      <path d=\"m 292.84172,-12.81 h 2.625 q 1.47,4.095 4.62,6.51 3.15,2.415 7.35,2.415 2.94,0 5.46,-1.785 2.625,-1.89 2.625,-4.62 0,-3.885 -6.195,-6.615 -10.395,-4.62 -11.655,-5.46 -6.405,-4.515 -6.405,-12.285 0,-7.77 5.25,-12.18 5.25,-4.515 12.81,-4.515 3.99,0 8.085,1.365 4.095,1.26 7.14,3.57 l -2.52,9.24 h -2.94 q -0.63,-3.57 -3.57,-6.195 -2.835,-2.625 -6.405,-2.625 -3.15,0 -5.46,1.575 -2.31,1.47 -2.31,4.515 0,3.885 6.405,6.51 10.185,4.095 11.865,5.25 6.405,4.41 6.405,12.81 0,7.455 -5.46,12.18 -5.355,4.62 -14.805,4.62 -8.19,0 -14.49,-4.305 z\" />\n      <path d=\"m 349.61228,-29.925 h 15.54 q 0,-6.51 -1.05,-10.395 -1.68,-6.3 -5.88,-6.3 -5.04,0 -7.14,6.195 -1.47,4.305 -1.47,10.5 z m 30.03,5.04 h -30.03 q 0,9.135 3.045,13.86 3.57,5.67 11.55,5.67 3.255,0 6.405,-1.26 3.15,-1.26 5.88,-3.465 l 1.26,0.945 -2.31,5.88 q -6.72,4.725 -15.015,4.725 -12.915,0 -19.635,-7.245 -6.72,-7.245 -6.72,-20.37 0,-11.235 6.405,-18.165 6.51,-7.035 17.64,-7.035 11.655,0 16.905,7.56 4.62,6.615 4.62,18.9 z\" />\n    </g>\n  )\n}\n","import React, { useState, Suspense } from 'react'\nimport {\n  AppBar,\n  Button,\n  Fab,\n  MenuItem,\n  Paper,\n  Select,\n  Toolbar,\n  Tooltip,\n  Typography,\n  makeStyles,\n} from '@material-ui/core'\nimport LaunchIcon from '@material-ui/icons/Launch'\nimport { observer } from 'mobx-react'\nimport { getEnv } from 'mobx-state-tree'\n\n// locals\nimport { readConfObject } from '../configuration'\nimport { AnyConfigurationModel } from '../configuration/configurationSchema'\nimport DrawerWidget from './DrawerWidget'\nimport DropDownMenu from './DropDownMenu'\nimport EditableTypography from './EditableTypography'\nimport { LogoFull } from './Logo'\nimport Snackbar from './Snackbar'\nimport ViewContainer from './ViewContainer'\nimport {\n  NotificationLevel,\n  SessionWithDrawerWidgets,\n  SnackAction,\n} from '../util'\nimport { MenuItem as JBMenuItem } from './index'\n\nconst useStyles = makeStyles(theme => ({\n  '@global': {\n    html: {\n      'font-family': 'Roboto',\n    },\n    /* Based on: https://www.digitalocean.com/community/tutorials/css-scrollbars */\n    /* The emerging W3C standard\n       that is currently Firefox-only */\n    '*': {\n      'scrollbar-width': 'auto',\n      'scrollbar-color': 'rgba(0,0,0,.5) rgba(128,128,128)',\n    },\n    /* Works on Chrome/Edge/Safari */\n    '*::-webkit-scrollbar': {\n      '-webkit-appearance': 'none',\n      width: '12px',\n    },\n    '*::-webkit-scrollbar-thumb': {\n      'background-color': 'rgba(0,0,0,.5)',\n      '-webkit-box-shadow': '0 0 1px rgba(255,255,255,.5)',\n    },\n  },\n  root: {\n    display: 'grid',\n    height: '100vh',\n    width: '100%',\n  },\n  fabLeft: {\n    zIndex: 10000,\n    position: 'fixed',\n    bottom: theme.spacing(2),\n    left: theme.spacing(2),\n  },\n  fabRight: {\n    zIndex: 10000,\n    position: 'fixed',\n    bottom: theme.spacing(2),\n    right: theme.spacing(2),\n  },\n  menuBarAndComponents: {\n    gridColumn: 'main',\n    display: 'grid',\n    gridTemplateRows: '[menubar] min-content [components] auto',\n    height: '100vh',\n  },\n  menuBar: {\n    gridRow: 'menubar',\n  },\n  components: {\n    overflowY: 'auto',\n    gridRow: 'components',\n  },\n  appBar: {\n    flexGrow: 1,\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  inputBase: {\n    color: theme.palette.primary.contrastText,\n  },\n  inputRoot: {\n    '&:hover': {\n      backgroundColor: theme.palette.primary.light,\n    },\n  },\n  inputFocused: {\n    borderColor: theme.palette.secondary.main,\n    backgroundColor: theme.palette.primary.light,\n  },\n\n  selectPaper: {\n    padding: theme.spacing(4),\n  },\n}))\n\nconst Logo = observer(\n  ({ session }: { session: { configuration: AnyConfigurationModel } }) => {\n    const { configuration } = session\n    const logoPath = readConfObject(configuration, 'logoPath')\n    if (!logoPath?.uri) {\n      return <LogoFull variant=\"white\" />\n    } else {\n      return <img src={logoPath.uri} alt=\"Custom logo\" />\n    }\n  },\n)\n\ntype SnackbarMessage = [string, NotificationLevel, SnackAction]\n\nconst App = observer(\n  ({\n    session,\n    HeaderButtons = <div />,\n  }: {\n    HeaderButtons?: React.ReactElement\n    session: SessionWithDrawerWidgets & {\n      savedSessionNames: string[]\n      menus: { label: string; menuItems: JBMenuItem[] }[]\n      renameCurrentSession: (arg: string) => void\n      snackbarMessages: SnackbarMessage[]\n      popSnackbarMessage: () => unknown\n    }\n  }) => {\n    const classes = useStyles()\n    const { pluginManager } = getEnv(session)\n    const viewTypes = pluginManager.getElementTypeRecord('view').all()\n    const [value, setValue] = useState(viewTypes[0]?.name)\n    const {\n      visibleWidget,\n      drawerWidth,\n      minimized,\n      activeWidgets,\n      savedSessionNames,\n      name,\n      menus,\n      views,\n      drawerPosition,\n    } = session\n\n    function handleNameChange(newName: string) {\n      if (savedSessionNames?.includes(newName)) {\n        session.notify(\n          `Cannot rename session to \"${newName}\", a saved session with that name already exists`,\n          'warning',\n        )\n      } else {\n        session.renameCurrentSession(newName)\n      }\n    }\n\n    const drawerVisible = visibleWidget && !minimized\n\n    let grid\n    if (drawerPosition === 'right') {\n      grid = [\n        `[main] 1fr`,\n        drawerVisible ? `[drawer] ${drawerWidth}px` : undefined,\n      ]\n    } else if (drawerPosition === 'left') {\n      grid = [\n        drawerVisible ? `[drawer] ${drawerWidth}px` : undefined,\n        `[main] 1fr`,\n      ]\n    }\n    return (\n      <div\n        className={classes.root}\n        style={{\n          gridTemplateColumns: grid?.filter(f => !!f).join(' '),\n        }}\n      >\n        {drawerVisible && drawerPosition === 'left' ? (\n          <DrawerWidget session={session} />\n        ) : null}\n\n        {session.DialogComponent ? (\n          <Suspense fallback={<div />}>\n            <session.DialogComponent {...session.DialogProps} />\n          </Suspense>\n        ) : null}\n        <div className={classes.menuBarAndComponents}>\n          <div className={classes.menuBar}>\n            <AppBar className={classes.appBar} position=\"static\">\n              <Toolbar>\n                {menus.map(menu => (\n                  <DropDownMenu\n                    key={menu.label}\n                    menuTitle={menu.label}\n                    menuItems={menu.menuItems}\n                    session={session}\n                  />\n                ))}\n                <div className={classes.grow} />\n                <Tooltip title=\"Rename Session\" arrow>\n                  <EditableTypography\n                    value={name}\n                    setValue={handleNameChange}\n                    variant=\"body1\"\n                    classes={{\n                      inputBase: classes.inputBase,\n                      inputRoot: classes.inputRoot,\n                      inputFocused: classes.inputFocused,\n                    }}\n                  />\n                </Tooltip>\n                {HeaderButtons}\n                <div className={classes.grow} />\n                <div style={{ width: 150, maxHeight: 48 }}>\n                  <Logo session={session} />\n                </div>\n              </Toolbar>\n            </AppBar>\n          </div>\n          <div className={classes.components}>\n            {views.length ? (\n              views.map(view => {\n                const viewType = pluginManager.getViewType(view.type)\n                if (!viewType) {\n                  throw new Error(`unknown view type ${view.type}`)\n                }\n                const { ReactComponent } = viewType\n                return (\n                  <ViewContainer\n                    key={`view-${view.id}`}\n                    view={view}\n                    onClose={() => session.removeView(view)}\n                  >\n                    <Suspense fallback={<div>Loading...</div>}>\n                      <ReactComponent\n                        model={view}\n                        session={session}\n                        getTrackType={pluginManager.getTrackType}\n                      />\n                    </Suspense>\n                  </ViewContainer>\n                )\n              })\n            ) : (\n              <Paper className={classes.selectPaper}>\n                <Typography>Select a view to launch</Typography>\n                <Select\n                  value={value}\n                  onChange={event => setValue(event.target.value)}\n                >\n                  {viewTypes.map(({ name }: { name: string }) => (\n                    <MenuItem key={name} value={name}>\n                      {name}\n                    </MenuItem>\n                  ))}\n                </Select>\n                <Button\n                  onClick={() => {\n                    session.addView(value, {})\n                  }}\n                  variant=\"contained\"\n                  color=\"primary\"\n                >\n                  Launch view\n                </Button>\n              </Paper>\n            )}\n\n            {/* blank space at the bottom of screen allows scroll */}\n            <div style={{ height: 300 }} />\n          </div>\n        </div>\n\n        {activeWidgets.size > 0 && minimized ? (\n          <Tooltip title=\"Open drawer widget\">\n            <Fab\n              className={\n                drawerPosition === 'right' ? classes.fabRight : classes.fabLeft\n              }\n              color=\"primary\"\n              data-testid=\"drawer-maximize\"\n              onClick={() => session.showWidgetDrawer()}\n            >\n              <LaunchIcon />\n            </Fab>\n          </Tooltip>\n        ) : null}\n\n        {drawerVisible && drawerPosition === 'right' ? (\n          <DrawerWidget session={session} />\n        ) : null}\n\n        <Snackbar session={session} />\n      </div>\n    )\n  },\n)\n\nexport default App\n","import React from 'react'\nimport { observer } from 'mobx-react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Divider,\n  IconButton,\n  Typography,\n} from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close'\n\nconst useStyles = makeStyles(theme => ({\n  closeButton: {\n    position: 'absolute',\n    right: theme.spacing(1),\n    top: theme.spacing(1),\n    color: theme.palette.grey[500],\n  },\n}))\n\nfunction ReturnToImportFormDialog({\n  model,\n  handleClose,\n}: {\n  model: { clearView: Function }\n  handleClose: () => void\n}) {\n  const classes = useStyles()\n  return (\n    <Dialog maxWidth=\"xl\" open onClose={handleClose}>\n      <DialogTitle>\n        Reference sequence\n        {handleClose ? (\n          <IconButton\n            className={classes.closeButton}\n            onClick={() => handleClose()}\n          >\n            <CloseIcon />\n          </IconButton>\n        ) : null}\n      </DialogTitle>\n      <Divider />\n\n      <DialogContent>\n        <Typography>\n          Are you sure you want to return to the import form? This will lose\n          your current view\n        </Typography>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          onClick={() => {\n            model.clearView()\n            handleClose()\n          }}\n          variant=\"contained\"\n          color=\"primary\"\n          autoFocus\n        >\n          OK\n        </Button>\n        <Button\n          onClick={() => handleClose()}\n          color=\"secondary\"\n          variant=\"contained\"\n        >\n          Cancel\n        </Button>\n      </DialogActions>\n    </Dialog>\n  )\n}\n\nexport default observer(ReturnToImportFormDialog)\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport ReactPropTypes from 'prop-types'\nimport React, { useRef, useEffect } from 'react'\nimport { drawImageOntoCanvasContext } from '../util/offscreenCanvasPonyfill'\n\nfunction PrerenderedCanvas(props: {\n  width: number\n  height: number\n  highResolutionScaling: number\n  style: any\n  imageData: any\n  showSoftClip?: boolean\n  blockKey?: string\n}) {\n  const {\n    width,\n    height,\n    highResolutionScaling,\n    style,\n    imageData,\n    blockKey,\n    showSoftClip,\n  } = props\n\n  const featureCanvas = useRef<HTMLCanvasElement>(null)\n\n  useEffect(() => {\n    if (!imageData) {\n      return\n    }\n    const canvas = featureCanvas.current\n    if (!canvas) {\n      return\n    }\n    const context = canvas.getContext('2d')\n    if (!context) {\n      return\n    }\n    drawImageOntoCanvasContext(imageData, context)\n  }, [imageData])\n\n  const softClipString = showSoftClip ? '_softclipped' : ''\n  const blockKeyStr = blockKey ? '_' + blockKey : ''\n  const testId = `prerendered_canvas${softClipString}${blockKeyStr}`\n  return (\n    <canvas\n      data-testid={testId}\n      ref={featureCanvas}\n      width={width * highResolutionScaling}\n      height={height * highResolutionScaling}\n      style={{ width, height, ...style }}\n    />\n  )\n}\n\nPrerenderedCanvas.propTypes = {\n  height: ReactPropTypes.number.isRequired,\n  width: ReactPropTypes.number.isRequired,\n  highResolutionScaling: ReactPropTypes.number,\n  style: ReactPropTypes.objectOf(ReactPropTypes.any),\n  imageData: ReactPropTypes.any,\n  // config: ReactPropTypes.objectOf(ReactPropTypes.any),\n}\nPrerenderedCanvas.defaultProps = {\n  imageData: undefined,\n  highResolutionScaling: 1,\n  style: {},\n  // config: {},\n}\n\nexport default PrerenderedCanvas\n","import React, { useEffect, useState } from 'react'\nimport { makeStyles } from '@material-ui/core'\nimport { observer } from 'mobx-react'\nimport { Feature } from '../util/simpleFeature'\nimport { readConfObject, AnyConfigurationModel } from '../configuration'\n\nconst useStyles = makeStyles({\n  hoverLabel: {\n    border: '1px solid black',\n    position: 'absolute',\n    background: '#fffa',\n    pointerEvents: 'none',\n    zIndex: 10000,\n  },\n})\n\nconst Tooltip = ({\n  offsetX,\n  offsetY,\n  configuration,\n  feature,\n  timeout = 300,\n}: {\n  offsetX: number\n  offsetY: number\n  configuration: AnyConfigurationModel\n  feature?: Feature\n  timeout?: number\n}) => {\n  const classes = useStyles()\n  const [shown, setShown] = useState(false)\n  useEffect(() => {\n    // only show the loading message after short timeout to prevent excessive\n    // flickering\n    const handle = setTimeout(() => setShown(true), timeout)\n    return () => clearTimeout(handle)\n  })\n  if (feature && shown) {\n    const text = readConfObject(configuration, 'mouseover', { feature })\n    return (\n      <div\n        className={classes.hoverLabel}\n        style={{ left: offsetX, top: offsetY }}\n      >\n        {text}\n      </div>\n    )\n  }\n  return null\n}\n\nexport default observer(Tooltip)\n","import { Observable, fromEvent } from 'rxjs'\n\nclass AbortError extends Error {\n  public code: string | undefined\n}\n\n/**\n * properly check if the given AbortSignal is aborted.\n * per the standard, if the signal reads as aborted,\n * this function throws either a DOMException AbortError, or a regular error\n * with a `code` attribute set to `ERR_ABORTED`.\n *\n * for convenience, passing `undefined` is a no-op\n *\n * @param signal -\n * @returns nothing\n */\nexport function checkAbortSignal(signal?: AbortSignal): void {\n  if (!signal) {\n    return\n  }\n\n  if (!(signal instanceof AbortSignal)) {\n    throw new TypeError('must pass an AbortSignal')\n  }\n\n  if (signal.aborted) {\n    throw makeAbortError()\n  }\n}\n\nfunction timeout(ms: number) {\n  return new Promise(resolve => setTimeout(resolve, ms))\n}\n/**\n * Skips to the next tick, then runs `checkAbortSignal`.\n * Await this to inside an otherwise synchronous loop to\n * provide a place to break when an abort signal is received.\n */\nexport async function abortBreakPoint(signal?: AbortSignal) {\n  // it was observed that an actual timeout is needed to get the aborting (wrap\n  // hicrenderer in a try catch, console.error the error, and rethrow the error\n  // to see). using await Promise.resolve() did not appear to allow aborting to\n  // occur\n  await timeout(1)\n  checkAbortSignal(signal)\n}\n\nexport function makeAbortError() {\n  if (typeof DOMException !== 'undefined') {\n    return new DOMException('aborted', 'AbortError')\n  }\n  const e = new AbortError('aborted')\n  e.code = 'ERR_ABORTED'\n  return e\n}\n\nexport function observeAbortSignal(signal?: AbortSignal): Observable<Event> {\n  if (!signal) {\n    return Observable.create()\n  }\n  return fromEvent(signal, 'abort')\n}\n\n/**\n * check if the given exception was caused by an operation being intentionally aborted\n * @param exception -\n */\nexport function isAbortException(exception: unknown): boolean {\n  return (\n    exception instanceof Error &&\n    // DOMException\n    (exception.name === 'AbortError' ||\n      // standard-ish non-DOM abort exception\n      (exception as AbortError).code === 'ERR_ABORTED' ||\n      // message contains aborted for bubbling through RPC\n      // things we have seen that we want to catch here\n      // Error: aborted\n      // AbortError: aborted\n      // AbortError: The user aborted a request.\n      !!exception.message.match(/\\b(aborted|AbortError)\\b/i))\n  )\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { getSerializedSvg } from './svg'\nimport { Command, isMethodCall, MethodName, SetterName } from './types'\n\n/** get the params type of real method in OffscreenCanvasRenderingContext2D */\ntype RealP<METHODNAME extends keyof OffscreenCanvasRenderingContext2D> =\n  OffscreenCanvasRenderingContext2D[METHODNAME] extends (...arg0: any[]) => any\n    ? Parameters<OffscreenCanvasRenderingContext2D[METHODNAME]>\n    : never\n\n/** get the return type of real method in OffscreenCanvasRenderingContext2D */\ntype RealRet<METHODNAME extends keyof OffscreenCanvasRenderingContext2D> =\n  OffscreenCanvasRenderingContext2D[METHODNAME] extends (...arg0: any[]) => any\n    ? ReturnType<OffscreenCanvasRenderingContext2D[METHODNAME]>\n    : never\n\n/** get the type of the params of a method of the canvas shim */\nexport type ShimP<\n  METHODNAME extends keyof OffscreenCanvasRenderingContext2DShim,\n> = OffscreenCanvasRenderingContext2DShim[METHODNAME] extends (\n  ...arg0: any[]\n) => any\n  ? Parameters<OffscreenCanvasRenderingContext2DShim[METHODNAME]>\n  : never\n\n/** decode all the commands in the given buffer and replay them onto the given context */\nexport function replayCommandsOntoContext(\n  targetContext: CanvasRenderingContext2D,\n  encodedCommands: Iterable<Command>,\n) {\n  for (const command of encodedCommands) {\n    if (isMethodCall(command)) {\n      // @ts-ignore\n      // eslint-disable-next-line prefer-spread\n      targetContext[command.name].apply(targetContext, command.args)\n    } else {\n      // @ts-ignore\n      targetContext[command.name] = command.args[0]\n    }\n  }\n}\n\nexport default class OffscreenCanvasRenderingContext2DShim {\n  width: number\n  height: number\n\n  currentFont = '12px Courier New, monospace'\n  currentStrokeStyle = ''\n  currentFillStyle = ''\n\n  recordedCommands: Command[] = []\n\n  constructor(width: number, height: number) {\n    this.width = width\n    this.height = height\n  }\n\n  private pushMethodCall(name: MethodName, args: unknown[]) {\n    this.recordedCommands.push({ name, args })\n  }\n\n  private pushSetterCall(name: SetterName, arg: unknown) {\n    this.recordedCommands.push({ name, args: [arg] })\n  }\n\n  getSerializedCommands() {\n    return this.recordedCommands\n  }\n\n  getSerializedSvg() {\n    return getSerializedSvg(this)\n  }\n\n  getCommands() {\n    return this.recordedCommands\n  }\n\n  // setters (no getters working)\n  set strokeStyle(style: string) {\n    if (style !== this.currentStrokeStyle) {\n      this.pushSetterCall('strokeStyle', style)\n      this.currentStrokeStyle = style\n    }\n  }\n\n  set fillStyle(style: string) {\n    if (style !== this.currentFillStyle) {\n      this.pushSetterCall('fillStyle', style)\n      this.currentFillStyle = style\n    }\n  }\n\n  set font(style: string) {\n    this.currentFont = style\n    this.pushSetterCall('font', style)\n  }\n\n  // methods\n  arc(...args: RealP<'arc'>): RealRet<'arc'> {\n    this.pushMethodCall('arc', args)\n  }\n\n  arcTo(...args: RealP<'arcTo'>): RealRet<'arcTo'> {\n    this.pushMethodCall('arcTo', args)\n  }\n\n  beginPath(...args: RealP<'beginPath'>): RealRet<'beginPath'> {\n    this.pushMethodCall('beginPath', args)\n  }\n\n  clearRect(...args: RealP<'clearRect'>): RealRet<'clearRect'> {\n    this.pushMethodCall('clearRect', args)\n  }\n\n  closePath(...args: RealP<'closePath'>): RealRet<'closePath'> {\n    this.pushMethodCall('closePath', args)\n  }\n\n  ellipse(...args: RealP<'ellipse'>): RealRet<'ellipse'> {\n    this.pushMethodCall('ellipse', args)\n  }\n\n  fill(...args: RealP<'fill'>): RealRet<'fill'> {\n    this.pushMethodCall('fill', args)\n  }\n\n  fillRect(...args: RealP<'fillRect'>): RealRet<'fillRect'> {\n    const [x, y, w, h] = args\n    if (x > this.width || x + w < 0) {\n      return\n    }\n    const nx = Math.max(x, 0)\n    const nw = w - (nx - x)\n    this.pushMethodCall('fillRect', [nx, y, nw, h])\n  }\n\n  fillText(...args: RealP<'fillText'>): RealRet<'fillText'> {\n    // if (x > this.width || x + 1000 < 0) {\n    //   return\n    // }\n    this.pushMethodCall('fillText', args)\n  }\n\n  lineTo(...args: RealP<'lineTo'>): RealRet<'lineTo'> {\n    this.pushMethodCall('lineTo', args)\n  }\n\n  measureText(...args: RealP<'measureText'>) {\n    const [text] = args\n    const height = Number((this.currentFont.match(/\\d+/) || [])[0])\n    return {\n      width: (height / 2) * text.length,\n      height,\n    }\n  }\n\n  moveTo(...args: RealP<'moveTo'>): RealRet<'moveTo'> {\n    this.pushMethodCall('moveTo', args)\n  }\n\n  quadraticCurveTo(\n    ...args: RealP<'quadraticCurveTo'>\n  ): RealRet<'quadraticCurveTo'> {\n    this.pushMethodCall('quadraticCurveTo', args)\n  }\n\n  rect(...args: RealP<'rect'>): RealRet<'rect'> {\n    this.pushMethodCall('rect', args)\n  }\n\n  restore(...args: RealP<'restore'>): RealRet<'restore'> {\n    this.pushMethodCall('restore', args)\n  }\n\n  rotate(...args: RealP<'rotate'>): RealRet<'rotate'> {\n    this.pushMethodCall('rotate', args)\n  }\n\n  save(...args: RealP<'save'>): RealRet<'save'> {\n    this.pushMethodCall('save', args)\n  }\n\n  setTransform(...args: RealP<'setTransform'>): RealRet<'setTransform'> {\n    this.pushMethodCall('setTransform', args)\n  }\n\n  scale(...args: RealP<'scale'>): RealRet<'scale'> {\n    this.pushMethodCall('scale', args)\n  }\n\n  //* shim does not support passing a Path2D object */\n  stroke(): RealRet<'stroke'> {\n    this.pushMethodCall('stroke', [])\n  }\n\n  strokeRect(...args: RealP<'strokeRect'>): RealRet<'strokeRect'> {\n    this.pushMethodCall('strokeRect', args)\n  }\n\n  strokeText(...args: RealP<'strokeText'>): RealRet<'strokeText'> {\n    this.pushMethodCall('strokeText', args)\n  }\n\n  transform(...args: RealP<'transform'>): RealRet<'transform'> {\n    this.pushMethodCall('transform', args)\n  }\n\n  translate(...args: RealP<'translate'>): RealRet<'translate'> {\n    this.pushMethodCall('translate', args)\n  }\n}\n","import OffscreenCanvasRenderingContext2DShim from './Canvas2DContextShim'\n\nexport default class OffscreenCanvasShim {\n  width: number\n  height: number\n  context: OffscreenCanvasRenderingContext2DShim\n\n  constructor(width: number, height: number) {\n    this.width = width\n    this.height = height\n    this.context = new OffscreenCanvasRenderingContext2DShim(\n      this.width,\n      this.height,\n    )\n  }\n\n  getContext(type: '2d') {\n    if (type !== '2d') {\n      throw new Error(`unknown type ${type}`)\n    }\n    return this.context\n  }\n\n  toDataURL(): string {\n    throw new Error('not supported')\n  }\n\n  getSerializedSvg() {\n    return this.context?.getSerializedSvg()\n  }\n}\n","// This file is a ponyfill for the HTML5 OffscreenCanvas API.\n\nimport isNode from 'detect-node'\nimport OffscreenCanvasShim from './CanvasShim'\n\nimport {\n  AbstractCanvas,\n  AbstractImageBitmap,\n  CanvasImageDataShim,\n  isCanvasImageDataShim,\n} from './types'\nimport type {\n  createCanvas as NodeCreateCanvas,\n  Canvas as NodeCanvas,\n} from 'canvas'\nimport { replayCommandsOntoContext } from './Canvas2DContextShim/context'\n\nexport let createCanvas: (width: number, height: number) => AbstractCanvas\nexport let createImageBitmap: (\n  canvas: AbstractCanvas,\n) => Promise<AbstractImageBitmap>\n\n/** the JS class (constructor) for offscreen-generated image bitmap data */\nexport let ImageBitmapType: Function\n\nexport function drawImageOntoCanvasContext(\n  imageData: AbstractImageBitmap,\n  context: CanvasRenderingContext2D,\n) {\n  if (isCanvasImageDataShim(imageData)) {\n    replayCommandsOntoContext(context, imageData.serializedCommands)\n  } else if (imageData instanceof ImageBitmapType) {\n    context.drawImage(imageData as CanvasImageSource, 0, 0)\n    // @ts-ignore\n  } else if (imageData.dataURL) {\n    throw new Error('dataURL deserialization no longer supported')\n    // const img = new Image()\n    // img.onload = () => context.drawImage(img, 0, 0)\n    // img.src = imageData.dataURL\n  }\n}\n\nconst weHave = {\n  realOffscreenCanvas: typeof OffscreenCanvas === 'function',\n  node: isNode,\n}\nif (weHave.realOffscreenCanvas) {\n  createCanvas = (width, height) => new OffscreenCanvas(width, height)\n  // @ts-ignore\n  // eslint-disable-next-line no-restricted-globals\n  createImageBitmap = window.createImageBitmap || self.createImageBitmap\n  // eslint-disable-next-line no-restricted-globals\n  ImageBitmapType = window.ImageBitmap || self.ImageBitmap\n} else if (weHave.node) {\n  // use node-canvas if we are running in node (i.e. automated tests)\n  const { createCanvas: nodeCreateCanvas, Image } = require('canvas')\n  createCanvas = nodeCreateCanvas as typeof NodeCreateCanvas\n  createImageBitmap = async (canvas, ...otherargs) => {\n    if (otherargs.length) {\n      throw new Error(\n        'only one-argument uses of createImageBitmap are supported by the node offscreencanvas ponyfill',\n      )\n    }\n    const dataUri = (canvas as NodeCanvas).toDataURL()\n    const img = new Image()\n    return new Promise((resolve, reject) => {\n      img.onload = () => resolve(img)\n      img.onerror = reject\n      img.src = dataUri\n    })\n  }\n  ImageBitmapType = Image\n} else {\n  createCanvas = (width, height) => {\n    return new OffscreenCanvasShim(width, height)\n  }\n  createImageBitmap = async canvas => {\n    const ctx = (canvas as OffscreenCanvasShim).getContext('2d')\n    const d: CanvasImageDataShim = {\n      height: ctx.height,\n      width: ctx.width,\n      serializedCommands: ctx.getSerializedCommands(),\n      containsNoTransferables: true,\n    }\n    return d\n  }\n  ImageBitmapType = String\n}\n","import OffscreenCanvasShim from './CanvasShim'\nimport OffscreenCanvasRenderingContext2DShim from './Canvas2DContextShim'\nimport type * as NodeCanvas from 'canvas'\nimport isObject from 'is-object'\nimport { Command } from './Canvas2DContextShim/types'\n\nexport type AbstractCanvas =\n  | OffscreenCanvas\n  | OffscreenCanvasShim\n  | NodeCanvas.Canvas\n\nexport type Abstract2DCanvasContext =\n  | OffscreenCanvasRenderingContext2D\n  | OffscreenCanvasRenderingContext2DShim\n\nexport type AbstractImageBitmap = Pick<ImageBitmap, 'height' | 'width'>\n\n/** a plain-object (JSON) serialization of a OffscreenCanvasRenderingContext2DShim */\nexport interface CanvasImageDataShim {\n  serializedCommands: Command[]\n  containsNoTransferables: true\n  height: number\n  width: number\n}\n\nexport function isCanvasImageDataShim(\n  thing: unknown,\n): thing is CanvasImageDataShim {\n  return (\n    isObject(thing) &&\n    'height' in thing &&\n    'serializedCommands' in thing &&\n    Array.isArray(thing.serializedCommands)\n  )\n}\n","import React from 'react'\nimport { createCanvas, createImageBitmap } from './ponyfill'\nimport OffscreenCanvasShim from './CanvasShim'\nimport { blobToDataURL } from '..'\n\nexport * from './CanvasShim'\n\nexport async function renderToAbstractCanvas(\n  width: number,\n  height: number,\n  opts: {\n    exportSVG?: { rasterizeLayers?: boolean }\n    highResolutionScaling: number\n  },\n  cb: Function,\n) {\n  const { exportSVG, highResolutionScaling = 1 } = opts\n  if (exportSVG && !exportSVG.rasterizeLayers) {\n    const fakeCanvas = new OffscreenCanvasShim(width, height)\n    const fakeCtx = fakeCanvas.getContext('2d')\n    await cb(fakeCtx)\n    return {\n      reactElement: fakeCanvas.getSerializedSvg(),\n    }\n  }\n  if (exportSVG && exportSVG.rasterizeLayers) {\n    const scale = 4\n    const canvas = createCanvas(Math.ceil(width * scale), height * scale)\n    const ctx = canvas.getContext('2d')\n    if (!ctx) {\n      throw new Error('2d canvas rendering not supported on this platform')\n    }\n    ctx.scale(scale, scale)\n    await cb(ctx)\n\n    // two methods needed for converting canvas to PNG, one for webworker\n    // offscreen canvas, one for main thread\n    return {\n      reactElement: (\n        <image\n          width={width}\n          height={height}\n          xlinkHref={\n            'convertToBlob' in canvas\n              ? await blobToDataURL(\n                  await canvas.convertToBlob({\n                    type: 'image/png',\n                  }),\n                )\n              : canvas.toDataURL()\n          }\n        />\n      ),\n    }\n  }\n\n  const canvas = createCanvas(\n    Math.ceil(width * highResolutionScaling),\n    height * highResolutionScaling,\n  )\n  const ctx = canvas.getContext('2d')\n  if (!ctx) {\n    throw new Error('2d canvas rendering not supported on this platform')\n  }\n  ctx.scale(highResolutionScaling, highResolutionScaling)\n  await cb(ctx)\n\n  return { imageData: await createImageBitmap(canvas) }\n}\n","import React from 'react'\nimport {\n  isStateTreeNode,\n  Instance,\n  SnapshotIn,\n  IAnyStateTreeNode,\n} from 'mobx-state-tree'\nimport { AnyConfigurationModel } from '../../configuration/configurationSchema'\n\nimport assemblyManager from '../../assemblyManager'\nimport TextSearchManager from '../../TextSearch/TextSearchManager'\nimport { MenuItem } from '../../ui'\nimport {\n  NoAssemblyRegion as MUNoAssemblyRegion,\n  Region as MUIRegion,\n  LocalPathLocation as MULocalPathLocation,\n  UriLocation as MUUriLocation,\n  BlobLocation as MUBlobLocation,\n} from './mst'\nimport RpcManager from '../../rpc/RpcManager'\nimport { Feature } from '../simpleFeature'\nimport { BaseInternetAccountModel } from '../../pluggableElementTypes/models'\n\nexport * from './util'\n\n/** abstract type for a model that contains multiple views */\nexport interface AbstractViewContainer extends IAnyStateTreeNode {\n  views: AbstractViewModel[]\n  removeView(view: AbstractViewModel): void\n  addView(\n    typeName: string,\n    initialState: Record<string, unknown>,\n  ): void | AbstractViewModel\n}\nexport function isViewContainer(\n  thing: unknown,\n): thing is AbstractViewContainer {\n  return (\n    isStateTreeNode(thing) &&\n    'removeView' in thing &&\n    'addView' in thing &&\n    'views' in thing\n  )\n}\n\nexport type NotificationLevel = 'error' | 'info' | 'warning' | 'success'\nexport interface SnackAction {\n  name: string\n  onClick: () => void\n}\n\nexport type AssemblyManager = Instance<ReturnType<typeof assemblyManager>>\nexport type { TextSearchManager }\nexport interface BasePlugin {\n  version?: string\n  name: string\n  url?: string\n}\n\nexport interface JBrowsePlugin {\n  name: string\n  authors: string[]\n  description: string\n  location: string\n  url?: string\n  umdUrl?: string\n  esmUrl?: string\n  cjsUrl?: string\n  license: string\n  image?: string\n}\n\nexport type DialogComponentType =\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  | React.LazyExoticComponent<React.FC<any>>\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  | React.FC<any>\n\n/** minimum interface that all session state models must implement */\nexport interface AbstractSessionModel extends AbstractViewContainer {\n  setSelection(feature: Feature): void\n  clearSelection(): void\n  configuration: AnyConfigurationModel\n  rpcManager: RpcManager\n  assemblyNames: string[]\n  assemblies: AnyConfigurationModel[]\n  selection?: unknown\n  duplicateCurrentSession?(): void\n  notify(message: string, level?: NotificationLevel, action?: SnackAction): void\n  assemblyManager: AssemblyManager\n  version: string\n  getTrackActionMenuItems?: Function\n  addAssembly?: Function\n  removeAssembly?: Function\n  textSearchManager?: TextSearchManager\n  connections: AnyConfigurationModel[]\n  deleteConnection?: Function\n  sessionConnections?: AnyConfigurationModel[]\n  connectionInstances?: { name: string }[]\n  makeConnection?: Function\n  adminMode?: boolean\n  showWidget?: Function\n  addWidget?: Function\n\n  DialogComponent?: DialogComponentType\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  DialogProps: any\n  queueDialog: (\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    callback: (doneCallback: Function) => [DialogComponentType, any],\n  ) => void\n  name: string\n  id?: string\n}\nexport function isSessionModel(thing: unknown): thing is AbstractSessionModel {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'rpcManager' in thing &&\n    'configuration' in thing\n  )\n}\n\n/** abstract interface for a session allows editing configurations */\nexport interface SessionWithConfigEditing extends AbstractSessionModel {\n  editConfiguration(configuration: AnyConfigurationModel): void\n}\nexport function isSessionModelWithConfigEditing(\n  thing: unknown,\n): thing is SessionWithConfigEditing {\n  return isSessionModel(thing) && 'editConfiguration' in thing\n}\n\n/** abstract interface for a session allows adding tracks */\nexport interface SessionWithConfigEditing extends AbstractSessionModel {\n  addTrackConf(\n    configuration: AnyConfigurationModel | SnapshotIn<AnyConfigurationModel>,\n  ): void\n}\nexport function isSessionWithAddTracks(\n  thing: unknown,\n): thing is SessionWithConfigEditing {\n  return isSessionModel(thing) && 'addTrackConf' in thing\n}\n\nexport interface Widget {\n  type: string\n  id: string\n}\n\n/** abstract interface for a session that manages widgets */\nexport interface SessionWithWidgets extends AbstractSessionModel {\n  minimized: boolean\n  visibleWidget?: Widget\n  widgets: Map<string, Widget>\n  activeWidgets: Map<string, Widget>\n  addWidget(\n    typeName: string,\n    id: string,\n    initialState?: Record<string, unknown>,\n    configuration?: { type: string },\n  ): Widget\n  showWidget(widget: unknown): void\n  hideWidget(widget: unknown): void\n}\n\n/* only some sessions with widgets use a drawer widget */\nexport interface SessionWithDrawerWidgets extends SessionWithWidgets {\n  drawerWidth: number\n  resizeDrawer(arg: number): number\n  minimizeWidgetDrawer(): void\n  showWidgetDrawer: () => void\n  drawerPosition: string\n  setDrawerPosition(arg: string): void\n}\n\nexport function isSessionModelWithWidgets(\n  thing: unknown,\n): thing is SessionWithWidgets {\n  return isSessionModel(thing) && 'widgets' in thing\n}\n\nexport interface SessionWithSessionPlugins extends AbstractSessionModel {\n  sessionPlugins: JBrowsePlugin[]\n  addSessionPlugin: Function\n  removeSessionPlugin: Function\n}\nexport function isSessionWithSessionPlugins(\n  thing: unknown,\n): thing is SessionWithSessionPlugins {\n  return isSessionModel(thing) && 'sessionPlugins' in thing\n}\n\n/** abstract interface for a session that manages a global selection */\nexport interface SelectionContainer extends AbstractSessionModel {\n  selection?: unknown\n  setSelection(thing: unknown): void\n}\nexport function isSelectionContainer(\n  thing: unknown,\n): thing is SelectionContainer {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'selection' in thing &&\n    'setSelection' in thing\n  )\n}\n\n/** minimum interface that all view state models must implement */\nexport interface AbstractViewModel {\n  id: string\n  type: string\n  width: number\n  setWidth(width: number): void\n  displayName: string | undefined\n  setDisplayName: (arg: string) => void\n  menuItems: () => MenuItem[]\n}\nexport function isViewModel(thing: unknown): thing is AbstractViewModel {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'width' in thing &&\n    'setWidth' in thing\n  )\n}\n\ntype AbstractTrackModel = {}\nexport function isTrackModel(thing: unknown): thing is AbstractTrackModel {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'configuration' in thing &&\n    // @ts-ignore\n    thing.configuration.trackId\n  )\n}\n\nexport interface AbstractDisplayModel {\n  id: string\n  parentTrack: AbstractTrackModel\n  renderDelay: number\n  rendererType: any // eslint-disable-line @typescript-eslint/no-explicit-any\n  cannotBeRenderedReason?: string\n}\nexport function isDisplayModel(thing: unknown): thing is AbstractDisplayModel {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'configuration' in thing &&\n    // @ts-ignore\n    thing.configuration.displayId\n  )\n}\n\nexport interface TrackViewModel extends AbstractViewModel {\n  showTrack(trackId: string): void\n  hideTrack(trackId: string): void\n}\nexport function isTrackViewModel(thing: unknown): thing is TrackViewModel {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'showTrack' in thing &&\n    'hideTrack' in thing\n  )\n}\n\n/** minimum interface for the root MST model of a JBrowse app */\nexport interface AbstractRootModel {\n  jbrowse: IAnyStateTreeNode\n  session?: AbstractSessionModel\n  setDefaultSession?(): void\n  adminMode?: boolean\n  error?: unknown\n}\n\n/** root model with more included for the heavier JBrowse web and desktop app */\nexport interface AppRootModel extends AbstractRootModel {\n  isAssemblyEditing: boolean\n  isDefaultSessionEditing: boolean\n  setAssemblyEditing: (arg: boolean) => boolean\n  setDefaultSessionEditing: (arg: boolean) => boolean\n  internetAccounts: BaseInternetAccountModel[]\n  findAppropriateInternetAccount(\n    location: UriLocation,\n  ): BaseInternetAccountModel | undefined\n}\n\nexport function isAppRootModel(thing: unknown): thing is AppRootModel {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'isAssemblyEditing' in thing &&\n    'findAppropriateInternetAccount' in thing\n  )\n}\n\n/** a root model that manages global menus */\nexport interface AbstractMenuManager {\n  appendMenu(menuName: string): void\n  insertMenu(menuName: string, position: number): number\n  insertInMenu(menuName: string, menuItem: MenuItem, position: number): number\n  appendToMenu(menuName: string, menuItem: MenuItem): number\n  appendToSubMenu(menuPath: string[], menuItem: MenuItem): number\n  insertInSubMenu(\n    menuPath: string[],\n    menuItem: MenuItem,\n    position: number,\n  ): number\n}\nexport function isAbstractMenuManager(\n  thing: unknown,\n): thing is AbstractMenuManager {\n  return (\n    typeof thing === 'object' &&\n    thing !== null &&\n    'appendMenu' in thing &&\n    'appendToSubMenu' in thing\n  )\n}\n\n// Empty interfaces required by mobx-state-tree\n// See https://mobx-state-tree.js.org/tips/typescript#using-a-mst-type-at-design-time\n/* eslint-disable @typescript-eslint/no-empty-interface */\n\nexport interface NoAssemblyRegion\n  extends SnapshotIn<typeof MUNoAssemblyRegion> {}\n\nexport interface Region extends SnapshotIn<typeof MUIRegion> {}\n\nexport interface AugmentedRegion extends Region {\n  originalRefName?: string\n}\n\nexport interface LocalPathLocation\n  extends SnapshotIn<typeof MULocalPathLocation> {}\n\nexport interface UriLocation extends SnapshotIn<typeof MUUriLocation> {}\n\nexport function isUriLocation(location: unknown): location is UriLocation {\n  return (\n    typeof location === 'object' &&\n    location !== null &&\n    'locationType' in location &&\n    'uri' in location\n  )\n}\nexport class AuthNeededError extends Error {\n  constructor(public message: string, public url: string) {\n    super(message)\n    this.name = 'AuthNeededError'\n\n    Object.setPrototypeOf(this, AuthNeededError.prototype)\n  }\n}\n\nexport class RetryError extends Error {\n  constructor(public message: string, public internetAccountId: string) {\n    super(message)\n    this.name = 'RetryError'\n  }\n}\n\nexport function isAuthNeededException(\n  exception: unknown,\n): exception is AuthNeededError {\n  return (\n    exception instanceof Error &&\n    // DOMException\n    (exception.name === 'AuthNeededError' ||\n      (exception as AuthNeededError).url !== undefined)\n  )\n}\n\nexport function isRetryException(exception: Error): boolean {\n  return (\n    // DOMException\n    exception.name === 'RetryError' ||\n    (exception as RetryError).internetAccountId !== undefined\n  )\n}\n\nexport interface BlobLocation extends SnapshotIn<typeof MUBlobLocation> {}\n\nexport type FileLocation = LocalPathLocation | UriLocation | BlobLocation\n\n// These types are slightly different than the MST models representing a\n// location because a blob cannot be stored in a MST, so this is the\n// pre-processed file location\nexport type PreUriLocation = { uri: string }\nexport type PreLocalPathLocation = { localPath: string }\nexport type PreBlobLocation = { blob: File }\nexport type PreFileLocation =\n  | PreUriLocation\n  | PreLocalPathLocation\n  | PreBlobLocation\n","import { when as mobxWhen } from 'mobx'\nimport { makeAbortError } from './aborting'\n\ninterface WhenOpts {\n  timeout?: number\n  signal?: AbortSignal\n  name?: string\n}\n\n/**\n * Wrapper for mobx `when` that adds timeout and aborting support.\n */\nexport function when(\n  getter: () => boolean,\n  { timeout, signal, name }: WhenOpts = {},\n) {\n  return new Promise((resolve, reject) => {\n    let finished = false\n\n    const whenPromise = mobxWhen(getter)\n\n    // set up timeout\n    let timeoutId: ReturnType<typeof setTimeout> | undefined\n    let finishTimeout = () => {}\n    if (timeout) {\n      timeoutId = setTimeout(() => {\n        if (!finished) {\n          finished = true\n          whenPromise.cancel()\n          reject(new Error(`timed out waiting for ${name || 'whenPresent'}`))\n        }\n      }, timeout)\n      finishTimeout = () => timeoutId && clearTimeout(timeoutId)\n    }\n\n    // set up aborting\n    if (signal) {\n      signal.addEventListener('abort', () => {\n        if (!finished) {\n          finished = true\n\n          // mobx when supports a cancel method\n          whenPromise.cancel()\n          finishTimeout()\n\n          reject(makeAbortError())\n        }\n      })\n    }\n\n    whenPromise\n      .then(() => {\n        if (!finished) {\n          finished = true\n          finishTimeout()\n\n          resolve(true)\n        }\n      })\n      .catch(err => {\n        if (!finished) {\n          finished = true\n          finishTimeout()\n\n          reject(err)\n        }\n      })\n  })\n}\n\n/**\n * Wrapper for mobx `when` that makes a promise for the return value\n * of the given function at the point in time when it becomes not\n * undefined and not null.\n */\nexport async function whenPresent<FUNCTION extends () => unknown>(\n  getter: FUNCTION,\n  opts: WhenOpts = {},\n): Promise<NonNullable<ReturnType<FUNCTION>>> {\n  await when(() => {\n    const val = getter()\n    return val !== undefined && val !== null\n  }, opts)\n\n  return getter() as NonNullable<ReturnType<FUNCTION>>\n}\n","import { types, IAnyType, isModelType, isType } from 'mobx-state-tree'\n\n// Pluggable elements\nimport PluggableElementBase from './pluggableElementTypes/PluggableElementBase'\nimport RendererType from './pluggableElementTypes/renderers/RendererType'\nimport AdapterType from './pluggableElementTypes/AdapterType'\nimport TrackType from './pluggableElementTypes/TrackType'\nimport DisplayType from './pluggableElementTypes/DisplayType'\nimport ViewType from './pluggableElementTypes/ViewType'\nimport WidgetType from './pluggableElementTypes/WidgetType'\nimport ConnectionType from './pluggableElementTypes/ConnectionType'\nimport RpcMethodType from './pluggableElementTypes/RpcMethodType'\nimport InternetAccountType from './pluggableElementTypes/InternetAccountType'\nimport TextSearchAdapterType from './pluggableElementTypes/TextSearchAdapterType'\n\nimport {\n  ConfigurationSchema,\n  isBareConfigurationSchemaType,\n} from './configuration'\n\nimport Plugin from './Plugin'\nimport ReExports from './ReExports'\n\nimport {\n  PluggableElementType,\n  PluggableElementMember,\n} from './pluggableElementTypes'\nimport { AbstractRootModel } from './util'\nimport CorePlugin from './CorePlugin'\nimport createJexlInstance from './util/jexl'\nimport { PluginDefinition } from './PluginLoader'\n\n/** little helper class that keeps groups of callbacks that are\nthen run in a specified order by group */\nclass PhasedScheduler<PhaseName extends string> {\n  phaseCallbacks = new Map<PhaseName, Function[]>()\n\n  phaseOrder: PhaseName[] = []\n\n  constructor(...phaseOrder: PhaseName[]) {\n    this.phaseOrder = phaseOrder\n  }\n\n  add(phase: PhaseName, callback: Function) {\n    if (!this.phaseOrder.includes(phase)) {\n      throw new Error(`unknown phase ${phase}`)\n    }\n    let phaseCallbacks = this.phaseCallbacks.get(phase)\n    if (!phaseCallbacks) {\n      phaseCallbacks = []\n      this.phaseCallbacks.set(phase, phaseCallbacks)\n    }\n    phaseCallbacks.push(callback)\n  }\n\n  run() {\n    this.phaseOrder.forEach(phaseName => {\n      this.phaseCallbacks.get(phaseName)?.forEach(callback => callback())\n    })\n  }\n}\n\ntype PluggableElementTypeGroup =\n  | 'renderer'\n  | 'adapter'\n  | 'display'\n  | 'track'\n  | 'connection'\n  | 'view'\n  | 'widget'\n  | 'rpc method'\n  | 'internet account'\n  | 'text search adapter'\n\n/** internal class that holds the info for a certain element type */\nclass TypeRecord<ElementClass extends PluggableElementBase> {\n  registeredTypes: { [name: string]: ElementClass } = {}\n\n  constructor(\n    public typeName: string,\n    public baseClass: // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    | { new (...args: any[]): ElementClass }\n      // covers abstract class case\n      | (Function & {\n          prototype: ElementClass\n        }),\n  ) {}\n\n  add(name: string, t: ElementClass) {\n    this.registeredTypes[name] = t\n  }\n\n  has(name: string) {\n    return name in this.registeredTypes\n  }\n\n  get(name: string) {\n    if (!this.has(name)) {\n      throw new Error(\n        `${this.typeName} '${name}' not found, perhaps its plugin is not loaded or its plugin has not added it.`,\n      )\n    }\n    return this.registeredTypes[name]\n  }\n\n  all() {\n    return Object.values(this.registeredTypes)\n  }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype AnyFunction = (...args: any) => any\n\n/**\n * free-form string-to-unknown mapping of metadata related to the instance\n * of this plugin. `isCore` is typically set to `Boolean(true)` if the plugin was\n * loaded as part of the \"core\" set of plugins for this application.\n * Can also use this metadata to stash other things about why the plugin is\n * loaded, such as where it came from, what plugin depends on it, etc.\n */\nexport type PluginMetadata = Record<string, unknown>\n\nexport interface PluginLoadRecord {\n  metadata?: PluginMetadata\n  plugin: Plugin\n}\nexport interface RuntimePluginLoadRecord extends PluginLoadRecord {\n  definition: PluginDefinition\n}\n\nexport default class PluginManager {\n  plugins: Plugin[] = []\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  jexl: any = createJexlInstance()\n\n  pluginMetadata: Record<string, PluginMetadata> = {}\n\n  runtimePluginDefinitions: PluginDefinition[] = []\n\n  elementCreationSchedule = new PhasedScheduler<PluggableElementTypeGroup>(\n    'renderer',\n    'adapter',\n    'text search adapter',\n    'display',\n    'track',\n    'connection',\n    'view',\n    'widget',\n    'rpc method',\n    'internet account',\n  ) as PhasedScheduler<PluggableElementTypeGroup> | undefined\n\n  rendererTypes = new TypeRecord('RendererType', RendererType)\n\n  adapterTypes = new TypeRecord('AdapterType', AdapterType)\n\n  textSearchAdapterTypes = new TypeRecord(\n    'TextSearchAdapterType',\n    TextSearchAdapterType,\n  )\n\n  trackTypes = new TypeRecord('TrackType', TrackType)\n\n  displayTypes = new TypeRecord('DisplayType', DisplayType)\n\n  connectionTypes = new TypeRecord('ConnectionType', ConnectionType)\n\n  viewTypes = new TypeRecord('ViewType', ViewType)\n\n  widgetTypes = new TypeRecord('WidgetType', WidgetType)\n\n  rpcMethods = new TypeRecord('RpcMethodType', RpcMethodType)\n\n  internetAccountTypes = new TypeRecord(\n    'InternetAccountType',\n    InternetAccountType,\n  )\n\n  configured = false\n\n  rootModel?: AbstractRootModel\n\n  extensionPoints: Map<string, Function[]> = new Map()\n\n  constructor(initialPlugins: (Plugin | PluginLoadRecord)[] = []) {\n    // add the core plugin\n    this.addPlugin({ plugin: new CorePlugin(), metadata: { isCore: true } })\n\n    // add all the initial plugins\n    initialPlugins.forEach(plugin => {\n      this.addPlugin(plugin)\n    })\n  }\n\n  pluginConfigurationSchemas() {\n    const configurationSchemas: { [key: string]: unknown } = {}\n    this.plugins.forEach(plugin => {\n      if (plugin.configurationSchema) {\n        configurationSchemas[plugin.name] = plugin.configurationSchema\n      }\n    })\n    return configurationSchemas\n  }\n\n  addPlugin(load: Plugin | PluginLoadRecord | RuntimePluginLoadRecord) {\n    if (this.configured) {\n      throw new Error('JBrowse already configured, cannot add plugins')\n    }\n    const [plugin, metadata = {}] =\n      load instanceof Plugin ? [load, {}] : [load.plugin, load.metadata]\n\n    if (this.plugins.includes(plugin)) {\n      throw new Error('plugin already installed')\n    }\n\n    this.pluginMetadata[plugin.name] = metadata\n    if ('definition' in load) {\n      this.runtimePluginDefinitions.push(load.definition)\n    }\n    plugin.install(this)\n    this.plugins.push(plugin)\n    return this\n  }\n\n  getPlugin(name: string) {\n    return this.plugins.find(p => p.name === name)\n  }\n\n  hasPlugin(name: string) {\n    return this.getPlugin(name) !== undefined\n  }\n\n  createPluggableElements() {\n    // run the creation callbacks for each element type in order.\n    // see elementCreationSchedule above for the creation order\n    if (this.elementCreationSchedule) {\n      this.elementCreationSchedule.run()\n      delete this.elementCreationSchedule\n    }\n    return this\n  }\n\n  setRootModel(rootModel: AbstractRootModel) {\n    this.rootModel = rootModel\n  }\n\n  configure() {\n    if (this.configured) {\n      throw new Error('already configured')\n    }\n\n    this.plugins.forEach(plugin => plugin.configure(this))\n\n    this.configured = true\n\n    // console.log(JSON.stringify(getSnapshot(model)))\n\n    return this\n  }\n\n  getElementTypeRecord(\n    groupName: PluggableElementTypeGroup,\n  ): TypeRecord<PluggableElementBase> {\n    switch (groupName) {\n      case 'adapter':\n        return this.adapterTypes\n      case 'text search adapter':\n        return this.textSearchAdapterTypes\n      case 'connection':\n        return this.connectionTypes\n      case 'widget':\n        return this.widgetTypes\n      case 'renderer':\n        return this.rendererTypes\n      case 'display':\n        return this.displayTypes\n      case 'track':\n        return this.trackTypes\n      case 'view':\n        return this.viewTypes\n      case 'rpc method':\n        return this.rpcMethods\n      case 'internet account':\n        return this.internetAccountTypes\n      default:\n        throw new Error(`invalid element type '${groupName}'`)\n    }\n  }\n\n  addElementType(\n    groupName: PluggableElementTypeGroup,\n    creationCallback: (pluginManager: PluginManager) => PluggableElementType,\n  ) {\n    if (typeof creationCallback !== 'function') {\n      throw new Error(\n        'must provide a callback function that returns the new type object',\n      )\n    }\n    const typeRecord = this.getElementTypeRecord(groupName)\n\n    if (this.elementCreationSchedule) {\n      this.elementCreationSchedule.add(groupName, () => {\n        let newElement = creationCallback(this)\n        if (!newElement.name) {\n          throw new Error(`cannot add a ${groupName} with no name`)\n        }\n\n        if (typeRecord.has(newElement.name)) {\n          throw new Error(\n            `${groupName} ${newElement.name} already registered, cannot register it again`,\n          )\n        }\n\n        newElement = this.evaluateExtensionPoint(\n          'Core-extendPluggableElement',\n          newElement,\n        ) as PluggableElementType\n\n        typeRecord.add(newElement.name, newElement)\n      })\n    }\n\n    return this\n  }\n\n  getElementType(groupName: PluggableElementTypeGroup, typeName: string) {\n    const typeRecord = this.getElementTypeRecord(groupName)\n    return typeRecord.get(typeName)\n  }\n\n  getElementTypesInGroup(groupName: PluggableElementTypeGroup) {\n    const typeRecord = this.getElementTypeRecord(groupName)\n    return typeRecord.all()\n  }\n\n  /** get a MST type for the union of all specified pluggable MST types */\n  pluggableMstType(\n    typeGroup: PluggableElementTypeGroup,\n    fieldName: PluggableElementMember,\n    fallback: IAnyType = types.maybe(types.null),\n  ) {\n    const pluggableTypes = this.getElementTypeRecord(typeGroup)\n      .all()\n      // @ts-ignore\n      .map(t => t[fieldName])\n      .filter(t => isType(t) && isModelType(t)) as IAnyType[]\n\n    // try to smooth over the case when no types are registered, mostly\n    // encountered in tests\n    if (pluggableTypes.length === 0) {\n      console.warn(\n        `No JBrowse pluggable types found matching ('${typeGroup}','${fieldName}')`,\n      )\n      return fallback\n    }\n    return types.union(...pluggableTypes)\n  }\n\n  /** get a MST type for the union of all specified pluggable config schemas */\n  pluggableConfigSchemaType(\n    typeGroup: PluggableElementTypeGroup,\n    fieldName: PluggableElementMember = 'configSchema',\n  ) {\n    const pluggableTypes = this.getElementTypeRecord(typeGroup)\n      .all()\n      // @ts-ignore\n      .map(t => t[fieldName])\n      .filter(t => isBareConfigurationSchemaType(t)) as IAnyType[]\n\n    if (pluggableTypes.length === 0) {\n      pluggableTypes.push(ConfigurationSchema('Null', {}))\n    }\n    return types.union(...pluggableTypes)\n  }\n\n  jbrequireCache = new Map()\n\n  lib = ReExports\n\n  load = <FTYPE extends AnyFunction>(lib: FTYPE): ReturnType<FTYPE> => {\n    if (!this.jbrequireCache.has(lib)) {\n      this.jbrequireCache.set(lib, lib(this))\n    }\n    return this.jbrequireCache.get(lib)\n  }\n\n  /**\n   * Get the re-exported version of the given package name.\n   * Throws an error if the package is not re-exported by the plugin manager.\n   *\n   * @returns the library's default export\n   */\n  jbrequire = (\n    lib: keyof typeof ReExports | AnyFunction | { default: AnyFunction },\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  ): any => {\n    if (typeof lib === 'string') {\n      const pack = this.lib[lib]\n      if (!pack) {\n        throw new TypeError(\n          `No jbrequire re-export defined for package '${lib}'. If this package must be shared between plugins, add it to ReExports.js. If it does not need to be shared, just import it normally.`,\n        )\n      }\n      return pack\n    }\n\n    if (typeof lib === 'function') {\n      return this.load(lib)\n    }\n\n    if (lib.default) {\n      return this.jbrequire(lib.default)\n    }\n\n    throw new TypeError(\n      'lib passed to jbrequire must be either a string or a function',\n    )\n  }\n\n  getRendererType(typeName: string): RendererType {\n    return this.rendererTypes.get(typeName)\n  }\n\n  getRendererTypes(): RendererType[] {\n    return this.rendererTypes.all()\n  }\n\n  getAdapterType(typeName: string): AdapterType {\n    return this.adapterTypes.get(typeName)\n  }\n\n  getTextSearchAdapterType(typeName: string): TextSearchAdapterType {\n    return this.textSearchAdapterTypes.get(typeName)\n  }\n\n  getTrackType(typeName: string): TrackType {\n    return this.trackTypes.get(typeName)\n  }\n\n  getDisplayType(typeName: string): DisplayType {\n    return this.displayTypes.get(typeName)\n  }\n\n  getViewType(typeName: string): ViewType {\n    return this.viewTypes.get(typeName)\n  }\n\n  getWidgetType(typeName: string): WidgetType {\n    return this.widgetTypes.get(typeName)\n  }\n\n  getConnectionType(typeName: string): ConnectionType {\n    return this.connectionTypes.get(typeName)\n  }\n\n  getRpcMethodType(methodName: string): RpcMethodType {\n    return this.rpcMethods.get(methodName)\n  }\n\n  getInternetAccountType(internetAccountName: string): InternetAccountType {\n    return this.internetAccountTypes.get(internetAccountName)\n  }\n\n  addRendererType(\n    creationCallback: (pluginManager: PluginManager) => RendererType,\n  ): this {\n    return this.addElementType('renderer', creationCallback)\n  }\n\n  addAdapterType(\n    creationCallback: (pluginManager: PluginManager) => AdapterType,\n  ): this {\n    return this.addElementType('adapter', creationCallback)\n  }\n\n  addTextSearchAdapterType(\n    creationCallback: (pluginManager: PluginManager) => TextSearchAdapterType,\n  ): this {\n    return this.addElementType('text search adapter', creationCallback)\n  }\n\n  addTrackType(\n    creationCallback: (pluginManager: PluginManager) => TrackType,\n  ): this {\n    // Goes through the already-created displays and registers the ones that\n    // specify this track type\n    const callback = () => {\n      const track = creationCallback(this)\n      ;(this.getElementTypesInGroup('display') as DisplayType[]).forEach(\n        display => {\n          if (\n            display.trackType === track.name &&\n            // track may have already added the displayType in its creationCallback\n            !track.displayTypes.includes(display)\n          ) {\n            track.addDisplayType(display)\n          }\n        },\n      )\n      return track\n    }\n    return this.addElementType('track', callback)\n  }\n\n  addDisplayType(\n    creationCallback: (pluginManager: PluginManager) => DisplayType,\n  ): this {\n    return this.addElementType('display', creationCallback)\n  }\n\n  addViewType(\n    creationCallback: (pluginManager: PluginManager) => ViewType,\n  ): this {\n    const callback = () => {\n      const newView = creationCallback(this)\n      ;(this.getElementTypesInGroup('display') as DisplayType[]).forEach(\n        display => {\n          if (\n            display.viewType === newView.name &&\n            // view may have already added the displayType in its creationCallback\n            !newView.displayTypes.includes(display)\n          ) {\n            newView.addDisplayType(display)\n          }\n        },\n      )\n      return newView\n    }\n    return this.addElementType('view', callback)\n  }\n\n  addWidgetType(\n    creationCallback: (pluginManager: PluginManager) => WidgetType,\n  ): this {\n    return this.addElementType('widget', creationCallback)\n  }\n\n  addConnectionType(\n    creationCallback: (pluginManager: PluginManager) => ConnectionType,\n  ): this {\n    return this.addElementType('connection', creationCallback)\n  }\n\n  addRpcMethod(\n    creationCallback: (pluginManager: PluginManager) => RpcMethodType,\n  ): this {\n    return this.addElementType('rpc method', creationCallback)\n  }\n\n  addInternetAccountType(\n    creationCallback: (pluginManager: PluginManager) => InternetAccountType,\n  ): this {\n    return this.addElementType('internet account', creationCallback)\n  }\n\n  addToExtensionPoint<T>(\n    extensionPointName: string,\n    callback: (extendee: T) => T,\n  ) {\n    let callbacks = this.extensionPoints.get(extensionPointName)\n    if (!callbacks) {\n      callbacks = []\n      this.extensionPoints.set(extensionPointName, callbacks)\n    }\n    callbacks.push(callback)\n  }\n\n  evaluateExtensionPoint(extensionPointName: string, extendee: unknown) {\n    const callbacks = this.extensionPoints.get(extensionPointName)\n    let accumulator = extendee\n    if (callbacks) {\n      for (const callback of callbacks) {\n        try {\n          accumulator = callback(accumulator)\n        } catch (error) {\n          console.error(error)\n        }\n      }\n    }\n    return accumulator\n  }\n\n  async evaluateAsyncExtensionPoint(\n    extensionPointName: string,\n    extendee: unknown,\n  ) {\n    const callbacks = this.extensionPoints.get(extensionPointName)\n    let accumulator = extendee\n    if (callbacks) {\n      for (const callback of callbacks) {\n        try {\n          accumulator = await callback(accumulator)\n        } catch (error) {\n          console.error(error)\n        }\n      }\n    }\n    return accumulator\n  }\n}\n","import domLoadScript from 'load-script2'\n\nimport { PluginConstructor } from './Plugin'\nimport { ConfigurationSchema } from './configuration'\n\nimport ReExports from './ReExports'\nimport { isElectron } from './util'\n\nexport const PluginSourceConfigurationSchema = ConfigurationSchema(\n  'PluginSource',\n  {\n    name: {\n      type: 'string',\n      defaultValue: '',\n    },\n    url: {\n      type: 'string',\n      defaultValue: '',\n    },\n  },\n)\n\nexport interface UMDPluginDefinition {\n  umdUrl: string\n  name: string\n}\n\nexport interface LegacyUMDPluginDefinition {\n  url: string\n  name: string\n}\n\nexport function isUMDPluginDefinition(\n  pluginDefinition: PluginDefinition,\n): pluginDefinition is UMDPluginDefinition | LegacyUMDPluginDefinition {\n  return (\n    ((pluginDefinition as UMDPluginDefinition).umdUrl !== undefined ||\n      (pluginDefinition as LegacyUMDPluginDefinition).url !== undefined) &&\n    (pluginDefinition as LegacyUMDPluginDefinition | UMDPluginDefinition)\n      .name !== undefined\n  )\n}\n\nexport interface ESMPluginDefinition {\n  esmUrl: string\n}\n\nexport function isESMPluginDefinition(\n  pluginDefinition: PluginDefinition,\n): pluginDefinition is ESMPluginDefinition {\n  return (pluginDefinition as ESMPluginDefinition).esmUrl !== undefined\n}\n\nexport interface CJSPluginDefinition {\n  cjsUrl: string\n}\n\nexport function isCJSPluginDefinition(\n  pluginDefinition: PluginDefinition,\n): pluginDefinition is CJSPluginDefinition {\n  return (pluginDefinition as CJSPluginDefinition).cjsUrl !== undefined\n}\n\nexport interface PluginDefinition\n  extends Partial<UMDPluginDefinition>,\n    Partial<LegacyUMDPluginDefinition>,\n    Partial<ESMPluginDefinition>,\n    Partial<CJSPluginDefinition> {}\n\nexport interface PluginRecord {\n  plugin: PluginConstructor\n  definition: PluginDefinition\n}\n\nexport interface LoadedPlugin {\n  default: PluginConstructor\n}\n\nfunction getGlobalObject(): Window {\n  // Based on window-or-global\n  // https://github.com/purposeindustries/window-or-global/blob/322abc71de0010c9e5d9d0729df40959e1ef8775/lib/index.js\n  return (\n    // eslint-disable-next-line no-restricted-globals\n    (typeof self === 'object' && self.self === self && self) ||\n    (typeof global === 'object' && global.global === global && global) ||\n    // @ts-ignore\n    this\n  )\n}\n\nfunction isInWebWorker(globalObject: ReturnType<typeof getGlobalObject>) {\n  return Boolean('WorkerGlobalScope' in globalObject)\n}\n\nexport default class PluginLoader {\n  definitions: PluginDefinition[] = []\n\n  fetchESM?: (url: string) => Promise<unknown>\n  fetchCJS?: (url: string) => Promise<LoadedPlugin>\n\n  constructor(\n    pluginDefinitions: PluginDefinition[] = [],\n    args?: {\n      fetchESM?: (url: string) => Promise<unknown>\n      fetchCJS?: (url: string) => Promise<LoadedPlugin>\n    },\n  ) {\n    this.fetchESM = args?.fetchESM\n    this.fetchCJS = args?.fetchCJS\n    this.definitions = JSON.parse(JSON.stringify(pluginDefinitions))\n  }\n\n  loadScript(scriptUrl: string): Promise<void> {\n    const globalObject = getGlobalObject()\n    if (!isInWebWorker(globalObject)) {\n      return domLoadScript(scriptUrl)\n    }\n\n    // @ts-ignore\n    if (globalObject && globalObject.importScripts) {\n      return new Promise((resolve, reject) => {\n        try {\n          // @ts-ignore\n          globalObject.importScripts(scriptUrl)\n        } catch (error) {\n          reject(error || new Error(`failed to load ${scriptUrl}`))\n          return\n        }\n        resolve()\n      })\n    }\n    throw new Error(\n      'cannot figure out how to load external JS scripts in this environment',\n    )\n  }\n\n  async loadCJSPlugin({ cjsUrl }: CJSPluginDefinition): Promise<LoadedPlugin> {\n    let parsedUrl: URL\n    try {\n      parsedUrl = new URL(cjsUrl, getGlobalObject().location.href)\n    } catch (error) {\n      console.error(error)\n      throw new Error(`Error parsing URL: ${cjsUrl}`)\n    }\n    if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {\n      throw new Error(\n        `Cannot load plugins using protocol \"${parsedUrl.protocol}\"`,\n      )\n    }\n    if (!this.fetchCJS) {\n      throw new Error('No fetchCJS callback provided')\n    }\n\n    return this.fetchCJS(parsedUrl.href)\n  }\n\n  async loadESMPlugin(pluginDefinition: ESMPluginDefinition) {\n    let parsedUrl: URL\n    try {\n      parsedUrl = new URL(\n        pluginDefinition.esmUrl,\n        getGlobalObject().location.href,\n      )\n    } catch (error) {\n      console.error(error)\n      throw new Error(`Error parsing URL: ${pluginDefinition.esmUrl}`)\n    }\n    if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {\n      throw new Error(\n        `cannot load plugins using protocol \"${parsedUrl.protocol}\"`,\n      )\n    }\n    const plugin = (await this.fetchESM?.(parsedUrl.href)) as\n      | LoadedPlugin\n      | undefined\n    if (!plugin) {\n      throw new Error(`Could not load ESM plugin: ${parsedUrl}`)\n    }\n    return plugin\n  }\n\n  async loadUMDPlugin(\n    pluginDefinition: UMDPluginDefinition | LegacyUMDPluginDefinition,\n  ) {\n    const umdUrl =\n      'url' in pluginDefinition ? pluginDefinition.url : pluginDefinition.umdUrl\n    let parsedUrl: URL\n    try {\n      parsedUrl = new URL(umdUrl, getGlobalObject().location.href)\n    } catch (error) {\n      console.error(error)\n      throw new Error(`Error parsing URL: ${umdUrl}`)\n    }\n    if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {\n      throw new Error(\n        `cannot load plugins using protocol \"${parsedUrl.protocol}\"`,\n      )\n    }\n    await this.loadScript(parsedUrl.href)\n    const moduleName = pluginDefinition.name\n    const umdName = `JBrowsePlugin${moduleName}`\n    const globalObject = getGlobalObject()\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const plugin = (globalObject as any)[umdName] as\n      | { default: PluginConstructor }\n      | undefined\n    if (!plugin) {\n      throw new Error(\n        `Failed to load UMD bundle for ${moduleName}, ${globalObject.constructor.name}.${umdName} is undefined`,\n      )\n    }\n    return plugin\n  }\n\n  async loadPlugin(definition: PluginDefinition): Promise<PluginConstructor> {\n    let plugin: LoadedPlugin\n    if (isElectron && isCJSPluginDefinition(definition)) {\n      plugin = await this.loadCJSPlugin(definition)\n    } else if (isESMPluginDefinition(definition)) {\n      plugin = await this.loadESMPlugin(definition)\n    } else if (isUMDPluginDefinition(definition)) {\n      plugin = await this.loadUMDPlugin(definition)\n    } else if (!isElectron && isCJSPluginDefinition(definition)) {\n      throw new Error(\n        `Only CommonJS plugin found, but not in a NodeJS environment: ${JSON.stringify(\n          definition,\n        )}`,\n      )\n    } else {\n      throw new Error(\n        `Could not determine plugin type: ${JSON.stringify(definition)}`,\n      )\n    }\n    return plugin.default\n  }\n\n  installGlobalReExports(target: WindowOrWorkerGlobalScope) {\n    // @ts-ignore\n    target.JBrowseExports = Object.fromEntries(\n      Object.entries(ReExports).map(([moduleName, module]) => {\n        return [moduleName, module]\n      }),\n    )\n  }\n\n  async load() {\n    return Promise.all(\n      this.definitions.map(async definition => ({\n        plugin: await this.loadPlugin(definition),\n        definition,\n      })),\n    )\n  }\n}\n","/* eslint-disable no-restricted-globals,react-hooks/rules-of-hooks */\nimport './workerPolyfill'\n\nimport RpcServer from 'librpc-web-mod'\nimport { useStaticRendering } from 'mobx-react'\n\nimport PluginManager from '@jbrowse/core/PluginManager'\nimport RpcMethodType from '@jbrowse/core/pluggableElementTypes/RpcMethodType'\nimport { remoteAbortRpcHandler } from '@jbrowse/core/rpc/remoteAbortSignals'\nimport PluginLoader, { PluginDefinition } from '@jbrowse/core/PluginLoader'\nimport corePlugins from './corePlugins'\n\n// prevent mobx-react from doing funny things when we render in the worker.\n// but only if we are running in the browser.  in node tests, leave it alone.\nif (typeof __webpack_require__ === 'function') {\n  useStaticRendering(true)\n}\n\ninterface WorkerConfiguration {\n  plugins: PluginDefinition[]\n}\n\nlet jbPluginManager: PluginManager | undefined\n\n// waits for a message from the main thread containing our configuration, which\n// must be sent on boot\nfunction receiveConfiguration(): Promise<WorkerConfiguration> {\n  const configurationP: Promise<WorkerConfiguration> = new Promise(resolve => {\n    // listen for the configuration\n    self.onmessage = (event: MessageEvent) => {\n      resolve(event.data as WorkerConfiguration)\n      self.onmessage = () => {}\n    }\n  })\n  postMessage('readyForConfig')\n  return configurationP\n}\n\nasync function getPluginManager() {\n  if (jbPluginManager) {\n    return jbPluginManager\n  }\n  // Load runtime plugins\n  const config = await receiveConfiguration()\n  const pluginLoader = new PluginLoader(config.plugins, {\n    fetchESM: url => import(/* webpackIgnore:true */ url),\n  })\n  pluginLoader.installGlobalReExports(self)\n  const runtimePlugins = await pluginLoader.load()\n  const plugins = [...corePlugins.map(p => ({ plugin: p })), ...runtimePlugins]\n  const pluginManager = new PluginManager(plugins.map(P => new P.plugin()))\n  pluginManager.createPluggableElements()\n  pluginManager.configure()\n  jbPluginManager = pluginManager\n  return pluginManager\n}\n\ninterface WrappedFuncArgs {\n  rpcDriverClassName: string\n  channel: string\n  [key: string]: unknown\n}\n\ntype RpcFunc = (args: unknown, rpcDriverClassName: string) => unknown\n\nfunction wrapForRpc(func: RpcFunc) {\n  return (args: WrappedFuncArgs) => {\n    const { channel, rpcDriverClassName } = args\n    return func(\n      {\n        ...args,\n        statusCallback: (message: string) => {\n          // @ts-ignore\n          self.rpcServer.emit(channel, message)\n        },\n      },\n      rpcDriverClassName,\n    )\n  }\n}\n\ngetPluginManager()\n  .then(pluginManager => {\n    const rpcConfig = Object.fromEntries(\n      pluginManager.getElementTypesInGroup('rpc method').map(entry => {\n        const { execute, name } = entry as RpcMethodType\n        return [name, wrapForRpc((execute as RpcFunc).bind(entry))]\n      }),\n    )\n\n    // @ts-ignore\n    self.rpcServer = new RpcServer.Server({\n      ...rpcConfig,\n      ...remoteAbortRpcHandler(),\n      ping: () => {}, // < the ping method is required by the worker driver for checking the health of the worker\n    })\n    postMessage('ready')\n  })\n  .catch(error => {\n    // @ts-ignore\n    self.rpcServer = new RpcServer.Server({\n      ping: () => {\n        throw error\n      },\n    })\n  })\n\nexport default () => {\n  /* do nothing */\n}\n","import { lazy } from 'react'\nimport ConnectionType from '@jbrowse/core/pluggableElementTypes/ConnectionType'\nimport WidgetType from '@jbrowse/core/pluggableElementTypes/WidgetType'\nimport Plugin from '@jbrowse/core/Plugin'\nimport PluginManager from '@jbrowse/core/PluginManager'\nimport {\n  configSchema as ucscConfigSchema,\n  modelFactory as ucscModelFactory,\n} from './ucsc-trackhub'\nimport {\n  stateModelFactory as AddTrackStateModelFactory,\n  configSchema as AddTrackConfigSchema,\n} from './AddTrackWidget'\nimport {\n  stateModel as AddConnectionStateModel,\n  configSchema as AddConnectionConfigSchema,\n} from './AddConnectionWidget'\nimport {\n  stateModelFactory as HierarchicalTrackSelectorStateModelFactory,\n  configSchema as HierarchicalTrackSelectorConfigSchema,\n} from './HierarchicalTrackSelectorWidget'\nimport {\n  stateModelFactory as PluginStoreStateModelFactory,\n  configSchema as PluginStoreConfigSchema,\n} from './PluginStoreWidget'\n\nconst SetDefaultSession = lazy(() => import('./SetDefaultSession'))\n\nconst AssemblyManager = lazy(() => import('./AssemblyManager'))\n\nexport default class extends Plugin {\n  name = 'DataManagementPlugin'\n\n  exports = {\n    AssemblyManager,\n    SetDefaultSession,\n  }\n\n  install(pluginManager: PluginManager) {\n    pluginManager.addConnectionType(\n      () =>\n        new ConnectionType({\n          name: 'UCSCTrackHubConnection',\n          configSchema: ucscConfigSchema,\n          stateModel: ucscModelFactory(pluginManager),\n          displayName: 'UCSC Track Hub',\n          description: 'A track or assembly hub in the Track Hub format',\n          url: '//genome.ucsc.edu/goldenPath/help/hgTrackHubHelp.html#Intro',\n        }),\n    )\n\n    pluginManager.addWidgetType(() => {\n      return new WidgetType({\n        name: 'HierarchicalTrackSelectorWidget',\n        heading: 'Available tracks',\n        configSchema: HierarchicalTrackSelectorConfigSchema,\n        stateModel: HierarchicalTrackSelectorStateModelFactory(pluginManager),\n        ReactComponent: lazy(\n          () =>\n            import(\n              './HierarchicalTrackSelectorWidget/components/HierarchicalTrackSelector'\n            ),\n        ),\n      })\n    })\n\n    pluginManager.addWidgetType(() => {\n      return new WidgetType({\n        name: 'AddTrackWidget',\n        heading: 'Add a track',\n        configSchema: AddTrackConfigSchema,\n        stateModel: AddTrackStateModelFactory(pluginManager),\n        ReactComponent: lazy(\n          () => import('./AddTrackWidget/components/AddTrackWidget'),\n        ),\n      })\n    })\n\n    pluginManager.addWidgetType(() => {\n      return new WidgetType({\n        name: 'AddConnectionWidget',\n        heading: 'Add a connection',\n        configSchema: AddConnectionConfigSchema,\n        stateModel: AddConnectionStateModel,\n        ReactComponent: lazy(\n          () => import('./AddConnectionWidget/components/AddConnectionWidget'),\n        ),\n      })\n    })\n\n    pluginManager.addWidgetType(() => {\n      return new WidgetType({\n        name: 'PluginStoreWidget',\n        heading: 'Plugin store',\n        configSchema: PluginStoreConfigSchema,\n        stateModel: PluginStoreStateModelFactory(pluginManager),\n        ReactComponent: lazy(\n          () => import('./PluginStoreWidget/components/PluginStoreWidget'),\n        ),\n      })\n    })\n  }\n\n  configure(pluginManager: PluginManager) {}\n}\n\nexport { AssemblyManager, SetDefaultSession }\n","import Alignments from '@jbrowse/plugin-alignments'\nimport Authentication from '@jbrowse/plugin-authentication'\nimport Bed from '@jbrowse/plugin-bed'\nimport BreakpointSplitView from '@jbrowse/plugin-breakpoint-split-view'\nimport CircularView from '@jbrowse/plugin-circular-view'\nimport Config from '@jbrowse/plugin-config'\nimport ComparativeAdapters from '@jbrowse/plugin-comparative-adapters'\nimport DataManagement from '@jbrowse/plugin-data-management'\nimport DotplotView from '@jbrowse/plugin-dotplot-view'\nimport GtfPlugin from '@jbrowse/plugin-gtf'\nimport Gff3 from '@jbrowse/plugin-gff3'\nimport LegacyJBrowse from '@jbrowse/plugin-legacy-jbrowse'\nimport LinearGenomeView from '@jbrowse/plugin-linear-genome-view'\nimport LinearComparativeView from '@jbrowse/plugin-linear-comparative-view'\nimport Lollipop from '@jbrowse/plugin-lollipop'\nimport Arc from '@jbrowse/plugin-arc'\nimport Menus from '@jbrowse/plugin-menus'\nimport RDF from '@jbrowse/plugin-rdf'\nimport Sequence from '@jbrowse/plugin-sequence'\nimport SVG from '@jbrowse/plugin-svg'\nimport TrackHubRegistry from '@jbrowse/plugin-trackhub-registry'\nimport Variants from '@jbrowse/plugin-variants'\nimport Wiggle from '@jbrowse/plugin-wiggle'\nimport SpreadsheetViewPlugin from '@jbrowse/plugin-spreadsheet-view'\nimport SvInspectorPlugin from '@jbrowse/plugin-sv-inspector'\nimport HicPlugin from '@jbrowse/plugin-hic'\nimport TrixPlugin from '@jbrowse/plugin-trix'\nimport GridBookmarkPlugin from '@jbrowse/plugin-grid-bookmark'\n\nconst corePlugins = [\n  SVG,\n  LinearGenomeView,\n  Alignments,\n  Authentication,\n  Bed,\n  CircularView,\n  Config,\n  DataManagement,\n  DotplotView,\n  GtfPlugin,\n  Gff3,\n  LegacyJBrowse,\n  LinearComparativeView,\n  Lollipop,\n  Arc,\n  Menus,\n  RDF,\n  Sequence,\n  TrackHubRegistry,\n  Variants,\n  Wiggle,\n  SpreadsheetViewPlugin,\n  SvInspectorPlugin,\n  BreakpointSplitView,\n  HicPlugin,\n  TrixPlugin,\n  GridBookmarkPlugin,\n  ComparativeAdapters,\n]\n\nexport default corePlugins\n","/* eslint-disable no-restricted-globals */\n\n// this is a little polyfill for running in workers that\n// contains just enough stubbing to make webpack style-loader\n// think that it is actually inserting styles into the DOM\n\nself.window = {\n  addEventListener() {},\n  fetch: self.fetch.bind(self),\n  location: self.location,\n  Date: self.Date,\n  requestIdleCallback: cb => cb(),\n  cancelIdleCallback: () => {},\n  requestAnimationFrame: cb => cb(),\n  cancelAnimationFrame: () => {},\n  navigator: {},\n}\nself.document = {\n  createTextNode() {},\n  querySelector() {\n    return { appendChild() {} }\n  },\n  documentElement: {},\n  createElement() {\n    return {\n      style: {},\n      setAttribute() {},\n      removeAttribute() {},\n      appendChild() {},\n    }\n  },\n}\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = function() {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [917,4736,2947], function() { return __webpack_require__(83827); })\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + {\"354\":\"282bda17\",\"847\":\"27b81a72\",\"917\":\"36ae63c6\",\"933\":\"79ccde1f\",\"1025\":\"cbc9c7c7\",\"1032\":\"239c4c6c\",\"1093\":\"219fb56c\",\"1195\":\"35ade7f1\",\"1462\":\"a1740b37\",\"1510\":\"c950a0bf\",\"1754\":\"3814b739\",\"2092\":\"1b0f2457\",\"2094\":\"64189e1a\",\"2439\":\"244ef577\",\"2533\":\"0d2e2530\",\"2687\":\"31fd2007\",\"2734\":\"33f348d8\",\"2745\":\"72f2ec99\",\"2790\":\"bb5a0edc\",\"2796\":\"1092ab6a\",\"2809\":\"340f10af\",\"2821\":\"ddb7d572\",\"2947\":\"e376bb9d\",\"3134\":\"86beea5c\",\"3242\":\"768a3b72\",\"3420\":\"bb81cc76\",\"3576\":\"b2146cf7\",\"3653\":\"0ed7d197\",\"3787\":\"227771b3\",\"4061\":\"1dd0c213\",\"4119\":\"fd4ec17b\",\"4285\":\"5b6e2e27\",\"4493\":\"de549ad5\",\"4526\":\"9e55b9f7\",\"4594\":\"f5667dbc\",\"4637\":\"264f6c92\",\"4736\":\"c6010c70\",\"4794\":\"dbe4dca4\",\"5046\":\"27c4d1f0\",\"5058\":\"05d6cf4f\",\"5098\":\"a3f8ab78\",\"5304\":\"c9588514\",\"5375\":\"e4ea6538\",\"5486\":\"83352493\",\"5758\":\"13dda43b\",\"5997\":\"8228038d\",\"6082\":\"3de867c9\",\"6161\":\"2767b87a\",\"6189\":\"2a7513b2\",\"6254\":\"2373c8ce\",\"6319\":\"f48804e8\",\"6362\":\"fc534ee2\",\"6524\":\"cac9d4a5\",\"6618\":\"546431f1\",\"6824\":\"6d187d0d\",\"6849\":\"93818f10\",\"6925\":\"043dfd9a\",\"7028\":\"74e6e327\",\"7040\":\"60514aaf\",\"7207\":\"df263841\",\"7281\":\"bb69fe9a\",\"7412\":\"bf4bd7ef\",\"7431\":\"eecbf15e\",\"7582\":\"7d4e71c9\",\"7751\":\"19dcc251\",\"7904\":\"00a3d558\",\"8012\":\"236c4104\",\"8017\":\"fe10cd90\",\"8113\":\"fcab1bdf\",\"8118\":\"b7799144\",\"8613\":\"818f2f12\",\"8752\":\"1dea68a9\",\"8873\":\"8653c6f5\",\"8930\":\"357a4852\",\"8935\":\"1680a105\",\"8982\":\"e48a7021\",\"9135\":\"10915f7b\",\"9145\":\"f7c2ee52\",\"9202\":\"5c437d5c\",\"9342\":\"860c76ee\",\"9393\":\"e46531dc\",\"9815\":\"90ffc9f0\",\"9915\":\"6578566b\"}[chunkId] + \".chunk.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = function(chunkId) {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = function(module) {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: function() {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl + \"../../\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t2541: 1\n};\n\n// importScripts chunk loading\nvar installChunk = function(data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = function(chunkId, promises) {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunk_jbrowse_web\"] = self[\"webpackChunk_jbrowse_web\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = function() {\n\treturn Promise.all([917,4736,2947].map(__webpack_require__.e, __webpack_require__)).then(next);\n};","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["globalOmit","coreDetails","useStyles","makeStyles","theme","expansionPanelDetails","display","padding","spacing","expandIcon","color","field","flexWrap","fieldDescription","background","fieldName","wordBreak","minWidth","borderBottom","palette","grey","marginRight","fieldValue","maxHeight","overflow","fieldSubvalue","border","boxSizing","BaseCard","children","title","defaultExpanded","classes","useState","expanded","setExpanded","onChange","s","TransitionProps","unmountOnExit","className","variant","FieldName","description","name","prefix","width","val","join","placement","clsx","style","BasicValue","value","React","html","isObject","JSON","stringify","String","SimpleValue","undefined","ArrayValue","length","Attributes","attributes","every","map","i","CoreDetails","props","feature","refName","start","end","strand","strandMap","strandStr","displayStart","toLocaleString","displayEnd","displayRef","displayedDetails","position","key","toLowerCase","filter","BaseCoreDetails","DataGridDetails","keys","Object","sort","unionKeys","Set","forEach","k","add","size","colNames","rows","entries","id","rest","identifier","has","delete","columns","Math","max","row","result","min","measureText","height","DataGrid","disableSelectionOnClick","rowHeight","headerHeight","rowsPerPageOptions","hideFooterRowCount","hideFooterSelectedRowCount","hideFooter","omit","descriptions","formatter","omits","maxLabelWidth","array","arr","push","ceil","generateMaxWidth","includes","labelWidth","Array","isArray","obj","elt","Description","accessNested","BaseAttributes","FeatureDetails","model","depth","type","subfeatures","session","getSession","sequenceTypes","getConf","ellipses","f","ErrorBoundary","FallbackComponent","error","sub","BaseFeatureDetails","observer","featureData","parse","WeakMap","isRemoteAbortSignal","thing","abortSignalId","surrogateAbortControllers","Map","deserializeAbortSignal","surrogateAbortController","get","AbortController","set","signal","remoteAbort","signalId","abort","remoteAbortRpcHandler","signalAbort","importFormEntry","AssemblySelector","selected","InputProps","extra","assemblyNames","assemblyManager","config","URLSearchParams","window","location","search","initialValue","item","localStorage","getItem","console","storedValue","setStoredValue","valueToStore","Function","setItem","useLocalStorage","host","pathname","lastSelected","setLastSelected","selection","useEffect","select","label","helperText","inputProps","event","target","disabled","assembly","displayName","input","inputBase","typography","top","left","whiteSpace","visibility","inputRoot","inputFocused","borderStyle","borderRadius","shape","borderWidth","EditableTypography","ref","setValue","other","editedValue","setEditedValue","setWidth","sizerNode","setSizerNode","inputNode","setInputNode","blur","setBlur","useTheme","clientWidth","node","component","inputRef","root","focused","onKeyDown","onBlur","message","margin","errorBox","snapshotError","str","findStr","idx","indexOf","trim","slice","match","match2","onClose","open","onFactoryReset","handleDialogClose","action","onClick","ToggleButtonWithTooltip","Tooltip","ToggleButton","shorten","len","substring","rootModel","setLocation","fileOrUrl","isUriLocation","internetAccountId","toggleButtonValue","setToggleButtonValue","accts","isAppRootModel","internetAccounts","shownAccts","setShownAccts","hiddenAccts","setHiddenAccts","anchorEl","setAnchorEl","selectedAcct","find","ia","setLocationWithAccount","locationInput","UrlChooser","selectorLabel","LocalFileChooser","SelectorComponent","Box","InputLabel","shrink","flexDirection","ToggleButtonGroup","exclusive","_event","newState","toggleContents","ArrowDropDown","Menu","Boolean","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","acct","MenuItem","prev","FormHelperText","paper","overflowY","overflowX","minHeight","maxWidth","outline","menuItemEndDecoration","right","transform","MenuItemEndDecoration","checked","icon","MenuPage","subMenuAnchorEl","setSubMenuAnchorEl","openSubMenuIdx","setOpenSubMenuIdx","isSubMenuOpen","setIsSubMenuOpen","selectedMenuItemIdx","setSelectedMenuItemIdx","setPosition","paperRef","useRef","menuItems","onMenuItemClick","timer","shouldSubMenuBeOpen","setTimeout","clearTimeout","rect","getBoundingClientRect","hasEndDecoration","some","menuItem","hasIcon","menuItemStyle","paddingRight","ListContents","autoFocusItem","a","b","priority","endDecoration","Icon","callback","onMouseMove","e","currentTarget","document","activeElement","focus","currentIdx","findLastIndex","findPreviousValidIdx","findIndex","findNextValidIdx","primary","secondary","subLabel","inset","subMenu","in","elevation","transitionDuration","BackdropProps","invisible","horizontalHandle","cursor","verticalHandle","flexbox_verticalHandle","alignSelf","flexbox_horizontalHandle","onDrag","flexbox","originalClassName","mouseDragging","setMouseDragging","prevPos","mouseMove","preventDefault","pos","clientX","clientY","distance","current","mouseUp","addEventListener","removeEventListener","onMouseDown","role","full","RegExp","tag","SanitizedHTML","test","escapeHTML","dangerouslySetInnerHTML","__html","dompurify","refTheme","createTheme","jbrowseDefaultPalette","main","tertiary","augmentColor","quaternary","stopCodon","startCodon","bases","A","green","C","blue","G","amber","T","red","createJBrowseDefaultProps","MuiButton","MuiFilledInput","MuiFormControl","MuiFormHelperText","MuiIconButton","MuiInputBase","MuiList","dense","MuiListItem","MuiOutlinedInput","MuiFab","MuiTable","MuiTextField","MuiToolbar","MuiSvgIcon","fontSize","MuiToggleButtonGroup","MuiCheckbox","MuiLink","underline","createJBrowseDefaultOverrides","generatedPalette","deepmerge","colorSecondary","textSecondary","backgroundColor","MuiAccordion","MuiAccordionSummary","contrastText","content","MuiMenuItem","paddingTop","paddingBottom","MuiListItemIcon","MuiListItemText","paddingLeft","jbrowseBaseTheme","overrides","createJBrowseTheme","getColors","midnight","forrest","grape","mandarin","gray","Logomark","viewBox","LogoFull","Text","colors","fill","d","fabLeft","zIndex","bottom","fabRight","menuBarAndComponents","gridColumn","gridTemplateRows","menuBar","gridRow","components","appBar","flexGrow","grow","light","borderColor","selectPaper","Logo","configuration","logoPath","readConfObject","uri","src","alt","HeaderButtons","pluginManager","getEnv","viewTypes","getElementTypeRecord","all","visibleWidget","drawerWidth","minimized","activeWidgets","savedSessionNames","menus","views","drawerPosition","grid","drawerVisible","gridTemplateColumns","DrawerWidget","DialogComponent","Suspense","fallback","DialogProps","AppBar","Toolbar","menu","DropDownMenu","menuTitle","arrow","newName","notify","renameCurrentSession","view","viewType","getViewType","Error","ReactComponent","ViewContainer","removeView","getTrackType","Paper","Typography","Select","Button","addView","Fab","showWidgetDrawer","Launch","Snackbar","closeButton","handleClose","Dialog","DialogTitle","IconButton","Close","Divider","DialogContent","DialogActions","clearView","autoFocus","PrerenderedCanvas","highResolutionScaling","imageData","blockKey","showSoftClip","featureCanvas","canvas","context","getContext","drawImageOntoCanvasContext","blockKeyStr","testId","defaultProps","hoverLabel","pointerEvents","offsetX","offsetY","timeout","shown","setShown","handle","text","AbortError","code","checkAbortSignal","AbortSignal","TypeError","aborted","makeAbortError","ms","Promise","resolve","abortBreakPoint","DOMException","observeAbortSignal","fromEvent","Observable","isAbortException","exception","replayCommandsOntoContext","targetContext","encodedCommands","command","isMethodCall","apply","args","OffscreenCanvasRenderingContext2DShim","currentFont","currentStrokeStyle","currentFillStyle","recordedCommands","this","arg","getSerializedSvg","pushSetterCall","pushMethodCall","x","y","w","h","nx","nw","Number","OffscreenCanvasShim","createCanvas","createImageBitmap","ImageBitmapType","serializedCommands","drawImage","dataURL","weHave","OffscreenCanvas","isNode","self","ImageBitmap","require","nodeCreateCanvas","Image","dataUri","toDataURL","img","reject","onload","onerror","ctx","getSerializedCommands","containsNoTransferables","renderToAbstractCanvas","opts","cb","exportSVG","rasterizeLayers","fakeCanvas","fakeCtx","reactElement","scale","blobToDataURL","convertToBlob","xlinkHref","isViewContainer","isStateTreeNode","isSessionModel","isSessionModelWithConfigEditing","isSessionWithAddTracks","isSessionModelWithWidgets","isSessionWithSessionPlugins","isSelectionContainer","isViewModel","isTrackModel","trackId","isDisplayModel","displayId","isTrackViewModel","isAbstractMenuManager","AuthNeededError","url","setPrototypeOf","prototype","RetryError","isAuthNeededException","isRetryException","when","getter","timeoutId","finished","whenPromise","mobxWhen","finishTimeout","cancel","then","catch","err","whenPresent","PhasedScheduler","phaseCallbacks","phaseOrder","phase","phaseName","TypeRecord","typeName","baseClass","registeredTypes","t","values","PluginManager","initialPlugins","plugins","jexl","createJexlInstance","pluginMetadata","runtimePluginDefinitions","elementCreationSchedule","rendererTypes","RendererType","adapterTypes","AdapterType","textSearchAdapterTypes","TextSearchAdapterType","trackTypes","TrackType","displayTypes","DisplayType","connectionTypes","ConnectionType","ViewType","widgetTypes","WidgetType","rpcMethods","RpcMethodType","internetAccountTypes","InternetAccountType","configured","extensionPoints","jbrequireCache","lib","ReExports","load","jbrequire","pack","default","addPlugin","plugin","CorePlugin","metadata","isCore","configurationSchemas","configurationSchema","Plugin","definition","install","p","getPlugin","run","configure","groupName","creationCallback","typeRecord","newElement","evaluateExtensionPoint","typeGroup","types","pluggableTypes","isType","isModelType","warn","isBareConfigurationSchemaType","ConfigurationSchema","methodName","internetAccountName","addElementType","track","getElementTypesInGroup","trackType","addDisplayType","newView","extensionPointName","callbacks","extendee","accumulator","defaultValue","isUMDPluginDefinition","pluginDefinition","umdUrl","isCJSPluginDefinition","cjsUrl","getGlobalObject","global","jbPluginManager","PluginLoader","pluginDefinitions","definitions","fetchESM","fetchCJS","scriptUrl","globalObject","isInWebWorker","domLoadScript","importScripts","parsedUrl","URL","href","protocol","esmUrl","loadScript","moduleName","umdName","constructor","isElectron","loadCJSPlugin","loadESMPlugin","loadUMDPlugin","JBrowseExports","fromEntries","loadPlugin","SetDefaultSession","lazy","AssemblyManager","exports","addConnectionType","configSchema","ucscConfigSchema","stateModel","ucscModelFactory","addWidgetType","heading","HierarchicalTrackSelectorConfigSchema","HierarchicalTrackSelectorStateModelFactory","AddTrackConfigSchema","AddTrackStateModelFactory","AddConnectionConfigSchema","AddConnectionStateModel","PluginStoreConfigSchema","PluginStoreStateModelFactory","SVG","LinearGenomeView","Alignments","Authentication","Bed","CircularView","Config","DataManagement","DotplotView","GtfPlugin","Gff3","LegacyJBrowse","LinearComparativeView","Lollipop","Arc","Menus","RDF","Sequence","TrackHubRegistry","Variants","Wiggle","SpreadsheetViewPlugin","SvInspectorPlugin","BreakpointSplitView","HicPlugin","TrixPlugin","GridBookmarkPlugin","ComparativeAdapters","receiveConfiguration","configurationP","onmessage","data","postMessage","getPluginManager","pluginLoader","import","installGlobalReExports","runtimePlugins","corePlugins","P","createPluggableElements","useStaticRendering","rpcConfig","entry","func","execute","bind","channel","rpcDriverClassName","statusCallback","rpcServer","emit","RpcServer","ping","fetch","Date","requestIdleCallback","cancelIdleCallback","requestAnimationFrame","cancelAnimationFrame","navigator","createTextNode","querySelector","appendChild","documentElement","createElement","setAttribute","removeAttribute","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","loaded","__webpack_modules__","call","m","__webpack_exports__","O","deferred","chunkIds","fn","notFulfilled","Infinity","fulfilled","j","splice","r","n","__esModule","leafPrototypes","getProto","getPrototypeOf","__proto__","mode","ns","create","def","getOwnPropertyNames","o","defineProperty","enumerable","chunkId","reduce","promises","u","miniCssF","g","globalThis","hmd","prop","hasOwnProperty","Symbol","toStringTag","nmd","paths","currentScript","scripts","getElementsByTagName","replace","installedChunks","chunkLoadingGlobal","parentChunkLoadingFunction","moreModules","runtime","pop","next"],"sourceRoot":""}